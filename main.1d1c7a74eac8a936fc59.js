var Fne=Object.defineProperty,hR=Object.getOwnPropertySymbols,Pne=Object.prototype.hasOwnProperty,One=Object.prototype.propertyIsEnumerable,fR=(we,se,T)=>se in we?Fne(we,se,{enumerable:!0,configurable:!0,writable:!0,value:T}):we[se]=T,O1=(we,se)=>{for(var T in se||(se={}))Pne.call(se,T)&&fR(we,T,se[T]);if(hR)for(var T of hR(se))One.call(se,T)&&fR(we,T,se[T]);return we};(self.webpackChunkecgdigi=self.webpackChunkecgdigi||[]).push([[179],{8255:we=>{function se(T){return Promise.resolve().then(()=>{var R=new Error("Cannot find module '"+T+"'");throw R.code="MODULE_NOT_FOUND",R})}se.keys=()=>[],se.resolve=se,se.id=8255,we.exports=se},2549:we=>{"use strict";we.exports={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}},7993:(we,se,T)=>{"use strict";const R=T(7676),V=T(2549),x=[];for(var C=0;C<=8;C++)x.push(255<<C);we.exports=function(v){if(1!==v.bitDepth)throw new Error("Only bitDepth of 1 is supported");if(!v.height||!v.width)throw new Error("ImageData width and height are required");if(1!==v.components)throw new Error("Only 1 component is supported");if(1!==v.channels)throw new Error("Only 1 channel is supported");var M=new R;M.skip(14),function(v,M){v.writeUint32(124).writeInt32(M.width).writeInt32(M.height).writeUint16(1).writeUint16(M.bitDepth).writeUint32(V.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(M.width*M.height*M.bitDepth).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,M.bitDepth)).writeUint32(Math.pow(2,M.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(V.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(V.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}(M,v),function(v,M){M.bitDepth>8||v.writeUint32(0).writeUint32(16777215)}(M,v);const O=M.offset;return function(v,M){const O=4*Math.floor((M.bitDepth*M.width+31)/32),U=Math.ceil(M.bitDepth*M.width/8),P=O-U,F=M.bitDepth*M.width%8,j=0===F?0:8-F,Q=O*M.height;var oe,ue;const L=new R(M.data);let B=0,K=0,J=8;v.mark(),ue=L.readUint8();for(var ye=M.height-1;ye>=0;ye--){const le=0===ye;v.reset(),v.skip(ye*O);for(var re=0;re<U;re++){const te=re===U-1;K<=j&&te?(v.writeByte(ue<<K),(0===j||j===K)&&!le&&(oe=ue,ue=L.readByte())):0===K?(oe=ue,ue=L.readUint8(),v.writeByte(oe)):(oe=ue,ue=L.readUint8(),v.writeByte(oe<<K&x[K]|ue>>J)),te?(B+=F||8,v.skip(P),K=B%8,J=8-K):B+=8}}O>U&&(v.reset(),v.skip(Q-1),v.writeUint8(0))}(M,v),M.rewind(),function(v,M){v.writeChars("BM"),v.writeInt32(v._lastWrittenByte),v.writeUint16(0),v.writeUint16(0),v.writeUint32(M)}(M,O),M.getBuffer()}},4635:(we,se,T)=>{"use strict";se.encode=T(7993)},6165:we=>{"use strict";const T=[];we.exports=class{constructor(x,C){C=C||{},void 0===x&&(x=8192),"number"==typeof x&&(x=new ArrayBuffer(x));let E=x.byteLength;const w=C.offset?C.offset>>>0:0;x.buffer&&(E=x.byteLength-w,x=x.byteLength!==x.buffer.byteLength?x.buffer.slice(x.byteOffset+w,x.byteOffset+x.byteLength):w?x.buffer.slice(w):x.buffer),this.buffer=x,this.length=E,this.byteLength=E,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=E||8192,this._mark=0}available(x){return void 0===x&&(x=1),this.offset+x<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(x){void 0===x&&(x=1),this.offset+=x}seek(x){this.offset=x}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(x){if(void 0===x&&(x=1),!this.available(x)){const C=this._increment+this._increment;this._increment=C;const E=this.length+C,w=new Uint8Array(E);w.set(new Uint8Array(this.buffer)),this.buffer=w.buffer,this.length=E,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(x){void 0===x&&(x=1);for(var C=new Uint8Array(x),E=0;E<x;E++)C[E]=this.readByte();return C}readInt16(){var x=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,x}readUint16(){var x=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,x}readInt32(){var x=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,x}readUint32(){var x=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,x}readFloat32(){var x=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,x}readFloat64(){var x=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,x}readChar(){return String.fromCharCode(this.readInt8())}readChars(x){void 0===x&&(x=1),T.length=x;for(var C=0;C<x;C++)T[C]=this.readChar();return T.join("")}writeBoolean(x){this.writeUint8(x?255:0)}writeInt8(x){this.ensureAvailable(1),this._data.setInt8(this.offset++,x)}writeUint8(x){this.ensureAvailable(1),this._data.setUint8(this.offset++,x)}writeByte(x){this.writeUint8(x)}writeBytes(x){this.ensureAvailable(x.length);for(var C=0;C<x.length;C++)this._data.setUint8(this.offset++,x[C])}writeInt16(x){this.ensureAvailable(2),this._data.setInt16(this.offset,x,this.littleEndian),this.offset+=2}writeUint16(x){this.ensureAvailable(2),this._data.setUint16(this.offset,x,this.littleEndian),this.offset+=2}writeInt32(x){this.ensureAvailable(4),this._data.setInt32(this.offset,x,this.littleEndian),this.offset+=4}writeUint32(x){this.ensureAvailable(4),this._data.setUint32(this.offset,x,this.littleEndian),this.offset+=4}writeFloat32(x){this.ensureAvailable(4),this._data.setFloat32(this.offset,x,this.littleEndian),this.offset+=4}writeFloat64(x){this.ensureAvailable(8),this._data.setFloat64(this.offset,x,this.littleEndian),this.offset+=8}writeChar(x){this.writeUint8(x.charCodeAt(0))}writeChars(x){for(var C=0;C<x.length;C++)this.writeUint8(x.charCodeAt(C))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},6646:(we,se,T)=>{"use strict";const R=T(2461);we.exports=function(x,C){return new R(x,C).decode(C)}},2558:(we,se,T)=>{"use strict";const R={standard:T(8130),exif:T(3258),gps:T(8310)};we.exports=class{constructor(C){if(!C)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=C,this._map=null}get(C){if("number"==typeof C)return this.fields.get(C);if("string"==typeof C)return this.fields.get(R[this.kind].tagsByName[C]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const E=R[this.kind].tagsById;for(var C of this.fields.keys())E[C]&&(this._map[E[C]]=this.fields.get(C))}return this._map}}},9215:(we,se)=>{"use strict";var T=new Map([[1,[1,R]],[2,[1,function(U,P){for(var F=[],j="",Q=0;Q<P;Q++){var oe=String.fromCharCode(U.readUint8());"\0"===oe?(F.push(j),j=""):j+=oe}return 1===F.length?F[0]:F}]],[3,[2,function(U,P){if(1===P)return U.readUint16();for(var F=new Uint16Array(P),j=0;j<P;j++)F[j]=U.readUint16();return F}]],[4,[4,function(U,P){if(1===P)return U.readUint32();for(var F=new Uint32Array(P),j=0;j<P;j++)F[j]=U.readUint32();return F}]],[5,[8,function(U,P){if(1===P)return U.readUint32()/U.readUint32();for(var F=new Array(P),j=0;j<P;j++)F[j]=U.readUint32()/U.readUint32();return F}]],[6,[1,function(U,P){if(1===P)return U.readInt8();for(var F=new Int8Array(P),j=0;j<P;j++)F[j]=U.readInt8();return F}]],[7,[1,R]],[8,[2,function(U,P){if(1===P)return U.readInt16();for(var F=new Int16Array(P),j=0;j<P;j++)F[j]=U.readInt16();return F}]],[9,[4,function(U,P){if(1===P)return U.readInt32();for(var F=new Int32Array(P),j=0;j<P;j++)F[j]=U.readInt32();return F}]],[10,[8,function(U,P){if(1===P)return U.readInt32()/U.readInt32();for(var F=new Array(P),j=0;j<P;j++)F[j]=U.readInt32()/U.readInt32();return F}]],[11,[4,function(U,P){if(1===P)return U.readFloat32();for(var F=new Float32Array(P),j=0;j<P;j++)F[j]=U.readFloat32();return F}]],[12,[8,function(U,P){if(1===P)return U.readFloat64();for(var F=new Float64Array(P),j=0;j<P;j++)F[j]=U.readFloat64();return F}]]]);function R(U,P){if(1===P)return U.readUint8();for(var F=new Uint8Array(P),j=0;j<P;j++)F[j]=U.readUint8();return F}se.getByteLength=function(U,P){return T.get(U)[0]*P},se.readData=function(U,P,F){return T.get(P)[1](U,F)}},920:(we,se,T)=>{"use strict";se.decode=T(6646)},3258:we=>{"use strict";const se={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},T={};for(var R in se)T[se[R]]=R;we.exports={tagsById:se,tagsByName:T}},8310:we=>{"use strict";const se={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},T={};for(var R in se)T[se[R]]=R;we.exports={tagsById:se,tagsByName:T}},8130:we=>{"use strict";const se={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},T={};for(var R in se)T[se[R]]=R;we.exports={tagsById:se,tagsByName:T}},2461:(we,se,T)=>{"use strict";const R=T(6165),V=T(2558),x=T(8802),C=T(9215),E={ignoreImageData:!1,onlyFirst:!1};function k(P,F,j,Q){for(var oe=0;oe<Q;oe++)P[j++]=F.getUint8(oe);return j}function v(P,F,j,Q,oe){for(var ue=0;ue<2*Q;ue+=2)P[j++]=F.getUint16(ue,oe);return j}function M(P,F,j,Q,oe){for(var ue=0;ue<4*Q;ue+=4)P[j++]=F.getFloat32(ue,oe);return j}function O(P,F){throw new Error("Unsupported "+P+": "+F)}we.exports=class extends R{constructor(F,j){super(F,j),this._nextIFD=0}decode(F){F=Object.assign({},E,F);const j=[];for(this.decodeHeader();this._nextIFD;)if(j.push(this.decodeIFD(F)),F.onlyFirst)return j[0];return j}decodeHeader(){let F=this.readUint16();if(18761===F)this.setLittleEndian();else{if(19789!==F)throw new Error("invalid byte order: 0x"+F.toString(16));this.setBigEndian()}if(F=this.readUint16(),42!==F)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(F){var j;this.seek(this._nextIFD),j=F.kind?new V(F.kind):new x;const Q=this.readUint16();for(var oe=0;oe<Q;oe++)this.decodeIFDEntry(j);return F.ignoreImageData||this.decodeImageData(j),this._nextIFD=this.readUint32(),j}decodeIFDEntry(F){const j=this.offset,Q=this.readUint16(),oe=this.readUint16(),ue=this.readUint32();if(oe<1||oe>12)return void this.skip(4);C.getByteLength(oe,ue)>4&&this.seek(this.readUint32());const B=C.readData(this,oe,ue);if(F.fields.set(Q,B),34665===Q||34853===Q){let J,K=this.offset;34665===Q?J="exif":34853===Q&&(J="gps"),this._nextIFD=B,F[J]=this.decodeIFD({kind:J,ignoreImageData:!0}),this.offset=K}this.seek(j),this.skip(12)}decodeImageData(F){const j=F.orientation;switch(j&&1!==j&&O("orientation",j),F.type){case 1:case 2:this.readStripData(F);break;default:O("image type",F.type)}}readStripData(F){const j=F.width,Q=F.height,oe=function(P){if(P.length){const j=P;P=j[0];for(var F=0;F<j.length;F++)j[F]!==P&&O("bit depth",j)}return P}(F.bitsPerSample),ue=F.sampleFormat;let L=j*Q;const B=function(P,F,j,Q){return 8===j?new Uint8Array(1*P):16===j?new Uint16Array(1*P):32===j&&3===Q?new Float32Array(1*P):O("bit depth / sample format",j+" / "+Q)}(L,0,oe,ue),K=F.compression,ye=F.rowsPerStrip*j,re=F.stripOffsets,le=F.stripByteCounts;for(var te=0,me=0;me<re.length;me++){var xe=this.getStripData(K,re[me],le[me]),tt=L>ye?ye:L;L-=tt,8===oe?te=k(B,xe,te,tt):16===oe?te=v(B,xe,te,tt,this.isLittleEndian()):32===oe&&3===ue?te=M(B,xe,te,tt,this.isLittleEndian()):O("bitDepth",oe)}F.data=B}getStripData(F,j,Q){switch(F){case 1:return new DataView(this.buffer,j,Q);case 2:case 32773:return O("Compression",F);default:throw new Error("invalid compression: "+F)}}}},8802:(we,se,T)=>{"use strict";const R=T(2558),V=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;function C(E){return"number"==typeof E?[E]:E}we.exports=class extends R{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var w=new Date,D=V.exec(this.dateTime);return w.setFullYear(D[1],D[2]-1,D[3]),w.setHours(D[4],D[5],D[6]),w}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return C(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return C(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}},7981:(we,se,T)=>{"use strict";const R=T(6165),V=T(920);we.exports=function(C){const E=new R(C),w={};if(E.setBigEndian(),65496!==E.readUint16())throw new Error("SOI marker not found. Not a valid JPEG file");if(65505===E.readUint16()){E.readUint16();const M=E.readBytes(6);if(69===M[0]&&120===M[1]&&105===M[2]&&102===M[3]&&0===M[4]&&0===M[5]){const O=V.decode(E,{onlyFirst:!0,ignoreImageData:!0,offset:E.offset});w.exif=O}}return w}},9649:(we,se,T)=>{"use strict";se.decode=T(7981)},1717:we=>{!function(){function se(R,V,x){this.next=x,x&&(x.prev=this),this.prev=V,V&&(V.next=this),this.data=R}function T(){if(!(this instanceof T))return new T;this._head=null,this._tail=null,this.length=0}T.prototype={push:function(R){this._tail=new se(R,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(0!==this.length){var R=this._tail;return this._tail=R.prev,R.prev&&(R.prev=this._tail.next=null),this.length--,1===this.length?this._head=this._tail:0===this.length&&(this._head=this._tail=null),R.data}},unshift:function(R){this._head=new se(R,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(0!==this.length){var R=this._head;return this._head=R.next,R.next&&(R.next=this._head.prev=null),this.length--,1===this.length?this._tail=this._head:0===this.length&&(this._head=this._tail=null),R.data}},item:function(R){R<0&&(R=this.length+R);for(var V=this._head;R-- >0&&V;)V=V.next;return V?V.data:void 0},slice:function(R,V){if(R||(R=0),V||(V=this.length),V<0&&(V=this.length+V),R<0&&(R=this.length+R),V===R)return[];if(V<R)throw new Error("invalid offset: "+R+","+V+" (length="+this.length+")");for(var x=V-R,C=new Array(x),E=0,w=this._head;R-- >0&&w;)w=w.next;for(;E<x&&w;)C[E++]=w.data,w=w.next;return C},drop:function(){T.call(this)},forEach:function(R,V){for(var x=this._head,C=0,E=this.length;C<E&&x;)R.call(V||this,x.data,C,this),x=x.next,C++},map:function(R,V){var x=new T;return this.forEach(function(C,E,w){x.push(R.call(V||w,C,E,w))}),x},filter:function(R,V){var x=new T;return this.forEach(function(C,E,w){R.call(V||w,C,E,w)&&x.push(C)}),x},reduce:function(R,V,x){var C=0,E=this._head,w=this.length;for(V||(C=1,V=E&&E.data,E=E&&E.next);C<w&&E;)V=R.call(x||this,V,E.data,this),C++,E=E.next;return V}},we.exports=T}()},4077:function(){"use strict";!function(we){if(we.TextEncoder&&we.TextDecoder)return!1;function se(R="utf-8"){if("utf-8"!==R)throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${R}') is invalid.`)}function T(R="utf-8",V={fatal:!1}){if("utf-8"!==R)throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${R}') is invalid.`);if(V.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(se.prototype,"encoding",{value:"utf-8"}),se.prototype.encode=function(R,V={stream:!1}){if(V.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let x=0;const C=R.length;let w=0,D=Math.max(32,C+(C>>1)+7),k=new Uint8Array(D>>3<<3);for(;x<C;){let v=R.charCodeAt(x++);if(v>=55296&&v<=56319){if(x<C){const M=R.charCodeAt(x);56320==(64512&M)&&(++x,v=((1023&v)<<10)+(1023&M)+65536)}if(v>=55296&&v<=56319)continue}if(w+4>k.length){D+=8,D*=1+x/R.length*2,D=D>>3<<3;const M=new Uint8Array(D);M.set(k),k=M}if(0!=(4294967168&v)){if(0==(4294965248&v))k[w++]=v>>6&31|192;else if(0==(4294901760&v))k[w++]=v>>12&15|224,k[w++]=v>>6&63|128;else{if(0!=(4292870144&v))continue;k[w++]=v>>18&7|240,k[w++]=v>>12&63|128,k[w++]=v>>6&63|128}k[w++]=63&v|128}else k[w++]=v}return k.slice(0,w)},Object.defineProperty(T.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(T.prototype,"fatal",{value:!1}),Object.defineProperty(T.prototype,"ignoreBOM",{value:!1}),T.prototype.decode=function(R,V={stream:!1}){if(V.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const x=new Uint8Array(R);let C=0;const E=x.length,w=[];for(;C<E;){const D=x[C++];if(0===D)break;if(0==(128&D))w.push(D);else if(192==(224&D)){const k=63&x[C++];w.push((31&D)<<6|k)}else if(224==(240&D)){const k=63&x[C++],v=63&x[C++];w.push((31&D)<<12|k<<6|v)}else if(240==(248&D)){let O=(7&D)<<18|(63&x[C++])<<12|(63&x[C++])<<6|63&x[C++];O>65535&&(O-=65536,w.push(O>>>10&1023|55296),O=56320|1023&O),w.push(O)}}return String.fromCharCode.apply(null,w)},we.TextEncoder=se,we.TextDecoder=T}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this)},5638:we=>{"use strict";function se(T){if(this.size=0|T,this.size<=1||0!=(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=T<<1;for(var R=new Array(2*this.size),V=0;V<R.length;V+=2){const k=Math.PI*V/this.size;R[V]=Math.cos(k),R[V+1]=-Math.sin(k)}this.table=R;for(var x=0,C=1;this.size>C;C<<=1)x++;this._width=x%2==0?x-1:x,this._bitrev=new Array(1<<this._width);for(var E=0;E<this._bitrev.length;E++){this._bitrev[E]=0;for(var w=0;w<this._width;w+=2)this._bitrev[E]|=(E>>>w&3)<<this._width-w-2}this._out=null,this._data=null,this._inv=0}we.exports=se,se.prototype.fromComplexArray=function(R,V){for(var x=V||new Array(R.length>>>1),C=0;C<R.length;C+=2)x[C>>>1]=R[C];return x},se.prototype.createComplexArray=function(){const R=new Array(this._csize);for(var V=0;V<R.length;V++)R[V]=0;return R},se.prototype.toComplexArray=function(R,V){for(var x=V||this.createComplexArray(),C=0;C<x.length;C+=2)x[C]=R[C>>>1],x[C+1]=0;return x},se.prototype.completeSpectrum=function(R){for(var V=this._csize,x=V>>>1,C=2;C<x;C+=2)R[V-C]=R[C],R[V-C+1]=-R[C+1]},se.prototype.transform=function(R,V){if(R===V)throw new Error("Input and output buffers must be different");this._out=R,this._data=V,this._inv=0,this._transform4(),this._out=null,this._data=null},se.prototype.realTransform=function(R,V){if(R===V)throw new Error("Input and output buffers must be different");this._out=R,this._data=V,this._inv=0,this._realTransform4(),this._out=null,this._data=null},se.prototype.inverseTransform=function(R,V){if(R===V)throw new Error("Input and output buffers must be different");this._out=R,this._data=V,this._inv=1,this._transform4();for(var x=0;x<R.length;x++)R[x]/=this.size;this._out=null,this._data=null},se.prototype._transform4=function(){var w,D,R=this._out,V=this._csize,C=1<<this._width,E=V/C<<1,k=this._bitrev;if(4===E)for(w=0,D=0;w<V;w+=E,D++)this._singleTransform2(w,k[D],C);else for(w=0,D=0;w<V;w+=E,D++)this._singleTransform4(w,k[D],C);var v=this._inv?-1:1,M=this.table;for(C>>=2;C>=2;C>>=2){var O=(E=V/C<<1)>>>2;for(w=0;w<V;w+=E)for(var U=w+O,P=w,F=0;P<U;P+=2,F+=C){const j=P,Q=j+O,oe=Q+O,ue=oe+O,L=R[j],B=R[j+1],K=R[Q],J=R[Q+1],ye=R[oe],re=R[oe+1],le=R[ue],te=R[ue+1],tt=M[F],qe=v*M[F+1],pt=K*tt-J*qe,ee=K*qe+J*tt,_e=M[2*F],ke=v*M[2*F+1],fe=ye*_e-re*ke,I=ye*ke+re*_e,_=M[3*F],g=v*M[3*F+1],h=le*_-te*g,m=le*g+te*_,y=L+fe,Y=B+I,$=L-fe,X=B-I,W=pt+h,ce=ee+m,ne=v*(pt-h),de=v*(ee-m),Se=Y+ce,Me=y-W,Ve=Y-ce,be=$+de,Pe=X-ne,Oe=$-de,ae=X+ne;R[j]=y+W,R[j+1]=Se,R[Q]=be,R[Q+1]=Pe,R[oe]=Me,R[oe+1]=Ve,R[ue]=Oe,R[ue+1]=ae}}},se.prototype._singleTransform2=function(R,V,x){const C=this._out,E=this._data,w=E[V],D=E[V+1],k=E[V+x],v=E[V+x+1],O=D+v,U=w-k,P=D-v;C[R]=w+k,C[R+1]=O,C[R+2]=U,C[R+3]=P},se.prototype._singleTransform4=function(R,V,x){const C=this._out,E=this._data,w=this._inv?-1:1,D=2*x,k=3*x,v=E[V],M=E[V+1],O=E[V+x],U=E[V+x+1],P=E[V+D],F=E[V+D+1],j=E[V+k],Q=E[V+k+1],oe=v+P,ue=M+F,L=v-P,B=M-F,K=O+j,J=U+Q,ye=w*(O-j),re=w*(U-Q),te=ue+J,me=L+re,xe=B-ye,tt=oe-K,qe=ue-J,pt=L-re,ee=B+ye;C[R]=oe+K,C[R+1]=te,C[R+2]=me,C[R+3]=xe,C[R+4]=tt,C[R+5]=qe,C[R+6]=pt,C[R+7]=ee},se.prototype._realTransform4=function(){var w,D,R=this._out,V=this._csize,C=1<<this._width,E=V/C<<1,k=this._bitrev;if(4===E)for(w=0,D=0;w<V;w+=E,D++)this._singleRealTransform2(w,k[D]>>>1,C>>>1);else for(w=0,D=0;w<V;w+=E,D++)this._singleRealTransform4(w,k[D]>>>1,C>>>1);var v=this._inv?-1:1,M=this.table;for(C>>=2;C>=2;C>>=2){var O=(E=V/C<<1)>>>1,U=O>>>1,P=U>>>1;for(w=0;w<V;w+=E)for(var F=0,j=0;F<=P;F+=2,j+=C){var Q=w+F,oe=Q+U,ue=oe+U,L=ue+U,B=R[Q],K=R[Q+1],J=R[oe],ye=R[oe+1],re=R[ue],le=R[ue+1],te=R[L],me=R[L+1],qe=M[j],pt=v*M[j+1],ee=J*qe-ye*pt,_e=J*pt+ye*qe,ke=M[2*j],fe=v*M[2*j+1],I=re*ke-le*fe,_=re*fe+le*ke,g=M[3*j],h=v*M[3*j+1],m=te*g-me*h,y=te*h+me*g,Y=B+I,$=K+_,X=B-I,W=K-_,ce=ee+m,ne=_e+y,de=v*(ee-m),ve=v*(_e-y),Me=$+ne,Ve=X+ve,be=W-de;if(R[Q]=Y+ce,R[Q+1]=Me,R[oe]=Ve,R[oe+1]=be,0!==F){if(F!==P){var je=-v*de-W,Be=Y+-v*ce,Qe=-$- -v*ne,ft=w+U-F,yt=w+O-F;R[ft]=X+-v*ve,R[ft+1]=je,R[yt]=Be,R[yt+1]=Qe}}else{var Oe=$-ne;R[ue]=Y-ce,R[ue+1]=Oe}}}},se.prototype._singleRealTransform2=function(R,V,x){const C=this._out,E=this._data,w=E[V],D=E[V+x],v=w-D;C[R]=w+D,C[R+1]=0,C[R+2]=v,C[R+3]=0},se.prototype._singleRealTransform4=function(R,V,x){const C=this._out,E=this._data,v=E[V],M=E[V+x],O=E[V+2*x],U=E[V+3*x],P=v+O,F=v-O,j=M+U,Q=(this._inv?-1:1)*(M-U),ue=F,L=-Q,B=P-j,K=F,J=Q;C[R]=P+j,C[R+1]=0,C[R+2]=ue,C[R+3]=L,C[R+4]=B,C[R+5]=0,C[R+6]=K,C[R+7]=J}},6238:(we,se,T)=>{var R=Object.prototype.hasOwnProperty;we.exports=se=function(x,C){return R.call(C,x)},se.version=T(2898).version},7757:(we,se,T)=>{var R=T(2924),V=T(8694);we.exports={encode:R,decode:V}},8694:we=>{var se=function(){"use strict";var V=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),x=4017,C=799,E=3406,w=2276,D=1567,k=3784,v=5793,M=2896;function O(){}function U(L,B){for(var ye,re,K=0,J=[],le=16;le>0&&!L[le-1];)le--;J.push({children:[],index:0});var me,te=J[0];for(ye=0;ye<le;ye++){for(re=0;re<L[ye];re++){for((te=J.pop()).children[te.index]=B[K];te.index>0;){if(0===J.length)throw new Error("Could not recreate Huffman Table");te=J.pop()}for(te.index++,J.push(te);J.length<=ye;)J.push(me={children:[],index:0}),te.children[te.index]=me.children,te=me;K++}ye+1<le&&(J.push(me={children:[],index:0}),te.children[te.index]=me.children,te=me)}return J[0].children}function P(L,B,K,J,ye,re,le,te,me,xe){var ee=K.mcusPerLine,I=B,_=0,g=0;function h(){if(g>0)return g--,_>>g&1;if(255==(_=L[B++])){var je=L[B++];if(je)throw new Error("unexpected marker: "+(_<<8|je).toString(16))}return g=7,_>>>7}function m(je){for(var Qe,Be=je;null!==(Qe=h());){if("number"==typeof(Be=Be[Qe]))return Be;if("object"!=typeof Be)throw new Error("invalid huffman sequence")}return null}function y(je){for(var Be=0;je>0;){var Qe=h();if(null===Qe)return;Be=Be<<1|Qe,je--}return Be}function Y(je){var Be=y(je);return Be>=1<<je-1?Be:Be+(-1<<je)+1}var ve,ce=0,de=0;function Me(je,Be,Qe,ft,yt){var rt=(Qe/ee|0)*je.v+ft;void 0===je.blocks[rt]&&xe.tolerantDecoding||Be(je,je.blocks[rt][Qe%ee*je.h+yt])}var Pe,Oe,ae,Ue,He,Ye,be=J.length;Ye=K.progressive?0===re?0===te?function(je,Be){var Qe=m(je.huffmanTableDC),ft=0===Qe?0:Y(Qe)<<me;Be[0]=je.pred+=ft}:function(je,Be){Be[0]|=h()<<me}:0===te?function(je,Be){if(ce>0)ce--;else for(var Qe=re,ft=le;Qe<=ft;){var yt=m(je.huffmanTableAC),ct=15&yt,gt=yt>>4;if(0!==ct)Be[V[Qe+=gt]]=Y(ct)*(1<<me),Qe++;else{if(gt<15){ce=y(gt)+(1<<gt)-1;break}Qe+=16}}}:function(je,Be){for(var Qe=re,ft=le,yt=0;Qe<=ft;){var ct=V[Qe],gt=Be[ct]<0?-1:1;switch(de){case 0:var rt=m(je.huffmanTableAC),It=15&rt;if(yt=rt>>4,0===It)yt<15?(ce=y(yt)+(1<<yt),de=4):(yt=16,de=1);else{if(1!==It)throw new Error("invalid ACn encoding");ve=Y(It),de=yt?2:3}continue;case 1:case 2:Be[ct]?Be[ct]+=(h()<<me)*gt:0==--yt&&(de=2==de?3:0);break;case 3:Be[ct]?Be[ct]+=(h()<<me)*gt:(Be[ct]=ve<<me,de=0);break;case 4:Be[ct]&&(Be[ct]+=(h()<<me)*gt)}Qe++}4===de&&0==--ce&&(de=0)}:function(je,Be){var Qe=m(je.huffmanTableDC),ft=0===Qe?0:Y(Qe);Be[0]=je.pred+=ft;for(var yt=1;yt<64;){var ct=m(je.huffmanTableAC),gt=15&ct,rt=ct>>4;if(0!==gt)Be[V[yt+=rt]]=Y(gt),yt++;else{if(rt<15)break;yt+=16}}};var Ge,it,lt,Mt,je,Qe,ft,Fe=0;for(it=1==be?J[0].blocksPerLine*J[0].blocksPerColumn:ee*K.mcusPerColumn,ye||(ye=it);Fe<it;){for(Oe=0;Oe<be;Oe++)J[Oe].pred=0;if(ce=0,1==be)for(Pe=J[0],He=0;He<ye;He++)void 0,void 0===(je=Pe).blocks[ft=(Qe=Fe)/je.blocksPerLine|0]&&xe.tolerantDecoding||Ye(je,je.blocks[ft][Qe%je.blocksPerLine]),Fe++;else for(He=0;He<ye;He++){for(Oe=0;Oe<be;Oe++)for(lt=(Pe=J[Oe]).h,Mt=Pe.v,ae=0;ae<Mt;ae++)for(Ue=0;Ue<lt;Ue++)Me(Pe,Ye,Fe,ae,Ue);if(++Fe===it)break}if(Fe===it)do{if(255===L[B]&&0!==L[B+1])break;B+=1}while(B<L.length-2);if(g=0,(Ge=L[B]<<8|L[B+1])<65280)throw new Error("marker was not found");if(!(Ge>=65488&&Ge<=65495))break;B+=2}return B-I}function F(L,B){var K=[],J=B.blocksPerLine,ye=B.blocksPerColumn,re=J<<3,le=new Int32Array(64),te=new Uint8Array(64);function me(I,_,g){var m,y,Y,$,X,W,ce,ne,de,Se,h=B.quantizationTable,ve=g;for(Se=0;Se<64;Se++)ve[Se]=I[Se]*h[Se];for(Se=0;Se<8;++Se){var Me=8*Se;0!=ve[1+Me]||0!=ve[2+Me]||0!=ve[3+Me]||0!=ve[4+Me]||0!=ve[5+Me]||0!=ve[6+Me]||0!=ve[7+Me]?(de=(m=v*ve[0+Me]+128>>8)-(y=v*ve[4+Me]+128>>8)+1>>1,m=m+y+1>>1,y=de,de=(Y=ve[2+Me])*k+($=ve[6+Me])*D+128>>8,Y=Y*D-$*k+128>>8,$=de,de=(X=M*(ve[1+Me]-ve[7+Me])+128>>8)-(ce=ve[5+Me]<<4)+1>>1,X=X+ce+1>>1,ce=de,de=(ne=M*(ve[1+Me]+ve[7+Me])+128>>8)+(W=ve[3+Me]<<4)+1>>1,W=ne-W+1>>1,ne=de,de=m-$+1>>1,m=m+$+1>>1,$=de,de=y-Y+1>>1,y=y+Y+1>>1,Y=de,de=X*w+ne*E+2048>>12,X=X*E-ne*w+2048>>12,ne=de,de=W*C+ce*x+2048>>12,W=W*x-ce*C+2048>>12,ce=de,ve[0+Me]=m+ne,ve[7+Me]=m-ne,ve[1+Me]=y+ce,ve[6+Me]=y-ce,ve[2+Me]=Y+W,ve[5+Me]=Y-W,ve[3+Me]=$+X,ve[4+Me]=$-X):(ve[0+Me]=de=v*ve[0+Me]+512>>10,ve[1+Me]=de,ve[2+Me]=de,ve[3+Me]=de,ve[4+Me]=de,ve[5+Me]=de,ve[6+Me]=de,ve[7+Me]=de)}for(Se=0;Se<8;++Se){var Ve=Se;0!=ve[8+Ve]||0!=ve[16+Ve]||0!=ve[24+Ve]||0!=ve[32+Ve]||0!=ve[40+Ve]||0!=ve[48+Ve]||0!=ve[56+Ve]?(de=(m=v*ve[0+Ve]+2048>>12)-(y=v*ve[32+Ve]+2048>>12)+1>>1,m=m+y+1>>1,y=de,de=(Y=ve[16+Ve])*k+($=ve[48+Ve])*D+2048>>12,Y=Y*D-$*k+2048>>12,$=de,de=(X=M*(ve[8+Ve]-ve[56+Ve])+2048>>12)-(ce=ve[40+Ve])+1>>1,X=X+ce+1>>1,ce=de,de=(ne=M*(ve[8+Ve]+ve[56+Ve])+2048>>12)+(W=ve[24+Ve])+1>>1,W=ne-W+1>>1,ne=de,de=m-$+1>>1,m=m+$+1>>1,$=de,de=y-Y+1>>1,y=y+Y+1>>1,Y=de,de=X*w+ne*E+2048>>12,X=X*E-ne*w+2048>>12,ne=de,de=W*C+ce*x+2048>>12,W=W*x-ce*C+2048>>12,ce=de,ve[0+Ve]=m+ne,ve[56+Ve]=m-ne,ve[8+Ve]=y+ce,ve[48+Ve]=y-ce,ve[16+Ve]=Y+W,ve[40+Ve]=Y-W,ve[24+Ve]=$+X,ve[32+Ve]=$-X):(ve[0+Ve]=de=v*g[Se+0]+8192>>14,ve[8+Ve]=de,ve[16+Ve]=de,ve[24+Ve]=de,ve[32+Ve]=de,ve[40+Ve]=de,ve[48+Ve]=de,ve[56+Ve]=de)}for(Se=0;Se<64;++Se){var be=128+(ve[Se]+8>>4);_[Se]=be<0?0:be>255?255:be}}ue(re*ye*8);for(var xe,tt,qe=0;qe<ye;qe++){var pt=qe<<3;for(xe=0;xe<8;xe++)K.push(new Uint8Array(re));for(var ee=0;ee<J;ee++){me(B.blocks[qe][ee],te,le);var _e=0,ke=ee<<3;for(tt=0;tt<8;tt++){var fe=K[pt+tt];for(xe=0;xe<8;xe++)fe[ke+xe]=te[_e++]}}}return K}function j(L){return L<0?0:L>255?255:L}O.prototype={load:function(B){var K=new XMLHttpRequest;K.open("GET",B,!0),K.responseType="arraybuffer",K.onload=function(){var J=new Uint8Array(K.response||K.mozResponseArrayBuffer);this.parse(J),this.onload&&this.onload()}.bind(this),K.send(null)},parse:function(B){var K=1e3*this.opts.maxResolutionInMP*1e3,J=0;function re(){var rt=B[J]<<8|B[J+1];return J+=2,rt}function te(rt){var zt,nn,It=0,Zt=0;for(nn in rt.components)rt.components.hasOwnProperty(nn)&&(It<(zt=rt.components[nn]).h&&(It=zt.h),Zt<zt.v&&(Zt=zt.v));var er=Math.ceil(rt.samplesPerLine/8/It),Zn=Math.ceil(rt.scanLines/8/Zt);for(nn in rt.components)if(rt.components.hasOwnProperty(nn)){zt=rt.components[nn];var Fr=Math.ceil(Math.ceil(rt.samplesPerLine/8)*zt.h/It),z=Math.ceil(Math.ceil(rt.scanLines/8)*zt.v/Zt),pe=er*zt.h,he=Zn*zt.v,Ze=[];ue(he*pe*256);for(var Xe=0;Xe<he;Xe++){for(var ze=[],Pt=0;Pt<pe;Pt++)ze.push(new Int32Array(64));Ze.push(ze)}zt.blocksPerLine=Fr,zt.blocksPerColumn=z,zt.blocks=Ze}rt.maxH=It,rt.maxV=Zt,rt.mcusPerLine=er,rt.mcusPerColumn=Zn}var qe,pt,rt,It,me=null,xe=null,ee=[],_e=[],ke=[],fe=[],I=re(),_=-1;if(this.comments=[],65496!=I)throw new Error("SOI not found");for(I=re();65497!=I;){switch(I){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var y=(void 0,void 0,rt=re(),It=B.subarray(J,J+rt-2),J+=It.length,It);if(65534===I){var Y=String.fromCharCode.apply(null,y);this.comments.push(Y)}65504===I&&74===y[0]&&70===y[1]&&73===y[2]&&70===y[3]&&0===y[4]&&(me={version:{major:y[5],minor:y[6]},densityUnits:y[7],xDensity:y[8]<<8|y[9],yDensity:y[10]<<8|y[11],thumbWidth:y[12],thumbHeight:y[13],thumbData:y.subarray(14,14+3*y[12]*y[13])}),65505===I&&69===y[0]&&120===y[1]&&105===y[2]&&102===y[3]&&0===y[4]&&(this.exifBuffer=y.subarray(5,y.length)),65518===I&&65===y[0]&&100===y[1]&&111===y[2]&&98===y[3]&&101===y[4]&&0===y[5]&&(xe={version:y[6],flags0:y[7]<<8|y[8],flags1:y[9]<<8|y[10],transformCode:y[11]});break;case 65499:for(var X=re()+J-2;J<X;){var W=B[J++];ue(256);var ce=new Int32Array(64);if(W>>4==0)for(h=0;h<64;h++)ce[V[h]]=B[J++];else{if(W>>4!=1)throw new Error("DQT: invalid table spec");for(h=0;h<64;h++)ce[V[h]]=re()}ee[15&W]=ce}break;case 65472:case 65473:case 65474:re(),(qe={}).extended=65473===I,qe.progressive=65474===I,qe.precision=B[J++],qe.scanLines=re(),qe.samplesPerLine=re(),qe.components={},qe.componentsOrder=[];var de=qe.scanLines*qe.samplesPerLine;if(de>K){var ve=Math.ceil((de-K)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${ve}MP`)}var Me,Se=B[J++];for(g=0;g<Se;g++){var Pe=B[J+1]>>4,Oe=15&B[J+1],ae=B[J+2];qe.componentsOrder.push(Me=B[J]),qe.components[Me]={h:Pe,v:Oe,quantizationIdx:ae},J+=3}te(qe),_e.push(qe);break;case 65476:var Ue=re();for(g=2;g<Ue;){var He=B[J++],Ye=new Uint8Array(16),Fe=0;for(h=0;h<16;h++,J++)Fe+=Ye[h]=B[J];ue(16+Fe);var Ge=new Uint8Array(Fe);for(h=0;h<Fe;h++,J++)Ge[h]=B[J];g+=17+Fe,(He>>4==0?fe:ke)[15&He]=U(Ye,Ge)}break;case 65501:re(),pt=re();break;case 65500:re(),re();break;case 65498:re();var lt=B[J++],Mt=[];for(g=0;g<lt;g++){je=qe.components[B[J++]];var Be=B[J++];je.huffmanTableDC=fe[Be>>4],je.huffmanTableAC=ke[15&Be],Mt.push(je)}var Qe=B[J++],ft=B[J++],yt=B[J++],ct=P(B,J,qe,Mt,pt,Qe,ft,yt>>4,15&yt,this.opts);J+=ct;break;case 65535:255!==B[J]&&J--;break;default:if(255==B[J-3]&&B[J-2]>=192&&B[J-2]<=254){J-=3;break}if(224===I||225==I){if(-1!==_)throw new Error(`first unknown JPEG marker at offset ${_.toString(16)}, second unknown JPEG marker ${I.toString(16)} at offset ${(J-1).toString(16)}`);_=J-1;const rt=re();if(255===B[J+rt-2]){J+=rt-2;break}}throw new Error("unknown JPEG marker "+I.toString(16))}I=re()}if(1!=_e.length)throw new Error("only single frame JPEGs supported");for(var g=0;g<_e.length;g++){var gt=_e[g].components;for(var h in gt)gt[h].quantizationTable=ee[gt[h].quantizationIdx],delete gt[h].quantizationIdx}for(this.width=qe.samplesPerLine,this.height=qe.scanLines,this.jfif=me,this.adobe=xe,this.components=[],g=0;g<qe.componentsOrder.length;g++){var je;this.components.push({lines:F(0,je=qe.components[qe.componentsOrder[g]]),scaleX:je.h/qe.maxH,scaleY:je.v/qe.maxV})}},getData:function(B,K){var re,le,te,me,xe,tt,qe,pt,ee,_e,fe,I,_,g,h,m,y,Y,$,X,W,J=this.width/B,ye=this.height/K,ke=0,ce=B*K*this.components.length;ue(ce);var ne=new Uint8Array(ce);switch(this.components.length){case 1:for(re=this.components[0],_e=0;_e<K;_e++)for(xe=re.lines[0|_e*re.scaleY*ye],ee=0;ee<B;ee++)ne[ke++]=fe=xe[0|ee*re.scaleX*J];break;case 2:for(re=this.components[0],le=this.components[1],_e=0;_e<K;_e++)for(xe=re.lines[0|_e*re.scaleY*ye],tt=le.lines[0|_e*le.scaleY*ye],ee=0;ee<B;ee++)ne[ke++]=fe=xe[0|ee*re.scaleX*J],ne[ke++]=fe=tt[0|ee*le.scaleX*J];break;case 3:for(W=!0,this.adobe&&this.adobe.transformCode?W=!0:void 0!==this.opts.colorTransform&&(W=!!this.opts.colorTransform),re=this.components[0],le=this.components[1],te=this.components[2],_e=0;_e<K;_e++)for(xe=re.lines[0|_e*re.scaleY*ye],tt=le.lines[0|_e*le.scaleY*ye],qe=te.lines[0|_e*te.scaleY*ye],ee=0;ee<B;ee++)W?(I=tt[0|ee*le.scaleX*J],Y=j((fe=xe[0|ee*re.scaleX*J])+1.402*((_=qe[0|ee*te.scaleX*J])-128)),$=j(fe-.3441363*(I-128)-.71413636*(_-128)),X=j(fe+1.772*(I-128))):(Y=xe[0|ee*re.scaleX*J],$=tt[0|ee*le.scaleX*J],X=qe[0|ee*te.scaleX*J]),ne[ke++]=Y,ne[ke++]=$,ne[ke++]=X;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(W=!1,this.adobe&&this.adobe.transformCode?W=!0:void 0!==this.opts.colorTransform&&(W=!!this.opts.colorTransform),re=this.components[0],le=this.components[1],te=this.components[2],me=this.components[3],_e=0;_e<K;_e++)for(xe=re.lines[0|_e*re.scaleY*ye],tt=le.lines[0|_e*le.scaleY*ye],qe=te.lines[0|_e*te.scaleY*ye],pt=me.lines[0|_e*me.scaleY*ye],ee=0;ee<B;ee++)W?(I=tt[0|ee*le.scaleX*J],g=pt[0|ee*me.scaleX*J],h=255-j((fe=xe[0|ee*re.scaleX*J])+1.402*((_=qe[0|ee*te.scaleX*J])-128)),m=255-j(fe-.3441363*(I-128)-.71413636*(_-128)),y=255-j(fe+1.772*(I-128))):(h=xe[0|ee*re.scaleX*J],m=tt[0|ee*le.scaleX*J],y=qe[0|ee*te.scaleX*J],g=pt[0|ee*me.scaleX*J]),ne[ke++]=255-h,ne[ke++]=255-m,ne[ke++]=255-y,ne[ke++]=255-g;break;default:throw new Error("Unsupported color mode")}return ne},copyToImageData:function(B,K){var xe,tt,qe,pt,ee,_e,ke,fe,I,J=B.width,ye=B.height,re=B.data,le=this.getData(J,ye),te=0,me=0;switch(this.components.length){case 1:for(tt=0;tt<ye;tt++)for(xe=0;xe<J;xe++)qe=le[te++],re[me++]=qe,re[me++]=qe,re[me++]=qe,K&&(re[me++]=255);break;case 3:for(tt=0;tt<ye;tt++)for(xe=0;xe<J;xe++)ke=le[te++],fe=le[te++],I=le[te++],re[me++]=ke,re[me++]=fe,re[me++]=I,K&&(re[me++]=255);break;case 4:for(tt=0;tt<ye;tt++)for(xe=0;xe<J;xe++)ee=le[te++],_e=le[te++],qe=le[te++],ke=255-j(ee*(1-(pt=le[te++])/255)+pt),fe=255-j(_e*(1-pt/255)+pt),I=255-j(qe*(1-pt/255)+pt),re[me++]=ke,re[me++]=fe,re[me++]=I,K&&(re[me++]=255);break;default:throw new Error("Unsupported color mode")}}};var Q=0,oe=0;function ue(L=0){var B=Q+L;if(B>oe){var K=Math.ceil((B-oe)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${K}MB`)}Q=B}return O.resetMaxMemoryUsage=function(L){Q=0,oe=L},O.getBytesAllocated=function(){return Q},O.requestMemoryAllocation=ue,O}();we.exports=function(R,V={}){var C=O1(O1({},{colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512}),V),E=new Uint8Array(R),w=new se;w.opts=C,se.resetMaxMemoryUsage(1024*C.maxMemoryUsageInMB*1024),w.parse(E);var k=w.width*w.height*(C.formatAsRGBA?4:3);try{se.requestMemoryAllocation(k);var v={width:w.width,height:w.height,exifBuffer:w.exifBuffer,data:C.useTArray?new Uint8Array(k):Buffer.alloc(k)};w.comments.length>0&&(v.comments=w.comments)}catch(M){throw M instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+k):M}return w.copyToImageData(v,C.formatAsRGBA),v}},2924:we=>{function T(x){Math;var O,U,P,F,me,w=Math.floor,D=new Array(64),k=new Array(64),v=new Array(64),M=new Array(64),j=new Array(65535),Q=new Array(65535),oe=new Array(64),ue=new Array(64),L=[],B=0,K=7,J=new Array(64),ye=new Array(64),re=new Array(64),le=new Array(256),te=new Array(2048),xe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],tt=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],qe=[0,1,2,3,4,5,6,7,8,9,10,11],pt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ee=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_e=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ke=[0,1,2,3,4,5,6,7,8,9,10,11],fe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],I=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function g(ae,Ue){for(var He=0,Ye=0,Fe=new Array,Ge=1;Ge<=16;Ge++){for(var it=1;it<=ae[Ge];it++)Fe[Ue[Ye]]=[],Fe[Ue[Ye]][0]=He,Fe[Ue[Ye]][1]=Ge,Ye++,He++;He*=2}return Fe}function Y(ae){for(var Ue=ae[0],He=ae[1]-1;He>=0;)Ue&1<<He&&(B|=1<<K),He--,--K<0&&(255==B?($(255),$(0)):$(B),K=7,B=0)}function $(ae){L.push(ae)}function X(ae){$(ae>>8&255),$(255&ae)}function Ve(ae,Ue,He,Ye,Fe){for(var lt,Ge=Fe[0],it=Fe[240],Qe=function(ae,Ue){var He,Ye,Fe,Ge,it,lt,Mt,je,Qe,Ql,Be=0;for(Qe=0;Qe<8;++Qe){var ct=(He=ae[Be])+(je=ae[Be+7]),gt=He-je,rt=(Ye=ae[Be+1])+(Mt=ae[Be+6]),It=Ye-Mt,Zt=(Fe=ae[Be+2])+(lt=ae[Be+5]),zt=Fe-lt,nn=(Ge=ae[Be+3])+(it=ae[Be+4]),er=Ge-it,Zn=ct+nn,Fr=ct-nn,z=rt+Zt,pe=rt-Zt;ae[Be]=Zn+z,ae[Be+4]=Zn-z;var he=.707106781*(pe+Fr);ae[Be+2]=Fr+he,ae[Be+6]=Fr-he;var Te=.382683433*((Zn=er+zt)-(pe=It+gt)),Ze=.5411961*Zn+Te,Xe=1.306562965*pe+Te,ze=.707106781*(z=zt+It),Pt=gt+ze,mn=gt-ze;ae[Be+5]=mn+Ze,ae[Be+3]=mn-Ze,ae[Be+1]=Pt+Xe,ae[Be+7]=Pt-Xe,Be+=8}for(Be=0,Qe=0;Qe<8;++Qe){var an=(He=ae[Be])+(je=ae[Be+56]),fo=He-je,vn=(Ye=ae[Be+8])+(Mt=ae[Be+48]),st=Ye-Mt,Yt=(Fe=ae[Be+16])+(lt=ae[Be+40]),Pr=Fe-lt,tr=(Ge=ae[Be+24])+(it=ae[Be+32]),po=Ge-it,hr=an+tr,rn=an-tr,go=vn+Yt,pa=vn-Yt;ae[Be]=hr+go,ae[Be+32]=hr-go;var Op=.707106781*(pa+rn);ae[Be+16]=rn+Op,ae[Be+48]=rn-Op;var Or=.382683433*((hr=po+Pr)-(pa=st+fo)),Np=.5411961*hr+Or,Lp=1.306562965*pa+Or,Bp=.707106781*(go=Pr+st),Up=fo+Bp,gh=fo-Bp;ae[Be+40]=gh+Np,ae[Be+24]=gh-Np,ae[Be+8]=Up+Lp,ae[Be+56]=Up-Lp,Be++}for(Qe=0;Qe<64;++Qe)oe[Qe]=(Ql=ae[Qe]*Ue[Qe])>0?Ql+.5|0:Ql-.5|0;return oe}(ae,Ue),ft=0;ft<64;++ft)ue[xe[ft]]=Qe[ft];var yt=ue[0]-He;He=ue[0],0==yt?Y(Ye[0]):(Y(Ye[Q[lt=32767+yt]]),Y(j[lt]));for(var ct=63;ct>0&&0==ue[ct];ct--);if(0==ct)return Y(Ge),He;for(var rt,gt=1;gt<=ct;){for(var It=gt;0==ue[gt]&&gt<=ct;++gt);var Zt=gt-It;if(Zt>=16){rt=Zt>>4;for(var zt=1;zt<=rt;++zt)Y(it);Zt&=15}Y(Fe[(Zt<<4)+Q[lt=32767+ue[gt]]]),Y(j[lt]),gt++}return 63!=ct&&Y(Ge),He}function Pe(ae){ae<=0&&(ae=1),ae>100&&(ae=100),me!=ae&&(function(ae){for(var Ue=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],He=0;He<64;He++){var Ye=w((Ue[He]*ae+50)/100);Ye<1?Ye=1:Ye>255&&(Ye=255),D[xe[He]]=Ye}for(var Fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ge=0;Ge<64;Ge++){var it=w((Fe[Ge]*ae+50)/100);it<1?it=1:it>255&&(it=255),k[xe[Ge]]=it}for(var lt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Mt=0,je=0;je<8;je++)for(var Be=0;Be<8;Be++)v[Mt]=1/(D[xe[Mt]]*lt[je]*lt[Be]*8),M[Mt]=1/(k[xe[Mt]]*lt[je]*lt[Be]*8),Mt++}(ae<50?Math.floor(5e3/ae):Math.floor(200-2*ae)),me=ae)}this.encode=function(ae,Ue){(new Date).getTime(),Ue&&Pe(Ue),L=new Array,B=0,K=7,X(65496),X(65504),X(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),X(1),X(1),$(0),$(0),function(ae){if(ae){X(65505),69===ae[0]&&120===ae[1]&&105===ae[2]&&102===ae[3]?X(ae.length+2):(X(ae.length+5+2),$(69),$(120),$(105),$(102),$(0));for(var Ue=0;Ue<ae.length;Ue++)$(ae[Ue])}}(ae.exifBuffer),function(){X(65499),X(132),$(0);for(var ae=0;ae<64;ae++)$(D[ae]);$(1);for(var Ue=0;Ue<64;Ue++)$(k[Ue])}(),function(ae,Ue){X(65472),X(17),$(8),X(Ue),X(ae),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)}(ae.width,ae.height),function(){X(65476),X(418),$(0);for(var ae=0;ae<16;ae++)$(tt[ae+1]);for(var Ue=0;Ue<=11;Ue++)$(qe[Ue]);$(16);for(var He=0;He<16;He++)$(pt[He+1]);for(var Ye=0;Ye<=161;Ye++)$(ee[Ye]);$(1);for(var Fe=0;Fe<16;Fe++)$(_e[Fe+1]);for(var Ge=0;Ge<=11;Ge++)$(ke[Ge]);$(17);for(var it=0;it<16;it++)$(fe[it+1]);for(var lt=0;lt<=161;lt++)$(I[lt])}(),X(65498),X(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var Ye=0,Fe=0,Ge=0;B=0,K=7,this.encode.displayName="_encode_";for(var Qe,yt,ct,gt,rt,It,Zt,zt,nn,it=ae.data,Mt=ae.height,je=4*ae.width,ft=0;ft<Mt;){for(Qe=0;Qe<je;){for(It=rt=je*ft+Qe,Zt=-1,zt=0,nn=0;nn<64;nn++)It=rt+(zt=nn>>3)*je+(Zt=4*(7&nn)),ft+zt>=Mt&&(It-=je*(ft+1+zt-Mt)),Qe+Zt>=je&&(It-=Qe+Zt-je+4),yt=it[It++],ct=it[It++],gt=it[It++],J[nn]=(te[yt]+te[ct+256>>0]+te[gt+512>>0]>>16)-128,ye[nn]=(te[yt+768>>0]+te[ct+1024>>0]+te[gt+1280>>0]>>16)-128,re[nn]=(te[yt+1280>>0]+te[ct+1536>>0]+te[gt+1792>>0]>>16)-128;Ye=Ve(J,v,Ye,O,P),Fe=Ve(ye,M,Fe,U,F),Ge=Ve(re,M,Ge,U,F),Qe+=32}ft+=8}if(K>=0){var er=[];er[1]=K+1,er[0]=(1<<K+1)-1,Y(er)}return X(65497),Buffer.from(L)},(new Date).getTime(),x||(x=50),function(){for(var ae=String.fromCharCode,Ue=0;Ue<256;Ue++)le[Ue]=ae(Ue)}(),O=g(tt,qe),U=g(_e,ke),P=g(pt,ee),F=g(fe,I),function(){for(var ae=1,Ue=2,He=1;He<=15;He++){for(var Ye=ae;Ye<Ue;Ye++)Q[32767+Ye]=He,j[32767+Ye]=[],j[32767+Ye][1]=He,j[32767+Ye][0]=Ye;for(var Fe=-(Ue-1);Fe<=-ae;Fe++)Q[32767+Fe]=He,j[32767+Fe]=[],j[32767+Fe][1]=He,j[32767+Fe][0]=Ue-1+Fe;ae<<=1,Ue<<=1}}(),function(){for(var ae=0;ae<256;ae++)te[ae]=19595*ae,te[ae+256>>0]=38470*ae,te[ae+512>>0]=7471*ae+32768,te[ae+768>>0]=-11059*ae,te[ae+1024>>0]=-21709*ae,te[ae+1280>>0]=32768*ae+8421375,te[ae+1536>>0]=-27439*ae,te[ae+1792>>0]=-5329*ae}(),Pe(x),(new Date).getTime()}we.exports=function(x,C){return void 0===C&&(C=50),{data:new T(C).encode(x,C),width:x.width,height:x.height}}},127:(we,se,T)=>{"use strict";const R=T(4777),V=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),x=C=>{const E=R(C);return V.has(E&&E.ext)?E:null};we.exports=x,we.exports.default=x,Object.defineProperty(x,"minimumBytes",{value:R.minimumBytes})},4777:module=>{"use strict";const toBytes=we=>[...we].map(se=>se.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(we,se=0){let T=we[se],R=1,V=0;for(;++V<8;)R*=256,T+=we[se+V]*R;return T}const fileType=we=>{if(!(we instanceof Uint8Array||we instanceof ArrayBuffer||Buffer.isBuffer(we)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof we}\``);const se=we instanceof Uint8Array?we:new Uint8Array(we);if(!(se&&se.length>1))return null;const T=(V,x)=>{x=Object.assign({offset:0},x);for(let C=0;C<V.length;C++)if(x.mask){if(V[C]!==(x.mask[C]&se[C+x.offset]))return!1}else if(V[C]!==se[C+x.offset])return!1;return!0},R=(V,x)=>T(toBytes(V),x);if(T([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(T([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(T([71,73,70]))return{ext:"gif",mime:"image/gif"};if(T([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(T([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((T([73,73,42,0])||T([77,77,0,42]))&&T([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(T([73,73,42,0])||T([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(T([66,77]))return{ext:"bmp",mime:"image/bmp"};if(T([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(T([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(T([80,75,3,4])){if(T([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(T(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(R("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(R("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(R("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const V=(w,D=0)=>w.findIndex((k,v,M)=>v>=D&&80===M[v]&&75===M[v+1]&&3===M[v+2]&&4===M[v+3]);let x=0,C=!1,E=null;do{const w=x+30;if(C||(C=T(oxmlContentTypes,{offset:w})||T(oxmlRels,{offset:w})),E||(R("word/",{offset:w})?E={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:R("ppt/",{offset:w})?E={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:R("xl/",{offset:w})&&(E={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),C&&E)return E;x=V(se,w)}while(x>=0);if(E)return E}if(T([80,75])&&(3===se[2]||5===se[2]||7===se[2])&&(4===se[3]||6===se[3]||8===se[3]))return{ext:"zip",mime:"application/zip"};if(T([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(T([82,97,114,33,26,7])&&(0===se[6]||1===se[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(T([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(T([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(T([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(T([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(T([51,103,112,53])||T([0,0,0])&&T([102,116,121,112],{offset:4})&&(T([109,112,52,49],{offset:8})||T([109,112,52,50],{offset:8})||T([105,115,111,109],{offset:8})||T([105,115,111,50],{offset:8})||T([109,109,112,52],{offset:8})||T([77,52,86],{offset:8})||T([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(T([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(T([26,69,223,163])){const V=se.subarray(4,4100),x=V.findIndex((C,E,w)=>66===w[E]&&130===w[E+1]);if(-1!==x){const C=x+3,E=w=>[...w].every((D,k)=>V[C+k]===D.charCodeAt(0));if(E("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(E("webm"))return{ext:"webm",mime:"video/webm"}}}if(T([0,0,0,20,102,116,121,112,113,116,32,32])||T([102,114,101,101],{offset:4})||T([102,116,121,112,113,116,32,32],{offset:4})||T([109,100,97,116],{offset:4})||T([109,111,111,118],{offset:4})||T([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(T([82,73,70,70])){if(T([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(T([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(T([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(T([48,38,178,117,142,102,207,17,166,217])){let V=30;do{const x=readUInt64LE(se,V+16);if(T([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:V})){if(T([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:V+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(T([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:V+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}V+=x}while(V+24<=se.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(T([0,0,1,186])||T([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(T([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let V=0;V<2&&V<se.length-16;V++){if(T([73,68,51],{offset:V})||T([255,226],{offset:V,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(T([255,228],{offset:V,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(T([255,248],{offset:V,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(T([255,240],{offset:V,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(T([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(T([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(T([79,103,103,83]))return T([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:T([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:T([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:T([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:T([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(T([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(T([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(T([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(T([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(T([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(T([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((67===se[0]||70===se[0])&&T([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(T([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(T([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(T([119,79,70,70])&&(T([0,1,0,0],{offset:4})||T([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(T([119,79,70,50])&&(T([0,1,0,0],{offset:4})||T([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(T([76,80],{offset:34})&&(T([0,0,1],{offset:8})||T([1,0,2],{offset:8})||T([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(T([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(T([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(T([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(T([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(T([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(T([37,33]))return{ext:"ps",mime:"application/postscript"};if(T([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(T([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(T([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(T([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(T([77,83,67,70])||T([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(T([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(T([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(T([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(T([31,160])||T([31,157]))return{ext:"Z",mime:"application/x-compress"};if(T([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(T([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(T([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(T([71],{offset:4})&&(T([71],{offset:192})||T([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(T([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(T([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(T([0,0,0,12,106,80,32,32,13,10,135,10])){if(T([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(T([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(T([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(T([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(T([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(R("<?xml "))return{ext:"xml",mime:"application/xml"};if(T([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(T([102,116,121,112],{offset:4})){if(T([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(T([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(T([104,101,105,99],{offset:8})||T([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(T([104,101,118,99],{offset:8})||T([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return T([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:T([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:T([77,80,43])||T([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:T([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:T([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:T([212,195,178,161])||T([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const we=new stream.PassThrough,se=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{we.fileType=fileType(se)}catch(T){reject(T)}readableStream.unshift(se),resolve(stream.pipeline?stream.pipeline(readableStream,we,()=>{}):readableStream.pipe(we))})})},7676:(we,se,T)=>{"use strict";const R=T(3790),x=[];we.exports=class{constructor(w,D){D=D||{};var k=!1;void 0===w&&(w=8192),"number"==typeof w?w=new ArrayBuffer(w):(k=!0,this._lastWrittenByte=w.byteLength);const v=D.offset?D.offset>>>0:0;let M=w.byteLength-v,O=v;w.buffer&&(w.byteLength!==w.buffer.byteLength&&(O=w.byteOffset+v),w=w.buffer),this._lastWrittenByte=k?M:0,this.buffer=w,this.length=M,this.byteLength=M,this.byteOffset=O,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,O,M),this._mark=0,this._marks=[]}available(w){return void 0===w&&(w=1),this.offset+w<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(w){return void 0===w&&(w=1),this.offset+=w,this}seek(w){return this.offset=w,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const w=this._marks.pop();if(void 0===w)throw new Error("Mark stack empty");return this.seek(w),this}rewind(){return this.offset=0,this}ensureAvailable(w){if(void 0===w&&(w=1),!this.available(w)){const k=2*(this.offset+w),v=new Uint8Array(k);v.set(new Uint8Array(this.buffer)),this.buffer=v.buffer,this.length=this.byteLength=k,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(w){void 0===w&&(w=1);for(var D=new Uint8Array(w),k=0;k<w;k++)D[k]=this.readByte();return D}readInt16(){var w=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,w}readUint16(){var w=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,w}readInt32(){var w=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,w}readUint32(){var w=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,w}readFloat32(){var w=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,w}readFloat64(){var w=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,w}readChar(){return String.fromCharCode(this.readInt8())}readChars(w){void 0===w&&(w=1),x.length=w;for(var D=0;D<w;D++)x[D]=this.readChar();return x.join("")}readUtf8(w){void 0===w&&(w=1);const D=this.readChars(w);return R.decode(D)}writeBoolean(w){return this.writeUint8(w?255:0),this}writeInt8(w){return this.ensureAvailable(1),this._data.setInt8(this.offset++,w),this._updateLastWrittenByte(),this}writeUint8(w){return this.ensureAvailable(1),this._data.setUint8(this.offset++,w),this._updateLastWrittenByte(),this}writeByte(w){return this.writeUint8(w)}writeBytes(w){this.ensureAvailable(w.length);for(var D=0;D<w.length;D++)this._data.setUint8(this.offset++,w[D]);return this._updateLastWrittenByte(),this}writeInt16(w){return this.ensureAvailable(2),this._data.setInt16(this.offset,w,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(w){return this.ensureAvailable(2),this._data.setUint16(this.offset,w,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(w){return this.ensureAvailable(4),this._data.setInt32(this.offset,w,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(w){return this.ensureAvailable(4),this._data.setUint32(this.offset,w,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(w){return this.ensureAvailable(4),this._data.setFloat32(this.offset,w,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(w){return this.ensureAvailable(8),this._data.setFloat64(this.offset,w,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(w){return this.writeUint8(w.charCodeAt(0))}writeChars(w){for(var D=0;D<w.length;D++)this.writeUint8(w.charCodeAt(D));return this}writeUtf8(w){const D=R.encode(w);return this.writeChars(D)}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)}getBuffer(){return"undefined"!=typeof Buffer?Buffer.from(this.toArray()):this.toArray()}_updateLastWrittenByte(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)}}},2128:(we,se,T)=>{"use strict";T.d(se,{Z:()=>V});const R=Object.prototype.toString;function V(x){return R.call(x).endsWith("Array]")}},275:we=>{"use strict";var se=Object.prototype.toString;we.exports=function(R){return"Array"===se.call(R).substr(-6,5)}},6640:we=>{"use strict";we.exports=Number.isFinite||function(se){return!("number"!=typeof se||se!=se||se===1/0||se===-1/0)}},8653:(we,se,T)=>{var R=T(6640);we.exports=Number.isInteger||function(V){return"number"==typeof V&&R(V)&&Math.floor(V)===V}},4422:we=>{we.exports=function V(x,C,E){function w(v,M){if(!C[v]){if(!x[v]){if(D)return D(v,!0);var U=new Error("Cannot find module '"+v+"'");throw U.code="MODULE_NOT_FOUND",U}var P=C[v]={exports:{}};x[v][0].call(P.exports,function(F){return w(x[v][1][F]||F)},P,P.exports,V,x,C,E)}return C[v].exports}for(var D=void 0,k=0;k<E.length;k++)w(E[k]);return w}({1:[function(V,x,C){var E,w,D,k,v,O={}.hasOwnProperty;E=V("./PriorityQueue/AbstractPriorityQueue"),w=V("./PriorityQueue/ArrayStrategy"),k=V("./PriorityQueue/BinaryHeapStrategy"),D=V("./PriorityQueue/BHeapStrategy"),(v=function(U){function P(F){F||(F={}),F.strategy||(F.strategy=k),F.comparator||(F.comparator=function(j,Q){return(j||0)-(Q||0)}),P.__super__.constructor.call(this,F)}return function(U,P){for(var F in P)O.call(P,F)&&(U[F]=P[F]);function j(){this.constructor=U}j.prototype=P.prototype,U.prototype=new j,U.__super__=P.prototype}(P,U),P}(E)).ArrayStrategy=w,v.BinaryHeapStrategy=k,v.BHeapStrategy=D,x.exports=v},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(V,x,C){x.exports=function(){function w(D){var k;if(null==(null!=D?D.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=D?D.comparator:void 0))throw"Must pass options.comparator, a comparator";this.priv=new D.strategy(D),this.length=(null!=D&&null!=(k=D.initialValues)?k.length:void 0)||0}return w.prototype.queue=function(D){this.length++,this.priv.queue(D)},w.prototype.dequeue=function(D){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},w.prototype.peek=function(D){if(!this.length)throw"Empty queue";return this.priv.peek()},w.prototype.clear=function(){return this.length=0,this.priv.clear()},w}()},{}],3:[function(V,x,C){var w;w=function(D,k,v){var M,O,U;for(O=0,M=D.length;O<M;)v(D[U=O+M>>>1],k)>=0?O=U+1:M=U;return O},x.exports=function(){function D(k){var v;this.options=k,this.comparator=this.options.comparator,this.data=(null!=(v=this.options.initialValues)?v.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return D.prototype.queue=function(k){var v;v=w(this.data,k,this.comparator),this.data.splice(v,0,k)},D.prototype.dequeue=function(){return this.data.pop()},D.prototype.peek=function(){return this.data[this.data.length-1]},D.prototype.clear=function(){this.data.length=0},D}()},{}],4:[function(V,x,C){x.exports=function(){function w(D){var k,M,O,U,P,F,j;for(this.comparator=(null!=D?D.comparator:void 0)||function(oe,ue){return oe-ue},this.pageSize=(null!=D?D.pageSize:void 0)||512,this.length=0,j=0;1<<j<this.pageSize;)j+=1;if(1<<j!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=j,this._emptyMemoryPageTemplate=k=[],M=0,P=this.pageSize;0<=P?M<P:M>P;0<=P?++M:--M)k.push(null);if(this._memory=[],this._mask=this.pageSize-1,D.initialValues)for(O=0,U=(F=D.initialValues).length;O<U;O++)this.queue(F[O])}return w.prototype.queue=function(D){this.length+=1,this._write(this.length,D),this._bubbleUp(this.length,D)},w.prototype.dequeue=function(){var D,k;return D=this._read(1),k=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,k),this._bubbleDown(1,k)),D},w.prototype.peek=function(){return this._read(1)},w.prototype.clear=function(){this.length=0,this._memory.length=0},w.prototype._write=function(D,k){var v;for(v=D>>this._shift;v>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[v][D&this._mask]=k},w.prototype._read=function(D){return this._memory[D>>this._shift][D&this._mask]},w.prototype._bubbleUp=function(D,k){var v,M,O,U;for(v=this.comparator;D>1&&(M=D&this._mask,D<this.pageSize||M>3?O=D&~this._mask|M>>1:M<2?(O=D-this.pageSize>>this._shift,O+=O&~(this._mask>>1),O|=this.pageSize>>1):O=D-2,!(v(U=this._read(O),k)<0));)this._write(O,k),this._write(D,U),D=O},w.prototype._bubbleDown=function(D,k){var v,M,O,U,P;for(P=this.comparator;D<this.length;)if(D>this._mask&&!(D&this._mask-1)?v=M=D+2:D&this.pageSize>>1?(v=(D&~this._mask)>>1,M=1+(v=1+(v|=D&this._mask>>1)<<this._shift)):M=(v=D+(D&this._mask))+1,v!==M&&M<=this.length)if(O=this._read(v),U=this._read(M),P(O,k)<0&&P(O,U)<=0)this._write(v,k),this._write(D,O),D=v;else{if(!(P(U,k)<0))break;this._write(M,k),this._write(D,U),D=M}else{if(!(v<=this.length))break;if(!(P(O=this._read(v),k)<0))break;this._write(v,k),this._write(D,O),D=v}},w}()},{}],5:[function(V,x,C){x.exports=function(){function w(D){var k;this.comparator=(null!=D?D.comparator:void 0)||function(v,M){return v-M},this.length=0,this.data=(null!=(k=D.initialValues)?k.slice(0):void 0)||[],this._heapify()}return w.prototype._heapify=function(){var D,k,v;if(this.data.length>0)for(D=k=1,v=this.data.length;1<=v?k<v:k>v;D=1<=v?++k:--k)this._bubbleUp(D)},w.prototype.queue=function(D){this.data.push(D),this._bubbleUp(this.data.length-1)},w.prototype.dequeue=function(){var D,k;return k=this.data[0],D=this.data.pop(),this.data.length>0&&(this.data[0]=D,this._bubbleDown(0)),k},w.prototype.peek=function(){return this.data[0]},w.prototype.clear=function(){this.length=0,this.data.length=0},w.prototype._bubbleUp=function(D){for(var k,v;D>0&&this.comparator(this.data[D],this.data[k=D-1>>>1])<0;)v=this.data[k],this.data[k]=this.data[D],this.data[D]=v,D=k},w.prototype._bubbleDown=function(D){var k,v,M,O,U;for(k=this.data.length-1;O=1+(v=1+(D<<1)),M=D,v<=k&&this.comparator(this.data[v],this.data[M])<0&&(M=v),O<=k&&this.comparator(this.data[O],this.data[M])<0&&(M=O),M!==D;)U=this.data[M],this.data[M]=this.data[D],this.data[D]=U,D=M},w}()},{}]},{},[1])(1)},5395:function(we){we.exports=function(){"use strict";function se(z){return"string"==typeof z||z instanceof String}var T=Number.isFinite||window.isFinite;function R(z){return T(z)}function V(z){return z}function C(z,pe){if(pe.length!==z.length)return!1;for(var he=0;he<z.length;he++)if(pe[he].compareArray&&!pe[he].compareArray(z[he])||pe[he]!==z[he])return!1;return!0}function E(z,pe){Object.keys(pe).forEach(function(he){z[he]=pe[he]})}function w(){for(var z=1,pe=0,he=0;he<arguments.length;he++){var Te=arguments[he];pe+=v(Te),z*=Te}return 0!==pe?k(z,pe):z}function D(z,pe){if(0===pe)throw new Error("Divide by zero");var he=Math.pow(10,v(pe));return w(z,he/(he*pe))}function k(z,pe){return Math.round(z*Math.pow(10,pe))/Math.pow(10,pe)}function v(z){if(!isFinite(z))return 0;for(var pe=0;z%1!=0;)z*=10,pe++;return pe}function M(){var z;if(!this)return z=Object.create(M.prototype),M.apply(z,arguments),z;z=Error.apply(this,arguments),this.name="QtyError",this.message=z.message,this.stack=z.stack}function O(z,pe){throw new M("Incompatible units: "+z+" and "+pe)}M.prototype=Object.create(Error.prototype,{constructor:{value:M}});var U={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","\u03bc","\xb5","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],86400,"time",["<second>"]],"<week>":[["wk","week","weeks"],604800,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","\u03a9","\u2126"],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-9,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},P=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],F="<1>",j=[F];function Q(z,pe){var Te=pe[3]||[],Ze=pe[4]||[];if(!R(pe[1]))throw new M(z+": Invalid unit definition. 'scalar' must be a number");Te.forEach(function(Xe){if(void 0===U[Xe])throw new M(z+": Invalid unit definition. Unit "+Xe+" in 'numerator' is not recognized")}),Ze.forEach(function(Xe){if(void 0===U[Xe])throw new M(z+": Invalid unit definition. Unit "+Xe+" in 'denominator' is not recognized")})}var oe={},ue={},L={},B={},K={};for(var J in U)if(U.hasOwnProperty(J)){var ye=U[J];if("prefix"===ye[2]){oe[J]=ye[1];for(var re=0;re<ye[0].length;re++)ue[ye[0][re]]=J}else{Q(J,ye),L[J]={scalar:ye[1],numerator:ye[3],denominator:ye[4]};for(var le=0;le<ye[0].length;le++)B[ye[0][le]]=J}K[J]=ye[0][0]}var xe=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function tt(){if(this.signature)return this.signature;for(var z=qe.call(this),pe=0;pe<z.length;pe++)z[pe]*=Math.pow(20,pe);return z.reduce(function(he,Te){return he+Te},0)}function qe(){if(!this.isBase())return qe.call(this.toBase());for(var z=new Array(xe.length),pe=0;pe<z.length;pe++)z[pe]=0;for(var he,Te,Ze=0;Ze<this.numerator.length;Ze++)(he=U[this.numerator[Ze]])&&(Te=xe.indexOf(he[2]))>=0&&(z[Te]=z[Te]+1);for(var Xe=0;Xe<this.denominator.length;Xe++)(he=U[this.denominator[Xe]])&&(Te=xe.indexOf(he[2]))>=0&&(z[Te]=z[Te]-1);return z}var m=new RegExp("^([+-]?\\s*(?:(?:\\d+(?:\\.\\d+)?)|(?:\\.\\d+))(?:[Ee][+-]?\\d+)?)?\\s*([^/]*)(?:/(.+))?$"),y="\\^|\\*{2}",Y="[01234]",$=new RegExp("([^ \\*\\d]+?)(?:"+y+")?(-?"+Y+"(?![a-zA-Z]))"),X=new RegExp("([^ \\*\\d]+?)(?:"+y+")?("+Y+"(?![a-zA-Z]))");function W(z){se(z)||(z=z.toString()),z=z.trim();var pe=m.exec(z);if(!pe)throw new M(z+": Quantity not recognized");var he=pe[1];he?(he=he.replace(/\s/g,""),this.scalar=parseFloat(he)):this.scalar=1;for(var Xe,ze,Pt,Te=pe[2],Ze=pe[3];pe=$.exec(Te);){if(Xe=parseFloat(pe[2]),isNaN(Xe))throw new M("Unit exponent is not a number");if(0===Xe&&!Se.test(pe[1]))throw new M("Unit not recognized");ze=pe[1]+" ",Pt="";for(var mn=0;mn<Math.abs(Xe);mn++)Pt+=ze;Xe>=0?Te=Te.replace(pe[0],Pt):(Ze=Ze?Ze+Pt:Pt,Te=Te.replace(pe[0],""))}for(;pe=X.exec(Ze);){if(Xe=parseFloat(pe[2]),isNaN(Xe))throw new M("Unit exponent is not a number");if(0===Xe&&!Se.test(pe[1]))throw new M("Unit not recognized");ze=pe[1]+" ",Pt="";for(var an=0;an<Xe;an++)Pt+=ze;Ze=Ze.replace(pe[0],Pt)}Te&&(this.numerator=be(Te.trim())),Ze&&(this.denominator=be(Ze.trim()))}var ve="("+Object.keys(ue).sort(function(z,pe){return pe.length-z.length}).join("|")+")??("+Object.keys(B).sort(function(z,pe){return pe.length-z.length}).join("|")+")(?:\\b|$)",Se=new RegExp("^\\s*("+ve+"[\\s\\*]*)+$"),Me=new RegExp(ve,"g"),Ve={};function be(z){var pe=Ve[z];if(pe)return pe;var he,Te=[];if(!Se.test(z))throw new M("Unit not recognized");for(;he=Me.exec(z);)Te.push(he.slice(1));return Te=(Te=(Te=Te.map(function(Ze){return ue[Ze[0]]?[ue[Ze[0]],B[Ze[1]]]:[B[Ze[1]]]})).reduce(function(Ze,Xe){return Ze.concat(Xe)},[])).filter(function(Ze){return Ze}),Ve[z]=Te,Te}function Oe(z){return z instanceof ae}function ae(z,pe){if(Ue.apply(null,arguments),!Oe(this))return new ae(z,pe);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=j,this.denominator=j,He(z)?(this.scalar=z.scalar,this.numerator=z.numerator&&0!==z.numerator.length?z.numerator:j,this.denominator=z.denominator&&0!==z.denominator.length?z.denominator:j):pe?(W.call(this,pe),this.scalar=z):W.call(this,z),this.denominator.join("*").indexOf("temp")>=0)throw new M("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new M("Cannot multiply by temperatures");if(!C(this.denominator,j))throw new M("Cannot divide with temperatures")}if(this.initValue=z,Ye.call(this),this.isTemperature()&&this.baseScalar<0)throw new M("Temperatures must not be less than absolute zero")}function Ue(z,pe){if(pe){if(!R(z)||!se(pe))throw new M("Only number accepted as initialization value when units are explicitly provided")}else if(!(se(z)||R(z)||Oe(z)||He(z)))throw new M("Only string, number or quantity accepted as single initialization value")}function He(z){return z&&"object"==typeof z&&z.hasOwnProperty("scalar")}function Ye(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=tt.call(this);else{var z=this.toBase();this.baseScalar=z.scalar,this.signature=z.signature}}var Fe={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency",25599999980:"information_rate",256e8:"information",511999999980:"angular_velocity",512e9:"angle"};function Mt(z,pe){var he=pe.to(je(z.units()));return ae({scalar:z.scalar+he.scalar,numerator:z.numerator,denominator:z.denominator})}function je(z){if("tempK"===z)return"degK";if("tempC"===z)return"degC";if("tempF"===z)return"degF";if("tempR"===z)return"degR";throw new M("Unknown type for temp conversion from: "+z)}function Be(z,pe){var Ze,he=function(z){var he,pe=z.units();if(pe.match(/(deg)[CFRK]/))he=z.baseScalar;else if("tempK"===pe)he=z.scalar;else if("tempC"===pe)he=z.scalar;else if("tempF"===pe)he=5*z.scalar/9;else{if("tempR"!==pe)throw new M("Unknown type for temp conversion from: "+pe);he=5*z.scalar/9}return ae({scalar:he,numerator:["<kelvin>"],denominator:j})}(z),Te=pe.units();if("degK"===Te)Ze=he.scalar;else if("degC"===Te)Ze=he.scalar;else if("degF"===Te)Ze=9*he.scalar/5;else{if("degR"!==Te)throw new M("Unknown type for degree conversion to: "+Te);Ze=9*he.scalar/5}return ae({scalar:Ze,numerator:pe.numerator,denominator:pe.denominator})}(ae.prototype={constructor:ae}).kind=function(){return Fe[this.signature.toString()]},E(ae.prototype,{isDegrees:function(){return(null===this.signature||400===this.signature)&&1===this.numerator.length&&C(this.denominator,j)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}}),E(ae.prototype,{to:function(z){var pe,he;return null==z?this:se(z)?(pe=this._conversionCache[z])?pe:(he=ae(z)).units()===this.units()?this:(this.isCompatible(he)?he=he.isTemperature()?function(z,pe){var Te,he=pe.units();if("tempK"===he)Te=z.baseScalar;else if("tempC"===he)Te=z.baseScalar-273.15;else if("tempF"===he)Te=9*z.baseScalar/5-459.67;else{if("tempR"!==he)throw new M("Unknown type for temp conversion to: "+he);Te=9*z.baseScalar/5}return ae({scalar:Te,numerator:pe.numerator,denominator:pe.denominator})}(this,he):he.isDegrees()?Be(this,he):ae({scalar:D(this.baseScalar,he.baseScalar),numerator:he.numerator,denominator:he.denominator}):this.isInverse(he)?he=this.inverse().to(z):O(this.units(),he.units()),this._conversionCache[z]=he,he):this.to(z.units())},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return function(z){var he,pe=z.units();if(pe.match(/(deg)[CFRK]/))he=z.baseScalar;else if("tempK"===pe)he=z.scalar;else if("tempC"===pe)he=z.scalar+273.15;else if("tempF"===pe)he=5*(z.scalar+459.67)/9;else{if("tempR"!==pe)throw new M("Unknown type for temp conversion from: "+pe);he=5*z.scalar/9}return ae({scalar:he,numerator:["<temp-K>"],denominator:j})}(this);var z=gt[this.units()];return z||(z=function(z,pe){for(var Xe,he=[],Te=[],Ze=1,ze=0;ze<z.length;ze++)oe[Xe=z[ze]]?Ze=w(Ze,oe[Xe]):L[Xe]&&(Ze*=L[Xe].scalar,L[Xe].numerator&&he.push(L[Xe].numerator),L[Xe].denominator&&Te.push(L[Xe].denominator));for(var Pt=0;Pt<pe.length;Pt++)oe[Xe=pe[Pt]]?Ze/=oe[Xe]:L[Xe]&&(Ze/=L[Xe].scalar,L[Xe].numerator&&Te.push(L[Xe].numerator),L[Xe].denominator&&he.push(L[Xe].denominator));return ae({scalar:Ze,numerator:he=he.reduce(function(mn,an){return mn.concat(an)},[]),denominator:Te=Te.reduce(function(mn,an){return mn.concat(an)},[])})}(this.numerator,this.denominator),gt[this.units()]=z),z.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new M("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(z){if(se(z)&&(z=ae(z)),R(z)&&(z=ae(z+" "+this.units())),this.isUnitless()?z.isUnitless()||O(this.units(),z.units()):z=z.to(this.units()),0===z.scalar)throw new M("Divide by zero");return ae(w(Math.round(this.scalar/z.scalar),z.scalar)+this.units())}});var gt={};function It(z,pe,he,Te){function Ze(Yt){return Yt!==F}z=z.filter(Ze),he=he.filter(Ze),pe=pe.filter(Ze),Te=Te.filter(Ze);var Xe={};function ze(Yt,Pr){for(var tr,po,hr,rn=0;rn<Yt.length;rn++)oe[Yt[rn]]?(tr=Yt[rn+1],hr=oe[po=Yt[rn]],rn++):(tr=Yt[rn],po=null,hr=1),tr&&tr!==F&&(Xe[tr]?(Xe[tr][0]+=Pr,Xe[tr][1===Pr?3:4]*=D(hr,Xe[tr][2]?oe[Xe[tr][2]]:1)):Xe[tr]=[Pr,tr,po,1,1])}ze(z,1),ze(pe,-1),ze(he,1),ze(Te,-1);var Pt=[],mn=[],an=1;for(var fo in Xe)if(Xe.hasOwnProperty(fo)){var st,vn=Xe[fo];if(vn[0]>0)for(st=0;st<vn[0];st++)Pt.push(null===vn[2]?vn[1]:[vn[2],vn[1]]);else if(vn[0]<0)for(st=0;st<-vn[0];st++)mn.push(null===vn[2]?vn[1]:[vn[2],vn[1]]);an*=D(vn[3],vn[4])}return 0===Pt.length&&(Pt=j),0===mn.length&&(mn=j),[Pt=Pt.reduce(function(Yt,Pr){return Yt.concat(Pr)},[]),mn=mn.reduce(function(Yt,Pr){return Yt.concat(Pr)},[]),an]}function Zt(){}ae.parse=function(z){if(!se(z))throw new M("Argument should be a string");try{return this(z)}catch(pe){return null}},ae.getUnits=function(z){var pe,he=[],Te=Object.keys(U);if(void 0===z)for(pe=0;pe<Te.length;pe++)-1===["","prefix"].indexOf(U[Te[pe]][2])&&he.push(Te[pe].substr(1,Te[pe].length-2));else{if(-1===this.getKinds().indexOf(z))throw new M("Kind not recognized");for(pe=0;pe<Te.length;pe++)U[Te[pe]][2]===z&&he.push(Te[pe].substr(1,Te[pe].length-2))}return he.sort(function(Ze,Xe){return Ze.toLowerCase()<Xe.toLowerCase()?-1:Ze.toLowerCase()>Xe.toLowerCase()?1:0})},ae.getAliases=function(z){if(!B[z])throw new M("Unit not recognized");return U[B[z]][0]},ae.mulSafe=w,ae.divSafe=D,ae.getKinds=function(){return z=Object.keys(Fe).map(function(z){return Fe[z]}),pe={},z.filter(function(he){return!pe.hasOwnProperty(he)&&(pe[he]=!0)});var z,pe},ae.swiftConverter=function(z,pe){var Ze,he=ae(z),Te=ae(pe);return he.eq(Te)?V:(Ze=he.isTemperature()?function(Xe){return he.mul(Xe).to(Te).scalar}:function(Xe){return Xe*he.baseScalar/Te.baseScalar},function(ze){var Pt,mn,an;if(Array.isArray(ze)){for(mn=ze.length,an=[],Pt=0;Pt<mn;Pt++)an.push(Ze(ze[Pt]));return an}return Ze(ze)})},ae.Error=M,E(ae.prototype,{add:function(z){if(se(z)&&(z=ae(z)),this.isCompatible(z)||O(this.units(),z.units()),this.isTemperature()&&z.isTemperature())throw new M("Cannot add two temperatures");return this.isTemperature()?Mt(this,z):z.isTemperature()?Mt(z,this):ae({scalar:this.scalar+z.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(z){if(se(z)&&(z=ae(z)),this.isCompatible(z)||O(this.units(),z.units()),this.isTemperature()&&z.isTemperature())return function(z,pe){var he=z.units(),Te=pe.to(he),Ze=ae(je(he));return ae({scalar:z.scalar-Te.scalar,numerator:Ze.numerator,denominator:Ze.denominator})}(this,z);if(this.isTemperature())return function(z,pe){var he=pe.to(je(z.units()));return ae({scalar:z.scalar-he.scalar,numerator:z.numerator,denominator:z.denominator})}(this,z);if(z.isTemperature())throw new M("Cannot subtract a temperature from a differential degree unit");return ae({scalar:this.scalar-z.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(z){if(R(z))return ae({scalar:w(this.scalar,z),numerator:this.numerator,denominator:this.denominator});if(se(z)&&(z=ae(z)),(this.isTemperature()||z.isTemperature())&&!this.isUnitless()&&!z.isUnitless())throw new M("Cannot multiply by temperatures");var pe=this,he=z;pe.isCompatible(he)&&400!==pe.signature&&(he=he.to(pe));var Te=It(pe.numerator,pe.denominator,he.numerator,he.denominator);return ae({scalar:w(pe.scalar,he.scalar,Te[2]),numerator:Te[0],denominator:Te[1]})},div:function(z){if(R(z)){if(0===z)throw new M("Divide by zero");return ae({scalar:this.scalar/z,numerator:this.numerator,denominator:this.denominator})}if(se(z)&&(z=ae(z)),0===z.scalar)throw new M("Divide by zero");if(z.isTemperature())throw new M("Cannot divide with temperatures");if(this.isTemperature()&&!z.isUnitless())throw new M("Cannot divide with temperatures");var pe=this,he=z;pe.isCompatible(he)&&400!==pe.signature&&(he=he.to(pe));var Te=It(pe.numerator,pe.denominator,he.denominator,he.numerator);return ae({scalar:w(pe.scalar,Te[2])/he.scalar,numerator:Te[0],denominator:Te[1]})},inverse:function(){if(this.isTemperature())throw new M("Cannot divide with temperatures");if(0===this.scalar)throw new M("Divide by zero");return ae({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}}),E(ae.prototype,{eq:function(z){return 0===this.compareTo(z)},lt:function(z){return-1===this.compareTo(z)},lte:function(z){return this.eq(z)||this.lt(z)},gt:function(z){return 1===this.compareTo(z)},gte:function(z){return this.eq(z)||this.gt(z)},compareTo:function(z){return se(z)?this.compareTo(ae(z)):(this.isCompatible(z)||O(this.units(),z.units()),this.baseScalar<z.baseScalar?-1:this.baseScalar===z.baseScalar?0:this.baseScalar>z.baseScalar?1:void 0)},same:function(z){return this.scalar===z.scalar&&this.units()===z.units()}}),E(ae.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every(function(z){return C(z,j)})},isCompatible:function(z){return se(z)?this.isCompatible(ae(z)):!(!Oe(z)||void 0===z.signature)&&this.signature===z.signature},isInverse:function(z){return this.inverse().isCompatible(z)},isBase:function(){return void 0!==this._isBase?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach(function(z){z!==F&&-1===P.indexOf(z)&&(this._isBase=!1)},this),!1===this._isBase||(this._isBase=!0),this._isBase)}}),Zt.prototype.get=function(z){return arguments.length>1&&(z=Array.apply(null,arguments)),z.reduce(function(pe,he,Te){if(pe){var Ze=pe[he];return Te===z.length-1?Ze?Ze.data:void 0:Ze}},this)},Zt.prototype.set=function(z,pe){return arguments.length>2&&(z=Array.prototype.slice.call(arguments,0,-1),pe=arguments[arguments.length-1]),z.reduce(function(he,Te,Ze){var Xe=he[Te];return void 0===Xe&&(Xe=he[Te]={}),Ze===z.length-1?(Xe.data=pe,pe):Xe},this)},ae.formatter=function(z,pe){return(z+" "+pe).trim()},E(ae.prototype,{units:function(){if(void 0!==this._units)return this._units;var z=C(this.numerator,j),pe=C(this.denominator,j);if(z&&pe)return this._units="",this._units;var he=er(this.numerator),Te=er(this.denominator);return this._units=he+(pe?"":"/"+Te),this._units},toString:function(z,pe){var he;if(R(z))he=this.units(),pe=z;else if(se(z))he=z;else if(Oe(z))return this.toPrec(z).toString(pe);var Te=this.to(he);return((void 0!==pe?k(Te.scalar,pe):Te.scalar)+" "+Te.units()).trim()},format:function(z,pe){1===arguments.length&&"function"==typeof z&&(pe=z,z=void 0),pe=pe||ae.formatter;var he=this.to(z);return pe.call(this,he.scalar,he.units())}});var nn=new Zt;function er(z){var pe=nn.get(z);return pe||(pe=C(z,j)?"1":function(z){return z.reduce(function(he,Te){var Ze=he[Te];return Ze||he.push(Ze=he[Te]=[Te,0]),Ze[1]++,he},[]).map(function(he){return he[0]+(he[1]>1?he[1]:"")})}(function(z){for(var he,pe=[],Ze=0;Ze<z.length;Ze++)oe[he=z[Ze]]?(pe.push(K[he]+K[z[Ze+1]]),Ze++):pe.push(K[he]);return pe}(z)).join("*"),nn.set(z,pe),pe)}return ae.version="1.7.6",ae}()},2407:we=>{!function(){function se(V){for(var x=0,C=V.length-1,E=void 0,w=void 0,D=void 0,k=R(x,C);;){if(C<=x)return V[k];if(C==x+1)return V[x]>V[C]&&T(V,x,C),V[k];for(V[E=R(x,C)]>V[C]&&T(V,E,C),V[x]>V[C]&&T(V,x,C),V[E]>V[x]&&T(V,E,x),T(V,E,x+1),w=x+1,D=C;;){do{w++}while(V[x]>V[w]);do{D--}while(V[D]>V[x]);if(D<w)break;T(V,w,D)}T(V,x,D),D<=k&&(x=w),D>=k&&(C=D-1)}}var T=function(x,C,E){var w;return x[C]=(w=[x[E],x[C]])[0],x[E]=w[1],w},R=function(x,C){return~~((x+C)/2)};we.exports?we.exports=se:window.median=se}()},1301:we=>{"use strict";function T(R){this.value=R,this.parent=null,this.rank=0}we.exports=class{constructor(){this.nodes=new Map}add(V){var x=this.nodes.get(V);return x||(x=new T(V),this.nodes.set(V,x)),x}union(V,x){const C=this.find(V),E=this.find(x);C!==E&&(C.rank<E.rank?C.parent=E:C.rank>E.rank?E.parent=C:(E.parent=C,C.rank++))}find(V){for(var x=V;null!==x.parent;)x=x.parent;for(var C=V;null!==C.parent;){var E=C;C=C.parent,E.parent=x}return x}connected(V,x){return this.find(V)===this.find(x)}}},6965:(we,se,T)=>{"use strict";function R(x,C){let E=0;for(let w=0;w<x.length;w++)E+=(x[w]-C[w])*(x[w]-C[w]);return E}function V(x,C){return Math.sqrt(R(x,C))}T.r(se),T.d(se,{squaredEuclidean:()=>R,euclidean:()=>V})},3667:(we,se,T)=>{"use strict";var R=T(1382);we.exports={DEBUG:!1,ifft2DArray:function(x,C,E){var w=new Array(C*E),D=C/2,k=2*(E-1);R.init(D);for(var v={re:new Array(D),im:new Array(D)},M=0;M<E;M++){for(var O=D-1;O>=0;O--)v.re[O]=x[2*O*E+M],v.im[O]=x[(2*O+1)*E+M];for(R.bt(v.re,v.im),O=D-1;O>=0;O--)w[2*O*E+M]=v.re[O],w[(2*O+1)*E+M]=v.im[O]}var U=new Array(D*k);R.init(k);var P={re:new Array(k),im:new Array(k)},F=k*D;for(O=0;O<C;O+=2){for(P.re[0]=w[O*E],P.im[0]=w[(O+1)*E],M=1;M<E;M++)P.re[M]=w[O*E+M],P.im[M]=w[(O+1)*E+M],P.re[k-M]=w[O*E+M],P.im[k-M]=-w[(O+1)*E+M];R.bt(P.re,P.im);var j=O/2*k;for(M=k-1;M>=0;M--)U[j+M]=P.re[M]/F}return U},fft2DArray:function(x,C,E,w){Object.assign({},{inplace:!0});var k=E/2+1,v=2*C,M=new Array(v*k);R.init(E);for(var F,j,Q,oe,ue,O={re:new Array(E),im:new Array(E)},U={re:new Array(E),im:new Array(E)},P={re:new Array(E),im:new Array(E)},L=0;L<C/2;L++){O.re=x.slice(F=2*L*E,F+E),O.im=x.slice(F=(2*L+1)*E,F+E),R.fft1d(O.re,O.im),this.reconstructTwoRealFFT(O,U,P),j=4*L*k,Q=(4*L+1)*k,oe=(4*L+2)*k,ue=(4*L+3)*k;for(var B=k-1;B>=0;B--)M[j+B]=U.re[B],M[Q+B]=U.im[B],M[oe+B]=P.re[B],M[ue+B]=P.im[B]}U=null,P=null;var K=new Array(v*k);R.init(C);for(var J={re:new Array(C),im:new Array(C)},ye=k-1;ye>=0;ye--){for(L=C-1;L>=0;L--)J.re[L]=M[2*L*k+ye],J.im[L]=M[(2*L+1)*k+ye],isNaN(J.re[L])&&(J.re[L]=0),isNaN(J.im[L])&&(J.im[L]=0);for(R.fft1d(J.re,J.im),L=C-1;L>=0;L--)K[2*L*k+ye]=J.re[L],K[(2*L+1)*k+ye]=J.im[L]}return K},reconstructTwoRealFFT:function(x,C,E){var w=x.re.length;C.re[0]=x.re[0],C.im[0]=0,E.re[0]=x.im[0],E.im[0]=0;for(var D,k,v,M,O,U=w/2;U>0;U--)D=.5*(x.re[U]-x.re[O=w-U]),v=.5*(x.im[U]-x.im[O]),M=.5*(x.im[U]+x.im[O]),C.re[U]=k=.5*(x.re[U]+x.re[O]),C.im[U]=v,C.re[O]=k,C.im[O]=-v,E.re[U]=M,E.im[U]=-D,E.re[O]=M,E.im[O]=D},convolute2DI:function(x,C,E,w){for(var k,v=0;v<E/2;v++)for(var M=0;M<w;M++)k=x[2*v*w+M]*C[(2*v+1)*w+M]+x[(2*v+1)*w+M]*C[2*v*w+M],x[2*v*w+M]=x[2*v*w+M]*C[2*v*w+M]-x[(2*v+1)*w+M]*C[(2*v+1)*w+M],x[(2*v+1)*w+M]=k},convolute:function(x,C,E,w,D){for(var k=new Array(w*E),v=0;v<E*w;v++)k[v]=x[v];k=this.fft2DArray(k,E,w);var M=C.length,O=C[0].length,U=new Array(w*E);for(v=0;v<w*E;v++)U[v]=0;for(var P,j=Math.floor((M-1)/2),Q=Math.floor((O-1)/2),oe=0;oe<M;oe++){P=(oe-j+E)%E;for(var ue=0;ue<O;ue++)U[P*w+(ue-Q+w)%w]=C[oe][ue]}U=this.fft2DArray(U,E,w);var L=2*E,B=w/2+1;return this.convolute2DI(k,U,L,B),this.ifft2DArray(k,L,B)},toRadix2:function(x,C,E){var w,D,k,v,M=E,O=C;if(0===E||0!=(E&E-1)){for(M=0;E>>++M!=0;);M=1<<M}if(0===C||0!=(C&C-1)){for(O=0;C>>++O!=0;);O=1<<O}if(O==C&&M==E)return{data:x,rows:C,cols:E};var F=new Array(O*M),j=Math.floor((O-C)/2)-C,Q=Math.floor((M-E)/2)-E;for(w=0;w<O;w++)for(k=w*M,v=(w-j)%C*E,D=0;D<M;D++)F[k+D]=x[v+(D-Q)%E];return{data:F,rows:O,cols:M}},crop:function(x,C,E,w,D,k){if(C==w&&E==D)return x;Object.assign({},k);var P,F,j,Q,M=new Array(D*w),O=Math.floor((C-w)/2),U=Math.floor((E-D)/2);for(j=0;j<w;j++)for(P=j*D,F=(j+O)*E,Q=0;Q<D;Q++)M[P+Q]=x[F+(Q+U)];return M}}},1382:function(we,se){(function(){var R;(R=se).toString=function(){return"version 0.3.0, released 2013-03"};for(var x=0,C=null,E=null,w={init:function(v){if(0===v||0!=(v&v-1))throw new Error("init: radix-2 required");x=v,w._initArray(),w._makeBitReversalTable(),w._makeCosSinTable()},fft1d:function(v,M){w.fft(v,M,1)},ifft1d:function(v,M){var O=1/x;w.fft(v,M,-1);for(var U=0;U<x;U++)v[U]*=O,M[U]*=O},bt1d:function(v,M){w.fft(v,M,-1)},fft2d:function(v,M){for(var O=[],U=[],P=0,F=0;F<x;F++){P=F*x;for(var j=0;j<x;j++)O[j]=v[j+P],U[j]=M[j+P];w.fft1d(O,U);for(var Q=0;Q<x;Q++)v[Q+P]=O[Q],M[Q+P]=U[Q]}for(var oe=0;oe<x;oe++){for(var ue=0;ue<x;ue++)O[ue]=v[P=oe+ue*x],U[ue]=M[P];w.fft1d(O,U);for(var L=0;L<x;L++)v[P=oe+L*x]=O[L],M[P]=U[L]}},ifft2d:function(v,M){for(var O=[],U=[],P=0,F=0;F<x;F++){P=F*x;for(var j=0;j<x;j++)O[j]=v[j+P],U[j]=M[j+P];w.ifft1d(O,U);for(var Q=0;Q<x;Q++)v[Q+P]=O[Q],M[Q+P]=U[Q]}for(var oe=0;oe<x;oe++){for(var ue=0;ue<x;ue++)O[ue]=v[P=oe+ue*x],U[ue]=M[P];w.ifft1d(O,U);for(var L=0;L<x;L++)v[P=oe+L*x]=O[L],M[P]=U[L]}},fft:function(v,M,O){for(var U,P,F,j,Q,oe,ue,L,B,K=x>>2,J=0;J<x;J++)J<(j=C[J])&&(Q=v[J],v[J]=v[j],v[j]=Q,Q=M[J],M[J]=M[j],M[j]=Q);for(var ye=1;ye<x;ye<<=1){P=0,U=x/(ye<<1);for(var re=0;re<ye;re++){oe=E[P+K],ue=O*E[P];for(var le=re;le<x;le+=ye<<1)B=oe*M[F=le+ye]-ue*v[F],v[F]=v[le]-(L=oe*v[F]+ue*M[F]),v[le]+=L,M[F]=M[le]-B,M[le]+=B;P+=U}}},_initArray:function(){C="undefined"!=typeof Uint32Array?new Uint32Array(x):[],E="undefined"!=typeof Float64Array?new Float64Array(1.25*x):[]},_paddingZero:function(){},_makeBitReversalTable:function(){var v=0,M=0,O=0;for(C[0]=0;++v<x;){for(O=x>>1;O<=M;)M-=O,O>>=1;C[v]=M+=O}},_makeCosSinTable:function(){var v=x>>1,M=x>>2,O=x>>3,U=v+M,P=Math.sin(Math.PI/x),F=2*P*P,j=Math.sqrt(F*(2-F)),Q=E[M]=1,oe=E[0]=0;P=2*F;for(var ue=1;ue<O;ue++)F+=P*(Q-=F),j-=P*(oe+=j),E[ue]=oe,E[M-ue]=Q;0!==O&&(E[O]=Math.sqrt(.5));for(var L=0;L<M;L++)E[v-L]=E[L];for(var B=0;B<U;B++)E[B+v]=-E[B]}},D=["init","fft1d","ifft1d","fft2d","ifft2d"],k=0;k<D.length;k++)R[D[k]]=w[D[k]];return R.bt=w.bt1d,R.fft=w.fft1d,R.ifft=w.ifft1d,R}).call(this)},9205:(we,se,T)=>{"use strict";se.FFTUtils=T(3667),T(1382)},5812:(we,se,T)=>{"use strict";const{squaredEuclidean:R}=T(6965),V={sigma:1};we.exports=class{constructor(E){E=Object.assign({},V,E),this.sigma=E.sigma,this.divisor=2*E.sigma*E.sigma}compute(E,w){const D=R(E,w);return Math.exp(-D/this.divisor)}}},9137:we=>{"use strict";const se={degree:1,constant:1,scale:1};we.exports=class{constructor(V){V=Object.assign({},se,V),this.degree=V.degree,this.constant=V.constant,this.scale=V.scale}compute(V,x){for(var C=0,E=0;E<V.length;E++)C+=V[E]*x[E];return Math.pow(this.scale*C+this.constant,this.degree)}}},1076:we=>{"use strict";const se={alpha:.01,constant:-Math.E};we.exports=class{constructor(V){V=Object.assign({},se,V),this.alpha=V.alpha,this.constant=V.constant}compute(V,x){for(var C=0,E=0;E<V.length;E++)C+=V[E]*x[E];return Math.tanh(this.alpha*C+this.constant)}}},4582:(we,se,T)=>{"use strict";const{Matrix:R,MatrixTransposeView:V}=T(3544),x=T(5812),C=T(9137),E=T(1076),w=T(3274),D=T(6221),k=T(9289),v=T(7952),P={gaussian:x,rbf:x,polynomial:C,poly:C,anova:w,cauchy:D,exponential:k,histogram:v,min:v,laplacian:T(7031),multiquadratic:T(2884),rational:T(3585),sigmoid:E,mlp:E};we.exports=class{constructor(Q,oe){if(this.kernelType=Q,"linear"!==Q)if("string"==typeof Q){Q=Q.toLowerCase();var ue=P[Q];if(!ue)throw new Error(`unsupported kernel type: ${Q}`);this.kernelFunction=new ue(oe)}else{if("object"!=typeof Q||"function"!=typeof Q.compute)throw new TypeError("first argument must be a valid kernel type or instance");this.kernelFunction=Q}}compute(Q,oe){if(Q=R.checkMatrix(Q),oe=void 0===oe?Q:R.checkMatrix(oe),"linear"===this.kernelType)return Q.mmul(new V(oe));const ue=new R(Q.rows,oe.rows);if(Q===oe)for(let L=0;L<Q.rows;L++)for(let B=L;B<Q.rows;B++){const K=this.kernelFunction.compute(Q.getRow(L),Q.getRow(B));ue.set(L,B,K),ue.set(B,L,K)}else for(let L=0;L<Q.rows;L++)for(let B=0;B<oe.rows;B++)ue.set(L,B,this.kernelFunction.compute(Q.getRow(L),oe.getRow(B)));return ue}}},3274:we=>{"use strict";const se={sigma:1,degree:1};we.exports=class{constructor(V){V=Object.assign({},se,V),this.sigma=V.sigma,this.degree=V.degree}compute(V,x){for(var C=0,E=Math.min(V.length,x.length),w=1;w<=E;++w)C+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(V[w-1],w)-Math.pow(x[w-1],w),2)),this.degree);return C}}},6221:(we,se,T)=>{"use strict";const{squaredEuclidean:R}=T(6965),V={sigma:1};we.exports=class{constructor(E){E=Object.assign({},V,E),this.sigma=E.sigma}compute(E,w){return 1/(1+R(E,w)/(this.sigma*this.sigma))}}},9289:(we,se,T)=>{"use strict";const{euclidean:R}=T(6965),V={sigma:1};we.exports=class{constructor(E){E=Object.assign({},V,E),this.sigma=E.sigma,this.divisor=2*E.sigma*E.sigma}compute(E,w){const D=R(E,w);return Math.exp(-D/this.divisor)}}},7952:we=>{"use strict";we.exports=class{compute(R,V){for(var x=Math.min(R.length,V.length),C=0,E=0;E<x;++E)C+=Math.min(R[E],V[E]);return C}}},7031:(we,se,T)=>{"use strict";const{euclidean:R}=T(6965),V={sigma:1};we.exports=class{constructor(E){E=Object.assign({},V,E),this.sigma=E.sigma}compute(E,w){const D=R(E,w);return Math.exp(-D/this.sigma)}}},2884:(we,se,T)=>{"use strict";const{squaredEuclidean:R}=T(6965),V={constant:1};we.exports=class{constructor(E){E=Object.assign({},V,E),this.constant=E.constant}compute(E,w){return Math.sqrt(R(E,w)+this.constant*this.constant)}}},3585:(we,se,T)=>{"use strict";const{squaredEuclidean:R}=T(6965),V={constant:1};we.exports=class{constructor(E){E=Object.assign({},V,E),this.constant=E.constant}compute(E,w){const D=R(E,w);return 1-D/(D+this.constant)}}},6613:(we,se,T)=>{var R=T(9205).FFTUtils;function E(w){var k,v,D=w;if("number"!=typeof w[0]){k=w.length,v=w[0].length,D=new Array(k*v);for(var M=0;M<k;M++)for(var O=0;O<v;O++)D[M*v+O]=w[M][O]}else{var U=Math.sqrt(w.length);Number.isInteger(U)&&(k=U,v=U)}return{data:D,rows:k,cols:v}}we.exports={fft:function(w,D,k){var U,P,v=E(w),M=v.data,O=Object.assign({normalize:!1,divisor:1,rows:v.rows,cols:v.cols},k);if(!O.rows||!O.cols)throw new Error("Invalid number of rows or columns "+U+" "+P);U=O.rows,P=O.cols;var j,Q,F=O.divisor,oe=D.length,ue=D[0].length;if(O.normalize)for(F=0,j=0;j<oe;j++)for(Q=0;Q<ue;Q++)F+=D[j][Q];if(0===F)throw new RangeError("convolution: The divisor is equal to zero");var L=R.toRadix2(M,U,P),B=R.convolute(L.data,D,L.rows,L.cols);if(B=R.crop(B,L.rows,L.cols,U,P),0!=F&&1!=F)for(j=0;j<B.length;j++)B[j]/=F;return B},direct:function(w,D,k){var U,P,v=E(w),M=v.data,O=Object.assign({normalize:!1,divisor:1,rows:v.rows,cols:v.cols},k);if(!O.rows||!O.cols)throw new Error("Invalid number of rows or columns "+U+" "+P);U=O.rows,P=O.cols;var oe,ue,L,B,J,F=O.divisor,j=D.length,Q=D[0].length;if(O.normalize)for(F=0,oe=0;oe<j;oe++)for(ue=0;ue<Q;ue++)F+=D[oe][ue];if(0===F)throw new RangeError("convolution: The divisor is equal to zero");var te=new Array(U*P),me=Math.floor(j/2),xe=Math.floor(Q/2);for(B=0;B<U;B++)for(L=0;L<P;L++){for(J=0,ue=0;ue<j;ue++)for(oe=0;oe<Q;oe++)J+=M[(B+ue-me+U)%U*P+(L+oe-xe+P)%P]*D[j-ue-1][Q-oe-1];te[B*P+L]=J/F}return te},kernelFactory:{LoG:function(w,D,k){var v=1e3;k&&k.factor&&(v=k.factor);var O,U,P,F,M=new Array(D);v*=-1;var Q=(D-1)/2,oe=2*w*w;for(O=0;O<D;O++)for(M[O]=new Array(D),F=(O-Q)*(O-Q),U=0;U<D;U++)P=-((U-Q)*(U-Q)+F)/oe,M[O][U]=Math.round(v*(1+P)*Math.exp(P));return M}},matrix2Array:E}},6626:(we,se,T)=>{"use strict";T.d(se,{Z:()=>x});var R=T(9690),V=T(6991);class x{constructor(E){let O,U,P,F,j,Q,oe,ue,L,w=(E=V.Z.checkMatrix(E)).clone(),D=w.rows,k=w.columns,v=new Float64Array(D),M=1;for(O=0;O<D;O++)v[O]=O;for(ue=new Float64Array(D),U=0;U<k;U++){for(O=0;O<D;O++)ue[O]=w.get(O,U);for(O=0;O<D;O++){for(L=Math.min(O,U),j=0,P=0;P<L;P++)j+=w.get(O,P)*ue[P];ue[O]-=j,w.set(O,U,ue[O])}for(F=U,O=U+1;O<D;O++)Math.abs(ue[O])>Math.abs(ue[F])&&(F=O);if(F!==U){for(P=0;P<k;P++)Q=w.get(F,P),w.set(F,P,w.get(U,P)),w.set(U,P,Q);oe=v[F],v[F]=v[U],v[U]=oe,M=-M}if(U<D&&0!==w.get(U,U))for(O=U+1;O<D;O++)w.set(O,U,w.get(O,U)/w.get(U,U))}this.LU=w,this.pivotVector=v,this.pivotSign=M}isSingular(){let E=this.LU,w=E.columns;for(let D=0;D<w;D++)if(0===E.get(D,D))return!0;return!1}solve(E){E=R.Z.checkMatrix(E);let w=this.LU;if(w.rows!==E.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let O,U,P,k=E.columns,v=E.subMatrixRow(this.pivotVector,0,k-1),M=w.columns;for(P=0;P<M;P++)for(O=P+1;O<M;O++)for(U=0;U<k;U++)v.set(O,U,v.get(O,U)-v.get(P,U)*w.get(O,P));for(P=M-1;P>=0;P--){for(U=0;U<k;U++)v.set(P,U,v.get(P,U)/w.get(P,P));for(O=0;O<P;O++)for(U=0;U<k;U++)v.set(O,U,v.get(O,U)-v.get(P,U)*w.get(O,P))}return v}get determinant(){let E=this.LU;if(!E.isSquare())throw new Error("Matrix must be square");let w=this.pivotSign,D=E.columns;for(let k=0;k<D;k++)w*=E.get(k,k);return w}get lowerTriangularMatrix(){let E=this.LU,w=E.rows,D=E.columns,k=new R.Z(w,D);for(let v=0;v<w;v++)for(let M=0;M<D;M++)k.set(v,M,v>M?E.get(v,M):v===M?1:0);return k}get upperTriangularMatrix(){let E=this.LU,w=E.rows,D=E.columns,k=new R.Z(w,D);for(let v=0;v<w;v++)for(let M=0;M<D;M++)k.set(v,M,v<=M?E.get(v,M):0);return k}get pivotPermutationVector(){return Array.from(this.pivotVector)}}},7235:(we,se,T)=>{"use strict";T.d(se,{Z:()=>C});var R=T(9690),V=T(6991),x=T(8545);class C{constructor(w){let O,U,P,F,D=(w=V.Z.checkMatrix(w)).clone(),k=w.rows,v=w.columns,M=new Float64Array(v);for(P=0;P<v;P++){let j=0;for(O=P;O<k;O++)j=(0,x.G)(j,D.get(O,P));if(0!==j){for(D.get(P,P)<0&&(j=-j),O=P;O<k;O++)D.set(O,P,D.get(O,P)/j);for(D.set(P,P,D.get(P,P)+1),U=P+1;U<v;U++){for(F=0,O=P;O<k;O++)F+=D.get(O,P)*D.get(O,U);for(F=-F/D.get(P,P),O=P;O<k;O++)D.set(O,U,D.get(O,U)+F*D.get(O,P))}}M[P]=-j}this.QR=D,this.Rdiag=M}solve(w){w=R.Z.checkMatrix(w);let D=this.QR,k=D.rows;if(w.rows!==k)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let U,P,F,j,v=w.columns,M=w.clone(),O=D.columns;for(F=0;F<O;F++)for(P=0;P<v;P++){for(j=0,U=F;U<k;U++)j+=D.get(U,F)*M.get(U,P);for(j=-j/D.get(F,F),U=F;U<k;U++)M.set(U,P,M.get(U,P)+j*D.get(U,F))}for(F=O-1;F>=0;F--){for(P=0;P<v;P++)M.set(F,P,M.get(F,P)/this.Rdiag[F]);for(U=0;U<F;U++)for(P=0;P<v;P++)M.set(U,P,M.get(U,P)-M.get(F,P)*D.get(U,F))}return M.subMatrix(0,O-1,0,v-1)}isFullRank(){let w=this.QR.columns;for(let D=0;D<w;D++)if(0===this.Rdiag[D])return!1;return!0}get upperTriangularMatrix(){let v,M,w=this.QR,D=w.columns,k=new R.Z(D,D);for(v=0;v<D;v++)for(M=0;M<D;M++)k.set(v,M,v<M?w.get(v,M):v===M?this.Rdiag[v]:0);return k}get orthogonalMatrix(){let M,O,U,P,w=this.QR,D=w.rows,k=w.columns,v=new R.Z(D,k);for(U=k-1;U>=0;U--){for(M=0;M<D;M++)v.set(M,U,0);for(v.set(U,U,1),O=U;O<k;O++)if(0!==w.get(U,U)){for(P=0,M=U;M<D;M++)P+=w.get(M,U)*v.get(M,O);for(P=-P/w.get(U,U),M=U;M<D;M++)v.set(M,O,v.get(M,O)+P*w.get(M,U))}}return v}}},9007:(we,se,T)=>{"use strict";T.d(se,{Z:()=>C});var R=T(9690),V=T(6991),x=T(8545);class C{constructor(w,D={}){if((w=V.Z.checkMatrix(w)).isEmpty())throw new Error("Matrix must be non-empty");let k=w.rows,v=w.columns;const{computeLeftSingularVectors:M=!0,computeRightSingularVectors:O=!0,autoTranspose:U=!1}=D;let Q,P=Boolean(M),F=Boolean(O),j=!1;if(k<v)if(U){Q=w.transpose(),k=Q.rows,v=Q.columns,j=!0;let ee=P;P=F,F=ee}else Q=w.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else Q=w.clone();let oe=Math.min(k,v),ue=Math.min(k+1,v),L=new Float64Array(ue),B=new R.Z(k,oe),K=new R.Z(v,v),J=new Float64Array(v),ye=new Float64Array(k),re=new Float64Array(ue);for(let ee=0;ee<ue;ee++)re[ee]=ee;let le=Math.min(k-1,v),te=Math.max(0,Math.min(v-2,k)),me=Math.max(le,te);for(let ee=0;ee<me;ee++){if(ee<le){L[ee]=0;for(let _e=ee;_e<k;_e++)L[ee]=(0,x.G)(L[ee],Q.get(_e,ee));if(0!==L[ee]){Q.get(ee,ee)<0&&(L[ee]=-L[ee]);for(let _e=ee;_e<k;_e++)Q.set(_e,ee,Q.get(_e,ee)/L[ee]);Q.set(ee,ee,Q.get(ee,ee)+1)}L[ee]=-L[ee]}for(let _e=ee+1;_e<v;_e++){if(ee<le&&0!==L[ee]){let ke=0;for(let fe=ee;fe<k;fe++)ke+=Q.get(fe,ee)*Q.get(fe,_e);ke=-ke/Q.get(ee,ee);for(let fe=ee;fe<k;fe++)Q.set(fe,_e,Q.get(fe,_e)+ke*Q.get(fe,ee))}J[_e]=Q.get(ee,_e)}if(P&&ee<le)for(let _e=ee;_e<k;_e++)B.set(_e,ee,Q.get(_e,ee));if(ee<te){J[ee]=0;for(let _e=ee+1;_e<v;_e++)J[ee]=(0,x.G)(J[ee],J[_e]);if(0!==J[ee]){J[ee+1]<0&&(J[ee]=0-J[ee]);for(let _e=ee+1;_e<v;_e++)J[_e]/=J[ee];J[ee+1]+=1}if(J[ee]=-J[ee],ee+1<k&&0!==J[ee]){for(let _e=ee+1;_e<k;_e++)ye[_e]=0;for(let _e=ee+1;_e<k;_e++)for(let ke=ee+1;ke<v;ke++)ye[_e]+=J[ke]*Q.get(_e,ke);for(let _e=ee+1;_e<v;_e++){let ke=-J[_e]/J[ee+1];for(let fe=ee+1;fe<k;fe++)Q.set(fe,_e,Q.get(fe,_e)+ke*ye[fe])}}if(F)for(let _e=ee+1;_e<v;_e++)K.set(_e,ee,J[_e])}}let xe=Math.min(v,k+1);if(le<v&&(L[le]=Q.get(le,le)),k<xe&&(L[xe-1]=0),te+1<xe&&(J[te]=Q.get(te,xe-1)),J[xe-1]=0,P){for(let ee=le;ee<oe;ee++){for(let _e=0;_e<k;_e++)B.set(_e,ee,0);B.set(ee,ee,1)}for(let ee=le-1;ee>=0;ee--)if(0!==L[ee]){for(let _e=ee+1;_e<oe;_e++){let ke=0;for(let fe=ee;fe<k;fe++)ke+=B.get(fe,ee)*B.get(fe,_e);ke=-ke/B.get(ee,ee);for(let fe=ee;fe<k;fe++)B.set(fe,_e,B.get(fe,_e)+ke*B.get(fe,ee))}for(let _e=ee;_e<k;_e++)B.set(_e,ee,-B.get(_e,ee));B.set(ee,ee,1+B.get(ee,ee));for(let _e=0;_e<ee-1;_e++)B.set(_e,ee,0)}else{for(let _e=0;_e<k;_e++)B.set(_e,ee,0);B.set(ee,ee,1)}}if(F)for(let ee=v-1;ee>=0;ee--){if(ee<te&&0!==J[ee])for(let _e=ee+1;_e<v;_e++){let ke=0;for(let fe=ee+1;fe<v;fe++)ke+=K.get(fe,ee)*K.get(fe,_e);ke=-ke/K.get(ee+1,ee);for(let fe=ee+1;fe<v;fe++)K.set(fe,_e,K.get(fe,_e)+ke*K.get(fe,ee))}for(let _e=0;_e<v;_e++)K.set(_e,ee,0);K.set(ee,ee,1)}let tt=xe-1,qe=0,pt=Number.EPSILON;for(;xe>0;){let ee,_e;for(ee=xe-2;ee>=-1&&-1!==ee;ee--){const ke=Number.MIN_VALUE+pt*Math.abs(L[ee]+Math.abs(L[ee+1]));if(Math.abs(J[ee])<=ke||Number.isNaN(J[ee])){J[ee]=0;break}}if(ee===xe-2)_e=4;else{let ke;for(ke=xe-1;ke>=ee&&ke!==ee;ke--){let fe=(ke!==xe?Math.abs(J[ke]):0)+(ke!==ee+1?Math.abs(J[ke-1]):0);if(Math.abs(L[ke])<=pt*fe){L[ke]=0;break}}ke===ee?_e=3:ke===xe-1?_e=1:(_e=2,ee=ke)}switch(ee++,_e){case 1:{let ke=J[xe-2];J[xe-2]=0;for(let fe=xe-2;fe>=ee;fe--){let I=(0,x.G)(L[fe],ke),_=L[fe]/I,g=ke/I;if(L[fe]=I,fe!==ee&&(ke=-g*J[fe-1],J[fe-1]=_*J[fe-1]),F)for(let h=0;h<v;h++)I=_*K.get(h,fe)+g*K.get(h,xe-1),K.set(h,xe-1,-g*K.get(h,fe)+_*K.get(h,xe-1)),K.set(h,fe,I)}break}case 2:{let ke=J[ee-1];J[ee-1]=0;for(let fe=ee;fe<xe;fe++){let I=(0,x.G)(L[fe],ke),_=L[fe]/I,g=ke/I;if(L[fe]=I,ke=-g*J[fe],J[fe]=_*J[fe],P)for(let h=0;h<k;h++)I=_*B.get(h,fe)+g*B.get(h,ee-1),B.set(h,ee-1,-g*B.get(h,fe)+_*B.get(h,ee-1)),B.set(h,fe,I)}break}case 3:{const ke=Math.max(Math.abs(L[xe-1]),Math.abs(L[xe-2]),Math.abs(J[xe-2]),Math.abs(L[ee]),Math.abs(J[ee])),fe=L[xe-1]/ke,I=L[xe-2]/ke,_=J[xe-2]/ke,g=L[ee]/ke,h=J[ee]/ke,m=((I+fe)*(I-fe)+_*_)/2,y=fe*_*(fe*_);let Y=0;(0!==m||0!==y)&&(Y=m<0?0-Math.sqrt(m*m+y):Math.sqrt(m*m+y),Y=y/(m+Y));let $=(g+fe)*(g-fe)+Y,X=g*h;for(let W=ee;W<xe-1;W++){let ce=(0,x.G)($,X);0===ce&&(ce=Number.MIN_VALUE);let ne=$/ce,de=X/ce;if(W!==ee&&(J[W-1]=ce),$=ne*L[W]+de*J[W],J[W]=ne*J[W]-de*L[W],X=de*L[W+1],L[W+1]=ne*L[W+1],F)for(let ve=0;ve<v;ve++)ce=ne*K.get(ve,W)+de*K.get(ve,W+1),K.set(ve,W+1,-de*K.get(ve,W)+ne*K.get(ve,W+1)),K.set(ve,W,ce);if(ce=(0,x.G)($,X),0===ce&&(ce=Number.MIN_VALUE),ne=$/ce,de=X/ce,L[W]=ce,$=ne*J[W]+de*L[W+1],L[W+1]=-de*J[W]+ne*L[W+1],X=de*J[W+1],J[W+1]=ne*J[W+1],P&&W<k-1)for(let ve=0;ve<k;ve++)ce=ne*B.get(ve,W)+de*B.get(ve,W+1),B.set(ve,W+1,-de*B.get(ve,W)+ne*B.get(ve,W+1)),B.set(ve,W,ce)}J[xe-2]=$,qe+=1;break}case 4:if(L[ee]<=0&&(L[ee]=L[ee]<0?-L[ee]:0,F))for(let ke=0;ke<=tt;ke++)K.set(ke,ee,-K.get(ke,ee));for(;ee<tt&&!(L[ee]>=L[ee+1]);){let ke=L[ee];if(L[ee]=L[ee+1],L[ee+1]=ke,F&&ee<v-1)for(let fe=0;fe<v;fe++)ke=K.get(fe,ee+1),K.set(fe,ee+1,K.get(fe,ee)),K.set(fe,ee,ke);if(P&&ee<k-1)for(let fe=0;fe<k;fe++)ke=B.get(fe,ee+1),B.set(fe,ee+1,B.get(fe,ee)),B.set(fe,ee,ke);ee++}qe=0,xe--}}if(j){let ee=K;K=B,B=ee}this.m=k,this.n=v,this.s=L,this.U=B,this.V=K}solve(w){let D=w,k=this.threshold,v=this.s.length,M=R.Z.zeros(v,v);for(let oe=0;oe<v;oe++)Math.abs(this.s[oe])<=k?M.set(oe,oe,0):M.set(oe,oe,1/this.s[oe]);let O=this.U,U=this.rightSingularVectors,P=U.mmul(M),F=U.rows,j=O.rows,Q=R.Z.zeros(F,j);for(let oe=0;oe<F;oe++)for(let ue=0;ue<j;ue++){let L=0;for(let B=0;B<v;B++)L+=P.get(oe,B)*O.get(ue,B);Q.set(oe,ue,L)}return Q.mmul(D)}solveForDiagonal(w){return this.solve(R.Z.diag(w))}inverse(){let w=this.V,D=this.threshold,k=w.rows,v=w.columns,M=new R.Z(k,this.s.length);for(let j=0;j<k;j++)for(let Q=0;Q<v;Q++)Math.abs(this.s[Q])>D&&M.set(j,Q,w.get(j,Q)/this.s[Q]);let O=this.U,U=O.rows,P=O.columns,F=new R.Z(k,U);for(let j=0;j<k;j++)for(let Q=0;Q<U;Q++){let oe=0;for(let ue=0;ue<P;ue++)oe+=M.get(j,ue)*O.get(Q,ue);F.set(j,Q,oe)}return F}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let w=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,D=0,k=this.s;for(let v=0,M=k.length;v<M;v++)k[v]>w&&D++;return D}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return R.Z.diag(this.s)}}},8545:(we,se,T)=>{"use strict";function R(V,x){let C=0;return Math.abs(V)>Math.abs(x)?(C=x/V,Math.abs(V)*Math.sqrt(1+C*C)):0!==x?(C=V/x,Math.abs(x)*Math.sqrt(1+C*C)):0}T.d(se,{G:()=>R})},565:(we,se,T)=>{"use strict";T.d(se,{S:()=>w,F:()=>D});var R=T(6626),V=T(7235),x=T(9007),C=T(9690),E=T(6991);function w(k,v=!1){return k=E.Z.checkMatrix(k),v?new x.Z(k).inverse():D(k,C.Z.eye(k.rows))}function D(k,v,M=!1){return k=E.Z.checkMatrix(k),v=E.Z.checkMatrix(v),M?new x.Z(k).solve(v):k.isSquare()?new R.Z(k).solve(v):new V.Z(k).solve(v)}},3544:(we,se,T)=>{"use strict";T.r(se),T.d(se,{AbstractMatrix:()=>R.X,CHO:()=>_e,CholeskyDecomposition:()=>_e,EVD:()=>me,EigenvalueDecomposition:()=>me,LU:()=>oe.Z,LuDecomposition:()=>oe.Z,Matrix:()=>R.Z,MatrixColumnSelectionView:()=>E,MatrixColumnView:()=>C,MatrixFlipColumnView:()=>w,MatrixFlipRowView:()=>D,MatrixRowSelectionView:()=>v,MatrixRowView:()=>k,MatrixSelectionView:()=>M,MatrixSubView:()=>O,MatrixTransposeView:()=>U.Z,NIPALS:()=>fe,Nipals:()=>fe,QR:()=>ke.Z,QrDecomposition:()=>ke.Z,SVD:()=>L.Z,SingularValueDecomposition:()=>L.Z,WrapperMatrix1D:()=>P,WrapperMatrix2D:()=>F.Z,correlation:()=>le,covariance:()=>re,default:()=>R.Z,determinant:()=>ue,inverse:()=>Q.S,linearDependencies:()=>J,pseudoInverse:()=>ye,solve:()=>Q.F,wrap:()=>j});var R=T(9690),V=T(1501),x=T(7568);class C extends x.Z{constructor(_,g){(0,V.bp)(_,g),super(_,_.rows,1),this.column=g}set(_,g,h){return this.matrix.set(_,this.column,h),this}get(_){return this.matrix.get(_,this.column)}}class E extends x.Z{constructor(_,g){g=(0,V.g)(_,g),super(_,_.rows,g.length),this.columnIndices=g}set(_,g,h){return this.matrix.set(_,this.columnIndices[g],h),this}get(_,g){return this.matrix.get(_,this.columnIndices[g])}}class w extends x.Z{constructor(_){super(_,_.rows,_.columns)}set(_,g,h){return this.matrix.set(_,this.columns-g-1,h),this}get(_,g){return this.matrix.get(_,this.columns-g-1)}}class D extends x.Z{constructor(_){super(_,_.rows,_.columns)}set(_,g,h){return this.matrix.set(this.rows-_-1,g,h),this}get(_,g){return this.matrix.get(this.rows-_-1,g)}}class k extends x.Z{constructor(_,g){(0,V.zb)(_,g),super(_,1,_.columns),this.row=g}set(_,g,h){return this.matrix.set(this.row,g,h),this}get(_,g){return this.matrix.get(this.row,g)}}class v extends x.Z{constructor(_,g){super(_,(g=(0,V.ZR)(_,g)).length,_.columns),this.rowIndices=g}set(_,g,h){return this.matrix.set(this.rowIndices[_],g,h),this}get(_,g){return this.matrix.get(this.rowIndices[_],g)}}class M extends x.Z{constructor(_,g,h){let m=(0,V.N2)(_,g,h);super(_,m.row.length,m.column.length),this.rowIndices=m.row,this.columnIndices=m.column}set(_,g,h){return this.matrix.set(this.rowIndices[_],this.columnIndices[g],h),this}get(_,g){return this.matrix.get(this.rowIndices[_],this.columnIndices[g])}}class O extends x.Z{constructor(_,g,h,m,y){(0,V.J5)(_,g,h,m,y),super(_,h-g+1,y-m+1),this.startRow=g,this.startColumn=m}set(_,g,h){return this.matrix.set(this.startRow+_,this.startColumn+g,h),this}get(_,g){return this.matrix.get(this.startRow+_,this.startColumn+g)}}var U=T(4395);class P extends R.X{constructor(_,g={}){const{rows:h=1}=g;if(_.length%h!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=h,this.columns=_.length/h,this.data=_}set(_,g,h){let m=this._calculateIndex(_,g);return this.data[m]=h,this}get(_,g){let h=this._calculateIndex(_,g);return this.data[h]}_calculateIndex(_,g){return _*this.columns+g}}var F=T(6991);function j(I,_){if(Array.isArray(I))return I[0]&&Array.isArray(I[0])?new F.Z(I):new P(I,_);throw new Error("the argument is not an array")}var Q=T(565),oe=T(6626);function ue(I){if((I=R.Z.checkMatrix(I)).isSquare()){if(0===I.columns)return 1;let _,g,h,m;if(2===I.columns)return _=I.get(0,0),g=I.get(0,1),h=I.get(1,0),m=I.get(1,1),_*m-g*h;if(3===I.columns){let y,Y,$;return y=new M(I,[1,2],[1,2]),Y=new M(I,[1,2],[0,2]),$=new M(I,[1,2],[0,1]),_=I.get(0,0),g=I.get(0,1),h=I.get(0,2),_*ue(y)-g*ue(Y)+h*ue($)}return new oe.Z(I).determinant}throw Error("determinant can only be calculated for a square matrix")}var L=T(9007);function B(I,_){let g=[];for(let h=0;h<I;h++)h!==_&&g.push(h);return g}function K(I,_,g,h=1e-9,m=1e-9){if(I>m)return new Array(_.rows+1).fill(0);{let y=_.addRow(g,[0]);for(let Y=0;Y<y.rows;Y++)Math.abs(y.get(Y,0))<h&&y.set(Y,0,0);return y.to1DArray()}}function J(I,_={}){const{thresholdValue:g=1e-9,thresholdError:h=1e-9}=_;let m=(I=R.Z.checkMatrix(I)).rows,y=new R.Z(m,m);for(let Y=0;Y<m;Y++){let $=R.Z.columnVector(I.getRow(Y)),X=I.subMatrixRow(B(m,Y)).transpose(),ce=new L.Z(X).solve($),ne=R.Z.sub($,X.mmul(ce)).abs().max();y.setRow(Y,K(ne,ce,Y,g,h))}return y}function ye(I,_=Number.EPSILON){if((I=R.Z.checkMatrix(I)).isEmpty())return I.transpose();let g=new L.Z(I,{autoTranspose:!0}),h=g.leftSingularVectors,m=g.rightSingularVectors,y=g.diagonal;for(let Y=0;Y<y.length;Y++)y[Y]=Math.abs(y[Y])>_?1/y[Y]:0;return m.mmul(R.Z.diag(y).mmul(h.transpose()))}function re(I,_=I,g={}){I=new R.Z(I);let h=!1;if("object"!=typeof _||R.Z.isMatrix(_)||Array.isArray(_)?_=new R.Z(_):(g=_,_=I,h=!0),I.rows!==_.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:m=!0}=g;m&&(I=I.center("column"),h||(_=_.center("column")));const y=I.transpose().mmul(_);for(let Y=0;Y<y.rows;Y++)for(let $=0;$<y.columns;$++)y.set(Y,$,y.get(Y,$)*(1/(I.rows-1)));return y}function le(I,_=I,g={}){I=new R.Z(I);let h=!1;if("object"!=typeof _||R.Z.isMatrix(_)||Array.isArray(_)?_=new R.Z(_):(g=_,_=I,h=!0),I.rows!==_.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:m=!0,scale:y=!0}=g;m&&(I.center("column"),h||_.center("column")),y&&(I.scale("column"),h||_.scale("column"));const Y=I.standardDeviation("column",{unbiased:!0}),$=h?Y:_.standardDeviation("column",{unbiased:!0}),X=I.transpose().mmul(_);for(let W=0;W<X.rows;W++)for(let ce=0;ce<X.columns;ce++)X.set(W,ce,X.get(W,ce)*(1/(Y[W]*$[ce]))*(1/(I.rows-1)));return X}var te=T(8545);class me{constructor(_,g={}){const{assumeSymmetric:h=!1}=g;if(!(_=F.Z.checkMatrix(_)).isSquare())throw new Error("Matrix is not a square matrix");if(_.isEmpty())throw new Error("Matrix must be non-empty");let W,ce,m=_.columns,y=new R.Z(m,m),Y=new Float64Array(m),$=new Float64Array(m),X=_,ne=!1;if(ne=!!h||_.isSymmetric(),ne){for(W=0;W<m;W++)for(ce=0;ce<m;ce++)y.set(W,ce,X.get(W,ce));(function(I,_,g,h){let m,y,Y,$,X,W,ce,ne;for(X=0;X<I;X++)g[X]=h.get(I-1,X);for($=I-1;$>0;$--){for(ne=0,Y=0,W=0;W<$;W++)ne+=Math.abs(g[W]);if(0===ne)for(_[$]=g[$-1],X=0;X<$;X++)g[X]=h.get($-1,X),h.set($,X,0),h.set(X,$,0);else{for(W=0;W<$;W++)g[W]/=ne,Y+=g[W]*g[W];for(m=g[$-1],y=Math.sqrt(Y),m>0&&(y=-y),_[$]=ne*y,Y-=m*y,g[$-1]=m-y,X=0;X<$;X++)_[X]=0;for(X=0;X<$;X++){for(m=g[X],h.set(X,$,m),y=_[X]+h.get(X,X)*m,W=X+1;W<=$-1;W++)y+=h.get(W,X)*g[W],_[W]+=h.get(W,X)*m;_[X]=y}for(m=0,X=0;X<$;X++)_[X]/=Y,m+=_[X]*g[X];for(ce=m/(Y+Y),X=0;X<$;X++)_[X]-=ce*g[X];for(X=0;X<$;X++){for(m=g[X],y=_[X],W=X;W<=$-1;W++)h.set(W,X,h.get(W,X)-(m*_[W]+y*g[W]));g[X]=h.get($-1,X),h.set($,X,0)}}g[$]=Y}for($=0;$<I-1;$++){if(h.set(I-1,$,h.get($,$)),h.set($,$,1),Y=g[$+1],0!==Y){for(W=0;W<=$;W++)g[W]=h.get(W,$+1)/Y;for(X=0;X<=$;X++){for(y=0,W=0;W<=$;W++)y+=h.get(W,$+1)*h.get(W,X);for(W=0;W<=$;W++)h.set(W,X,h.get(W,X)-y*g[W])}}for(W=0;W<=$;W++)h.set(W,$+1,0)}for(X=0;X<I;X++)g[X]=h.get(I-1,X),h.set(I-1,X,0);h.set(I-1,I-1,1),_[0]=0})(m,$,Y,y),function(I,_,g,h){let m,y,Y,$,X,W,ce,ne,de,ve,Se,Me,Ve,be,Pe,Oe,ae;for(Y=1;Y<I;Y++)_[Y-1]=_[Y];_[I-1]=0;let Ue=0,He=0,Ye=Number.EPSILON;for(W=0;W<I;W++){for(He=Math.max(He,Math.abs(g[W])+Math.abs(_[W])),ce=W;ce<I&&!(Math.abs(_[ce])<=Ye*He);)ce++;if(ce>W){ae=0;do{for(ae+=1,m=g[W],ne=(g[W+1]-m)/(2*_[W]),de=(0,te.G)(ne,1),ne<0&&(de=-de),g[W]=_[W]/(ne+de),g[W+1]=_[W]*(ne+de),ve=g[W+1],y=m-g[W],Y=W+2;Y<I;Y++)g[Y]-=y;for(Ue+=y,ne=g[ce],Se=1,Me=Se,Ve=Se,be=_[W+1],Pe=0,Oe=0,Y=ce-1;Y>=W;Y--)for(Ve=Me,Me=Se,Oe=Pe,m=Se*_[Y],y=Se*ne,de=(0,te.G)(ne,_[Y]),_[Y+1]=Pe*de,Pe=_[Y]/de,Se=ne/de,ne=Se*g[Y]-Pe*m,g[Y+1]=y+Pe*(Se*m+Pe*g[Y]),X=0;X<I;X++)y=h.get(X,Y+1),h.set(X,Y+1,Pe*h.get(X,Y)+Se*y),h.set(X,Y,Se*h.get(X,Y)-Pe*y);ne=-Pe*Oe*Ve*be*_[W]/ve,_[W]=Pe*ne,g[W]=Se*ne}while(Math.abs(_[W])>Ye*He)}g[W]=g[W]+Ue,_[W]=0}for(Y=0;Y<I-1;Y++){for(X=Y,ne=g[Y],$=Y+1;$<I;$++)g[$]<ne&&(X=$,ne=g[$]);if(X!==Y)for(g[X]=g[Y],g[Y]=ne,$=0;$<I;$++)ne=h.get($,Y),h.set($,Y,h.get($,X)),h.set($,X,ne)}}(m,$,Y,y)}else{let de=new R.Z(m,m),ve=new Float64Array(m);for(ce=0;ce<m;ce++)for(W=0;W<m;W++)de.set(W,ce,X.get(W,ce));(function(I,_,g,h){let Y,$,X,W,ce,ne,de,y=I-1;for(ne=1;ne<=y-1;ne++){for(de=0,W=ne;W<=y;W++)de+=Math.abs(_.get(W,ne-1));if(0!==de){for(X=0,W=y;W>=ne;W--)g[W]=_.get(W,ne-1)/de,X+=g[W]*g[W];for($=Math.sqrt(X),g[ne]>0&&($=-$),X-=g[ne]*$,g[ne]=g[ne]-$,ce=ne;ce<I;ce++){for(Y=0,W=y;W>=ne;W--)Y+=g[W]*_.get(W,ce);for(Y/=X,W=ne;W<=y;W++)_.set(W,ce,_.get(W,ce)-Y*g[W])}for(W=0;W<=y;W++){for(Y=0,ce=y;ce>=ne;ce--)Y+=g[ce]*_.get(W,ce);for(Y/=X,ce=ne;ce<=y;ce++)_.set(W,ce,_.get(W,ce)-Y*g[ce])}g[ne]=de*g[ne],_.set(ne,ne-1,de*$)}}for(W=0;W<I;W++)for(ce=0;ce<I;ce++)h.set(W,ce,W===ce?1:0);for(ne=y-1;ne>=1;ne--)if(0!==_.get(ne,ne-1)){for(W=ne+1;W<=y;W++)g[W]=_.get(W,ne-1);for(ce=ne;ce<=y;ce++){for($=0,W=ne;W<=y;W++)$+=g[W]*h.get(W,ce);for($=$/g[ne]/_.get(ne,ne-1),W=ne;W<=y;W++)h.set(W,ce,h.get(W,ce)+$*g[W])}}})(m,de,ve,y),function(I,_,g,h,m){let be,Pe,Oe,ae,Ue,He,Ye,Fe,Ge,it,lt,Mt,je,Be,Qe,y=I-1,$=I-1,X=Number.EPSILON,W=0,ce=0,ne=0,de=0,ve=0,Se=0,Me=0,Ve=0;for(be=0;be<I;be++)for((be<0||be>$)&&(g[be]=m.get(be,be),_[be]=0),Pe=Math.max(be-1,0);Pe<I;Pe++)ce+=Math.abs(m.get(be,Pe));for(;y>=0;){for(ae=y;ae>0&&(Se=Math.abs(m.get(ae-1,ae-1))+Math.abs(m.get(ae,ae)),0===Se&&(Se=ce),!(Math.abs(m.get(ae,ae-1))<X*Se));)ae--;if(ae===y)m.set(y,y,m.get(y,y)+W),g[y]=m.get(y,y),_[y]=0,y--,Ve=0;else if(ae===y-1){if(Ye=m.get(y,y-1)*m.get(y-1,y),ne=(m.get(y-1,y-1)-m.get(y,y))/2,de=ne*ne+Ye,Me=Math.sqrt(Math.abs(de)),m.set(y,y,m.get(y,y)+W),m.set(y-1,y-1,m.get(y-1,y-1)+W),Fe=m.get(y,y),de>=0){for(Me=ne>=0?ne+Me:ne-Me,g[y-1]=Fe+Me,g[y]=g[y-1],0!==Me&&(g[y]=Fe-Ye/Me),_[y-1]=0,_[y]=0,Fe=m.get(y,y-1),Se=Math.abs(Fe)+Math.abs(Me),ne=Fe/Se,de=Me/Se,ve=Math.sqrt(ne*ne+de*de),ne/=ve,de/=ve,Pe=y-1;Pe<I;Pe++)Me=m.get(y-1,Pe),m.set(y-1,Pe,de*Me+ne*m.get(y,Pe)),m.set(y,Pe,de*m.get(y,Pe)-ne*Me);for(be=0;be<=y;be++)Me=m.get(be,y-1),m.set(be,y-1,de*Me+ne*m.get(be,y)),m.set(be,y,de*m.get(be,y)-ne*Me);for(be=0;be<=$;be++)Me=h.get(be,y-1),h.set(be,y-1,de*Me+ne*h.get(be,y)),h.set(be,y,de*h.get(be,y)-ne*Me)}else g[y-1]=Fe+ne,g[y]=Fe+ne,_[y-1]=Me,_[y]=-Me;y-=2,Ve=0}else{if(Fe=m.get(y,y),Ge=0,Ye=0,ae<y&&(Ge=m.get(y-1,y-1),Ye=m.get(y,y-1)*m.get(y-1,y)),10===Ve){for(W+=Fe,be=0;be<=y;be++)m.set(be,be,m.get(be,be)-Fe);Se=Math.abs(m.get(y,y-1))+Math.abs(m.get(y-1,y-2)),Fe=Ge=.75*Se,Ye=-.4375*Se*Se}if(30===Ve&&(Se=(Ge-Fe)/2,Se=Se*Se+Ye,Se>0)){for(Se=Math.sqrt(Se),Ge<Fe&&(Se=-Se),Se=Fe-Ye/((Ge-Fe)/2+Se),be=0;be<=y;be++)m.set(be,be,m.get(be,be)-Se);W+=Se,Fe=Ge=Ye=.964}for(Ve+=1,Ue=y-2;Ue>=ae&&(Me=m.get(Ue,Ue),ve=Fe-Me,Se=Ge-Me,ne=(ve*Se-Ye)/m.get(Ue+1,Ue)+m.get(Ue,Ue+1),de=m.get(Ue+1,Ue+1)-Me-ve-Se,ve=m.get(Ue+2,Ue+1),Se=Math.abs(ne)+Math.abs(de)+Math.abs(ve),ne/=Se,de/=Se,ve/=Se,!(Ue===ae||Math.abs(m.get(Ue,Ue-1))*(Math.abs(de)+Math.abs(ve))<X*(Math.abs(ne)*(Math.abs(m.get(Ue-1,Ue-1))+Math.abs(Me)+Math.abs(m.get(Ue+1,Ue+1))))));)Ue--;for(be=Ue+2;be<=y;be++)m.set(be,be-2,0),be>Ue+2&&m.set(be,be-3,0);for(Oe=Ue;Oe<=y-1&&(Be=Oe!==y-1,Oe!==Ue&&(ne=m.get(Oe,Oe-1),de=m.get(Oe+1,Oe-1),ve=Be?m.get(Oe+2,Oe-1):0,Fe=Math.abs(ne)+Math.abs(de)+Math.abs(ve),0!==Fe&&(ne/=Fe,de/=Fe,ve/=Fe)),0!==Fe);Oe++)if(Se=Math.sqrt(ne*ne+de*de+ve*ve),ne<0&&(Se=-Se),0!==Se){for(Oe!==Ue?m.set(Oe,Oe-1,-Se*Fe):ae!==Ue&&m.set(Oe,Oe-1,-m.get(Oe,Oe-1)),ne+=Se,Fe=ne/Se,Ge=de/Se,Me=ve/Se,de/=ne,ve/=ne,Pe=Oe;Pe<I;Pe++)ne=m.get(Oe,Pe)+de*m.get(Oe+1,Pe),Be&&(ne+=ve*m.get(Oe+2,Pe),m.set(Oe+2,Pe,m.get(Oe+2,Pe)-ne*Me)),m.set(Oe,Pe,m.get(Oe,Pe)-ne*Fe),m.set(Oe+1,Pe,m.get(Oe+1,Pe)-ne*Ge);for(be=0;be<=Math.min(y,Oe+3);be++)ne=Fe*m.get(be,Oe)+Ge*m.get(be,Oe+1),Be&&(ne+=Me*m.get(be,Oe+2),m.set(be,Oe+2,m.get(be,Oe+2)-ne*ve)),m.set(be,Oe,m.get(be,Oe)-ne),m.set(be,Oe+1,m.get(be,Oe+1)-ne*de);for(be=0;be<=$;be++)ne=Fe*h.get(be,Oe)+Ge*h.get(be,Oe+1),Be&&(ne+=Me*h.get(be,Oe+2),h.set(be,Oe+2,h.get(be,Oe+2)-ne*ve)),h.set(be,Oe,h.get(be,Oe)-ne),h.set(be,Oe+1,h.get(be,Oe+1)-ne*de)}}}if(0!==ce){for(y=I-1;y>=0;y--)if(ne=g[y],de=_[y],0===de)for(ae=y,m.set(y,y,1),be=y-1;be>=0;be--){for(Ye=m.get(be,be)-ne,ve=0,Pe=ae;Pe<=y;Pe++)ve+=m.get(be,Pe)*m.get(Pe,y);if(_[be]<0)Me=Ye,Se=ve;else if(ae=be,0===_[be]?m.set(be,y,0!==Ye?-ve/Ye:-ve/(X*ce)):(Fe=m.get(be,be+1),Ge=m.get(be+1,be),de=(g[be]-ne)*(g[be]-ne)+_[be]*_[be],He=(Fe*Se-Me*ve)/de,m.set(be,y,He),m.set(be+1,y,Math.abs(Fe)>Math.abs(Me)?(-ve-Ye*He)/Fe:(-Se-Ge*He)/Me)),He=Math.abs(m.get(be,y)),X*He*He>1)for(Pe=be;Pe<=y;Pe++)m.set(Pe,y,m.get(Pe,y)/He)}else if(de<0)for(ae=y-1,Math.abs(m.get(y,y-1))>Math.abs(m.get(y-1,y))?(m.set(y-1,y-1,de/m.get(y,y-1)),m.set(y-1,y,-(m.get(y,y)-ne)/m.get(y,y-1))):(Qe=ee(0,-m.get(y-1,y),m.get(y-1,y-1)-ne,de),m.set(y-1,y-1,Qe[0]),m.set(y-1,y,Qe[1])),m.set(y,y-1,0),m.set(y,y,1),be=y-2;be>=0;be--){for(it=0,lt=0,Pe=ae;Pe<=y;Pe++)it+=m.get(be,Pe)*m.get(Pe,y-1),lt+=m.get(be,Pe)*m.get(Pe,y);if(Ye=m.get(be,be)-ne,_[be]<0)Me=Ye,ve=it,Se=lt;else if(ae=be,0===_[be]?(Qe=ee(-it,-lt,Ye,de),m.set(be,y-1,Qe[0]),m.set(be,y,Qe[1])):(Fe=m.get(be,be+1),Ge=m.get(be+1,be),Mt=(g[be]-ne)*(g[be]-ne)+_[be]*_[be]-de*de,je=2*(g[be]-ne)*de,0===Mt&&0===je&&(Mt=X*ce*(Math.abs(Ye)+Math.abs(de)+Math.abs(Fe)+Math.abs(Ge)+Math.abs(Me))),Qe=ee(Fe*ve-Me*it+de*lt,Fe*Se-Me*lt-de*it,Mt,je),m.set(be,y-1,Qe[0]),m.set(be,y,Qe[1]),Math.abs(Fe)>Math.abs(Me)+Math.abs(de)?(m.set(be+1,y-1,(-it-Ye*m.get(be,y-1)+de*m.get(be,y))/Fe),m.set(be+1,y,(-lt-Ye*m.get(be,y)-de*m.get(be,y-1))/Fe)):(Qe=ee(-ve-Ge*m.get(be,y-1),-Se-Ge*m.get(be,y),Me,de),m.set(be+1,y-1,Qe[0]),m.set(be+1,y,Qe[1]))),He=Math.max(Math.abs(m.get(be,y-1)),Math.abs(m.get(be,y))),X*He*He>1)for(Pe=be;Pe<=y;Pe++)m.set(Pe,y-1,m.get(Pe,y-1)/He),m.set(Pe,y,m.get(Pe,y)/He)}for(be=0;be<I;be++)if(be<0||be>$)for(Pe=be;Pe<I;Pe++)h.set(be,Pe,m.get(be,Pe));for(Pe=I-1;Pe>=0;Pe--)for(be=0;be<=$;be++){for(Me=0,Oe=0;Oe<=Math.min(Pe,$);Oe++)Me+=h.get(be,Oe)*m.get(Oe,Pe);h.set(be,Pe,Me)}}}(m,$,Y,y,de)}this.n=m,this.e=$,this.d=Y,this.V=y}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let y,Y,_=this.n,g=this.e,h=this.d,m=new R.Z(_,_);for(y=0;y<_;y++){for(Y=0;Y<_;Y++)m.set(y,Y,0);m.set(y,y,h[y]),g[y]>0?m.set(y,y+1,g[y]):g[y]<0&&m.set(y,y-1,g[y])}return m}}function ee(I,_,g,h){let m,y;return Math.abs(g)>Math.abs(h)?(m=h/g,y=g+m*h,[(I+m*_)/y,(_-m*I)/y]):(m=g/h,y=h+m*g,[(m*I+_)/y,(m*_-I)/y])}class _e{constructor(_){if(!(_=F.Z.checkMatrix(_)).isSymmetric())throw new Error("Matrix is not symmetric");let Y,$,X,g=_,h=g.rows,m=new R.Z(h,h),y=!0;for($=0;$<h;$++){let W=0;for(X=0;X<$;X++){let ce=0;for(Y=0;Y<X;Y++)ce+=m.get(X,Y)*m.get($,Y);ce=(g.get($,X)-ce)/m.get(X,X),m.set($,X,ce),W+=ce*ce}for(W=g.get($,$)-W,y&=W>0,m.set($,$,Math.sqrt(Math.max(W,0))),X=$+1;X<h;X++)m.set($,X,0)}this.L=m,this.positiveDefinite=Boolean(y)}isPositiveDefinite(){return this.positiveDefinite}solve(_){_=F.Z.checkMatrix(_);let g=this.L,h=g.rows;if(_.rows!==h)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let Y,$,X,m=_.columns,y=_.clone();for(X=0;X<h;X++)for($=0;$<m;$++){for(Y=0;Y<X;Y++)y.set(X,$,y.get(X,$)-y.get(Y,$)*g.get(X,Y));y.set(X,$,y.get(X,$)/g.get(X,X))}for(X=h-1;X>=0;X--)for($=0;$<m;$++){for(Y=X+1;Y<h;Y++)y.set(X,$,y.get(X,$)-y.get(Y,$)*g.get(Y,X));y.set(X,$,y.get(X,$)/g.get(X,X))}return y}get lowerTriangularMatrix(){return this.L}}var ke=T(7235);class fe{constructor(_,g={}){_=F.Z.checkMatrix(_);let{Y:h}=g;const{scaleScores:m=!1,maxIterations:y=1e3,terminationCriteria:Y=1e-10}=g;let $;if(h){if(h=Array.isArray(h)&&"number"==typeof h[0]?R.Z.columnVector(h):F.Z.checkMatrix(h),h.rows!==_.rows)throw new Error("Y should have the same number of rows as X");$=h.getColumnVector(0)}else $=_.getColumnVector(0);let W,ce,ne,de,X=1;for(let ve=0;ve<y&&X>Y;ve++)ne=_.transpose().mmul($).div($.transpose().mmul($).get(0,0)),ne=ne.div(ne.norm()),W=_.mmul(ne).div(ne.transpose().mmul(ne).get(0,0)),ve>0&&(X=W.clone().sub(de).pow(2).sum()),de=W.clone(),h?(ce=h.transpose().mmul(W).div(W.transpose().mmul(W).get(0,0)),ce=ce.div(ce.norm()),$=h.mmul(ce).div(ce.transpose().mmul(ce).get(0,0))):$=W;if(h){let ve=_.transpose().mmul(W).div(W.transpose().mmul(W).get(0,0));ve=ve.div(ve.norm());let Se=_.clone().sub(W.clone().mmul(ve.transpose())),Me=$.transpose().mmul(W).div(W.transpose().mmul(W).get(0,0)),Ve=h.clone().sub(W.clone().mulS(Me.get(0,0)).mmul(ce.transpose()));this.t=W,this.p=ve.transpose(),this.w=ne.transpose(),this.q=ce,this.u=$,this.s=W.transpose().mmul(W),this.xResidual=Se,this.yResidual=Ve,this.betas=Me}else this.w=ne.transpose(),this.s=W.transpose().mmul(W).sqrt(),this.t=m?W.clone().div(this.s.get(0,0)):W,this.xResidual=_.sub(W.mmul(ne.transpose()))}}},9690:(we,se,T)=>{"use strict";T.d(se,{X:()=>_e,Z:()=>fe});var R=T(2128);const x=function(I){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,R.Z)(I))throw new TypeError("input must be an array");if(0===I.length)throw new TypeError("input must not be empty");var g=_.fromIndex,h=void 0===g?0:g,m=_.toIndex,y=void 0===m?I.length:m;if(h<0||h>=I.length||!Number.isInteger(h))throw new Error("fromIndex must be a positive integer smaller than length");if(y<=h||y>I.length||!Number.isInteger(y))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Y=I[h],$=h+1;$<y;$++)I[$]>Y&&(Y=I[$]);return Y},E=function(I){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,R.Z)(I))throw new TypeError("input must be an array");if(0===I.length)throw new TypeError("input must not be empty");var g=_.fromIndex,h=void 0===g?0:g,m=_.toIndex,y=void 0===m?I.length:m;if(h<0||h>=I.length||!Number.isInteger(h))throw new Error("fromIndex must be a positive integer smaller than length");if(y<=h||y>I.length||!Number.isInteger(y))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Y=I[h],$=h+1;$<y;$++)I[$]<Y&&(Y=I[$]);return Y};function w(I){var g,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,R.Z)(I))throw new TypeError("input must be an array");if(0===I.length)throw new TypeError("input must not be empty");if(void 0!==_.output){if(!(0,R.Z)(_.output))throw new TypeError("output option must be an array if specified");g=_.output}else g=new Array(I.length);var h=E(I),m=x(I);if(h===m)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var y=_.min,Y=void 0===y?_.autoMinMax?h:0:y,$=_.max,X=void 0===$?_.autoMinMax?m:1:$;if(Y>=X)throw new RangeError("min option must be smaller than max option");for(var W=(X-Y)/(m-h),ce=0;ce<I.length;ce++)g[ce]=(I[ce]-h)*W+Y;return g}const D=" ".repeat(2),k=" ".repeat(4);function M(I,_={}){const{maxRows:g=15,maxColumns:h=10,maxNumSize:m=8}=_;return`${I.constructor.name} {\n${D}[\n${k}${function(I,_,g,h){const{rows:m,columns:y}=I,Y=Math.min(m,_),$=Math.min(y,g),X=[];for(let W=0;W<Y;W++){let ce=[];for(let ne=0;ne<$;ne++)ce.push(U(I.get(W,ne),h));X.push(`${ce.join(" ")}`)}return $!==y&&(X[X.length-1]+=` ... ${y-g} more columns`),Y!==m&&X.push(`... ${m-_} more rows`),X.join(`\n${k}`)}(I,g,h,m)}\n${D}]\n${D}rows: ${I.rows}\n${D}columns: ${I.columns}\n}`}function U(I,_){const g=String(I);if(g.length<=_)return g.padEnd(_," ");const h=I.toPrecision(_-2);if(h.length<=_)return h;const m=I.toExponential(_-2),y=m.indexOf("e"),Y=m.slice(y);return m.slice(0,_-Y.length)+Y}var I,_,F=T(1501);class _e{static from1DArray(_,g,h){if(_*g!==h.length)throw new RangeError("data length does not match given dimensions");let y=new fe(_,g);for(let Y=0;Y<_;Y++)for(let $=0;$<g;$++)y.set(Y,$,h[Y*g+$]);return y}static rowVector(_){let g=new fe(1,_.length);for(let h=0;h<_.length;h++)g.set(0,h,_[h]);return g}static columnVector(_){let g=new fe(_.length,1);for(let h=0;h<_.length;h++)g.set(h,0,_[h]);return g}static zeros(_,g){return new fe(_,g)}static ones(_,g){return new fe(_,g).fill(1)}static rand(_,g,h={}){if("object"!=typeof h)throw new TypeError("options must be an object");const{random:m=Math.random}=h;let y=new fe(_,g);for(let Y=0;Y<_;Y++)for(let $=0;$<g;$++)y.set(Y,$,m());return y}static randInt(_,g,h={}){if("object"!=typeof h)throw new TypeError("options must be an object");const{min:m=0,max:y=1e3,random:Y=Math.random}=h;if(!Number.isInteger(m))throw new TypeError("min must be an integer");if(!Number.isInteger(y))throw new TypeError("max must be an integer");if(m>=y)throw new RangeError("min must be smaller than max");let $=y-m,X=new fe(_,g);for(let W=0;W<_;W++)for(let ce=0;ce<g;ce++){let ne=m+Math.round(Y()*$);X.set(W,ce,ne)}return X}static eye(_,g,h){void 0===g&&(g=_),void 0===h&&(h=1);let m=Math.min(_,g),y=this.zeros(_,g);for(let Y=0;Y<m;Y++)y.set(Y,Y,h);return y}static diag(_,g,h){let m=_.length;void 0===g&&(g=m),void 0===h&&(h=g);let y=Math.min(m,g,h),Y=this.zeros(g,h);for(let $=0;$<y;$++)Y.set($,$,_[$]);return Y}static min(_,g){_=this.checkMatrix(_),g=this.checkMatrix(g);let h=_.rows,m=_.columns,y=new fe(h,m);for(let Y=0;Y<h;Y++)for(let $=0;$<m;$++)y.set(Y,$,Math.min(_.get(Y,$),g.get(Y,$)));return y}static max(_,g){_=this.checkMatrix(_),g=this.checkMatrix(g);let h=_.rows,m=_.columns,y=new this(h,m);for(let Y=0;Y<h;Y++)for(let $=0;$<m;$++)y.set(Y,$,Math.max(_.get(Y,$),g.get(Y,$)));return y}static checkMatrix(_){return _e.isMatrix(_)?_:new fe(_)}static isMatrix(_){return null!=_&&"Matrix"===_.klass}get size(){return this.rows*this.columns}apply(_){if("function"!=typeof _)throw new TypeError("callback must be a function");for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)_.call(this,g,h);return this}to1DArray(){let _=[];for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)_.push(this.get(g,h));return _}to2DArray(){let _=[];for(let g=0;g<this.rows;g++){_.push([]);for(let h=0;h<this.columns;h++)_[g].push(this.get(g,h))}return _}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let _=0;_<this.rows;_++)for(let g=0;g<=_;g++)if(this.get(_,g)!==this.get(g,_))return!1;return!0}return!1}isEchelonForm(){let _=0,g=0,h=-1,m=!0,y=!1;for(;_<this.rows&&m;){for(g=0,y=!1;g<this.columns&&!1===y;)0===this.get(_,g)?g++:1===this.get(_,g)&&g>h?(y=!0,h=g):(m=!1,y=!0);_++}return m}isReducedEchelonForm(){let _=0,g=0,h=-1,m=!0,y=!1;for(;_<this.rows&&m;){for(g=0,y=!1;g<this.columns&&!1===y;)0===this.get(_,g)?g++:1===this.get(_,g)&&g>h?(y=!0,h=g):(m=!1,y=!0);for(let Y=g+1;Y<this.rows;Y++)0!==this.get(_,Y)&&(m=!1);_++}return m}echelonForm(){let _=this.clone(),g=0,h=0;for(;g<_.rows&&h<_.columns;){let m=g;for(let y=g;y<_.rows;y++)_.get(y,h)>_.get(m,h)&&(m=y);if(0===_.get(m,h))h++;else{_.swapRows(g,m);let y=_.get(g,h);for(let Y=h;Y<_.columns;Y++)_.set(g,Y,_.get(g,Y)/y);for(let Y=g+1;Y<_.rows;Y++){let $=_.get(Y,h)/_.get(g,h);_.set(Y,h,0);for(let X=h+1;X<_.columns;X++)_.set(Y,X,_.get(Y,X)-_.get(g,X)*$)}g++,h++}}return _}reducedEchelonForm(){let _=this.echelonForm(),g=_.columns,h=_.rows,m=h-1;for(;m>=0;)if(0===_.maxRow(m))m--;else{let y=0,Y=!1;for(;y<h&&!1===Y;)1===_.get(m,y)?Y=!0:y++;for(let $=0;$<m;$++){let X=_.get($,y);for(let W=y;W<g;W++){let ce=_.get($,W)-X*_.get(m,W);_.set($,W,ce)}}m--}return _}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(_={}){if("object"!=typeof _)throw new TypeError("options must be an object");const{rows:g=1,columns:h=1}=_;if(!Number.isInteger(g)||g<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(h)||h<=0)throw new TypeError("columns must be a positive integer");let m=new fe(this.rows*g,this.columns*h);for(let y=0;y<g;y++)for(let Y=0;Y<h;Y++)m.setSubMatrix(this,this.rows*y,this.columns*Y);return m}fill(_){for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)this.set(g,h,_);return this}neg(){return this.mulS(-1)}getRow(_){(0,F.zb)(this,_);let g=[];for(let h=0;h<this.columns;h++)g.push(this.get(_,h));return g}getRowVector(_){return fe.rowVector(this.getRow(_))}setRow(_,g){(0,F.zb)(this,_),g=(0,F.on)(this,g);for(let h=0;h<this.columns;h++)this.set(_,h,g[h]);return this}swapRows(_,g){(0,F.zb)(this,_),(0,F.zb)(this,g);for(let h=0;h<this.columns;h++){let m=this.get(_,h);this.set(_,h,this.get(g,h)),this.set(g,h,m)}return this}getColumn(_){(0,F.bp)(this,_);let g=[];for(let h=0;h<this.rows;h++)g.push(this.get(h,_));return g}getColumnVector(_){return fe.columnVector(this.getColumn(_))}setColumn(_,g){(0,F.bp)(this,_),g=(0,F.Um)(this,g);for(let h=0;h<this.rows;h++)this.set(h,_,g[h]);return this}swapColumns(_,g){(0,F.bp)(this,_),(0,F.bp)(this,g);for(let h=0;h<this.rows;h++){let m=this.get(h,_);this.set(h,_,this.get(h,g)),this.set(h,g,m)}return this}addRowVector(_){_=(0,F.on)(this,_);for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)this.set(g,h,this.get(g,h)+_[h]);return this}subRowVector(_){_=(0,F.on)(this,_);for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)this.set(g,h,this.get(g,h)-_[h]);return this}mulRowVector(_){_=(0,F.on)(this,_);for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)this.set(g,h,this.get(g,h)*_[h]);return this}divRowVector(_){_=(0,F.on)(this,_);for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)this.set(g,h,this.get(g,h)/_[h]);return this}addColumnVector(_){_=(0,F.Um)(this,_);for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)this.set(g,h,this.get(g,h)+_[g]);return this}subColumnVector(_){_=(0,F.Um)(this,_);for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)this.set(g,h,this.get(g,h)-_[g]);return this}mulColumnVector(_){_=(0,F.Um)(this,_);for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)this.set(g,h,this.get(g,h)*_[g]);return this}divColumnVector(_){_=(0,F.Um)(this,_);for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)this.set(g,h,this.get(g,h)/_[g]);return this}mulRow(_,g){(0,F.zb)(this,_);for(let h=0;h<this.columns;h++)this.set(_,h,this.get(_,h)*g);return this}mulColumn(_,g){(0,F.bp)(this,_);for(let h=0;h<this.rows;h++)this.set(h,_,this.get(h,_)*g);return this}max(){if(this.isEmpty())return NaN;let _=this.get(0,0);for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)this.get(g,h)>_&&(_=this.get(g,h));return _}maxIndex(){(0,F.cT)(this);let _=this.get(0,0),g=[0,0];for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.get(h,m)>_&&(_=this.get(h,m),g[0]=h,g[1]=m);return g}min(){if(this.isEmpty())return NaN;let _=this.get(0,0);for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)this.get(g,h)<_&&(_=this.get(g,h));return _}minIndex(){(0,F.cT)(this);let _=this.get(0,0),g=[0,0];for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.get(h,m)<_&&(_=this.get(h,m),g[0]=h,g[1]=m);return g}maxRow(_){if((0,F.zb)(this,_),this.isEmpty())return NaN;let g=this.get(_,0);for(let h=1;h<this.columns;h++)this.get(_,h)>g&&(g=this.get(_,h));return g}maxRowIndex(_){(0,F.zb)(this,_),(0,F.cT)(this);let g=this.get(_,0),h=[_,0];for(let m=1;m<this.columns;m++)this.get(_,m)>g&&(g=this.get(_,m),h[1]=m);return h}minRow(_){if((0,F.zb)(this,_),this.isEmpty())return NaN;let g=this.get(_,0);for(let h=1;h<this.columns;h++)this.get(_,h)<g&&(g=this.get(_,h));return g}minRowIndex(_){(0,F.zb)(this,_),(0,F.cT)(this);let g=this.get(_,0),h=[_,0];for(let m=1;m<this.columns;m++)this.get(_,m)<g&&(g=this.get(_,m),h[1]=m);return h}maxColumn(_){if((0,F.bp)(this,_),this.isEmpty())return NaN;let g=this.get(0,_);for(let h=1;h<this.rows;h++)this.get(h,_)>g&&(g=this.get(h,_));return g}maxColumnIndex(_){(0,F.bp)(this,_),(0,F.cT)(this);let g=this.get(0,_),h=[0,_];for(let m=1;m<this.rows;m++)this.get(m,_)>g&&(g=this.get(m,_),h[0]=m);return h}minColumn(_){if((0,F.bp)(this,_),this.isEmpty())return NaN;let g=this.get(0,_);for(let h=1;h<this.rows;h++)this.get(h,_)<g&&(g=this.get(h,_));return g}minColumnIndex(_){(0,F.bp)(this,_),(0,F.cT)(this);let g=this.get(0,_),h=[0,_];for(let m=1;m<this.rows;m++)this.get(m,_)<g&&(g=this.get(m,_),h[0]=m);return h}diag(){let _=Math.min(this.rows,this.columns),g=[];for(let h=0;h<_;h++)g.push(this.get(h,h));return g}norm(_="frobenius"){let g=0;if("max"===_)return this.max();if("frobenius"===_){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)g+=this.get(h,m)*this.get(h,m);return Math.sqrt(g)}throw new RangeError(`unknown norm type: ${_}`)}cumulativeSum(){let _=0;for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)_+=this.get(g,h),this.set(g,h,_);return this}dot(_){_e.isMatrix(_)&&(_=_.to1DArray());let g=this.to1DArray();if(g.length!==_.length)throw new RangeError("vectors do not have the same size");let h=0;for(let m=0;m<g.length;m++)h+=g[m]*_[m];return h}mmul(_){_=fe.checkMatrix(_);let g=this.rows,h=this.columns,m=_.columns,y=new fe(g,m),Y=new Float64Array(h);for(let $=0;$<m;$++){for(let X=0;X<h;X++)Y[X]=_.get(X,$);for(let X=0;X<g;X++){let W=0;for(let ce=0;ce<h;ce++)W+=this.get(X,ce)*Y[ce];y.set(X,$,W)}}return y}strassen2x2(_){_=fe.checkMatrix(_);let g=new fe(2,2);const h=this.get(0,0),m=_.get(0,0),y=this.get(0,1),Y=_.get(0,1),$=this.get(1,0),X=_.get(1,0),W=this.get(1,1),ce=_.get(1,1),ne=(h+W)*(m+ce),de=($+W)*m,ve=h*(Y-ce),Se=W*(X-m),Me=(h+y)*ce,Oe=ve+Me,ae=de+Se,Ue=ne-de+ve+($-h)*(m+Y);return g.set(0,0,ne+Se-Me+(y-W)*(X+ce)),g.set(0,1,Oe),g.set(1,0,ae),g.set(1,1,Ue),g}strassen3x3(_){_=fe.checkMatrix(_);let g=new fe(3,3);const h=this.get(0,0),m=this.get(0,1),y=this.get(0,2),Y=this.get(1,0),$=this.get(1,1),X=this.get(1,2),W=this.get(2,0),ce=this.get(2,1),ne=this.get(2,2),de=_.get(0,0),ve=_.get(0,1),Se=_.get(0,2),Me=_.get(1,0),Ve=_.get(1,1),be=_.get(1,2),Pe=_.get(2,0),Oe=_.get(2,1),ae=_.get(2,2),He=(h-Y)*(-ve+Ve),Fe=(-h+Y+$)*(de-ve+Ve),Ge=(Y+$)*(-de+ve),it=h*de,lt=(-h+W+ce)*(de-Se+be),Mt=(-h+W)*(Se-be),je=(W+ce)*(-de+Se),ft=(-y+ce+ne)*(Ve+Pe-Oe),yt=(y-ne)*(Ve-Oe),ct=y*Pe,gt=(ce+ne)*(-Pe+Oe),rt=(-y+$+X)*(be+Pe-ae),It=(y-X)*(be-ae),Zt=($+X)*(-Pe+ae),pe=(h+m+y-Y-$-ce-ne)*Ve+Fe+Ge+it+ft+ct+gt,he=it+lt+je+(h+m+y-$-X-W-ce)*be+ct+rt+Zt,Te=He+$*(-de+ve+Me-Ve-be-Pe+ae)+Fe+it+ct+rt+It,Ze=He+Fe+Ge+it+X*Oe,Xe=ct+rt+It+Zt+Y*Se,ze=it+lt+Mt+ce*(-de+Se+Me-Ve-be-Pe+Oe)+ft+yt+ct,Pt=ft+yt+ct+gt+W*ve,mn=it+lt+Mt+je+ne*ae;return g.set(0,0,it+ct+m*Me),g.set(0,1,pe),g.set(0,2,he),g.set(1,0,Te),g.set(1,1,Ze),g.set(1,2,Xe),g.set(2,0,ze),g.set(2,1,Pt),g.set(2,2,mn),g}mmulStrassen(_){_=fe.checkMatrix(_);let g=this.clone(),h=g.rows,m=g.columns,y=_.rows,Y=_.columns;function $(ne,de,ve){if(ne.rows===de&&ne.columns===ve)return ne;{let Ve=_e.zeros(de,ve);return Ve=Ve.setSubMatrix(ne,0,0),Ve}}m!==y&&console.warn(`Multiplying ${h} x ${m} and ${y} x ${Y} matrix: dimensions do not match.`);let X=Math.max(h,y),W=Math.max(m,Y);return g=$(g,X,W),function ce(ne,de,ve,Se){if(ve<=512||Se<=512)return ne.mmul(de);ve%2==1&&Se%2==1?(ne=$(ne,ve+1,Se+1),de=$(de,ve+1,Se+1)):ve%2==1?(ne=$(ne,ve+1,Se),de=$(de,ve+1,Se)):Se%2==1&&(ne=$(ne,ve,Se+1),de=$(de,ve,Se+1));let Me=parseInt(ne.rows/2,10),Ve=parseInt(ne.columns/2,10),be=ne.subMatrix(0,Me-1,0,Ve-1),Pe=de.subMatrix(0,Me-1,0,Ve-1),Oe=ne.subMatrix(0,Me-1,Ve,ne.columns-1),ae=de.subMatrix(0,Me-1,Ve,de.columns-1),Ue=ne.subMatrix(Me,ne.rows-1,0,Ve-1),He=de.subMatrix(Me,de.rows-1,0,Ve-1),Ye=ne.subMatrix(Me,ne.rows-1,Ve,ne.columns-1),Fe=de.subMatrix(Me,de.rows-1,Ve,de.columns-1),Ge=ce(_e.add(be,Ye),_e.add(Pe,Fe),Me,Ve),it=ce(_e.add(Ue,Ye),Pe,Me,Ve),lt=ce(be,_e.sub(ae,Fe),Me,Ve),Mt=ce(Ye,_e.sub(He,Pe),Me,Ve),je=ce(_e.add(be,Oe),Fe,Me,Ve),Be=ce(_e.sub(Ue,be),_e.add(Pe,ae),Me,Ve),Qe=ce(_e.sub(Oe,Ye),_e.add(He,Fe),Me,Ve),ft=_e.add(Ge,Mt);ft.sub(je),ft.add(Qe);let yt=_e.add(lt,je),ct=_e.add(it,Mt),gt=_e.sub(Ge,it);gt.add(lt),gt.add(Be);let rt=_e.zeros(2*ft.rows,2*ft.columns);return rt=rt.setSubMatrix(ft,0,0),rt=rt.setSubMatrix(yt,ft.rows,0),rt=rt.setSubMatrix(ct,0,ft.columns),rt=rt.setSubMatrix(gt,ft.rows,ft.columns),rt.subMatrix(0,ve-1,0,Se-1)}(g,_=$(_,X,W),X,W)}scaleRows(_={}){if("object"!=typeof _)throw new TypeError("options must be an object");const{min:g=0,max:h=1}=_;if(!Number.isFinite(g))throw new TypeError("min must be a number");if(!Number.isFinite(h))throw new TypeError("max must be a number");if(g>=h)throw new RangeError("min must be smaller than max");let m=new fe(this.rows,this.columns);for(let y=0;y<this.rows;y++){const Y=this.getRow(y);Y.length>0&&w(Y,{min:g,max:h,output:Y}),m.setRow(y,Y)}return m}scaleColumns(_={}){if("object"!=typeof _)throw new TypeError("options must be an object");const{min:g=0,max:h=1}=_;if(!Number.isFinite(g))throw new TypeError("min must be a number");if(!Number.isFinite(h))throw new TypeError("max must be a number");if(g>=h)throw new RangeError("min must be smaller than max");let m=new fe(this.rows,this.columns);for(let y=0;y<this.columns;y++){const Y=this.getColumn(y);Y.length&&w(Y,{min:g,max:h,output:Y}),m.setColumn(y,Y)}return m}flipRows(){const _=Math.ceil(this.columns/2);for(let g=0;g<this.rows;g++)for(let h=0;h<_;h++){let m=this.get(g,h),y=this.get(g,this.columns-1-h);this.set(g,h,y),this.set(g,this.columns-1-h,m)}return this}flipColumns(){const _=Math.ceil(this.rows/2);for(let g=0;g<this.columns;g++)for(let h=0;h<_;h++){let m=this.get(h,g),y=this.get(this.rows-1-h,g);this.set(h,g,y),this.set(this.rows-1-h,g,m)}return this}kroneckerProduct(_){_=fe.checkMatrix(_);let g=this.rows,h=this.columns,m=_.rows,y=_.columns,Y=new fe(g*m,h*y);for(let $=0;$<g;$++)for(let X=0;X<h;X++)for(let W=0;W<m;W++)for(let ce=0;ce<y;ce++)Y.set(m*$+W,y*X+ce,this.get($,X)*_.get(W,ce));return Y}kroneckerSum(_){if(_=fe.checkMatrix(_),!this.isSquare()||!_.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let g=this.rows,h=_.rows,m=this.kroneckerProduct(fe.eye(h,h)),y=fe.eye(g,g).kroneckerProduct(_);return m.add(y)}transpose(){let _=new fe(this.columns,this.rows);for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)_.set(h,g,this.get(g,h));return _}sortRows(_=ke){for(let g=0;g<this.rows;g++)this.setRow(g,this.getRow(g).sort(_));return this}sortColumns(_=ke){for(let g=0;g<this.columns;g++)this.setColumn(g,this.getColumn(g).sort(_));return this}subMatrix(_,g,h,m){(0,F.J5)(this,_,g,h,m);let y=new fe(g-_+1,m-h+1);for(let Y=_;Y<=g;Y++)for(let $=h;$<=m;$++)y.set(Y-_,$-h,this.get(Y,$));return y}subMatrixRow(_,g,h){if(void 0===g&&(g=0),void 0===h&&(h=this.columns-1),g>h||g<0||g>=this.columns||h<0||h>=this.columns)throw new RangeError("Argument out of range");let m=new fe(_.length,h-g+1);for(let y=0;y<_.length;y++)for(let Y=g;Y<=h;Y++){if(_[y]<0||_[y]>=this.rows)throw new RangeError(`Row index out of range: ${_[y]}`);m.set(y,Y-g,this.get(_[y],Y))}return m}subMatrixColumn(_,g,h){if(void 0===g&&(g=0),void 0===h&&(h=this.rows-1),g>h||g<0||g>=this.rows||h<0||h>=this.rows)throw new RangeError("Argument out of range");let m=new fe(h-g+1,_.length);for(let y=0;y<_.length;y++)for(let Y=g;Y<=h;Y++){if(_[y]<0||_[y]>=this.columns)throw new RangeError(`Column index out of range: ${_[y]}`);m.set(Y-g,y,this.get(Y,_[y]))}return m}setSubMatrix(_,g,h){if((_=fe.checkMatrix(_)).isEmpty())return this;(0,F.J5)(this,g,g+_.rows-1,h,h+_.columns-1);for(let Y=0;Y<_.rows;Y++)for(let $=0;$<_.columns;$++)this.set(g+Y,h+$,_.get(Y,$));return this}selection(_,g){let h=(0,F.N2)(this,_,g),m=new fe(_.length,g.length);for(let y=0;y<h.row.length;y++){let Y=h.row[y];for(let $=0;$<h.column.length;$++)m.set(y,$,this.get(Y,h.column[$]))}return m}trace(){let _=Math.min(this.rows,this.columns),g=0;for(let h=0;h<_;h++)g+=this.get(h,h);return g}clone(){let _=new fe(this.rows,this.columns);for(let g=0;g<this.rows;g++)for(let h=0;h<this.columns;h++)_.set(g,h,this.get(g,h));return _}sum(_){switch(_){case"row":return function(I){let _=(0,F.B4)(I.rows);for(let g=0;g<I.rows;++g)for(let h=0;h<I.columns;++h)_[g]+=I.get(g,h);return _}(this);case"column":return function(I){let _=(0,F.B4)(I.columns);for(let g=0;g<I.rows;++g)for(let h=0;h<I.columns;++h)_[h]+=I.get(g,h);return _}(this);case void 0:return function(I){let _=0;for(let g=0;g<I.rows;g++)for(let h=0;h<I.columns;h++)_+=I.get(g,h);return _}(this);default:throw new Error(`invalid option: ${_}`)}}product(_){switch(_){case"row":return function(I){let _=(0,F.B4)(I.rows,1);for(let g=0;g<I.rows;++g)for(let h=0;h<I.columns;++h)_[g]*=I.get(g,h);return _}(this);case"column":return function(I){let _=(0,F.B4)(I.columns,1);for(let g=0;g<I.rows;++g)for(let h=0;h<I.columns;++h)_[h]*=I.get(g,h);return _}(this);case void 0:return function(I){let _=1;for(let g=0;g<I.rows;g++)for(let h=0;h<I.columns;h++)_*=I.get(g,h);return _}(this);default:throw new Error(`invalid option: ${_}`)}}mean(_){const g=this.sum(_);switch(_){case"row":for(let h=0;h<this.rows;h++)g[h]/=this.columns;return g;case"column":for(let h=0;h<this.columns;h++)g[h]/=this.rows;return g;case void 0:return g/this.size;default:throw new Error(`invalid option: ${_}`)}}variance(_,g={}){if("object"==typeof _&&(g=_,_=void 0),"object"!=typeof g)throw new TypeError("options must be an object");const{unbiased:h=!0,mean:m=this.mean(_)}=g;if("boolean"!=typeof h)throw new TypeError("unbiased must be a boolean");switch(_){case"row":if(!Array.isArray(m))throw new TypeError("mean must be an array");return function(I,_,g){const h=I.rows,m=I.columns,y=[];for(let Y=0;Y<h;Y++){let $=0,X=0,W=0;for(let ce=0;ce<m;ce++)W=I.get(Y,ce)-g[Y],$+=W,X+=W*W;y.push(_?(X-$*$/m)/(m-1):(X-$*$/m)/m)}return y}(this,h,m);case"column":if(!Array.isArray(m))throw new TypeError("mean must be an array");return function(I,_,g){const h=I.rows,m=I.columns,y=[];for(let Y=0;Y<m;Y++){let $=0,X=0,W=0;for(let ce=0;ce<h;ce++)W=I.get(ce,Y)-g[Y],$+=W,X+=W*W;y.push(_?(X-$*$/h)/(h-1):(X-$*$/h)/h)}return y}(this,h,m);case void 0:if("number"!=typeof m)throw new TypeError("mean must be a number");return function(I,_,g){const h=I.rows,m=I.columns,y=h*m;let Y=0,$=0,X=0;for(let W=0;W<h;W++)for(let ce=0;ce<m;ce++)X=I.get(W,ce)-g,Y+=X,$+=X*X;return _?($-Y*Y/y)/(y-1):($-Y*Y/y)/y}(this,h,m);default:throw new Error(`invalid option: ${_}`)}}standardDeviation(_,g){"object"==typeof _&&(g=_,_=void 0);const h=this.variance(_,g);if(void 0===_)return Math.sqrt(h);for(let m=0;m<h.length;m++)h[m]=Math.sqrt(h[m]);return h}center(_,g={}){if("object"==typeof _&&(g=_,_=void 0),"object"!=typeof g)throw new TypeError("options must be an object");const{center:h=this.mean(_)}=g;switch(_){case"row":if(!Array.isArray(h))throw new TypeError("center must be an array");return function(I,_){for(let g=0;g<I.rows;g++)for(let h=0;h<I.columns;h++)I.set(g,h,I.get(g,h)-_[g])}(this,h),this;case"column":if(!Array.isArray(h))throw new TypeError("center must be an array");return function(I,_){for(let g=0;g<I.rows;g++)for(let h=0;h<I.columns;h++)I.set(g,h,I.get(g,h)-_[h])}(this,h),this;case void 0:if("number"!=typeof h)throw new TypeError("center must be a number");return function(I,_){for(let g=0;g<I.rows;g++)for(let h=0;h<I.columns;h++)I.set(g,h,I.get(g,h)-_)}(this,h),this;default:throw new Error(`invalid option: ${_}`)}}scale(_,g={}){if("object"==typeof _&&(g=_,_=void 0),"object"!=typeof g)throw new TypeError("options must be an object");let h=g.scale;switch(_){case"row":if(void 0===h)h=function(I){const _=[];for(let g=0;g<I.rows;g++){let h=0;for(let m=0;m<I.columns;m++)h+=Math.pow(I.get(g,m),2)/(I.columns-1);_.push(Math.sqrt(h))}return _}(this);else if(!Array.isArray(h))throw new TypeError("scale must be an array");return function(I,_){for(let g=0;g<I.rows;g++)for(let h=0;h<I.columns;h++)I.set(g,h,I.get(g,h)/_[g])}(this,h),this;case"column":if(void 0===h)h=function(I){const _=[];for(let g=0;g<I.columns;g++){let h=0;for(let m=0;m<I.rows;m++)h+=Math.pow(I.get(m,g),2)/(I.rows-1);_.push(Math.sqrt(h))}return _}(this);else if(!Array.isArray(h))throw new TypeError("scale must be an array");return function(I,_){for(let g=0;g<I.rows;g++)for(let h=0;h<I.columns;h++)I.set(g,h,I.get(g,h)/_[h])}(this,h),this;case void 0:if(void 0===h)h=function(I){const _=I.size-1;let g=0;for(let h=0;h<I.columns;h++)for(let m=0;m<I.rows;m++)g+=Math.pow(I.get(m,h),2)/_;return Math.sqrt(g)}(this);else if("number"!=typeof h)throw new TypeError("scale must be a number");return function(I,_){for(let g=0;g<I.rows;g++)for(let h=0;h<I.columns;h++)I.set(g,h,I.get(g,h)/_)}(this,h),this;default:throw new Error(`invalid option: ${_}`)}}toString(_){return M(this,_)}}function ke(I,_){return I-_}_e.prototype.klass="Matrix","undefined"!=typeof Symbol&&(_e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return M(this)}),_e.random=_e.rand,_e.randomInt=_e.randInt,_e.diagonal=_e.diag,_e.prototype.diagonal=_e.prototype.diag,_e.identity=_e.eye,_e.prototype.negate=_e.prototype.neg,_e.prototype.tensorProduct=_e.prototype.kroneckerProduct;class fe extends _e{constructor(_,g){if(super(),fe.isMatrix(_))return _.clone();if(Number.isInteger(_)&&_>=0){if(this.data=[],!(Number.isInteger(g)&&g>=0))throw new TypeError("nColumns must be a positive integer");for(let h=0;h<_;h++)this.data.push(new Float64Array(g))}else{if(!Array.isArray(_))throw new TypeError("First argument must be a positive number or an array");{const h=_;if("number"!=typeof(g=(_=h.length)?h[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let m=0;m<_;m++){if(h[m].length!==g)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(h[m]))}}}this.rows=_,this.columns=g}set(_,g,h){return this.data[_][g]=h,this}get(_,g){return this.data[_][g]}removeRow(_){return(0,F.zb)(this,_),this.data.splice(_,1),this.rows-=1,this}addRow(_,g){return void 0===g&&(g=_,_=this.rows),(0,F.zb)(this,_,!0),g=Float64Array.from((0,F.on)(this,g)),this.data.splice(_,0,g),this.rows+=1,this}removeColumn(_){(0,F.bp)(this,_);for(let g=0;g<this.rows;g++){const h=new Float64Array(this.columns-1);for(let m=0;m<_;m++)h[m]=this.data[g][m];for(let m=_+1;m<this.columns;m++)h[m-1]=this.data[g][m];this.data[g]=h}return this.columns-=1,this}addColumn(_,g){void 0===g&&(g=_,_=this.columns),(0,F.bp)(this,_,!0),g=(0,F.Um)(this,g);for(let h=0;h<this.rows;h++){const m=new Float64Array(this.columns+1);let y=0;for(;y<_;y++)m[y]=this.data[h][y];for(m[y++]=g[h];y<this.columns+1;y++)m[y]=this.data[h][y-1];this.data[h]=m}return this.columns+=1,this}}_=fe,(I=_e).prototype.add=function(h){return"number"==typeof h?this.addS(h):this.addM(h)},I.prototype.addS=function(h){for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)+h);return this},I.prototype.addM=function(h){if(h=_.checkMatrix(h),this.rows!==h.rows||this.columns!==h.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)+h.get(m,y));return this},I.add=function(h,m){return new _(h).add(m)},I.prototype.sub=function(h){return"number"==typeof h?this.subS(h):this.subM(h)},I.prototype.subS=function(h){for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)-h);return this},I.prototype.subM=function(h){if(h=_.checkMatrix(h),this.rows!==h.rows||this.columns!==h.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)-h.get(m,y));return this},I.sub=function(h,m){return new _(h).sub(m)},I.prototype.subtract=I.prototype.sub,I.prototype.subtractS=I.prototype.subS,I.prototype.subtractM=I.prototype.subM,I.subtract=I.sub,I.prototype.mul=function(h){return"number"==typeof h?this.mulS(h):this.mulM(h)},I.prototype.mulS=function(h){for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)*h);return this},I.prototype.mulM=function(h){if(h=_.checkMatrix(h),this.rows!==h.rows||this.columns!==h.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)*h.get(m,y));return this},I.mul=function(h,m){return new _(h).mul(m)},I.prototype.multiply=I.prototype.mul,I.prototype.multiplyS=I.prototype.mulS,I.prototype.multiplyM=I.prototype.mulM,I.multiply=I.mul,I.prototype.div=function(h){return"number"==typeof h?this.divS(h):this.divM(h)},I.prototype.divS=function(h){for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)/h);return this},I.prototype.divM=function(h){if(h=_.checkMatrix(h),this.rows!==h.rows||this.columns!==h.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)/h.get(m,y));return this},I.div=function(h,m){return new _(h).div(m)},I.prototype.divide=I.prototype.div,I.prototype.divideS=I.prototype.divS,I.prototype.divideM=I.prototype.divM,I.divide=I.div,I.prototype.mod=function(h){return"number"==typeof h?this.modS(h):this.modM(h)},I.prototype.modS=function(h){for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)%h);return this},I.prototype.modM=function(h){if(h=_.checkMatrix(h),this.rows!==h.rows||this.columns!==h.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)%h.get(m,y));return this},I.mod=function(h,m){return new _(h).mod(m)},I.prototype.modulus=I.prototype.mod,I.prototype.modulusS=I.prototype.modS,I.prototype.modulusM=I.prototype.modM,I.modulus=I.mod,I.prototype.and=function(h){return"number"==typeof h?this.andS(h):this.andM(h)},I.prototype.andS=function(h){for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)&h);return this},I.prototype.andM=function(h){if(h=_.checkMatrix(h),this.rows!==h.rows||this.columns!==h.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)&h.get(m,y));return this},I.and=function(h,m){return new _(h).and(m)},I.prototype.or=function(h){return"number"==typeof h?this.orS(h):this.orM(h)},I.prototype.orS=function(h){for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)|h);return this},I.prototype.orM=function(h){if(h=_.checkMatrix(h),this.rows!==h.rows||this.columns!==h.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)|h.get(m,y));return this},I.or=function(h,m){return new _(h).or(m)},I.prototype.xor=function(h){return"number"==typeof h?this.xorS(h):this.xorM(h)},I.prototype.xorS=function(h){for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)^h);return this},I.prototype.xorM=function(h){if(h=_.checkMatrix(h),this.rows!==h.rows||this.columns!==h.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)^h.get(m,y));return this},I.xor=function(h,m){return new _(h).xor(m)},I.prototype.leftShift=function(h){return"number"==typeof h?this.leftShiftS(h):this.leftShiftM(h)},I.prototype.leftShiftS=function(h){for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)<<h);return this},I.prototype.leftShiftM=function(h){if(h=_.checkMatrix(h),this.rows!==h.rows||this.columns!==h.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)<<h.get(m,y));return this},I.leftShift=function(h,m){return new _(h).leftShift(m)},I.prototype.signPropagatingRightShift=function(h){return"number"==typeof h?this.signPropagatingRightShiftS(h):this.signPropagatingRightShiftM(h)},I.prototype.signPropagatingRightShiftS=function(h){for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)>>h);return this},I.prototype.signPropagatingRightShiftM=function(h){if(h=_.checkMatrix(h),this.rows!==h.rows||this.columns!==h.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)>>h.get(m,y));return this},I.signPropagatingRightShift=function(h,m){return new _(h).signPropagatingRightShift(m)},I.prototype.rightShift=function(h){return"number"==typeof h?this.rightShiftS(h):this.rightShiftM(h)},I.prototype.rightShiftS=function(h){for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)>>>h);return this},I.prototype.rightShiftM=function(h){if(h=_.checkMatrix(h),this.rows!==h.rows||this.columns!==h.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,this.get(m,y)>>>h.get(m,y));return this},I.rightShift=function(h,m){return new _(h).rightShift(m)},I.prototype.zeroFillRightShift=I.prototype.rightShift,I.prototype.zeroFillRightShiftS=I.prototype.rightShiftS,I.prototype.zeroFillRightShiftM=I.prototype.rightShiftM,I.zeroFillRightShift=I.rightShift,I.prototype.not=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,~this.get(h,m));return this},I.not=function(h){return new _(h).not()},I.prototype.abs=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.abs(this.get(h,m)));return this},I.abs=function(h){return new _(h).abs()},I.prototype.acos=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.acos(this.get(h,m)));return this},I.acos=function(h){return new _(h).acos()},I.prototype.acosh=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.acosh(this.get(h,m)));return this},I.acosh=function(h){return new _(h).acosh()},I.prototype.asin=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.asin(this.get(h,m)));return this},I.asin=function(h){return new _(h).asin()},I.prototype.asinh=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.asinh(this.get(h,m)));return this},I.asinh=function(h){return new _(h).asinh()},I.prototype.atan=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.atan(this.get(h,m)));return this},I.atan=function(h){return new _(h).atan()},I.prototype.atanh=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.atanh(this.get(h,m)));return this},I.atanh=function(h){return new _(h).atanh()},I.prototype.cbrt=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.cbrt(this.get(h,m)));return this},I.cbrt=function(h){return new _(h).cbrt()},I.prototype.ceil=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.ceil(this.get(h,m)));return this},I.ceil=function(h){return new _(h).ceil()},I.prototype.clz32=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.clz32(this.get(h,m)));return this},I.clz32=function(h){return new _(h).clz32()},I.prototype.cos=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.cos(this.get(h,m)));return this},I.cos=function(h){return new _(h).cos()},I.prototype.cosh=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.cosh(this.get(h,m)));return this},I.cosh=function(h){return new _(h).cosh()},I.prototype.exp=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.exp(this.get(h,m)));return this},I.exp=function(h){return new _(h).exp()},I.prototype.expm1=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.expm1(this.get(h,m)));return this},I.expm1=function(h){return new _(h).expm1()},I.prototype.floor=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.floor(this.get(h,m)));return this},I.floor=function(h){return new _(h).floor()},I.prototype.fround=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.fround(this.get(h,m)));return this},I.fround=function(h){return new _(h).fround()},I.prototype.log=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.log(this.get(h,m)));return this},I.log=function(h){return new _(h).log()},I.prototype.log1p=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.log1p(this.get(h,m)));return this},I.log1p=function(h){return new _(h).log1p()},I.prototype.log10=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.log10(this.get(h,m)));return this},I.log10=function(h){return new _(h).log10()},I.prototype.log2=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.log2(this.get(h,m)));return this},I.log2=function(h){return new _(h).log2()},I.prototype.round=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.round(this.get(h,m)));return this},I.round=function(h){return new _(h).round()},I.prototype.sign=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.sign(this.get(h,m)));return this},I.sign=function(h){return new _(h).sign()},I.prototype.sin=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.sin(this.get(h,m)));return this},I.sin=function(h){return new _(h).sin()},I.prototype.sinh=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.sinh(this.get(h,m)));return this},I.sinh=function(h){return new _(h).sinh()},I.prototype.sqrt=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.sqrt(this.get(h,m)));return this},I.sqrt=function(h){return new _(h).sqrt()},I.prototype.tan=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.tan(this.get(h,m)));return this},I.tan=function(h){return new _(h).tan()},I.prototype.tanh=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.tanh(this.get(h,m)));return this},I.tanh=function(h){return new _(h).tanh()},I.prototype.trunc=function(){for(let h=0;h<this.rows;h++)for(let m=0;m<this.columns;m++)this.set(h,m,Math.trunc(this.get(h,m)));return this},I.trunc=function(h){return new _(h).trunc()},I.pow=function(h,m){return new _(h).pow(m)},I.prototype.pow=function(h){return"number"==typeof h?this.powS(h):this.powM(h)},I.prototype.powS=function(h){for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,Math.pow(this.get(m,y),h));return this},I.prototype.powM=function(h){if(h=_.checkMatrix(h),this.rows!==h.rows||this.columns!==h.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let y=0;y<this.columns;y++)this.set(m,y,Math.pow(this.get(m,y),h.get(m,y)));return this}},1501:(we,se,T)=>{"use strict";function R(U,P,F){if(P<0||P>(F?U.rows:U.rows-1))throw new RangeError("Row index out of range")}function V(U,P,F){if(P<0||P>(F?U.columns:U.columns-1))throw new RangeError("Column index out of range")}function x(U,P){if(P.to1DArray&&(P=P.to1DArray()),P.length!==U.columns)throw new RangeError("vector size must be the same as the number of columns");return P}function C(U,P){if(P.to1DArray&&(P=P.to1DArray()),P.length!==U.rows)throw new RangeError("vector size must be the same as the number of rows");return P}function E(U,P,F){return{row:w(U,P),column:D(U,F)}}function w(U,P){if("object"!=typeof P)throw new TypeError("unexpected type for row indices");if(P.some(j=>j<0||j>=U.rows))throw new RangeError("row indices are out of range");return Array.isArray(P)||(P=Array.from(P)),P}function D(U,P){if("object"!=typeof P)throw new TypeError("unexpected type for column indices");if(P.some(j=>j<0||j>=U.columns))throw new RangeError("column indices are out of range");return Array.isArray(P)||(P=Array.from(P)),P}function k(U,P,F,j,Q){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(M("startRow",P),M("endRow",F),M("startColumn",j),M("endColumn",Q),P>F||j>Q||P<0||P>=U.rows||F<0||F>=U.rows||j<0||j>=U.columns||Q<0||Q>=U.columns)throw new RangeError("Submatrix indices are out of range")}function v(U,P=0){let F=[];for(let j=0;j<U;j++)F.push(P);return F}function M(U,P){if("number"!=typeof P)throw new TypeError(`${U} must be a number`)}function O(U){if(U.isEmpty())throw new Error("Empty matrix has no elements to index")}T.d(se,{zb:()=>R,bp:()=>V,on:()=>x,Um:()=>C,N2:()=>E,ZR:()=>w,g:()=>D,J5:()=>k,B4:()=>v,cT:()=>O})},7568:(we,se,T)=>{"use strict";T.d(se,{Z:()=>V});var R=T(9690);class V extends R.X{constructor(C,E,w){super(),this.matrix=C,this.rows=E,this.columns=w}}},4395:(we,se,T)=>{"use strict";T.d(se,{Z:()=>V});var R=T(7568);class V extends R.Z{constructor(C){super(C,C.columns,C.rows)}set(C,E,w){return this.matrix.set(E,C,w),this}get(C,E){return this.matrix.get(E,C)}}},6991:(we,se,T)=>{"use strict";T.d(se,{Z:()=>V});var R=T(9690);class V extends R.X{constructor(C){super(),this.data=C,this.rows=C.length,this.columns=C[0].length}set(C,E,w){return this.data[C][E]=w,this}get(C,E){return this.data[C][E]}}},1812:we=>{we.exports=function(T,R){T=T||0;for(var V=new Array(T),x=0;x<T;x++)V[x]=R;return V}},3769:we=>{we.exports=function(T){return 0===T?1:(T--,T|=T>>1,T|=T>>2,T|=T>>4,T|=T>>8,1+(T|=T>>16))}},3305:(we,se,T)=>{"use strict";var R=T(2464),V=T(7642),x=T(5583),C=T(976);function v(L,B,K,J){return function(re,le,te){var me=L(L(B(le[1],te[0]),B(-te[1],le[0])),L(B(re[1],le[0]),B(-le[1],re[0]))),xe=L(B(re[1],te[0]),B(-te[1],re[0])),tt=J(me,xe);return tt[tt.length-1]}}function M(L,B,K,J){return function(re,le,te,me){var xe=L(L(K(L(B(te[1],me[0]),B(-me[1],te[0])),le[2]),L(K(L(B(le[1],me[0]),B(-me[1],le[0])),-te[2]),K(L(B(le[1],te[0]),B(-te[1],le[0])),me[2]))),L(K(L(B(le[1],me[0]),B(-me[1],le[0])),re[2]),L(K(L(B(re[1],me[0]),B(-me[1],re[0])),-le[2]),K(L(B(re[1],le[0]),B(-le[1],re[0])),me[2])))),tt=L(L(K(L(B(te[1],me[0]),B(-me[1],te[0])),re[2]),L(K(L(B(re[1],me[0]),B(-me[1],re[0])),-te[2]),K(L(B(re[1],te[0]),B(-te[1],re[0])),me[2]))),L(K(L(B(le[1],te[0]),B(-te[1],le[0])),re[2]),L(K(L(B(re[1],te[0]),B(-te[1],re[0])),-le[2]),K(L(B(re[1],le[0]),B(-le[1],re[0])),te[2])))),qe=J(xe,tt);return qe[qe.length-1]}}function O(L,B,K,J){return function(re,le,te,me,xe){var tt=L(L(L(K(L(K(L(B(me[1],xe[0]),B(-xe[1],me[0])),te[2]),L(K(L(B(te[1],xe[0]),B(-xe[1],te[0])),-me[2]),K(L(B(te[1],me[0]),B(-me[1],te[0])),xe[2]))),le[3]),L(K(L(K(L(B(me[1],xe[0]),B(-xe[1],me[0])),le[2]),L(K(L(B(le[1],xe[0]),B(-xe[1],le[0])),-me[2]),K(L(B(le[1],me[0]),B(-me[1],le[0])),xe[2]))),-te[3]),K(L(K(L(B(te[1],xe[0]),B(-xe[1],te[0])),le[2]),L(K(L(B(le[1],xe[0]),B(-xe[1],le[0])),-te[2]),K(L(B(le[1],te[0]),B(-te[1],le[0])),xe[2]))),me[3]))),L(K(L(K(L(B(te[1],me[0]),B(-me[1],te[0])),le[2]),L(K(L(B(le[1],me[0]),B(-me[1],le[0])),-te[2]),K(L(B(le[1],te[0]),B(-te[1],le[0])),me[2]))),-xe[3]),L(K(L(K(L(B(me[1],xe[0]),B(-xe[1],me[0])),le[2]),L(K(L(B(le[1],xe[0]),B(-xe[1],le[0])),-me[2]),K(L(B(le[1],me[0]),B(-me[1],le[0])),xe[2]))),re[3]),K(L(K(L(B(me[1],xe[0]),B(-xe[1],me[0])),re[2]),L(K(L(B(re[1],xe[0]),B(-xe[1],re[0])),-me[2]),K(L(B(re[1],me[0]),B(-me[1],re[0])),xe[2]))),-le[3])))),L(L(K(L(K(L(B(le[1],xe[0]),B(-xe[1],le[0])),re[2]),L(K(L(B(re[1],xe[0]),B(-xe[1],re[0])),-le[2]),K(L(B(re[1],le[0]),B(-le[1],re[0])),xe[2]))),me[3]),L(K(L(K(L(B(le[1],me[0]),B(-me[1],le[0])),re[2]),L(K(L(B(re[1],me[0]),B(-me[1],re[0])),-le[2]),K(L(B(re[1],le[0]),B(-le[1],re[0])),me[2]))),-xe[3]),K(L(K(L(B(te[1],me[0]),B(-me[1],te[0])),le[2]),L(K(L(B(le[1],me[0]),B(-me[1],le[0])),-te[2]),K(L(B(le[1],te[0]),B(-te[1],le[0])),me[2]))),re[3]))),L(K(L(K(L(B(te[1],me[0]),B(-me[1],te[0])),re[2]),L(K(L(B(re[1],me[0]),B(-me[1],re[0])),-te[2]),K(L(B(re[1],te[0]),B(-te[1],re[0])),me[2]))),-le[3]),L(K(L(K(L(B(le[1],me[0]),B(-me[1],le[0])),re[2]),L(K(L(B(re[1],me[0]),B(-me[1],re[0])),-le[2]),K(L(B(re[1],le[0]),B(-le[1],re[0])),me[2]))),te[3]),K(L(K(L(B(le[1],te[0]),B(-te[1],le[0])),re[2]),L(K(L(B(re[1],te[0]),B(-te[1],re[0])),-le[2]),K(L(B(re[1],le[0]),B(-le[1],re[0])),te[2]))),-me[3]))))),qe=L(L(L(K(L(K(L(B(me[1],xe[0]),B(-xe[1],me[0])),te[2]),L(K(L(B(te[1],xe[0]),B(-xe[1],te[0])),-me[2]),K(L(B(te[1],me[0]),B(-me[1],te[0])),xe[2]))),re[3]),K(L(K(L(B(me[1],xe[0]),B(-xe[1],me[0])),re[2]),L(K(L(B(re[1],xe[0]),B(-xe[1],re[0])),-me[2]),K(L(B(re[1],me[0]),B(-me[1],re[0])),xe[2]))),-te[3])),L(K(L(K(L(B(te[1],xe[0]),B(-xe[1],te[0])),re[2]),L(K(L(B(re[1],xe[0]),B(-xe[1],re[0])),-te[2]),K(L(B(re[1],te[0]),B(-te[1],re[0])),xe[2]))),me[3]),K(L(K(L(B(te[1],me[0]),B(-me[1],te[0])),re[2]),L(K(L(B(re[1],me[0]),B(-me[1],re[0])),-te[2]),K(L(B(re[1],te[0]),B(-te[1],re[0])),me[2]))),-xe[3]))),L(L(K(L(K(L(B(te[1],xe[0]),B(-xe[1],te[0])),le[2]),L(K(L(B(le[1],xe[0]),B(-xe[1],le[0])),-te[2]),K(L(B(le[1],te[0]),B(-te[1],le[0])),xe[2]))),re[3]),K(L(K(L(B(te[1],xe[0]),B(-xe[1],te[0])),re[2]),L(K(L(B(re[1],xe[0]),B(-xe[1],re[0])),-te[2]),K(L(B(re[1],te[0]),B(-te[1],re[0])),xe[2]))),-le[3])),L(K(L(K(L(B(le[1],xe[0]),B(-xe[1],le[0])),re[2]),L(K(L(B(re[1],xe[0]),B(-xe[1],re[0])),-le[2]),K(L(B(re[1],le[0]),B(-le[1],re[0])),xe[2]))),te[3]),K(L(K(L(B(le[1],te[0]),B(-te[1],le[0])),re[2]),L(K(L(B(re[1],te[0]),B(-te[1],re[0])),-le[2]),K(L(B(re[1],le[0]),B(-le[1],re[0])),te[2]))),-xe[3])))),pt=J(tt,qe);return pt[pt.length-1]}}function U(L){return(3===L?v:4===L?M:O)(V,R,x,C)}var P=U(3),F=U(4),j=[function(){return 0},function(){return 0},function(B,K){return K[0]-B[0]},function(B,K,J){var te,ye=(B[1]-J[1])*(K[0]-J[0]),re=(B[0]-J[0])*(K[1]-J[1]),le=ye-re;if(ye>0){if(re<=0)return le;te=ye+re}else{if(!(ye<0))return le;if(re>=0)return le;te=-(ye+re)}var me=33306690738754716e-32*te;return le>=me||le<=-me?le:P(B,K,J)},function(B,K,J,ye){var re=B[0]-ye[0],le=K[0]-ye[0],te=J[0]-ye[0],me=B[1]-ye[1],xe=K[1]-ye[1],tt=J[1]-ye[1],qe=B[2]-ye[2],pt=K[2]-ye[2],ee=J[2]-ye[2],_e=le*tt,ke=te*xe,fe=te*me,I=re*tt,_=re*xe,g=le*me,h=qe*(_e-ke)+pt*(fe-I)+ee*(_-g),y=7771561172376103e-31*((Math.abs(_e)+Math.abs(ke))*Math.abs(qe)+(Math.abs(fe)+Math.abs(I))*Math.abs(pt)+(Math.abs(_)+Math.abs(g))*Math.abs(ee));return h>y||-h>y?h:F(B,K,J,ye)}];function Q(L){var B=j[L.length];return B||(B=j[L.length]=U(L.length)),B.apply(void 0,L)}function oe(L,B,K,J,ye,re,le){return function(me,xe,tt,qe,pt){switch(arguments.length){case 0:case 1:return 0;case 2:return J(me,xe);case 3:return ye(me,xe,tt);case 4:return re(me,xe,tt,qe);case 5:return le(me,xe,tt,qe,pt)}for(var ee=new Array(arguments.length),_e=0;_e<arguments.length;++_e)ee[_e]=arguments[_e];return L(ee)}}!function(){for(;j.length<=5;)j.push(U(j.length));we.exports=oe.apply(void 0,[Q].concat(j));for(var L=0;L<=5;++L)we.exports[L]=j[L]}()},6397:(we,se,T)=>{we.exports=function(x,C){for(var E=C[0],w=C[1],D=x.length,k=1,v=D,M=0,O=D-1;M<v;O=M++){var U=x[M],P=x[O],F=U[1],j=P[1];if(j<F){if(j<w&&w<F){if(0===(Q=R(U,P,C)))return 0;k^=0<Q|0}else if(w===F&&F<x[(M+1)%D][1]){if(0===(Q=R(U,P,C)))return 0;k^=0<Q|0}}else if(F<j){if(F<w&&w<j){if(0===(Q=R(U,P,C)))return 0;k^=Q<0|0}else if(w===F&&x[(M+1)%D][1]<F){var Q;if(0===(Q=R(U,P,C)))return 0;k^=Q<0|0}}else if(w===F){var L=Math.min(U[0],P[0]),B=Math.max(U[0],P[0]);if(0===M){for(;O>0;){var K=(O+D-1)%D;if((J=x[K])[1]!==w)break;var ye=J[0];L=Math.min(L,ye),B=Math.max(B,ye),O=K}if(0===O)return L<=E&&E<=B?0:1;v=O+1}for(var re=x[(O+D-1)%D][1];M+1<v;){var J;if((J=x[M+1])[1]!==w)break;ye=J[0],L=Math.min(L,ye),B=Math.max(B,ye),M+=1}if(L<=E&&E<=B)return 0;E<L&&re<w!=x[(M+1)%D][1]<w&&(k^=1)}}return 2*k-1};var R=T(3305)},5583:(we,se,T)=>{"use strict";var R=T(2464),V=T(8300);we.exports=function(C,E){var w=C.length;if(1===w){var D=R(C[0],E);return D[0]?D:[D[1]]}var k=new Array(2*w),v=[.1,.1],M=[.1,.1],O=0;R(C[0],E,v),v[0]&&(k[O++]=v[0]);for(var U=1;U<w;++U){R(C[U],E,M),V(v[1],M[0],v),v[0]&&(k[O++]=v[0]);var F=M[1],j=v[1],Q=F+j,ue=j-(Q-F);v[1]=Q,ue&&(k[O++]=ue)}return v[1]&&(k[O++]=v[1]),0===O&&(k[O++]=0),k.length=O,k}},976:we=>{"use strict";we.exports=function(R,V){var x=0|R.length,C=0|V.length;if(1===x&&1===C)return function(R,V){var x=R+V,C=x-R,k=R-(x-C)+(V-C);return k?[k,x]:[x]}(R[0],-V[0]);var j,Q,w=new Array(x+C),D=0,k=0,v=0,M=Math.abs,O=R[k],U=M(O),P=-V[v],F=M(P);U<F?(Q=O,(k+=1)<x&&(U=M(O=R[k]))):(Q=P,(v+=1)<C&&(F=M(P=-V[v]))),k<x&&U<F||v>=C?(j=O,(k+=1)<x&&(U=M(O=R[k]))):(j=P,(v+=1)<C&&(F=M(P=-V[v])));for(var J,ye,oe=j+Q,ue=oe-j,L=Q-ue,B=L,K=oe;k<x&&v<C;)U<F?(j=O,(k+=1)<x&&(U=M(O=R[k]))):(j=P,(v+=1)<C&&(F=M(P=-V[v]))),(L=(Q=B)-(ue=(oe=j+Q)-j))&&(w[D++]=L),B=K-((J=K+oe)-(ye=J-K))+(oe-ye),K=J;for(;k<x;)(L=(Q=B)-(ue=(oe=(j=O)+Q)-j))&&(w[D++]=L),B=K-((J=K+oe)-(ye=J-K))+(oe-ye),K=J,(k+=1)<x&&(O=R[k]);for(;v<C;)(L=(Q=B)-(ue=(oe=(j=P)+Q)-j))&&(w[D++]=L),B=K-((J=K+oe)-(ye=J-K))+(oe-ye),K=J,(v+=1)<C&&(P=-V[v]);return B&&(w[D++]=B),K&&(w[D++]=K),D||(w[D++]=0),w.length=D,w}},7642:we=>{"use strict";we.exports=function(R,V){var x=0|R.length,C=0|V.length;if(1===x&&1===C)return function(R,V){var x=R+V,C=x-R,k=R-(x-C)+(V-C);return k?[k,x]:[x]}(R[0],V[0]);var j,Q,w=new Array(x+C),D=0,k=0,v=0,M=Math.abs,O=R[k],U=M(O),P=V[v],F=M(P);U<F?(Q=O,(k+=1)<x&&(U=M(O=R[k]))):(Q=P,(v+=1)<C&&(F=M(P=V[v]))),k<x&&U<F||v>=C?(j=O,(k+=1)<x&&(U=M(O=R[k]))):(j=P,(v+=1)<C&&(F=M(P=V[v])));for(var J,ye,oe=j+Q,ue=oe-j,L=Q-ue,B=L,K=oe;k<x&&v<C;)U<F?(j=O,(k+=1)<x&&(U=M(O=R[k]))):(j=P,(v+=1)<C&&(F=M(P=V[v]))),(L=(Q=B)-(ue=(oe=j+Q)-j))&&(w[D++]=L),B=K-((J=K+oe)-(ye=J-K))+(oe-ye),K=J;for(;k<x;)(L=(Q=B)-(ue=(oe=(j=O)+Q)-j))&&(w[D++]=L),B=K-((J=K+oe)-(ye=J-K))+(oe-ye),K=J,(k+=1)<x&&(O=R[k]);for(;v<C;)(L=(Q=B)-(ue=(oe=(j=P)+Q)-j))&&(w[D++]=L),B=K-((J=K+oe)-(ye=J-K))+(oe-ye),K=J,(v+=1)<C&&(P=V[v]);return B&&(w[D++]=B),K&&(w[D++]=K),D||(w[D++]=0),w.length=D,w}},7538:we=>{we.exports=function V(x,C,E){function w(v,M){if(!C[v]){if(!x[v]){if(D)return D(v,!0);var U=new Error("Cannot find module '"+v+"'");throw U.code="MODULE_NOT_FOUND",U}var P=C[v]={exports:{}};x[v][0].call(P.exports,function(F){return w(x[v][1][F]||F)},P,P.exports,V,x,C,E)}return C[v].exports}for(var D=void 0,k=0;k<E.length;k++)w(E[k]);return w}({1:[function(V,x,C){var w,D,E=x.exports={};function k(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}function M(B){if(w===setTimeout)return setTimeout(B,0);if((w===k||!w)&&setTimeout)return w=setTimeout,setTimeout(B,0);try{return w(B,0)}catch(K){try{return w.call(null,B,0)}catch(J){return w.call(this,B,0)}}}!function(){try{w="function"==typeof setTimeout?setTimeout:k}catch(B){w=k}try{D="function"==typeof clearTimeout?clearTimeout:v}catch(B){D=v}}();var F,U=[],P=!1,j=-1;function Q(){!P||!F||(P=!1,F.length?U=F.concat(U):j=-1,U.length&&oe())}function oe(){if(!P){var B=M(Q);P=!0;for(var K=U.length;K;){for(F=U,U=[];++j<K;)F&&F[j].run();j=-1,K=U.length}F=null,P=!1,function(B){if(D===clearTimeout)return clearTimeout(B);if((D===v||!D)&&clearTimeout)return D=clearTimeout,clearTimeout(B);try{D(B)}catch(K){try{return D.call(null,B)}catch(J){return D.call(this,B)}}}(B)}}function ue(B,K){this.fun=B,this.array=K}function L(){}E.nextTick=function(B){var K=new Array(arguments.length-1);if(arguments.length>1)for(var J=1;J<arguments.length;J++)K[J-1]=arguments[J];U.push(new ue(B,K)),1===U.length&&!P&&M(oe)},ue.prototype.run=function(){this.fun.apply(null,this.array)},E.title="browser",E.browser=!0,E.env={},E.argv=[],E.version="",E.versions={},E.on=L,E.addListener=L,E.once=L,E.off=L,E.removeListener=L,E.removeAllListeners=L,E.emit=L,E.prependListener=L,E.prependOnceListener=L,E.listeners=function(B){return[]},E.binding=function(B){throw new Error("process.binding is not supported")},E.cwd=function(){return"/"},E.chdir=function(B){throw new Error("process.chdir is not supported")},E.umask=function(){return 0}},{}],2:[function(V,x,C){x.exports={name:"tesseract.js",version:"1.0.19",description:"Pure Javascript Multilingual OCR",main:"src/index.js",scripts:{start:'concurrently --kill-others "watchify src/index.js  -t [ envify --TESS_ENV development ] -t [ babelify --presets [ es2015 ] ] -o dist/tesseract.dev.js --standalone Tesseract" "watchify src/browser/worker.js  -t [ envify --TESS_ENV development ] -t [ babelify --presets [ es2015 ] ] -o dist/worker.dev.js" "http-server -p 7355"',build:"browserify src/index.js -t [ babelify --presets [ es2015 ] ] -o dist/tesseract.js --standalone Tesseract && browserify src/browser/worker.js -t [ babelify --presets [ es2015 ] ] -o dist/worker.js && uglifyjs dist/tesseract.js --source-map -o dist/tesseract.min.js && uglifyjs dist/worker.js --source-map -o dist/worker.min.js",release:"npm run build && git commit -am 'new release' && git push && git tag `jq -r '.version' package.json` && git push origin --tags && npm publish"},browser:{"./src/node/index.js":"./src/browser/index.js"},author:"",license:"Apache-2.0",devDependencies:{"babel-preset-es2015":"^6.16.0",babelify:"^7.3.0",browserify:"^13.1.0",concurrently:"^3.1.0",envify:"^3.4.1","http-server":"^0.9.0",pako:"^1.0.3","uglify-js":"^3.4.9",watchify:"^3.7.0"},dependencies:{"file-type":"^3.8.0","isomorphic-fetch":"^2.2.1","is-url":"1.2.2","jpeg-js":"^0.2.0","level-js":"^2.2.4","node-fetch":"^1.6.3","object-assign":"^4.1.0","png.js":"^0.2.1","tesseract.js-core":"^1.0.2"},repository:{type:"git",url:"https://github.com/naptha/tesseract.js.git"},bugs:{url:"https://github.com/naptha/tesseract.js/issues"},homepage:"https://github.com/naptha/tesseract.js"}},{}],3:[function(V,x,C){(function(E){"use strict";var w={corePath:"https://cdn.jsdelivr.net/gh/naptha/tesseract.js-core@0.1.0/index.js",langPath:"https://tessdata.projectnaptha.com/3.02/"};if("development"===E.env.TESS_ENV)console.debug("Using Development Configuration"),w.workerPath=location.protocol+"//"+location.host+"/dist/worker.dev.js?nocache="+Math.random().toString(36).slice(3);else{var D=V("../../package.json").version;w.workerPath="https://cdn.jsdelivr.net/gh/naptha/tesseract.js@"+D+"/dist/worker.js"}function k(v,M){if("string"==typeof v){if(/^\#/.test(v))return k(document.querySelector(v),M);if(/(blob|data)\:/.test(v)){var O=new Image;return O.src=v,O.onload=function(oe){return k(O,M)},void(O.onerror=function(oe){throw oe})}var U=new XMLHttpRequest;return U.open("GET",v,!0),U.responseType="blob",U.onload=function(oe){if(U.status>=400)throw new Error("Fail to get image as Blob");k(U.response,M)},U.onerror=function(oe){throw oe},void U.send(null)}if(v instanceof File){var P=new FileReader;return P.onload=function(oe){return k(P.result,M)},P.onerror=function(oe){throw oe},void P.readAsDataURL(v)}if(v instanceof Blob)return k(URL.createObjectURL(v),M);if(v.getContext)return k(v.getContext("2d"),M);if("IMG"==v.tagName||"VIDEO"==v.tagName){var F=document.createElement("canvas");F.width=v.naturalWidth||v.videoWidth,F.height=v.naturalHeight||v.videoHeight;var j=F.getContext("2d");return j.drawImage(v,0,0),k(j,M)}return v.getImageData?k(v.getImageData(0,0,v.canvas.width,v.canvas.height),M):M(v)}C.defaultOptions=w,C.spawnWorker=function(M,O){if(Blob&&URL)var U=new Blob(['importScripts("'+O.workerPath+'");'],{type:"application/javascript"}),P=new Worker(URL.createObjectURL(U));else P=new Worker(O.workerPath);return P.onmessage=function(F){M._recv(F.data)},P},C.terminateWorker=function(v){v.worker.terminate()},C.sendPacket=function(M,O){k(O.payload.image,function(U){O.payload.image=U,M.worker.postMessage(O)})}}).call(this,V("_process"))},{"../../package.json":2,_process:1}],4:[function(V,x,C){"use strict";x.exports=function(w){return w.paragraphs=[],w.lines=[],w.words=[],w.symbols=[],w.blocks.forEach(function(D){D.page=w,D.lines=[],D.words=[],D.symbols=[],D.paragraphs.forEach(function(k){k.block=D,k.page=w,k.words=[],k.symbols=[],k.lines.forEach(function(v){v.paragraph=k,v.block=D,v.page=w,v.symbols=[],v.words.forEach(function(M){M.line=v,M.paragraph=k,M.block=D,M.page=w,M.symbols.forEach(function(O){O.word=M,O.line=v,O.paragraph=k,O.block=D,O.page=w,O.line.symbols.push(O),O.paragraph.symbols.push(O),O.block.symbols.push(O),O.page.symbols.push(O)}),M.paragraph.words.push(M),M.block.words.push(M),M.page.words.push(M)}),v.block.lines.push(v),v.page.lines.push(v)}),k.page.paragraphs.push(k)})}),w}},{}],5:[function(V,x,C){"use strict";var E=function(){function v(M,O){for(var U=0;U<O.length;U++){var P=O[U];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(M,P.key,P)}}return function(M,O,U){return O&&v(M.prototype,O),U&&v(M,U),M}}();var D=V("../node/index.js"),k=0;x.exports=function(){function v(M){(function(v,M){if(!(v instanceof M))throw new TypeError("Cannot call a class as a function")})(this,v),this.id="Job-"+ ++k+"-"+Math.random().toString(16).slice(3,8),this._instance=M,this._resolve=[],this._reject=[],this._progress=[],this._finally=[]}return E(v,[{key:"then",value:function(O,U){return this._resolve.push?this._resolve.push(O):O(this._resolve),U&&this.catch(U),this}},{key:"catch",value:function(O){return this._reject.push?this._reject.push(O):O(this._reject),this}},{key:"progress",value:function(O){return this._progress.push(O),this}},{key:"finally",value:function(O){return this._finally.push(O),this}},{key:"_send",value:function(O,U){D.sendPacket(this._instance,{jobId:this.id,action:O,payload:U})}},{key:"_handle",value:function(O){var U=O.data,P=!1;"resolve"===O.status?(0===this._resolve.length&&console.log(U),this._resolve.forEach(function(F){var j=F(U);j&&"function"==typeof j.then&&console.warn("TesseractJob instances do not chain like ES6 Promises. To convert it into a real promise, use Promise.resolve.")}),this._resolve=U,this._instance._dequeue(),P=!0):"reject"===O.status?(0===this._reject.length&&console.error(U),this._reject.forEach(function(F){return F(U)}),this._reject=U,this._instance._dequeue(),P=!0):"progress"===O.status?this._progress.forEach(function(F){return F(U)}):console.warn("Message type unknown",O.status),P&&this._finally.forEach(function(F){return F(U)})}}]),v}()},{"../node/index.js":3}],6:[function(V,x,C){"use strict";var E=function(){function P(F,j){for(var Q=0;Q<j.length;Q++){var oe=j[Q];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(F,oe.key,oe)}}return function(F,j,Q){return j&&P(F.prototype,j),Q&&P(F,Q),F}}();var D=V("./node/index.js"),k=V("./common/circularize.js"),v=V("./common/job"),M=V("../package.json").version,U=function(){function P(F){(function(P,F){if(!(P instanceof F))throw new TypeError("Cannot call a class as a function")})(this,P),this.worker=null,this.workerOptions=F,this._currentJob=null,this._queue=[]}return E(P,[{key:"recognize",value:function(j){var Q=this,oe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._delay(function(ue){"string"==typeof oe&&(oe={lang:oe}),oe.lang=oe.lang||"eng",ue._send("recognize",{image:j,options:oe,workerOptions:Q.workerOptions})})}},{key:"detect",value:function(j){var Q=this,oe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._delay(function(ue){ue._send("detect",{image:j,options:oe,workerOptions:Q.workerOptions})})}},{key:"terminate",value:function(){this.worker&&D.terminateWorker(this),this.worker=null,this._currentJob=null,this._queue=[]}},{key:"_delay",value:function(j){var Q=this;this.worker||(this.worker=D.spawnWorker(this,this.workerOptions));var oe=new v(this);return this._queue.push(function(ue){Q._queue.shift(),Q._currentJob=oe,j(oe)}),this._currentJob||this._dequeue(),oe}},{key:"_dequeue",value:function(){this._currentJob=null,this._queue.length&&this._queue[0]()}},{key:"_recv",value:function(j){"resolve"===j.status&&"recognize"===j.action&&(j.data=k(j.data)),this._currentJob.id===j.jobId?this._currentJob._handle(j):console.warn("Job ID "+j.jobId+" not known.")}}]),P}();x.exports=function P(){var j=new U(Object.assign({},D.defaultOptions,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}));return j.create=P,j.version=M,j}()},{"../package.json":2,"./common/circularize.js":4,"./common/job":5,"./node/index.js":3}]},{},[6])(6)},6495:(we,se,T)=>{var R={corePath:"https://cdn.jsdelivr.net/gh/naptha/tesseract.js-core@0.1.0/index.js",langPath:"https://tessdata.projectnaptha.com/3.02/"};if("development"===process.env.TESS_ENV)console.debug("Using Development Configuration"),R.workerPath=location.protocol+"//"+location.host+"/dist/worker.dev.js?nocache="+Math.random().toString(36).slice(3);else{var V=T(4547).i8;R.workerPath="https://cdn.jsdelivr.net/gh/naptha/tesseract.js@"+V+"/dist/worker.js"}function x(C,E){if("string"==typeof C){if(/^\#/.test(C))return x(document.querySelector(C),E);if(/(blob|data)\:/.test(C)){var w=new Image;return w.src=C,w.onload=U=>x(w,E),void(w.onerror=U=>{throw U})}var D=new XMLHttpRequest;return D.open("GET",C,!0),D.responseType="blob",D.onload=U=>{if(D.status>=400)throw new Error("Fail to get image as Blob");x(D.response,E)},D.onerror=U=>{throw U},void D.send(null)}if(C instanceof File){var k=new FileReader;return k.onload=U=>x(k.result,E),k.onerror=U=>{throw U},void k.readAsDataURL(C)}if(C instanceof Blob)return x(URL.createObjectURL(C),E);if(C.getContext)return x(C.getContext("2d"),E);if("IMG"==C.tagName||"VIDEO"==C.tagName){var v=document.createElement("canvas");v.width=C.naturalWidth||C.videoWidth,v.height=C.naturalHeight||C.videoHeight;var M=v.getContext("2d");return M.drawImage(C,0,0),x(M,E)}return C.getImageData?x(C.getImageData(0,0,C.canvas.width,C.canvas.height),E):E(C)}se.defaultOptions=R,se.spawnWorker=function(E,w){if(Blob&&URL)var D=new Blob(['importScripts("'+w.workerPath+'");'],{type:"application/javascript"}),k=new Worker(URL.createObjectURL(D));else k=new Worker(w.workerPath);return k.onmessage=function(v){E._recv(v.data)},k},se.terminateWorker=function(C){C.worker.terminate()},se.sendPacket=function(E,w){x(w.payload.image,function(D){w.payload.image=D,E.worker.postMessage(w)})}},9935:we=>{we.exports=function(T){return T.paragraphs=[],T.lines=[],T.words=[],T.symbols=[],T.blocks.forEach(function(R){R.page=T,R.lines=[],R.words=[],R.symbols=[],R.paragraphs.forEach(function(V){V.block=R,V.page=T,V.words=[],V.symbols=[],V.lines.forEach(function(x){x.paragraph=V,x.block=R,x.page=T,x.symbols=[],x.words.forEach(function(C){C.line=x,C.paragraph=V,C.block=R,C.page=T,C.symbols.forEach(function(E){E.word=C,E.line=x,E.paragraph=V,E.block=R,E.page=T,E.line.symbols.push(E),E.paragraph.symbols.push(E),E.block.symbols.push(E),E.page.symbols.push(E)}),C.paragraph.words.push(C),C.block.words.push(C),C.page.words.push(C)}),x.block.lines.push(x),x.page.lines.push(x)}),V.page.paragraphs.push(V)})}),T}},3915:(we,se,T)=>{const R=T(6495);let V=0;we.exports=class{constructor(C){this.id="Job-"+ ++V+"-"+Math.random().toString(16).slice(3,8),this._instance=C,this._resolve=[],this._reject=[],this._progress=[],this._finally=[]}then(C,E){return this._resolve.push?this._resolve.push(C):C(this._resolve),E&&this.catch(E),this}catch(C){return this._reject.push?this._reject.push(C):C(this._reject),this}progress(C){return this._progress.push(C),this}finally(C){return this._finally.push(C),this}_send(C,E){R.sendPacket(this._instance,{jobId:this.id,action:C,payload:E})}_handle(C){var E=C.data;let w=!1;"resolve"===C.status?(0===this._resolve.length&&console.log(E),this._resolve.forEach(D=>{var k=D(E);k&&"function"==typeof k.then&&console.warn("TesseractJob instances do not chain like ES6 Promises. To convert it into a real promise, use Promise.resolve.")}),this._resolve=E,this._instance._dequeue(),w=!0):"reject"===C.status?(0===this._reject.length&&console.error(E),this._reject.forEach(D=>D(E)),this._reject=E,this._instance._dequeue(),w=!0):"progress"===C.status?this._progress.forEach(D=>D(E)):console.warn("Message type unknown",C.status),w&&this._finally.forEach(D=>D(E))}}},6682:(we,se,T)=>{const R=T(6495),V=T(9935),x=T(3915),C=T(4547).i8,E=function(D={}){var k=new w(Object.assign({},R.defaultOptions,D));return k.create=E,k.version=C,k};class w{constructor(k){this.worker=null,this.workerOptions=k,this._currentJob=null,this._queue=[]}recognize(k,v={}){return this._delay(M=>{"string"==typeof v&&(v={lang:v}),v.lang=v.lang||"eng",M._send("recognize",{image:k,options:v,workerOptions:this.workerOptions})})}detect(k,v={}){return this._delay(M=>{M._send("detect",{image:k,options:v,workerOptions:this.workerOptions})})}terminate(){this.worker&&R.terminateWorker(this),this.worker=null,this._currentJob=null,this._queue=[]}_delay(k){this.worker||(this.worker=R.spawnWorker(this,this.workerOptions));var v=new x(this);return this._queue.push(M=>{this._queue.shift(),this._currentJob=v,k(v)}),this._currentJob||this._dequeue(),v}_dequeue(){this._currentJob=null,this._queue.length&&this._queue[0]()}_recv(k){"resolve"===k.status&&"recognize"===k.action&&(k.data=V(k.data)),this._currentJob.id===k.jobId?this._currentJob._handle(k):console.warn("Job ID "+k.jobId+" not known.")}}we.exports=E()},4346:(we,se,T)=>{"use strict";var V=T("undefined"!=typeof window?7538:6682);se.A=V},858:function(){"use strict";!function(we){if(we.TextEncoder&&we.TextDecoder)return!1;function se(R="utf-8"){if("utf-8"!==R)throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${R}') is invalid.`)}function T(R="utf-8",V={fatal:!1}){if("utf-8"!==R)throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${R}') is invalid.`);if(V.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(se.prototype,"encoding",{value:"utf-8"}),se.prototype.encode=function(R,V={stream:!1}){if(V.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let x=0;const C=R.length;let w=0,D=Math.max(32,C+(C>>1)+7),k=new Uint8Array(D>>3<<3);for(;x<C;){let v=R.charCodeAt(x++);if(v>=55296&&v<=56319){if(x<C){const M=R.charCodeAt(x);56320==(64512&M)&&(++x,v=((1023&v)<<10)+(1023&M)+65536)}if(v>=55296&&v<=56319)continue}if(w+4>k.length){D+=8,D*=1+x/R.length*2,D=D>>3<<3;const M=new Uint8Array(D);M.set(k),k=M}if(0!=(4294967168&v)){if(0==(4294965248&v))k[w++]=v>>6&31|192;else if(0==(4294901760&v))k[w++]=v>>12&15|224,k[w++]=v>>6&63|128;else{if(0!=(4292870144&v))continue;k[w++]=v>>18&7|240,k[w++]=v>>12&63|128,k[w++]=v>>6&63|128}k[w++]=63&v|128}else k[w++]=v}return k.slice(0,w)},Object.defineProperty(T.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(T.prototype,"fatal",{value:!1}),Object.defineProperty(T.prototype,"ignoreBOM",{value:!1}),T.prototype.decode=function(R,V={stream:!1}){if(V.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const x=new Uint8Array(R);let C=0;const E=x.length,w=[];for(;C<E;){const D=x[C++];if(0===D)break;if(0==(128&D))w.push(D);else if(192==(224&D)){const k=63&x[C++];w.push((31&D)<<6|k)}else if(224==(240&D)){const k=63&x[C++],v=63&x[C++];w.push((31&D)<<12|k<<6|v)}else if(240==(248&D)){let O=(7&D)<<18|(63&x[C++])<<12|(63&x[C++])<<6|63&x[C++];O>65535&&(O-=65536,w.push(O>>>10&1023|55296),O=56320|1023&O),w.push(O)}}return String.fromCharCode.apply(null,w)},we.TextEncoder=se,we.TextDecoder=T}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this)},2464:we=>{"use strict";we.exports=function(R,V,x){var C=R*V,E=se*R,D=E-(E-R),k=R-D,v=se*V,O=v-(v-V),U=V-O,Q=k*U-(C-D*O-k*O-D*U);return x?(x[0]=Q,x[1]=C,x):[Q,C]};var se=+(Math.pow(2,27)+1)},8300:we=>{"use strict";we.exports=function(T,R,V){var x=T+R,C=x-T,w=R-C,D=T-(x-C);return V?(V[0]=D+w,V[1]=x,V):[D+w,x]}},3790:function(we,se,T){var R;we=T.nmd(we),function(V){"object"==typeof global&&global;var j,Q,oe,w=String.fromCharCode;function D(ye){for(var me,xe,re=[],le=0,te=ye.length;le<te;)(me=ye.charCodeAt(le++))>=55296&&me<=56319&&le<te?56320==(64512&(xe=ye.charCodeAt(le++)))?re.push(((1023&me)<<10)+(1023&xe)+65536):(re.push(me),le--):re.push(me);return re}function v(ye){if(ye>=55296&&ye<=57343)throw Error("Lone surrogate U+"+ye.toString(16).toUpperCase()+" is not a scalar value")}function M(ye,re){return w(ye>>re&63|128)}function O(ye){if(0==(4294967168&ye))return w(ye);var re="";return 0==(4294965248&ye)?re=w(ye>>6&31|192):0==(4294901760&ye)?(v(ye),re=w(ye>>12&15|224),re+=M(ye,6)):0==(4292870144&ye)&&(re=w(ye>>18&7|240),re+=M(ye,12),re+=M(ye,6)),re+w(63&ye|128)}function P(){if(oe>=Q)throw Error("Invalid byte index");var ye=255&j[oe];if(oe++,128==(192&ye))return 63&ye;throw Error("Invalid continuation byte")}function F(){var ye,me;if(oe>Q)throw Error("Invalid byte index");if(oe==Q)return!1;if(ye=255&j[oe],oe++,0==(128&ye))return ye;if(192==(224&ye)){if((me=(31&ye)<<6|P())>=128)return me;throw Error("Invalid continuation byte")}if(224==(240&ye)){if((me=(15&ye)<<12|P()<<6|P())>=2048)return v(me),me;throw Error("Invalid continuation byte")}if(240==(248&ye)&&(me=(7&ye)<<18|P()<<12|P()<<6|P())>=65536&&me<=1114111)return me;throw Error("Invalid UTF-8 detected")}var L={version:"2.1.2",encode:function(ye){for(var re=D(ye),le=re.length,te=-1,xe="";++te<le;)xe+=O(re[te]);return xe},decode:function(ye){j=D(ye),Q=j.length,oe=0;for(var le,re=[];!1!==(le=F());)re.push(le);return function(ye){for(var te,re=ye.length,le=-1,me="";++le<re;)(te=ye[le])>65535&&(me+=w((te-=65536)>>>10&1023|55296),te=56320|1023&te),me+=w(te);return me}(re)}};void 0!==(R=function(){return L}.call(se,T,se,we))&&(we.exports=R)}()},7956:(we,se,T)=>{"use strict";var R=T(6902),V=navigator.hardwareConcurrency||1;function C(E,w){if("string"!=typeof E&&"function"!=typeof E)throw new TypeError("func argument must be a function");if(void 0===w&&(w={}),"object"!=typeof w||null===w)throw new TypeError("options argument must be an object");this._workerCode=E.toString(),this._numWorkers=void 0===w.maxWorkers||"auto"===w.maxWorkers?Math.min(V-1,1):w.maxWorkers>0?Math.min(w.maxWorkers,V):V,this._workers=new Map,this._timeout=w.timeout||0,this._terminateOnError=!!w.terminateOnError;var D=w.deps;"string"==typeof D&&(D=[D]),Array.isArray(D)||(D=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(D)}C.prototype._init=function(E){for(var w=R.newWorkerURL(this._workerCode,E),D=0;D<this._numWorkers;D++){var k=new Worker(w);k.onmessage=this._onmessage.bind(this,k),k.onerror=this._onerror.bind(this,k),k.running=!1,k.id=D,this._workers.set(k,null)}URL.revokeObjectURL(w)},C.prototype._onerror=function(E,w){if(!this._terminated){this._working--,E.running=!1;var D=this._workers.get(E);D&&D[1](w.message),this._workers.set(E,null),this._terminateOnError?this.terminate():this._exec()}},C.prototype._onmessage=function(E,w){if(!this._terminated){this._working--,E.running=!1;var D=this._workers.get(E);D&&D[0](w.data.data),this._workers.set(E,null),this._exec()}},C.prototype._exec=function(){for(var E of this._workers.keys()){if(this._working===this._numWorkers||0===this._waiting.length)return;if(!E.running)for(var w=0;w<this._waiting.length;w++){var D=this._waiting[w];if("number"!=typeof D[4]||D[4]===E.id){this._waiting.splice(w,1),E.postMessage({action:"exec",event:D[0],args:D[1]},D[2]),E.running=!0,E.time=Date.now(),this._workers.set(E,D[3]),this._working++;break}}}},C.prototype.terminate=function(){if(!this._terminated){for(var E of this._workers)E[0].terminate(),E[1]&&E[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},C.prototype.postAll=function(E,w){if(this._terminated)throw new Error("Cannot post (terminated)");var D=[];for(var k of this._workers.keys())D.push(this.post(E,w,[],k.id));return Promise.all(D)},C.prototype.post=function(E,w,D,k){void 0===w&&(w=[]),void 0===D&&(D=[]),Array.isArray(w)||(w=[w]),Array.isArray(D)||(D=[D]);var v=this;return new Promise(function(M,O){if(v._terminated)throw new Error("Cannot post (terminated)");v._waiting.push([E,w,D,[M,O],k]),v._exec()})},we.exports=C},6902:(we,se)=>{"use strict";var R=function(){function x(){this._listeners={}}self.window=self,x.prototype.on=function(E,w){if(this._listeners[E])throw new RangeError("there is already a listener for "+E);if("function"!=typeof w)throw new TypeError("callback argument must be a function");this._listeners[E]=w},x.prototype._send=function(E,w,D){void 0===D?D=[]:Array.isArray(D)||(D=[D]),self.postMessage({id:E,data:w},D)},x.prototype._trigger=function(E,w){if(!this._listeners[E])throw new Error("event "+E+" is not defined");this._listeners[E].apply(null,w)};var C=new x;self.onmessage=function(E){switch(E.data.action){case"exec":E.data.args.unshift(function(w,D){C._send(E.data.id,w,D)}),C._trigger(E.data.event,E.data.args);break;case"ping":C._send(E.data.id,"pong");break;default:throw new Error("unexpected action: "+E.data.action)}}}.toString().split('"CODE";');se.newWorkerURL=function(x,C){var E=new Blob(["(",R[0],"importScripts.apply(self, "+JSON.stringify(C)+");\n","(",x,")();",R[1],")();"],{type:"application/javascript"});return URL.createObjectURL(E)}},9745:(we,se,T)=>{"use strict";var R={};T.r(R),T.d(R,{CMYK:()=>Vu,GREY:()=>Ci,HSL:()=>ny,HSV:()=>ry,RGB:()=>kr});var V={};T.r(V),T.d(V,{tagsById:()=>iy,tagsByName:()=>YS});var x={};T.r(x),T.d(x,{tagsById:()=>sy,tagsByName:()=>GS});var C={};function E(e){return"function"==typeof e}T.r(C),T.d(C,{tagsById:()=>oy,tagsByName:()=>WS});let w=!1;const D={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else w&&console.log("RxJS: Back to a better error behavior. Thank you. <3");w=e},get useDeprecatedSynchronousErrorHandling(){return w}};function k(e){setTimeout(()=>{throw e},0)}const v={closed:!0,next(e){},error(e){if(D.useDeprecatedSynchronousErrorHandling)throw e;k(e)},complete(){}},M=Array.isArray||(e=>e&&"number"==typeof e.length);function O(e){return null!==e&&"object"==typeof e}const P=(()=>{function e(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return e.prototype=Object.create(Error.prototype),e})();class F{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof F)n.remove(this);else if(null!==n)for(let o=0;o<n.length;++o)n[o].remove(this);if(E(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(o){t=o instanceof P?j(o.errors):[o]}}if(M(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(O(l))try{l.unsubscribe()}catch(c){t=t||[],c instanceof P?t=t.concat(j(c.errors)):t.push(c)}}}if(t)throw new P(t)}add(t){let n=t;if(!t)return F.EMPTY;switch(typeof t){case"function":n=new F(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof F)){const s=n;n=new F,n._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof F){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const n=this._subscriptions;if(n){const r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}var e;function j(e){return e.reduce((t,n)=>t.concat(n instanceof P?n.errors:n),[])}F.EMPTY=((e=new F).closed=!0,e);const Q="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class ue extends F{constructor(t,n,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=v;break;case 1:if(!t){this.destination=v;break}if("object"==typeof t){t instanceof ue?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new L(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new L(this,t,n,r)}}[Q](){return this}static create(t,n,r){const i=new ue(t,n,r);return i.syncErrorThrowable=!1,i}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class L extends ue{constructor(t,n,r,i){super(),this._parentSubscriber=t;let s,o=this;E(n)?s=n:n&&(s=n.next,r=n.error,i=n.complete,n!==v&&(o=Object.create(n),E(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=r,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;D.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:r}=D;if(this._error)r&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)r?(n.syncErrorValue=t,n.syncErrorThrown=!0):k(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;k(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const n=()=>this._complete.call(this._context);D.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,n){try{t.call(this._context,n)}catch(r){if(this.unsubscribe(),D.useDeprecatedSynchronousErrorHandling)throw r;k(r)}}__tryOrSetError(t,n,r){if(!D.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,r)}catch(i){return D.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(k(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const J="function"==typeof Symbol&&Symbol.observable||"@@observable";function ye(e){return e}let te=(()=>{class e{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const{operator:s}=this,o=function(e,t,n){if(e){if(e instanceof ue)return e;if(e[Q])return e[Q]()}return e||t||n?new ue(e,t,n):new ue(v)}(n,r,i);if(o.add(s?s.call(o,this.source):this.source||D.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),D.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){D.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof ue?n:null}return!0}(n)?n.error(r):console.warn(r)}}forEach(n,r){return new(r=me(r))((i,s)=>{let o;o=this.subscribe(a=>{try{n(a)}catch(l){s(l),o&&o.unsubscribe()}},s,i)})}_subscribe(n){const{source:r}=this;return r&&r.subscribe(n)}[J](){return this}pipe(...n){return 0===n.length?this:function(e){return 0===e.length?ye:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=me(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return e.create=t=>new e(t),e})();function me(e){if(e||(e=D.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const tt=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class qe extends F{constructor(t,n){super(),this.subject=t,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,n=t.observers;if(this.subject=null,!n||0===n.length||t.isStopped||t.closed)return;const r=n.indexOf(this.subscriber);-1!==r&&n.splice(r,1)}}class pt extends ue{constructor(t){super(t),this.destination=t}}let ee=(()=>{class e extends te{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Q](){return new pt(this)}lift(n){const r=new _e(this,this);return r.operator=n,r}next(n){if(this.closed)throw new tt;if(!this.isStopped){const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].next(n)}}error(n){if(this.closed)throw new tt;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].error(n);this.observers.length=0}complete(){if(this.closed)throw new tt;this.isStopped=!0;const{observers:n}=this,r=n.length,i=n.slice();for(let s=0;s<r;s++)i[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new tt;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new tt;return this.hasError?(n.error(this.thrownError),F.EMPTY):this.isStopped?(n.complete(),F.EMPTY):(this.observers.push(n),new qe(this,n))}asObservable(){const n=new te;return n.source=this,n}}return e.create=(t,n)=>new _e(t,n),e})();class _e extends ee{constructor(t,n){super(),this.destination=t,this.source=n}next(t){const{destination:n}=this;n&&n.next&&n.next(t)}error(t){const{destination:n}=this;n&&n.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:n}=this;return n?this.source.subscribe(t):F.EMPTY}}function ke(e){return e&&"function"==typeof e.schedule}function fe(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new I(e,t))}}class I{constructor(t,n){this.project=t,this.thisArg=n}call(t,n){return n.subscribe(new _(t,this.project,this.thisArg))}}class _ extends ue{constructor(t,n,r){super(t),this.project=n,this.count=0,this.thisArg=r||this}_next(t){let n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const g=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()},y="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",W=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function ce(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const ne=e=>{if(e&&"function"==typeof e[J])return(e=>t=>{const n=e[J]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)})(e);if(W(e))return g(e);if(ce(e))return(e=>t=>(e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,k),t))(e);if(e&&"function"==typeof e[y])return(e=>t=>{const n=e[y]();for(;;){let r;try{r=n.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t})(e);{const n=`You provided ${O(e)?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function Se(e,t){return new te(n=>{const r=new F;let i=0;return r.add(t.schedule(function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function Oe(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[J]}(e))return function(e,t){return new te(n=>{const r=new F;return r.add(t.schedule(()=>{const i=e[J]();r.add(i.subscribe({next(s){r.add(t.schedule(()=>n.next(s)))},error(s){r.add(t.schedule(()=>n.error(s)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if(ce(e))return function(e,t){return new te(n=>{const r=new F;return r.add(t.schedule(()=>e.then(i=>{r.add(t.schedule(()=>{n.next(i),r.add(t.schedule(()=>n.complete()))}))},i=>{r.add(t.schedule(()=>n.error(i)))}))),r})}(e,t);if(W(e))return Se(e,t);if(function(e){return e&&"function"==typeof e[y]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new te(n=>{const r=new F;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[y](),r.add(t.schedule(function(){if(n.closed)return;let s,o;try{const a=i.next();s=a.value,o=a.done}catch(a){return void n.error(a)}o?n.complete():(n.next(s),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof te?e:new te(ne(e))}class ae extends ue{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class He extends ue{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function Fe(e,t){if(t.closed)return;if(e instanceof te)return e.subscribe(t);let n;try{n=ne(e)(t)}catch(r){t.error(r)}return n}function Ge(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(Ge((i,s)=>Oe(e(i,s)).pipe(fe((o,a)=>t(i,o,s,a))),n)):("number"==typeof t&&(n=t),r=>r.lift(new it(e,n)))}class it{constructor(t,n=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=n}call(t,n){return n.subscribe(new lt(t,this.project,this.concurrent))}}class lt extends He{constructor(t,n,r=Number.POSITIVE_INFINITY){super(t),this.project=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let n;const r=this.index++;try{n=this.project(t,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(n)}_innerSub(t){const n=new ae(this),r=this.destination;r.add(n);const i=Fe(t,n);i!==n&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function je(e=Number.POSITIVE_INFINITY){return Ge(ye,e)}function Be(e,t){return t?Se(e,t):new te(g(e))}function ft(){return function(t){return t.lift(new yt(t))}}class yt{constructor(t){this.connectable=t}call(t,n){const{connectable:r}=this;r._refCount++;const i=new ct(t,r),s=n.subscribe(i);return i.closed||(i.connection=r.connect()),s}}class ct extends ue{constructor(t,n){super(t),this.connectable=n}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const n=t._refCount;if(n<=0)return void(this.connection=null);if(t._refCount=n-1,n>1)return void(this.connection=null);const{connection:r}=this,i=t._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class gt extends te{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new F,t.add(this.source.subscribe(new It(this.getSubject(),this))),t.closed&&(this._connection=null,t=F.EMPTY)),t}refCount(){return ft()(this)}}const rt=(()=>{const e=gt.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class It extends pt{constructor(t,n){super(t),this.connectable=n}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const n=t._connection;t._refCount=0,t._subject=null,t._connection=null,n&&n.unsubscribe()}}}function Zn(){return new ee}function z(e){for(let t in e)if(e[t]===z)return t;throw Error("Could not find renamed property on target object.")}function pe(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function he(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(he).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Te(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Ze=z({__forward_ref__:z});function Xe(e){return e.__forward_ref__=Xe,e.toString=function(){return he(this())},e}function ze(e){return function(e){return"function"==typeof e&&e.hasOwnProperty(Ze)&&e.__forward_ref__===Xe}(e)?e():e}class an extends Error{constructor(t,n){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(t,n)),this.code=t}}function st(e){return"string"==typeof e?e:null==e?"":String(e)}function Yt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():st(e)}function hr(e,t){const n=t?` in ${t}`:"";throw new an("201",`No provider for ${Yt(e)} found${n}`)}function vr(e,t){null==e&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function ot(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ln(e){return{providers:e.providers||[],imports:e.imports||[]}}function ns(e){return N1(e,mh)||N1(e,B1)}function N1(e,t){return e.hasOwnProperty(t)?e[t]:null}function L1(e){return e&&(e.hasOwnProperty(Vp)||e.hasOwnProperty(mR))?e[Vp]:null}const mh=z({\u0275prov:z}),Vp=z({\u0275inj:z}),B1=z({ngInjectableDef:z}),mR=z({ngInjectorDef:z});var ut=(()=>((ut=ut||{})[ut.Default=0]="Default",ut[ut.Host=1]="Host",ut[ut.Self=2]="Self",ut[ut.SkipSelf=4]="SkipSelf",ut[ut.Optional=8]="Optional",ut))();let jp;function Cs(e){const t=jp;return jp=e,t}function U1(e,t,n){const r=ns(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ut.Optional?null:void 0!==t?t:void hr(he(e),"Injector")}function Ms(e){return{toString:e}.toString()}var Nr=(()=>((Nr=Nr||{})[Nr.OnPush=0]="OnPush",Nr[Nr.Default=1]="Default",Nr))(),Mn=(()=>((Mn=Mn||{})[Mn.Emulated=0]="Emulated",Mn[Mn.None=2]="None",Mn[Mn.ShadowDom=3]="ShadowDom",Mn))();const yR="undefined"!=typeof globalThis&&globalThis,wR="undefined"!=typeof window&&window,bR="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Gt=yR||"undefined"!=typeof global&&global||wR||bR,ga={},qt=[],_h=z({\u0275cmp:z}),$p=z({\u0275dir:z}),Hp=z({\u0275pipe:z}),V1=z({\u0275mod:z}),vR=z({\u0275loc:z}),rs=z({\u0275fac:z}),Jl=z({__NG_ELEMENT_ID__:z});let xR=0;function Ai(e){return Ms(()=>{const n={},r={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Nr.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||qt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Mn.Emulated,id:"c",styles:e.styles||qt,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,s=e.features,o=e.pipes;return r.id+=xR++,r.inputs=z1(e.inputs,n),r.outputs=z1(e.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(j1):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map($1):null,r})}function j1(e){return nr(e)||function(e){return e[$p]||null}(e)}function $1(e){return function(e){return e[Hp]||null}(e)}const H1={};function _n(e){return Ms(()=>{const t={type:e.type,bootstrap:e.bootstrap||qt,declarations:e.declarations||qt,imports:e.imports||qt,exports:e.exports||qt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(H1[e.id]=e.type),t})}function z1(e,t){if(null==e)return ga;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const on=Ai;function nr(e){return e[_h]||null}function Lr(e,t){const n=e[V1]||null;if(!n&&!0===t)throw new Error(`Type ${he(e)} does not have '\u0275mod' property.`);return n}function Ti(e){return Array.isArray(e)&&"object"==typeof e[1]}function li(e){return Array.isArray(e)&&!0===e[1]}function Gp(e){return 0!=(8&e.flags)}function vh(e){return 2==(2&e.flags)}function xh(e){return 1==(1&e.flags)}function ci(e){return null!==e.template}function TR(e){return 0!=(512&e[2])}function bo(e,t){return e.hasOwnProperty(rs)?e[rs]:null}class G1{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function W1(e){return e.type.prototype.ngOnChanges&&(e.setInput=FR),RR}function RR(){const e=q1(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===ga)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function FR(e,t,n,r){const i=q1(e)||function(e,t){return e[Z1]=t}(e,{previous:ga,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],l=o[a];s[a]=new G1(l&&l.currentValue,t,o===ga),e[r]=t}const Z1="__ngSimpleChanges__";function q1(e){return e[Z1]||null}const K1="http://www.w3.org/2000/svg";let qp;function yn(e){return!!e.listen}const Q1={createRenderer:(e,t)=>void 0!==qp?qp:"undefined"!=typeof document?document:void 0};function Sn(e){for(;Array.isArray(e);)e=e[0];return e}function Eh(e,t){return Sn(t[e])}function Vr(e,t){return Sn(t[e.index])}function Xp(e,t){return e.data[t]}function Er(e,t){const n=t[e];return Ti(n)?n:n[0]}function J1(e){return 4==(4&e[2])}function Qp(e){return 128==(128&e[2])}function Ts(e,t){return null==t?null:e[t]}function ew(e){e[18]=0}function Jp(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const wt={lFrame:lw(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function tw(){return wt.bindingsEnabled}function Le(){return wt.lFrame.lView}function Bt(){return wt.lFrame.tView}function rc(e){return wt.lFrame.contextLView=e,e[8]}function Rn(){let e=nw();for(;null!==e&&64===e.type;)e=e.parent;return e}function nw(){return wt.lFrame.currentTNode}function ki(e,t){const n=wt.lFrame;n.currentTNode=e,n.isParent=t}function eg(){return wt.lFrame.isParent}function tg(){wt.lFrame.isParent=!1}function Dh(){return wt.isInCheckNoChangesMode}function Ch(e){wt.isInCheckNoChangesMode=e}function va(){return wt.lFrame.bindingIndex++}function is(e){const t=wt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function ZR(e,t){const n=wt.lFrame;n.bindingIndex=n.bindingRootIndex=e,ng(t)}function ng(e){wt.lFrame.currentDirectiveIndex=e}function sw(){return wt.lFrame.currentQueryIndex}function ig(e){wt.lFrame.currentQueryIndex=e}function KR(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function ow(e,t,n){if(n&ut.SkipSelf){let i=t,s=e;for(;!(i=i.parent,null!==i||n&ut.Host||(i=KR(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;t=i,e=s}const r=wt.lFrame=aw();return r.currentTNode=t,r.lView=e,!0}function Mh(e){const t=aw(),n=e[1];wt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function aw(){const e=wt.lFrame,t=null===e?null:e.child;return null===t?lw(e):t}function lw(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function cw(){const e=wt.lFrame;return wt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const uw=cw;function Sh(){const e=cw();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ir(){return wt.lFrame.selectedIndex}function ks(e){wt.lFrame.selectedIndex=e}function wn(){const e=wt.lFrame;return Xp(e.tView,e.selectedIndex)}function Ah(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(e.contentHooks||(e.contentHooks=[])).push(-n,o),a&&((e.contentHooks||(e.contentHooks=[])).push(n,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a)),l&&(e.viewHooks||(e.viewHooks=[])).push(-n,l),c&&((e.viewHooks||(e.viewHooks=[])).push(n,c),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,c)),null!=u&&(e.destroyHooks||(e.destroyHooks=[])).push(n,u)}}function Th(e,t,n){dw(e,t,3,n)}function kh(e,t,n,r){(3&e[2])===n&&dw(e,t,n,r)}function sg(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function dw(e,t,n,r){const s=null!=r?r:-1,o=t.length-1;let a=0;for(let l=void 0!==r?65535&e[18]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(e[18]+=65536),(a<s||-1==s)&&(rF(e,n,t,l),e[18]=(4294901760&e[18])+l+2),l++}function rF(e,t,n,r){const i=n[r]<0,s=n[r+1],a=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class sc{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Ih(e,t,n){const r=yn(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],l=n[i++];r?e.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=s,a=n[++i];ag(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function pw(e){return 3===e||4===e||6===e}function ag(e){return 64===e.charCodeAt(0)}function Rh(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||gw(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function gw(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const a=e[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<e.length;){const a=e[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function mw(e){return-1!==e}function xa(e){return 32767&e}function Ea(e,t){let n=function(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let lg=!0;function Fh(e){const t=lg;return lg=e,t}let cF=0;function ac(e,t){const n=ug(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,cg(r.data,e),cg(t,null),cg(r.blueprint,null));const i=Ph(e,t),s=e.injectorIndex;if(mw(i)){const o=xa(i),a=Ea(i,t),l=a[1].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=i,s}function cg(e,t){e.push(0,0,0,0,0,0,0,0,t)}function ug(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Ph(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Oh(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Jl)&&(r=n[Jl]),null==r&&(r=n[Jl]=cF++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function ww(e,t,n){if(n&ut.Optional)return e;hr(t,"NodeInjector")}function bw(e,t,n,r){if(n&ut.Optional&&void 0===r&&(r=null),0==(n&(ut.Self|ut.Host))){const i=e[9],s=Cs(void 0);try{return i?i.get(t,r,n&ut.Optional):U1(t,r,n&ut.Optional)}finally{Cs(s)}}return ww(r,t,n)}function vw(e,t,n,r=ut.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Jl)?e[Jl]:void 0;return"number"==typeof t?t>=0?255&t:fF:t}(n);if("function"==typeof s){if(!ow(t,e,r))return r&ut.Host?ww(i,n,r):bw(t,n,r,i);try{const o=s(r);if(null!=o||r&ut.Optional)return o;hr(n)}finally{uw()}}else if("number"==typeof s){let o=null,a=ug(e,t),l=-1,c=r&ut.Host?t[16][6]:null;for((-1===a||r&ut.SkipSelf)&&(l=-1===a?Ph(e,t):t[a+8],-1!==l&&Dw(r,!1)?(o=t[1],a=xa(l),t=Ea(l,t)):a=-1);-1!==a;){const u=t[1];if(Ew(s,a,u.data)){const f=dF(a,t,n,o,r,c);if(f!==xw)return f}l=t[a+8],-1!==l&&Dw(r,t[1].data[a+8]===c)&&Ew(s,a,t)?(o=u,a=xa(l),t=Ea(l,t)):a=-1}}}return bw(t,n,r,i)}const xw={};function fF(){return new Da(Rn(),Le())}function dF(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],u=Nh(a,o,n,null==r?vh(a)&&lg:r!=o&&0!=(3&a.type),i&ut.Host&&s===a);return null!==u?lc(t,o,u,a):xw}function Nh(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,l=e.directiveStart,u=s>>20,d=i?a+u:e.directiveEnd;for(let p=r?a:a+u;p<d;p++){const b=o[p];if(p<l&&n===b||p>=l&&b.type===n)return p}if(i){const p=o[l];if(p&&ci(p)&&p.type===n)return l}return null}function lc(e,t,n,r){let i=e[n];const s=t.data;if(function(e){return e instanceof sc}(i)){const o=i;o.resolving&&function(e,t){throw new an("200",`Circular dependency in DI detected for ${e}`)}(Yt(s[n]));const a=Fh(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Cs(o.injectImpl):null;ow(e,r,ut.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const o=W1(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==l&&Cs(l),Fh(a),o.resolving=!1,uw()}}return i}function Ew(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Dw(e,t){return!(e&ut.Self||e&ut.Host&&t)}class Da{constructor(t,n){this._tNode=t,this._lView=n}get(t,n){return vw(this._tNode,this._lView,t,void 0,n)}}const Ma="__parameters__";function vo(e,t,n){return Ms(()=>{const r=function(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const f=l.hasOwnProperty(Ma)?l[Ma]:Object.defineProperty(l,Ma,{value:[]})[Ma];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class vt{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ot({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const _F=new vt("AnalyzeForEntryComponents"),Lh=Function;function jr(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),jr(r,t)):t!==e&&t.push(r)}return t}function Ri(e,t){e.forEach(n=>Array.isArray(n)?Ri(n,t):t(n))}function Uh(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function xo(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Rs(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function Dr(e,t,n){let r=Aa(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function dg(e,t){const n=Aa(e,t);if(n>=0)return e[1|n]}function Aa(e,t){return function(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=e[s<<n];if(t===o)return s<<n;o>t?i=s:r=s+1}return~(i<<n)}(e,t,1)}const dc={},gg="__NG_DI_FLAG__",Ta="ngTempTokenPath",SF=/\n/gm,mg="__source",_g=z({provide:String,useValue:z});let pc;function ka(e){const t=pc;return pc=e,t}function TF(e,t=ut.Default){if(void 0===pc)throw new Error("inject() must be called from an injection context");return null===pc?U1(e,void 0,t):pc.get(e,t&ut.Optional?null:void 0,t)}function Ce(e,t=ut.Default){return(jp||TF)(ze(e),t)}function Eo(e){const t=[];for(let n=0;n<e.length;n++){const r=ze(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,s=ut.Default;for(let o=0;o<r.length;o++){const a=r[o],l=kF(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}t.push(Ce(i,s))}else t.push(Ce(r))}return t}function gc(e,t){return e[gg]=t,e.prototype[gg]=t,e}function kF(e){return e[gg]}function Rw(e,t,n,r){const i=e[Ta];throw t[mg]&&i.unshift(t[mg]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=he(t);if(Array.isArray(t))i=t.map(he).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):he(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(SF,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Ta]=null,e}const Ia=gc(vo("Inject",e=>({token:e})),-1),pr=gc(vo("Optional"),8),Fs=gc(vo("SkipSelf"),4);class Do{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Cr(e){return e instanceof Do?e.changingThisBreaksApplicationSecurity:e}function Fi(e,t){const n=function(e){return e instanceof Do&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}const eP=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,tP=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Jt=(()=>((Jt=Jt||{})[Jt.NONE=0]="NONE",Jt[Jt.HTML=1]="HTML",Jt[Jt.STYLE=2]="STYLE",Jt[Jt.SCRIPT=3]="SCRIPT",Jt[Jt.URL=4]="URL",Jt[Jt.RESOURCE_URL=5]="RESOURCE_URL",Jt))();function wc(e){const t=function(){const e=Le();return e&&e[12]}();return t?t.sanitize(Jt.URL,e)||"":Fi(e,"URL")?Cr(e):function(e){return(e=String(e)).match(eP)||e.match(tP)?e:"unsafe:"+e}(st(e))}const Xw="__ngContext__";function Kn(e,t){e[Xw]=t}function Mg(e){const t=function(e){return e[Xw]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Gh(e){return e.ngOriginalError}function EP(e,...t){e.error(...t)}class Co{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),r=this._findContext(t),i=function(e){return e&&e.ngErrorLogger||EP}(t);i(this._console,"ERROR",t),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(t){return t?function(e){return e.ngDebugContext}(t)||this._findContext(Gh(t)):null}_findOriginalError(t){let n=t&&Gh(t);for(;n&&Gh(n);)n=Gh(n);return n||null}}const ob=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Gt))();function Oi(e){return e instanceof Function?e():e}var Mr=(()=>((Mr=Mr||{})[Mr.Important=1]="Important",Mr[Mr.DashCase=2]="DashCase",Mr))();function Tg(e,t){return undefined(e,t)}function xc(e){const t=e[3];return li(t)?t[3]:t}function kg(e){return hb(e[13])}function Ig(e){return hb(e[4])}function hb(e){for(;null!==e&&!li(e);)e=e[4];return e}function Oa(e,t,n,r,i){if(null!=r){let s,o=!1;li(r)?s=r:Ti(r)&&(o=!0,r=r[0]);const a=Sn(r);0===e&&null!==n?null==i?_b(t,n,a):Mo(t,n,a,i||null,!0):1===e&&null!==n?Mo(t,n,a,i||null,!0):2===e?function(e,t,n){const r=Zh(e,t);r&&function(e,t,n,r){yn(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==Sn(n)&&Oa(t,e,r,s,i);for(let a=10;a<n.length;a++){const l=n[a];Ec(l[1],l,e,t,r,s)}}(t,e,s,n,i)}}function Fg(e,t,n){return yn(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function db(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Jp(i,-1)),n.splice(r,1)}function Pg(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&db(i,r),t>0&&(e[n-1][4]=r[4]);const s=xo(e,10+t);!function(e,t){Ec(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function pb(e,t){if(!(256&t[2])){const n=t[11];yn(n)&&n.destroyNode&&Ec(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Og(e[1],e);for(;t;){let n=null;if(Ti(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)Ti(t)&&Og(t[1],t),t=t[3];null===t&&(t=e),Ti(t)&&Og(t[1],t),n=t&&t[4]}t=n}}(t)}}function Og(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof sc)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+1],a="function"==typeof o?o(t):Sn(t[o]),l=r[i=n[s+2]],c=n[s+3];"boolean"==typeof c?a.removeEventListener(n[s],l,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();t[7]=null}}(e,t),1===t[1].type&&yn(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&li(t[3])){n!==t[3]&&db(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function gb(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===Mn.None||i===Mn.Emulated)return null}return Vr(r,n)}(e,t.parent,n)}function Mo(e,t,n,r,i){yn(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function _b(e,t,n){yn(e)?e.appendChild(t,n):t.appendChild(n)}function yb(e,t,n,r,i){null!==r?Mo(e,t,n,r,i):_b(e,t,n)}function Zh(e,t){return yn(e)?e.parentNode(t):t.parentNode}function wb(e,t,n){return vb(e,t,n)}let vb=function(e,t,n){return 40&e.type?Vr(e,n):null};function qh(e,t,n,r){const i=gb(e,r,t),s=t[11],a=wb(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)yb(s,i,n[l],a,!1);else yb(s,i,n,a,!1)}function Kh(e,t){if(null!==t){const n=t.type;if(3&n)return Vr(t,e);if(4&n)return Lg(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Kh(e,r);{const i=e[t.index];return li(i)?Lg(-1,i):Sn(i)}}if(32&n)return Tg(t,e)()||Sn(e[t.index]);{const r=Eb(e,t);return null!==r?Array.isArray(r)?r[0]:Kh(xc(e[16]),r):Kh(e,t.next)}}return null}function Eb(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Lg(e,t){const n=10+e+1;if(n<t.length){const r=t[n],i=r[1].firstChild;if(null!==i)return Kh(r,i)}return t[7]}function Bg(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===t&&(a&&Kn(Sn(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)Bg(e,t,n.child,r,i,s,!1),Oa(t,e,i,a,s);else if(32&l){const c=Tg(n,r);let u;for(;u=c();)Oa(t,e,i,u,s);Oa(t,e,i,a,s)}else 16&l?Cb(e,t,r,n,i,s):Oa(t,e,i,a,s);n=o?n.projectionNext:n.next}}function Ec(e,t,n,r,i,s){Bg(n,r,e.firstChild,t,i,s,!1)}function Cb(e,t,n,r,i,s){const o=n[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Oa(t,e,i,l[c],s);else Bg(e,t,l,o[3],i,s,!0)}function Mb(e,t,n){yn(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Ug(e,t,n){yn(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Sb(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}const Ab="ng-template";function qP(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==Sb(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Tb(e){return 4===e.type&&e.value!==Ab}function KP(e,t,n){return t===(4!==e.type||n?e.value:Ab)}function XP(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(pw(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!KP(e,l,n)||""===l&&1===t.length){if(ui(r))return!1;o=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!qP(e.attrs,c,n)){if(ui(r))return!1;o=!0}continue}const f=QP(8&r?"class":l,i,Tb(e),n);if(-1===f){if(ui(r))return!1;o=!0;continue}if(""!==c){let d;d=f>s?"":i[f+1].toLowerCase();const p=8&r?d:null;if(p&&-1!==Sb(p,c,0)||2&r&&c!==d){if(ui(r))return!1;o=!0}}}}else{if(!o&&!ui(r)&&!ui(l))return!1;if(o&&ui(l))continue;o=!1,r=l|1&r}}return ui(r)||o}function ui(e){return 0==(1&e)}function QP(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){const o=t[i];if(o===e)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function kb(e,t,n=!1){for(let r=0;r<t.length;r++)if(XP(e,t[r],n))return!0;return!1}function nO(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function Ib(e,t){return e?":not("+t.trim()+")":t}function rO(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const a=e[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ui(o)&&(t+=Ib(s,i),i=""),r=o,s=s||!ui(r);n++}return""!==i&&(t+=Ib(s,i)),t}const xt={};function Vn(e){Rb(Bt(),Le(),ir()+e,Dh())}function Rb(e,t,n,r){if(!r)if(3==(3&t[2])){const s=e.preOrderCheckHooks;null!==s&&Th(t,s,n)}else{const s=e.preOrderHooks;null!==s&&kh(t,s,0,n)}ks(n)}function Xh(e,t){return e<<17|t<<2}function hi(e){return e>>17&32767}function Vg(e){return 2|e}function ss(e){return(131068&e)>>2}function jg(e,t){return-131069&e|t<<2}function $g(e){return 1|e}function $b(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const o=e.data[s];ig(i),o.contentQueries(2,t[s],s)}}}function Dc(e,t,n,r,i,s,o,a,l,c){const u=t.blueprint.slice();return u[0]=i,u[2]=140|r,ew(u),u[3]=u[15]=e,u[8]=n,u[10]=o||e&&e[10],u[11]=a||e&&e[11],u[12]=l||e&&e[12]||null,u[9]=c||e&&e[9]||null,u[6]=s,u[16]=2==t.type?e[16]:u,u}function Na(e,t,n,r,i){let s=e.data[t];if(null===s)s=function(e,t,n,r,i){const s=nw(),o=eg(),l=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(e,t,n,r,i),wt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function(){const e=wt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ki(s,!0),s}function La(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Cc(e,t,n){Mh(t);try{const r=e.viewQuery;null!==r&&s0(1,r,n);const i=e.template;null!==i&&Hb(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&$b(e,t),e.staticViewQueries&&s0(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)NO(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,Sh()}}function Ba(e,t,n,r){const i=t[2];if(256==(256&i))return;Mh(t);const s=Dh();try{ew(t),function(e){wt.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Hb(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const c=e.preOrderCheckHooks;null!==c&&Th(t,c,null)}else{const c=e.preOrderHooks;null!==c&&kh(t,c,0,null),sg(t,0)}if(function(e){for(let t=kg(e);null!==t;t=Ig(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const i=n[r],s=i[3];0==(1024&i[2])&&Jp(s,1),i[2]|=1024}}}(t),function(e){for(let t=kg(e);null!==t;t=Ig(t))for(let n=10;n<t.length;n++){const r=t[n],i=r[1];Qp(r)&&Ba(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&$b(e,t),!s)if(o){const c=e.contentCheckHooks;null!==c&&Th(t,c)}else{const c=e.contentHooks;null!==c&&kh(t,c,1),sg(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)ks(~i);else{const s=i,o=n[++r],a=n[++r];ZR(o,s),a(2,t[s])}}}finally{ks(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)OO(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&s0(2,l,r),!s)if(o){const c=e.viewCheckHooks;null!==c&&Th(t,c)}else{const c=e.viewHooks;null!==c&&kh(t,c,2),sg(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Jp(t[3],-1))}finally{Sh()}}function mO(e,t,n,r){const i=t[10],s=!Dh(),o=J1(t);try{s&&!o&&i.begin&&i.begin(),o&&Cc(e,t,r),Ba(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function Hb(e,t,n,r,i){const s=ir(),o=2&r;try{ks(-1),o&&t.length>20&&Rb(e,t,20,Dh()),n(r,i)}finally{ks(s)}}function Kg(e,t,n){!tw()||(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||ac(n,t),Kn(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const l=e.data[a],c=ci(l);c&&kO(t,n,l);const u=lc(t,e,a,n);Kn(u,t),null!==o&&IO(0,a-i,u,l,0,o),c&&(Er(n.index,t)[8]=u)}}(e,t,n,Vr(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,a=wt.lFrame.currentDirectiveIndex;try{ks(o);for(let l=r;l<i;l++){const c=e.data[l],u=t[l];ng(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Qb(c,u)}}finally{ks(-1),ng(a)}}(e,t,n))}function Xg(e,t,n=Vr){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Yb(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=ef(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function ef(e,t,n,r,i,s,o,a,l,c){const u=20+r,f=u+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:xt);return n}(u,f),p="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function Zb(e,t,n,r){const i=iv(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&sv(e).push(r,i.length-1))}function qb(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Qg(e,t,n,r){let i=!1;if(tw()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];kb(n,o.selectors,!1)&&(i||(i=[]),Oh(ac(n,t),e,o.type),ci(o)?(Jb(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,ev(n,e.data.length,s.length);for(let u=0;u<s.length;u++){const f=s[u];f.providersResolver&&f.providersResolver(f)}let a=!1,l=!1,c=La(e,t,s.length,null);for(let u=0;u<s.length;u++){const f=s[u];n.mergedAttrs=Rh(n.mergedAttrs,f.hostAttrs),tv(e,n,t,c,f),TO(c,f,o),null!==f.contentQueries&&(n.flags|=8),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(n.flags|=128);const d=f.type.prototype;!a&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),a=!0),!l&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),c++}!function(e,t){const r=t.directiveEnd,i=e.data,s=t.attrs,o=[];let a=null,l=null;for(let c=t.directiveStart;c<r;c++){const u=i[c],f=u.inputs,d=null===s||Tb(t)?null:RO(f,s);o.push(d),a=qb(f,c,a),l=qb(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=a,t.outputs=l}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const s=n[t[i+1]];if(null==s)throw new an("301",`Export of name '${t[i+1]}' not found!`);r.push(t[i],s)}}}(n,r,o)}return n.mergedAttrs=Rh(n.mergedAttrs,n.attrs),i}function Xb(e,t,n,r,i,s){const o=s.hostBindings;if(o){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const l=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function Qb(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Jb(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function TO(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ci(t)&&(n[""]=e)}}function ev(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function tv(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=bo(i.type)),o=new sc(s,ci(i),null);e.blueprint[r]=o,n[r]=o,Xb(e,t,0,r,La(e,n,i.hostVars,xt),i)}function kO(e,t,n){const r=Vr(t,e),i=Yb(n),s=e[10],o=tf(e,Dc(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function Ni(e,t,n,r,i,s){const o=Vr(e,t);!function(e,t,n,r,i,s,o){if(null==s)yn(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?st(s):o(s,r||"",i);yn(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}(t[11],o,s,e.value,n,r,i)}function IO(e,t,n,r,i,s){const o=s[t];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],f=o[l++];null!==a?r.setInput(n,f,c,u):n[u]=f}}}function RO(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function nv(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function OO(e,t){const n=Er(t,e);if(Qp(n)){const r=n[1];80&n[2]?Ba(r,n,r.template,n[8]):n[5]>0&&e0(n)}}function e0(e){for(let r=kg(e);null!==r;r=Ig(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];Ba(o,s,o.template,s[8])}else s[5]>0&&e0(s)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Er(n[r],e);Qp(i)&&i[5]>0&&e0(i)}}function NO(e,t){const n=Er(t,e),r=n[1];(function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),Cc(r,n,n[8])}function tf(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function t0(e){for(;e;){e[2]|=64;const t=xc(e);if(TR(e)&&!t)return e;e=t}return null}function r0(e,t,n){const r=t[10];r.begin&&r.begin();try{Ba(e,t,e.template,n)}catch(i){throw av(t,i),i}finally{r.end&&r.end()}}function rv(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Mg(n),i=r[1];mO(i,r,i.template,n)}}(e[8])}function s0(e,t,n){ig(0),t(e,n)}const jO=(()=>Promise.resolve(null))();function iv(e){return e[7]||(e[7]=[])}function sv(e){return e.cleanup||(e.cleanup=[])}function av(e,t){const n=e[9],r=n?n.get(Co,null):null;r&&r.handleError(t)}function lv(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=t[o],c=e.data[o];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function as(e,t,n){const r=Eh(t,e);!function(e,t,n){yn(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function nf(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?i=Te(i,a):2==s&&(r=Te(r,a+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const Ua=new vt("INJECTOR",-1);class cv{get(t,n=dc){if(n===dc){const r=new Error(`NullInjectorError: No provider for ${he(t)}!`);throw r.name="NullInjectorError",r}return n}}const Mc=new vt("Set Injector scope."),Sc={},zO={};let o0;function uv(){return void 0===o0&&(o0=new cv),o0}function hv(e,t=null,n=null,r){return new GO(e,n,t||uv(),r)}class GO{constructor(t,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];n&&Ri(n,a=>this.processProvider(a,t,n)),Ri([t],a=>this.processInjectorType(a,[],s)),this.records.set(Ua,Va(void 0,this));const o=this.records.get(Mc);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof t?null:he(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=dc,r=ut.Default){this.assertNotDestroyed();const i=ka(this),s=Cs(void 0);try{if(!(r&ut.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function(e){return"function"==typeof e||"object"==typeof e&&e instanceof vt}(t)&&ns(t);a=l&&this.injectableDefInScope(l)?Va(a0(t),Sc):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&ut.Self?uv():this.parent).get(t,n=r&ut.Optional&&n===dc?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Ta]=o[Ta]||[]).unshift(he(t)),i)throw o;return Rw(o,t,"R3InjectorError",this.source)}throw o}finally{Cs(s),ka(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((r,i)=>t.push(he(i))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,n,r){if(!(t=ze(t)))return!1;let i=L1(t);const s=null==i&&t.ngModule||void 0,o=void 0===s?t:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=L1(s)),null==i)return!1;if(null!=i.imports&&!a){let u;r.push(o);try{Ri(i.imports,f=>{this.processInjectorType(f,n,r)&&(void 0===u&&(u=[]),u.push(f))})}finally{}if(void 0!==u)for(let f=0;f<u.length;f++){const{ngModule:d,providers:p}=u[f];Ri(p,b=>this.processProvider(b,d,p||qt))}}this.injectorDefTypes.add(o);const l=bo(o)||(()=>new o);this.records.set(o,Va(l,Sc));const c=i.providers;if(null!=c&&!a){const u=t;Ri(c,f=>this.processProvider(f,u,c))}return void 0!==s&&void 0!==t.providers}processProvider(t,n,r){let i=ja(t=ze(t))?t:ze(t&&t.provide);const s=function(e,t,n){return dv(e)?Va(void 0,e.useValue):Va(function(e,t,n){let r;if(ja(e)){const i=ze(e);return bo(i)||a0(i)}if(dv(e))r=()=>ze(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Eo(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>Ce(ze(e.useExisting));else{const i=ze(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return bo(i)||a0(i);r=()=>new i(...Eo(e.deps))}return r}(e),Sc)}(t);if(ja(t)||!0!==t.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=Va(void 0,Sc,!0),o.factory=()=>Eo(o.multi),this.records.set(i,o)),i=t,o.multi.push(t)}this.records.set(i,s)}hydrate(t,n){return n.value===Sc&&(n.value=zO,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=ze(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function a0(e){const t=ns(e),n=null!==t?t.factory:bo(e);if(null!==n)return n;if(e instanceof vt)throw new Error(`Token ${he(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const r=Rs(t,"?");throw new Error(`Can't resolve all parameters for ${he(e)}: (${r.join(", ")}).`)}const n=function(e){const t=e&&(e[mh]||e[B1]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Va(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function dv(e){return null!==e&&"object"==typeof e&&_g in e}function ja(e){return"function"==typeof e}const pv=function(e,t,n){return function(e,t=null,n=null,r){const i=hv(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let Kt=(()=>{class e{static create(n,r){return Array.isArray(n)?pv(n,r,""):pv(n.providers,n.parent,n.name||"")}}return e.THROW_IF_NOT_FOUND=dc,e.NULL=new cv,e.\u0275prov=ot({token:e,providedIn:"any",factory:()=>Ce(Ua)}),e.__NG_ELEMENT_ID__=-1,e})();function dN(e,t){Ah(Mg(e)[1],Rn())}function So(e){let t=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if(ci(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const o=e;o.inputs=d0(e.inputs),o.declaredInputs=d0(e.declaredInputs),o.outputs=d0(e.outputs);const a=i.hostBindings;a&&_N(e,a);const l=i.viewQuery,c=i.contentQueries;if(l&&gN(e,l),c&&mN(e,c),pe(e.inputs,i.inputs),pe(e.declaredInputs,i.declaredInputs),pe(e.outputs,i.outputs),ci(i)&&i.data.animation){const u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(e),a===So&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Rh(i.hostAttrs,n=Rh(n,i.hostAttrs))}}(r)}function d0(e){return e===ga?{}:e===qt?[]:e}function gN(e,t){const n=e.viewQuery;e.viewQuery=n?(r,i)=>{t(r,i),n(r,i)}:t}function mN(e,t){const n=e.contentQueries;e.contentQueries=n?(r,i,s)=>{t(r,i,s),n(r,i,s)}:t}function _N(e,t){const n=e.hostBindings;e.hostBindings=n?(r,i)=>{t(r,i),n(r,i)}:t}let rf=null;function $a(){if(!rf){const e=Gt.Symbol;if(e&&e.iterator)rf=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(rf=r)}}}return rf}function Tc(e){return!!p0(e)&&(Array.isArray(e)||!(e instanceof Map)&&$a()in e)}function p0(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Xn(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ns(e,t,n,r){const i=Le();return Xn(i,va(),t)&&(Bt(),Ni(wn(),i,e,t,n,r)),Ns}function To(e,t,n,r,i,s,o,a){const l=Le(),c=Bt(),u=e+20,f=c.firstCreatePass?function(e,t,n,r,i,s,o,a,l){const c=t.consts,u=Na(t,e,4,o||null,Ts(c,a));Qg(t,n,u,Ts(c,l)),Ah(t,u);const f=u.tViews=ef(2,u,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),f.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,n,r,i,s,o):c.data[u];ki(f,!1);const d=l[11].createComment("");qh(c,l,d,f),Kn(d,l),tf(l,l[u]=nv(d,l,d,f)),xh(f)&&Kg(c,l,f),null!=o&&Xg(l,f,a)}function $e(e,t=ut.Default){const n=Le();return null===n?Ce(e,t):vw(Rn(),n,ze(e),t)}function An(e,t,n){const r=Le();return Xn(r,va(),t)&&function(e,t,n,r,i,s,o,a){const l=Vr(t,n);let u,c=t.inputs;!a&&null!=c&&(u=c[r])?(lv(e,n,u,r,i),vh(t)&&function(e,t){const n=Er(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,t.value||"",r):i,yn(s)?s.setProperty(l,r,i):ag(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}(Bt(),wn(),r,e,t,r[11],n,!1),An}function w0(e,t,n,r,i){const o=i?"class":"style";lv(e,n,t.inputs[o],o,r)}function Xt(e,t,n,r){const i=Le(),s=Bt(),o=20+e,a=i[11],l=i[o]=Fg(a,t,wt.lFrame.currentNamespace),c=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,c=Na(t,e,2,i,Ts(a,s));return Qg(t,n,c,Ts(a,o)),null!==c.attrs&&nf(c,c.attrs,!1),null!==c.mergedAttrs&&nf(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,i,0,t,n,r):s.data[o];ki(c,!0);const u=c.mergedAttrs;null!==u&&Ih(a,l,u);const f=c.classes;null!==f&&Ug(a,l,f);const d=c.styles;null!==d&&Mb(a,l,d),64!=(64&c.flags)&&qh(s,i,l,c),0===wt.lFrame.elementDepthCount&&Kn(l,i),wt.lFrame.elementDepthCount++,xh(c)&&(Kg(s,i,c),function(e,t,n){if(Gp(t)){const i=t.directiveEnd;for(let s=t.directiveStart;s<i;s++){const o=e.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}(s,c,i)),null!==r&&Xg(i,c)}function Qt(){let e=Rn();eg()?tg():(e=e.parent,ki(e,!1));const t=e;wt.lFrame.elementDepthCount--;const n=Bt();n.firstCreatePass&&(Ah(n,e),Gp(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&w0(n,t,Le(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&w0(n,t,Le(),t.stylesWithoutHost,!1)}function Pn(e,t,n,r){Xt(e,t,n,r),Qt()}function b0(){return Le()}function af(e){return!!e&&"function"==typeof e.then}const v0=function(e){return!!e&&"function"==typeof e.subscribe};function or(e,t,n,r){const i=Le(),s=Bt(),o=Rn();return function(e,t,n,r,i,s,o,a){const l=xh(r),u=e.firstCreatePass&&sv(e),f=t[8],d=iv(t);let p=!0;if(3&r.type||a){const S=Vr(r,t),H=a?a(S):S,G=d.length,ie=a?q=>a(Sn(q[r.index])):r.index;if(yn(n)){let q=null;if(!a&&l&&(q=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=t[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(e,t,i,r.index)),null!==q)(q.__ngLastListenerFn__||q).__ngNextListenerFn__=s,q.__ngLastListenerFn__=s,p=!1;else{s=x0(r,t,f,s,!1);const ge=n.listen(H,i,s);d.push(s,ge),u&&u.push(i,ie,G,G+1)}}else s=x0(r,t,f,s,!0),H.addEventListener(i,s,o),d.push(s),u&&u.push(i,ie,G,o)}else s=x0(r,t,f,s,!1);const b=r.outputs;let N;if(p&&null!==b&&(N=b[i])){const S=N.length;if(S)for(let H=0;H<S;H+=2){const Re=t[N[H]][N[H+1]].subscribe(s),Ee=d.length;d.push(s,Re),u&&u.push(i,r.index,Ee,-(Ee+1))}}}(s,i,i[11],o,e,t,!!n,r),or}function rx(e,t,n,r){try{return!1!==n(r)}catch(i){return av(e,i),!1}}function x0(e,t,n,r,i){return function s(o){if(o===Function)return r;const a=2&e.flags?Er(e.index,t):t;0==(32&t[2])&&t0(a);let l=rx(t,0,r,o),c=s.__ngNextListenerFn__;for(;c;)l=rx(t,0,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Bi(e=1){return function(e){return(wt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,wt.lFrame.contextLView))[8]}(e)}function JN(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(e);for(let i=0;i<t.length;i++){const s=t[i];if("*"!==s){if(null===r?kb(e,s,!0):nO(r,s))return i}else n=i}return n}function dx(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?hi(s):ss(s),l=!1;for(;0!==a&&(!1===l||o);){const u=e[a+1];n8(e[a],t)&&(l=!0,e[a+1]=r?$g(u):Vg(u)),a=r?hi(u):ss(u)}l&&(e[n+1]=r?Vg(s):$g(s))}function n8(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Aa(e,t)>=0}const On={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function px(e){return e.substring(On.key,On.keyEnd)}function gx(e,t){const n=On.textEnd;return n===t?-1:(t=On.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,On.key=t,n),el(e,t,n))}function el(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Ui(e,t){return function(e,t,n,r){const i=Le(),s=Bt(),o=is(2);s.firstUpdatePass&&Ex(s,e,o,r),t!==xt&&Xn(i,o,t)&&Cx(s,s.data[ir()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=he(Cr(e)))),e}(t,n),r,o)}(e,t,null,!0),Ui}function vx(e){!function(e,t,n,r){const i=Bt(),s=is(2);i.firstUpdatePass&&Ex(i,null,s,r);const o=Le();if(n!==xt&&Xn(o,s,n)){const a=i.data[ir()];if(Sx(a,r)&&!xx(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(n=Te(l,n||"")),w0(i,a,o,n,r)}else!function(e,t,n,r,i,s,o,a){i===xt&&(i=qt);let l=0,c=0,u=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;null!==u||null!==f;){const d=l<i.length?i[l+1]:void 0,p=c<s.length?s[c+1]:void 0;let N,b=null;u===f?(l+=2,c+=2,d!==p&&(b=f,N=p)):null===f||null!==u&&u<f?(l+=2,b=u):(c+=2,b=f,N=p),null!==b&&Cx(e,t,n,r,b,N,o,a),u=l<i.length?i[l]:null,f=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return qt;const r=[],i=Cr(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,s)}}(Dr,ji,e,!0)}function ji(e,t){for(let n=function(e){return function(e){On.key=0,On.keyEnd=0,On.value=0,On.valueEnd=0,On.textEnd=e.length}(e),gx(e,el(e,0,On.textEnd))}(t);n>=0;n=gx(t,n))Dr(e,px(t),!0)}function xx(e,t){return t>=e.expandoStartIndex}function Ex(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[ir()],o=xx(e,n);Sx(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=wt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=Rc(n=D0(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=D0(i,e,t,n,r),null===s){let l=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==ss(r))return e[hi(r)]}(e,t,r);void 0!==l&&Array.isArray(l)&&(l=D0(null,e,t,l[1],r),l=Rc(l,t.attrs,r),function(e,t,n,r){e[hi(n?t.classBindings:t.styleBindings)]=r}(e,t,r,l))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=Rc(r,e[s].hostAttrs,n);return Rc(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=hi(o),l=ss(o);e[r]=n;let u,c=!1;if(Array.isArray(n)){const f=n;u=f[1],(null===u||Aa(f,u)>0)&&(c=!0)}else u=n;if(i)if(0!==l){const d=hi(e[a+1]);e[r+1]=Xh(d,a),0!==d&&(e[d+1]=jg(e[d+1],r)),e[a+1]=function(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=Xh(a,0),0!==a&&(e[a+1]=jg(e[a+1],r)),a=r;else e[r+1]=Xh(l,0),0===a?a=r:e[l+1]=jg(e[l+1],r),l=r;c&&(e[r+1]=Vg(e[r+1])),dx(e,u,r,!0),dx(e,u,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&Aa(s,t)>=0&&(n[r+1]=$g(n[r+1]))}(t,u,e,r,s),o=Xh(a,l),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}function D0(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=Rc(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Rc(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Dr(e,o,!!n||t[++s]))}return void 0===e?null:e}function Cx(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const l=e.data,c=l[a+1];lf(function(e){return 1==(1&e)}(c)?Mx(l,t,n,i,ss(c),o):void 0)||(lf(s)||function(e){return 2==(2&e)}(c)&&(s=Mx(l,null,n,i,a,o)),function(e,t,n,r,i){const s=yn(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:Mr.DashCase;if(null==i)s?e.removeStyle(n,r,o):n.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=Mr.Important),s?e.setStyle(n,r,i,o):n.style.setProperty(r,i,a?"important":"")}}}(r,o,Eh(ir(),n),i,s))}function Mx(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const l=e[i],c=Array.isArray(l),u=c?l[1]:l,f=null===u;let d=n[i+1];d===xt&&(d=f?qt:void 0);let p=f?dg(d,r):u===r?d:void 0;if(c&&!lf(p)&&(p=dg(l,r)),lf(p)&&(a=p,o))return a;const b=e[i+1];i=o?hi(b):ss(b)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=dg(l,r))}return a}function lf(e){return void 0!==e}function Sx(e,t){return 0!=(e.flags&(t?16:32))}function Ar(e,t=""){const n=Le(),r=Bt(),i=e+20,s=r.firstCreatePass?Na(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return yn(e)?e.createText(t):e.createTextNode(t)}(n[11],t);qh(r,n,o,s),ki(s,!1)}function tl(e,t,n){const r=Le(),i=function(e,t,n,r){return Xn(e,va(),n)?t+st(n)+r:xt}(r,e,t,n);return i!==xt&&as(r,ir(),i),tl}const ko=void 0;var N8=["en",[["a","p"],["AM","PM"],ko],[["AM","PM"],ko,ko],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ko,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ko,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ko,"{1} 'at' {0}",ko],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let nl={};function Zx(e){return e in nl||(nl[e]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[e]),nl[e]}var et=(()=>((et=et||{})[et.LocaleId=0]="LocaleId",et[et.DayPeriodsFormat=1]="DayPeriodsFormat",et[et.DayPeriodsStandalone=2]="DayPeriodsStandalone",et[et.DaysFormat=3]="DaysFormat",et[et.DaysStandalone=4]="DaysStandalone",et[et.MonthsFormat=5]="MonthsFormat",et[et.MonthsStandalone=6]="MonthsStandalone",et[et.Eras=7]="Eras",et[et.FirstDayOfWeek=8]="FirstDayOfWeek",et[et.WeekendRange=9]="WeekendRange",et[et.DateFormat=10]="DateFormat",et[et.TimeFormat=11]="TimeFormat",et[et.DateTimeFormat=12]="DateTimeFormat",et[et.NumberSymbols=13]="NumberSymbols",et[et.NumberFormats=14]="NumberFormats",et[et.CurrencyCode=15]="CurrencyCode",et[et.CurrencySymbol=16]="CurrencySymbol",et[et.CurrencyName=17]="CurrencyName",et[et.Currencies=18]="Currencies",et[et.Directionality=19]="Directionality",et[et.PluralCase=20]="PluralCase",et[et.ExtraData=21]="ExtraData",et))();const uf="en-US";let qx=uf;function C0(e){vr(e,"Expected localeId to be defined"),"string"==typeof e&&(qx=e.toLowerCase().replace(/_/g,"-"))}class bE{}const xE="ngComponent";class NL{resolveComponentFactory(t){throw function(e){const t=Error(`No component factory found for ${he(e)}. Did you add it to @NgModule.entryComponents?`);return t[xE]=e,t}(t)}}let Io=(()=>{class e{}return e.NULL=new NL,e})();function gf(...e){}function il(e,t){return new dn(Vr(e,t))}const UL=function(){return il(Rn(),Le())};let dn=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=UL,e})();function EE(e){return e instanceof dn?e.nativeElement:e}class Ro{}let P0=(()=>{class e{}return e.\u0275prov=ot({token:e,providedIn:"root",factory:()=>null}),e})();class Fo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const DE=new Fo("12.2.11");class CE{constructor(){}supports(t){return Tc(t)}create(t){return new YL(t)}}const zL=(e,t)=>t;class YL{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||zL}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<SE(r,i,s)?n:r,a=SE(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let d=0;d<c;d++){const p=d<s.length?s[d]:s[d]=0,b=p+d;u<=b&&b<c&&(s[d]=p+1)}s[o.previousIndex]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Tc(t))throw new Error(`Error trying to diff '${he(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[$a()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,i)):t=this._addAfter(new GL(n,r),s,i),t}_verifyReinsertion(t,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,s=t._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new ME),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ME),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class GL{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WL{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class ME{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new WL,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function SE(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class AE{constructor(){}supports(t){return t instanceof Map||p0(t)}create(){return new ZL}}class ZL{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||p0(t)))throw new Error(`Error trying to diff '${he(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,n);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new qL(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class qL{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function TE(){return new Lc([new CE])}let Lc=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||TE()),deps:[[e,new Fs,new pr]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(e){return e.name||typeof e}(n)}'`)}}return e.\u0275prov=ot({token:e,providedIn:"root",factory:TE}),e})();function kE(){return new sl([new AE])}let sl=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||kE()),deps:[[e,new Fs,new pr]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return e.\u0275prov=ot({token:e,providedIn:"root",factory:kE}),e})();function _f(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(Sn(s)),li(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&_f(l[1],l,c,r)}const o=n.type;if(8&o)_f(e,t,n.child,r);else if(32&o){const a=Tg(n,t);let l;for(;l=a();)r.push(l)}else if(16&o){const a=Eb(t,n);if(Array.isArray(a))r.push(...a);else{const l=xc(t[16]);_f(l[1],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class Bc{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return _f(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(li(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Pg(t,r),xo(n,r))}this._attachedToViewContainer=!1}pb(this._lView[1],this._lView)}onDestroy(t){Zb(this._lView[1],this._lView,null,t)}markForCheck(){t0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){r0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Ch(!0);try{r0(e,t,n)}finally{Ch(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(e,t){Ec(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class XL extends Bc{constructor(t){super(t),this._view=t}detectChanges(){rv(this._view)}checkNoChanges(){!function(e){Ch(!0);try{rv(e)}finally{Ch(!1)}}(this._view)}get context(){return null}}const JL=function(e){return function(e,t,n){if(vh(e)&&!n){const r=Er(e.index,t);return new Bc(r,r)}return 47&e.type?new Bc(t[16],t):null}(Rn(),Le(),16==(16&e))};let Uc=(()=>{class e{}return e.__NG_ELEMENT_ID__=JL,e})();const n3=[new AE],i3=new Lc([new CE]),s3=new sl(n3),a3=function(){return yf(Rn(),Le())};let cs=(()=>{class e{}return e.__NG_ELEMENT_ID__=a3,e})();const l3=cs,c3=class extends l3{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t){const n=this._declarationTContainer.tViews,r=Dc(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(n)),Cc(n,r,t),new Bc(r)}};function yf(e,t){return 4&e.type?new c3(t,e,il(e,t)):null}class $i{}class IE{}const f3=function(){return PE(Rn(),Le())};let mi=(()=>{class e{}return e.__NG_ELEMENT_ID__=f3,e})();const p3=mi,RE=class extends p3{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return il(this._hostTNode,this._hostLView)}get injector(){return new Da(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ph(this._hostTNode,this._hostLView);if(mw(t)){const n=Ea(t,this._hostLView),r=xa(t);return new Da(n[1].data[r+8],n)}return new Da(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=FE(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){const i=t.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(t,n,r,i,s){const o=r||this.parentInjector;if(!s&&null==t.ngModule&&o){const l=o.get($i,null);l&&(s=l)}const a=t.create(o,i,void 0,s);return this.insert(a.hostView,n),a}insert(t,n){const r=t._lView,i=r[1];if(function(e){return li(e[3])}(r)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const f=r[3],d=new RE(f,f[6],f[3]);d.detach(d.indexOf(t))}}const s=this._adjustIndex(n),o=this._lContainer;!function(e,t,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-10?(t[4]=n[i],Uh(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(i,r,o,s);const a=Lg(s,o),l=r[11],c=Zh(l,o[7]);return null!==c&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,Ec(e,r,n,1,i,s)}(i,o[6],l,r,c,a),t.attachToViewContainerRef(),Uh(O0(o),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=FE(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Pg(this._lContainer,n);r&&(xo(O0(this._lContainer),n),pb(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=Pg(this._lContainer,n);return r&&null!=xo(O0(this._lContainer),n)?new Bc(r):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function FE(e){return e[8]}function O0(e){return e[8]||(e[8]=[])}function PE(e,t){let n;const r=t[e.index];if(li(r))n=r;else{let i;if(8&e.type)i=Sn(r);else{const s=t[11];i=s.createComment("");const o=Vr(e,t);Mo(s,Zh(s,o),i,function(e,t){return yn(e)?e.nextSibling(t):t.nextSibling}(s,o),!1)}t[e.index]=n=nv(r,t,i,e),tf(t,n)}return new RE(n,e,t)}const cl={};class eD extends Io{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=nr(t);return new nD(n,this.ngModule)}}function tD(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const u6=new vt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ob});class nD extends bE{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function(e){return e.map(rO).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return tD(this.componentDef.inputs)}get outputs(){return tD(this.componentDef.outputs)}create(t,n,r,i){const s=(i=i||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,cl,i);return s!==cl||r===cl?s:t.get(n,r,i)}}}(t,i.injector):t,o=s.get(Ro,Q1),a=s.get(P0,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=r?function(e,t,n){if(yn(e))return e.selectRootElement(t,n===Mn.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(l,r,this.componentDef.encapsulation):Fg(o.createRenderer(null,this.componentDef),c,function(e){const t=e.toLowerCase();return"svg"===t?K1:"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),f=this.componentDef.onPush?576:528,d=function(e,t){return{components:[],scheduler:e||ob,clean:jO,playerHandler:t||null,flags:0}}(),p=ef(0,null,null,1,0,null,null,null,null,null),b=Dc(null,p,d,f,null,null,o,l,a,s);let N,S;Mh(b);try{const H=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const l=Na(o,20,2,"#host",null),c=l.mergedAttrs=t.hostAttrs;null!==c&&(nf(l,c,!0),null!==e&&(Ih(i,e,c),null!==l.classes&&Ug(i,e,l.classes),null!==l.styles&&Mb(i,e,l.styles)));const u=r.createRenderer(e,t),f=Dc(n,Yb(t),null,t.onPush?64:16,n[20],l,r,u,s||null,null);return o.firstCreatePass&&(Oh(ac(l,n),o,t.type),Jb(o,l),ev(l,n.length,1)),tf(n,f),n[20]=f}(u,this.componentDef,b,o,l);if(u)if(r)Ih(l,u,["ng-version",DE.full]);else{const{attrs:G,classes:ie}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!ui(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);G&&Ih(l,u,G),ie&&ie.length>0&&Ug(l,u,ie.join(" "))}if(S=Xp(p,20),void 0!==n){const G=S.projection=[];for(let ie=0;ie<this.ngContentSelectors.length;ie++){const q=n[ie];G.push(null!=q?Array.from(q):null)}}N=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=Rn();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),tv(e,r,t,La(e,t,1,null),n));const i=lc(t,e,r.directiveStart,r);Kn(i,t);const s=Vr(r,t);return s&&Kn(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(l=>l(o,t)),t.contentQueries){const l=Rn();t.contentQueries(1,o,l.directiveStart)}const a=Rn();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(ks(a.index),Xb(n[1],a,0,a.directiveStart,a.directiveEnd,t),Qb(t,o)),o}(H,this.componentDef,b,d,[dN]),Cc(p,b,null)}finally{Sh()}return new d6(this.componentType,N,il(S,b),b,S)}}class d6 extends class{}{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new XL(i),this.componentType=t}get injector(){return new Da(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ul=new Map;class m6 extends $i{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new eD(this);const r=Lr(t),i=function(e){return e[vR]||null}(t);i&&C0(i),this._bootstrapComponents=Oi(r.bootstrap),this._r3Injector=hv(t,n,[{provide:$i,useValue:this},{provide:Io,useValue:this.componentFactoryResolver}],he(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=Kt.THROW_IF_NOT_FOUND,r=ut.Default){return t===Kt||t===$i||t===Ua?this:this._r3Injector.get(t,n,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Z0 extends IE{constructor(t){super(),this.moduleType=t,null!==Lr(t)&&function(e){const t=new Set;!function n(r){const i=Lr(r,!0),s=i.id;null!==s&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${he(t)} vs ${he(t.name)}`)}(s,ul.get(s),r),ul.set(s,r));const o=Oi(i.imports);for(const a of o)t.has(a)||(t.add(a),n(a))}(e)}(t)}create(t){return new m6(this.moduleType,t)}}function q0(e){return t=>{setTimeout(e,void 0,t)}}const En=class extends ee{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){var i,s,o;let a=t,l=n||(()=>null),c=r;if(t&&"object"==typeof t){const f=t;a=null===(i=f.next)||void 0===i?void 0:i.bind(f),l=null===(s=f.error)||void 0===s?void 0:s.bind(f),c=null===(o=f.complete)||void 0===o?void 0:o.bind(f)}this.__isAsync&&(l=q0(l),a&&(a=q0(a)),c&&(c=q0(c)));const u=super.subscribe({next:a,error:l,complete:c});return t instanceof F&&t.add(u),u}};function O6(){return this._results[$a()]()}class Ef{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=$a(),r=Ef.prototype;r[n]||(r[n]=O6)}get changes(){return this._changes||(this._changes=new En)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const i=jr(t);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class K0{constructor(t){this.queryList=t,this.matches=null}clone(){return new K0(this.queryList)}setDirty(){this.queryList.setDirty()}}class X0{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){const o=n.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new X0(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==pD(t,n).matches&&this.queries[n].setDirty()}}class uD{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class Q0{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,s=this.getByIndex(r).embeddedTView(t,i);s&&(s.indexInDeclarationView=r,null!==n?n.push(s):n=[s])}return null!==n?new Q0(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class J0{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new J0(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(t,n,B6(n,s)),this.matchTNodeWithReadOption(t,n,Nh(n,t,s,!1,!1))}else r===cs?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Nh(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===dn||i===mi||i===cs&&4&n.type)this.addMatch(n.index,-2);else{const s=Nh(n,t,i,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function B6(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function V6(e,t,n,r){return-1===n?function(e,t){return 11&e.type?il(e,t):4&e.type?yf(e,t):null}(t,e):-2===n?function(e,t,n){return n===dn?il(t,e):n===cs?yf(t,e):n===mi?PE(t,e):void 0}(e,t,r):lc(e,e[1],n,t)}function hD(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const s=e.data,o=n.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:V6(t,s[c],o[l+1],n.metadata.read))}i.matches=a}return i.matches}function em(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=hD(e,t,i,n);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=t[-l];for(let f=10;f<u.length;f++){const d=u[f];d[17]===d[3]&&em(d[1],d,c,r)}if(null!==u[9]){const f=u[9];for(let d=0;d<f.length;d++){const p=f[d];em(p[1],p,c,r)}}}}}return r}function hl(e){const t=Le(),n=Bt(),r=sw();ig(r+1);const i=pD(n,r);if(e.dirty&&J1(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?em(n,t,r,[]):hD(n,t,i,r);e.reset(s,EE),e.notifyOnChanges()}return!0}return!1}function Df(e,t,n){const r=Bt();r.firstCreatePass&&(function(e,t,n){null===e.queries&&(e.queries=new Q0),e.queries.track(new J0(t,n))}(r,new uD(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),function(e,t,n){const r=new Ef(4==(4&n));Zb(e,t,r,r.destroy),null===t[19]&&(t[19]=new X0),t[19].queries.push(new K0(r))}(r,Le(),t)}function fl(){return function(e,t){return e[19].queries[t].queryList}(Le(),sw())}function pD(e,t){return e.queries.getByIndex(t)}const Xc=new vt("Application Initializer");let pl=(()=>{class e{constructor(n){this.appInits=n,this.resolve=gf,this.reject=gf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(af(s))n.push(s);else if(v0(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(Ce(Xc,8))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();const Qc=new vt("AppId"),_4={provide:Qc,useFactory:function(){return`${am()}${am()}${am()}`},deps:[]};function am(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const RD=new vt("Platform Initializer"),Jc=new vt("Platform ID"),FD=new vt("appBootstrapListener");let Sf=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();const us=new vt("LocaleId"),PD=new vt("DefaultCurrencyCode");class w4{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}const lm=function(e){return new Z0(e)},b4=lm,v4=function(e){return Promise.resolve(lm(e))},OD=function(e){const t=lm(e),r=Oi(Lr(e).declarations).reduce((i,s)=>{const o=nr(s);return o&&i.push(new nD(o)),i},[]);return new w4(t,r)},x4=OD,E4=function(e){return Promise.resolve(OD(e))};let No=(()=>{class e{constructor(){this.compileModuleSync=b4,this.compileModuleAsync=v4,this.compileModuleAndAllComponentsSync=x4,this.compileModuleAndAllComponentsAsync=E4}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();const M4=(()=>Promise.resolve(0))();function cm(e){"undefined"==typeof Zone?M4.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ut{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new En(!1),this.onMicrotaskEmpty=new En(!1),this.onStable=new En(!1),this.onError=new En(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let e=Gt.requestAnimationFrame,t=Gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Gt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,hm(e),e.isCheckStableRunning=!0,um(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),hm(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return ND(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),LD(e)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return ND(e),n.invoke(i,s,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),LD(e)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,hm(e),um(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ut.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ut.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,A4,gf,gf);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const A4={};function um(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function hm(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function ND(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function LD(e){e._nesting--,um(e)}class I4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new En,this.onMicrotaskEmpty=new En,this.onStable=new En,this.onError=new En}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}let fm=(()=>{class e{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ut.assertNotInAngularZone(),cm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cm(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(Ce(Ut))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})(),BD=(()=>{class e{constructor(){this._applications=new Map,dm.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return dm.findTestabilityInTree(this,n,r)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();class R4{addToWindow(t){}findTestabilityInTree(t,n,r){return null}}let dm=new R4,UD=!0,VD=!1;function pm(){return VD=!0,UD}let wi;const jD=new vt("AllowMultipleToken");class gm{constructor(t,n){this.name=t,this.token=n}}function $D(e,t,n=[]){const r=`Platform: ${t}`,i=new vt(r);return(s=[])=>{let o=HD();if(!o||o.injector.get(jD,!1))if(e)e(n.concat(s).concat({provide:i,useValue:!0}));else{const a=n.concat(s).concat({provide:i,useValue:!0},{provide:Mc,useValue:"platform"});!function(e){if(wi&&!wi.destroyed&&!wi.injector.get(jD,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");wi=e.get(zD);const t=e.get(RD,null);t&&t.forEach(n=>n())}(Kt.create({providers:a,name:r}))}return function(e){const t=HD();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function HD(){return wi&&!wi.destroyed?wi:null}let zD=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const a=function(e,t){let n;return n="noop"===e?new I4:("zone.js"===e?void 0:e)||new Ut({enableLongStackTrace:pm(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:Ut,useValue:a}];return a.run(()=>{const c=Kt.create({providers:l,parent:this.injector,name:n.moduleType.name}),u=n.create(c),f=u.injector.get(Co,null);if(!f)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const d=a.onError.subscribe({next:p=>{f.handleError(p)}});u.onDestroy(()=>{mm(this._modules,u),d.unsubscribe()})}),function(e,t,n){try{const r=n();return af(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(f,a,()=>{const d=u.injector.get(pl);return d.runInitializers(),d.donePromise.then(()=>(C0(u.injector.get(us,uf)||uf),this._moduleDoBootstrap(u),u))})})}bootstrapModule(n,r=[]){const i=YD({},r);return function(e,t,n){const r=new Z0(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(gl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${he(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(Ce(Kt))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();function YD(e,t){return Array.isArray(t)?t.reduce(YD,e):Object.assign(Object.assign({},e),t)}let gl=(()=>{class e{constructor(n,r,i,s,o){this._zone=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new te(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new te(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Ut.assertNotInAngularZone(),cm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const f=this._zone.onUnstable.subscribe(()=>{Ut.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),f.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return ke(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof te?e[0]:je(t)(Be(e,n))}(a,l.pipe(e=>ft()(function(e,t){return function(r){let i;i="function"==typeof e?e:function(){return e};const s=Object.create(r,rt);return s.source=r,s.subjectFactory=i,s}}(Zn)(e))))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=n instanceof bE?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(i.componentType);const s=function(e){return e.isBoundToModule}(i)?void 0:this._injector.get($i),a=i.create(Kt.NULL,[],r||i.selector,s),l=a.location.nativeElement,c=a.injector.get(fm,null),u=c&&a.injector.get(BD);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),mm(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;mm(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(FD,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(n){return new(n||e)(Ce(Ut),Ce(Kt),Ce(Co),Ce(Io),Ce(pl))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();function mm(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Tf{}class W4{}const Z4={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let q4=(()=>{class e{constructor(n,r){this._compiler=n,this._config=r||Z4}load(n){return this.loadAndCompile(n)}loadAndCompile(n){let[r,i]=n.split("#");return void 0===i&&(i="default"),T(8255)(r).then(s=>s[i]).then(s=>qD(s,r,i)).then(s=>this._compiler.compileModuleAsync(s))}loadFactory(n){let[r,i]=n.split("#"),s="NgFactory";return void 0===i&&(i="default",s=""),T(8255)(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(o=>o[i+s]).then(o=>qD(o,r,i))}}return e.\u0275fac=function(n){return new(n||e)(Ce(No),Ce(W4,8))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();function qD(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const sB=$D(null,"core",[{provide:Jc,useValue:"unknown"},{provide:zD,deps:[Kt]},{provide:BD,deps:[]},{provide:Sf,deps:[]}]),uB=[{provide:gl,useClass:gl,deps:[Ut,Kt,Co,Io,pl]},{provide:u6,deps:[Ut],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(n){t.push(n)}}},{provide:pl,useClass:pl,deps:[[new pr,Xc]]},{provide:No,useClass:No,deps:[]},_4,{provide:Lc,useFactory:function(){return i3},deps:[]},{provide:sl,useFactory:function(){return s3},deps:[]},{provide:us,useFactory:function(e){return C0(e=e||"undefined"!=typeof $localize&&$localize.locale||uf),e},deps:[[new Ia(us),new pr,new Fs]]},{provide:PD,useValue:"USD"}];let fB=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(Ce(gl))},e.\u0275mod=_n({type:e}),e.\u0275inj=ln({providers:uB}),e})(),Uf=null;function Us(){return Uf}const jt=new vt("DocumentToken");let Uo=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ot({factory:h5,token:e,providedIn:"platform"}),e})();function h5(){return Ce(wC)}const f5=new vt("Location Initialized");let wC=(()=>{class e extends Uo{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Us().getBaseHref(this._doc)}onPopState(n){const r=Us().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Us().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){bC()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){bC()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(Ce(jt))},e.\u0275prov=ot({factory:d5,token:e,providedIn:"platform"}),e})();function bC(){return!!window.history.pushState}function d5(){return new wC(Ce(jt))}function Im(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function vC(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function fs(e){return e&&"?"!==e[0]?"?"+e:e}let yl=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ot({factory:p5,token:e,providedIn:"root"}),e})();function p5(e){const t=Ce(jt).location;return new xC(Ce(Uo),t&&t.origin||"")}const Rm=new vt("appBaseHref");let xC=(()=>{class e extends yl{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Im(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+fs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+fs(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+fs(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return e.\u0275fac=function(n){return new(n||e)(Ce(Uo),Ce(Rm,8))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})(),g5=(()=>{class e extends yl{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Im(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+fs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+fs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return e.\u0275fac=function(n){return new(n||e)(Ce(Uo),Ce(Rm,8))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})(),Vf=(()=>{class e{constructor(n,r){this._subject=new En,this._urlChangeListeners=[],this._platformStrategy=n;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=vC(EC(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+fs(r))}normalize(n){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,EC(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._platformStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+fs(r)),i)}replaceState(n,r="",i=null){this._platformStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+fs(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.\u0275fac=function(n){return new(n||e)(Ce(yl),Ce(Uo))},e.normalizeQueryParams=fs,e.joinWithSlash=Im,e.stripTrailingSlash=vC,e.\u0275prov=ot({factory:m5,token:e,providedIn:"root"}),e})();function m5(){return new Vf(Ce(yl),Ce(Uo))}function EC(e){return e.replace(/\/index.html$/,"")}var Tn=(()=>((Tn=Tn||{})[Tn.Zero=0]="Zero",Tn[Tn.One=1]="One",Tn[Tn.Two=2]="Two",Tn[Tn.Few=3]="Few",Tn[Tn.Many=4]="Many",Tn[Tn.Other=5]="Other",Tn))();const D5=function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Zx(t);if(n)return n;const r=t.split("-")[0];if(n=Zx(r),n)return n;if("en"===r)return N8;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[et.PluralCase]};class Kf{}let J5=(()=>{class e extends Kf{constructor(n){super(),this.locale=n}getPluralCategory(n,r){switch(D5(r||this.locale)(n)){case Tn.Zero:return"zero";case Tn.One:return"one";case Tn.Two:return"two";case Tn.Few:return"few";case Tn.Many:return"many";default:return"other"}}}return e.\u0275fac=function(n){return new(n||e)(Ce(us))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})(),Xf=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new oU,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){FC("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){FC("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)($e(mi),$e(cs))},e.\u0275dir=on({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class oU{constructor(){this.$implicit=null,this.ngIf=null}}function FC(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${he(t)}'.`)}let Ym=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=_n({type:e}),e.\u0275inj=ln({providers:[{provide:Kf,useClass:J5}]}),e})();const NC="browser";let LC=(()=>{class e{}return e.\u0275prov=ot({token:e,providedIn:"root",factory:()=>new NU(Ce(jt),window)}),e})();class NU{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=BC(this.window.history)||BC(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function BC(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Gm extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(e){Uf||(Uf=e)}(new Gm)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=(ou=ou||document.querySelector("base"),ou?ou.getAttribute("href"):null);return null==n?null:function(e){Qf=Qf||document.createElement("a"),Qf.setAttribute("href",e);const t=Qf.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){ou=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let Qf,ou=null;const UC=new vt("TRANSITION_ID"),HU=[{provide:Xc,useFactory:function(e,t,n){return()=>{n.get(pl).donePromise.then(()=>{const r=Us(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[UC,jt,Kt],multi:!0}];class Wm{static init(){!function(e){dm=e}(new Wm)}addToWindow(t){Gt.getAngularTestability=(r,i=!0)=>{const s=t.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Gt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Gt.getAllAngularRootElements=()=>t.getAllRootElements(),Gt.frameworkStabilizers||(Gt.frameworkStabilizers=[]),Gt.frameworkStabilizers.push(r=>{const i=Gt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,n,r){if(null==n)return null;const i=t.getTestability(n);return null!=i?i:r?Us().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}}let zU=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();const au=new vt("EventManagerPlugins");let ed=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(Ce(au),Ce(Ut))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();class Zm{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=Us().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let jC=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})(),lu=(()=>{class e extends jC{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach($C),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach($C))}}return e.\u0275fac=function(n){return new(n||e)(Ce(jt))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();function $C(e){Us().remove(e)}const qm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Km=/%COMP%/g;function td(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?td(e,i,n):(i=i.replace(Km,e),n.push(i))}return n}function YC(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let nd=(()=>{class e{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Xm(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Mn.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new sV(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case Mn.ShadowDom:return new oV(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=td(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(Ce(ed),Ce(lu),Ce(Qc))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();class Xm{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,n){return n?document.createElementNS(qm[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){t.appendChild(n)}insertBefore(t,n,r){t&&t.insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const s=qm[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=qm[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Mr.DashCase|Mr.Important)?t.style.setProperty(n,r,i&Mr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Mr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,YC(r)):this.eventManager.addEventListener(t,n,YC(r))}}class sV extends Xm{constructor(t,n,r,i){super(t),this.component=r;const s=td(i+"-"+r.id,r.styles,[]);n.addStyles(s),this.contentAttr=function(e){return"_ngcontent-%COMP%".replace(Km,e)}(i+"-"+r.id),this.hostAttr=function(e){return"_nghost-%COMP%".replace(Km,e)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class oV extends Xm{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=td(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let aV=(()=>{class e extends Zm{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(Ce(jt))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();const ZC=["alt","control","meta","shift"],pV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qC={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},gV={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let mV=(()=>{class e extends Zm{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const s=e.parseEventName(r),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Us().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=e._normalizeKey(r.pop());let o="";if(ZC.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(n){let r="",i=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&qC.hasOwnProperty(t)&&(t=qC[t]))}return pV[t]||t}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ZC.forEach(s=>{s!=i&&gV[s](n)&&(r+=s+".")}),r+=i,r}static eventCallback(n,r,i){return s=>{e.getEventFullKey(s)===n&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return e.\u0275fac=function(n){return new(n||e)(Ce(jt))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();const DV=$D(sB,"browser",[{provide:Jc,useValue:NC},{provide:RD,useValue:function(){Gm.makeCurrent(),Wm.init()},multi:!0},{provide:jt,useFactory:function(){return function(e){qp=e}(document),document},deps:[]}]),CV=[[],{provide:Mc,useValue:"root"},{provide:Co,useFactory:function(){return new Co},deps:[]},{provide:au,useClass:aV,multi:!0,deps:[jt,Ut,Jc]},{provide:au,useClass:mV,multi:!0,deps:[jt]},[],{provide:nd,useClass:nd,deps:[ed,lu,Qc]},{provide:Ro,useExisting:nd},{provide:jC,useExisting:lu},{provide:lu,useClass:lu,deps:[jt]},{provide:fm,useClass:fm,deps:[Ut]},{provide:ed,useClass:ed,deps:[au,Ut]},{provide:class{},useClass:zU,deps:[]},[]];let t_=(()=>{class e{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:e,providers:[{provide:Qc,useValue:n.appId},{provide:UC,useExisting:Qc},HU]}}}return e.\u0275fac=function(n){return new(n||e)(Ce(e,12))},e.\u0275mod=_n({type:e}),e.\u0275inj=ln({providers:CV,imports:[Ym,fB]}),e})();function Ct(...e){let t=e[e.length-1];return ke(t)?(e.pop(),Se(e,t)):Be(e)}"undefined"!=typeof window&&window;class Zr extends ee{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return n&&!n.closed&&t.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new tt;return this._value}next(t){super.next(this._value=t)}}class FV extends ue{notifyNext(t,n,r,i,s){this.destination.next(n)}notifyError(t,n){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class PV extends ue{constructor(t,n,r){super(),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function OV(e,t,n,r,i=new PV(e,n,r)){if(!i.closed)return t instanceof te?t.subscribe(i):ne(t)(i)}const XC={};class LV{constructor(t){this.resultSelector=t}call(t,n){return n.subscribe(new BV(t,this.resultSelector))}}class BV extends FV{constructor(t,n){super(t),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(XC),this.observables.push(t)}_complete(){const t=this.observables,n=t.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let r=0;r<n;r++)this.add(OV(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,n,r){const i=this.values,o=this.toRespond?i[r]===XC?--this.toRespond:this.toRespond:0;i[r]=n,0===o&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let n;try{n=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const rd=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();function r_(...e){return je(1)(Ct(...e))}const wl=new te(e=>e.complete());function i_(e){return e?function(e){return new te(t=>e.schedule(()=>t.complete()))}(e):wl}function QC(e){return new te(t=>{let n;try{n=e()}catch(i){return void t.error(i)}return(n?Oe(n):i_()).subscribe(t)})}function js(e,t){return"function"==typeof t?n=>n.pipe(js((r,i)=>Oe(e(r,i)).pipe(fe((s,o)=>t(r,s,i,o))))):n=>n.lift(new jV(e))}class jV{constructor(t){this.project=t}call(t,n){return n.subscribe(new $V(t,this.project))}}class $V extends He{constructor(t,n){super(t),this.project=n,this.index=0}_next(t){let n;const r=this.index++;try{n=this.project(t,r)}catch(i){return void this.destination.error(i)}this._innerSub(n)}_innerSub(t){const n=this.innerSubscription;n&&n.unsubscribe();const r=new ae(this),i=this.destination;i.add(r),this.innerSubscription=Fe(t,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const JC=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function id(e){return t=>0===e?i_():t.lift(new HV(e))}class HV{constructor(t){if(this.total=t,this.total<0)throw new JC}call(t,n){return n.subscribe(new zV(t,this.total))}}class zV extends ue{constructor(t,n){super(t),this.total=n,this.count=0}_next(t){const n=this.total,r=++this.count;r<=n&&(this.destination.next(t),r===n&&(this.destination.complete(),this.unsubscribe()))}}function eM(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new GV(e,t,n))}}class GV{constructor(t,n,r=!1){this.accumulator=t,this.seed=n,this.hasSeed=r}call(t,n){return n.subscribe(new WV(t,this.accumulator,this.seed,this.hasSeed))}}class WV extends ue{constructor(t,n,r,i){super(t),this.accumulator=n,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const n=this.index++;let r;try{r=this.accumulator(this.seed,t,n)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function bl(e,t){return function(r){return r.lift(new ZV(e,t))}}class ZV{constructor(t,n){this.predicate=t,this.thisArg=n}call(t,n){return n.subscribe(new qV(t,this.predicate,this.thisArg))}}class qV extends ue{constructor(t,n,r){super(t),this.predicate=n,this.thisArg=r,this.count=0}_next(t){let n;try{n=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}n&&this.destination.next(t)}}function Vo(e){return function(n){const r=new KV(e),i=n.lift(r);return r.caught=i}}class KV{constructor(t){this.selector=t}call(t,n){return n.subscribe(new XV(t,this.selector,this.caught))}}class XV extends He{constructor(t,n,r){super(t),this.selector=n,this.caught=r}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const r=new ae(this);this.add(r);const i=Fe(n,r);i!==r&&this.add(i)}}}function cu(e,t){return Ge(e,t,1)}function s_(e){return function(n){return 0===e?i_():n.lift(new QV(e))}}class QV{constructor(t){if(this.total=t,this.total<0)throw new JC}call(t,n){return n.subscribe(new JV(t,this.total))}}class JV extends ue{constructor(t,n){super(t),this.total=n,this.ring=new Array,this.count=0}_next(t){const n=this.ring,r=this.total,i=this.count++;n.length<r?n.push(t):n[i%r]=t}_complete(){const t=this.destination;let n=this.count;if(n>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let s=0;s<r;s++){const o=n++%r;t.next(i[o])}}t.complete()}}function tM(e=nj){return t=>t.lift(new ej(e))}class ej{constructor(t){this.errorFactory=t}call(t,n){return n.subscribe(new tj(t,this.errorFactory))}}class tj extends ue{constructor(t,n){super(t),this.errorFactory=n,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(n){t=n}this.destination.error(t)}}}function nj(){return new rd}function nM(e=null){return t=>t.lift(new rj(e))}class rj{constructor(t){this.defaultValue=t}call(t,n){return n.subscribe(new ij(t,this.defaultValue))}}class ij extends ue{constructor(t,n){super(t),this.defaultValue=n,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function vl(e,t){const n=arguments.length>=2;return r=>r.pipe(e?bl((i,s)=>e(i,s,r)):ye,id(1),n?nM(t):tM(()=>new rd))}function $s(){}function Tr(e,t,n){return function(i){return i.lift(new oj(e,t,n))}}class oj{constructor(t,n,r){this.nextOrObserver=t,this.error=n,this.complete=r}call(t,n){return n.subscribe(new aj(t,this.nextOrObserver,this.error,this.complete))}}class aj extends ue{constructor(t,n,r,i){super(t),this._tapNext=$s,this._tapError=$s,this._tapComplete=$s,this._tapError=r||$s,this._tapComplete=i||$s,E(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||$s,this._tapError=n.error||$s,this._tapComplete=n.complete||$s)}_next(t){try{this._tapNext.call(this._context,t)}catch(n){return void this.destination.error(n)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(n){return void this.destination.error(n)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class cj{constructor(t){this.callback=t}call(t,n){return n.subscribe(new uj(t,this.callback))}}class uj extends ue{constructor(t,n){super(t),this.add(new F(n))}}class ps{constructor(t,n){this.id=t,this.url=n}}class o_ extends ps{constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class uu extends ps{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rM extends ps{constructor(t,n,r){super(t,n),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class hj extends ps{constructor(t,n,r){super(t,n),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fj extends ps{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dj extends ps{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pj extends ps{constructor(t,n,r,i,s){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gj extends ps{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mj extends ps{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iM{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sM{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _j{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yj{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wj{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bj{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oM{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const kt="primary";class vj{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function xl(e){return new vj(e)}const aM="ngNavigationCancelingError";function a_(e){const t=Error("NavigationCancelingError: "+e);return t[aM]=!0,t}function Ej(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=e[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Hi(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!lM(e[i],t[i]))return!1;return!0}function lM(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>r[s]===i)}return e===t}function cM(e){return Array.prototype.concat.apply([],e)}function uM(e){return e.length>0?e[e.length-1]:null}function Yn(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function zi(e){return v0(e)?e:af(e)?Oe(Promise.resolve(e)):Ct(e)}const Mj={exact:function dM(e,t,n){if(!$o(e.segments,t.segments)||!sd(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!dM(e.children[r],t.children[r],n))return!1;return!0},subset:pM},hM={exact:function(e,t){return Hi(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>lM(e[n],t[n]))},ignored:()=>!0};function fM(e,t,n){return Mj[n.paths](e.root,t.root,n.matrixParams)&&hM[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function pM(e,t,n){return gM(e,t,t.segments,n)}function gM(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!$o(i,n)||t.hasChildren()||!sd(i,n,r))}if(e.segments.length===n.length){if(!$o(e.segments,n)||!sd(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!pM(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!($o(e.segments,i)&&sd(e.segments,i,r)&&e.children[kt])&&gM(e.children[kt],t,s,r)}}function sd(e,t,n){return t.every((r,i)=>hM[n](e[i].parameters,r.parameters))}class jo{constructor(t,n,r){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xl(this.queryParams)),this._queryParamMap}toString(){return Ij.serialize(this)}}class Ft{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Yn(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return od(this)}}class hu{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=xl(this.parameters)),this._parameterMap}toString(){return wM(this)}}function $o(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}class l_{}class mM{parse(t){const n=new Vj(t);return new jo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){return`${`/${fu(t.root,!0)}`}${function(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${ad(n)}=${ad(i)}`).join("&"):`${ad(n)}=${ad(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${function(e){return encodeURI(e)}(t.fragment)}`:""}`}}const Ij=new mM;function od(e){return e.segments.map(t=>wM(t)).join("/")}function fu(e,t){if(!e.hasChildren())return od(e);if(t){const n=e.children[kt]?fu(e.children[kt],!1):"",r=[];return Yn(e.children,(i,s)=>{s!==kt&&r.push(`${s}:${fu(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function(e,t){let n=[];return Yn(e.children,(r,i)=>{i===kt&&(n=n.concat(t(r,i)))}),Yn(e.children,(r,i)=>{i!==kt&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===kt?[fu(e.children[kt],!1)]:[`${i}:${fu(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[kt]?`${od(e)}/${n[0]}`:`${od(e)}/(${n.join("//")})`}}function _M(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ad(e){return _M(e).replace(/%3B/gi,";")}function c_(e){return _M(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ld(e){return decodeURIComponent(e)}function yM(e){return ld(e.replace(/\+/g,"%20"))}function wM(e){return`${c_(e.path)}${function(e){return Object.keys(e).map(t=>`;${c_(t)}=${c_(e[t])}`).join("")}(e.parameters)}`}const Oj=/^[^\/()?;=#]+/;function cd(e){const t=e.match(Oj);return t?t[0]:""}const Nj=/^[^=?&#]+/,Bj=/^[^?&#]+/;class Vj{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[kt]=new Ft(t,n)),r}parseSegment(){const t=cd(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new hu(ld(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=cd(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=cd(this.remaining);i&&(r=i,this.capture(r))}t[ld(n)]=ld(r)}parseQueryParam(t){const n=function(e){const t=e.match(Nj);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function(e){const t=e.match(Bj);return t?t[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=yM(n),s=yM(r);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cd(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=kt);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[kt]:new Ft([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class bM{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=u_(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=u_(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=h_(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return h_(t,this._root).map(n=>n.value)}}function u_(e,t){if(e===t.value)return t;for(const n of t.children){const r=u_(e,n);if(r)return r}return null}function h_(e,t){if(e===t.value)return[t];for(const n of t.children){const r=h_(e,n);if(r.length)return r.unshift(t),r}return[]}class gs{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function du(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class vM extends bM{constructor(t,n){super(t),this.snapshot=n,f_(this,t)}toString(){return this.snapshot.toString()}}function xM(e,t){const n=function(e,t){const o=new ud([],{},{},"",{},kt,t,null,e.root,-1,{});return new DM("",new gs(o,[]))}(e,t),r=new Zr([new hu("",{})]),i=new Zr({}),s=new Zr({}),o=new Zr({}),a=new Zr(""),l=new El(r,i,o,a,s,kt,t,n.root);return l.snapshot=n.root,new vM(new gs(l,[]),n)}class El{constructor(t,n,r,i,s,o,a,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(fe(t=>xl(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(fe(t=>xl(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function EM(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function(e){return e.reduce((t,n)=>({params:Object.assign(Object.assign({},t.params),n.params),data:Object.assign(Object.assign({},t.data),n.data),resolve:Object.assign(Object.assign({},t.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ud{constructor(t,n,r,i,s,o,a,l,c,u,f){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class DM extends bM{constructor(t,n){super(n),this.url=t,f_(this,n)}toString(){return CM(this._root)}}function f_(e,t){t.value._routerState=e,t.children.forEach(n=>f_(e,n))}function CM(e){const t=e.children.length>0?` { ${e.children.map(CM).join(", ")} } `:"";return`${e.value}${t}`}function d_(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Hi(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Hi(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Hi(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Hi(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function p_(e,t){return Hi(e.params,t.params)&&function(e,t){return $o(e,t)&&e.every((n,r)=>Hi(n.parameters,t[r].parameters))}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||p_(e.parent,t.parent))}function hd(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return hd(e,r,i);return hd(e,r)})}(e,t,n);return new gs(r,i)}{if(e.shouldAttach(t.value)){const s=e.retrieve(t.value);if(null!==s){const o=s.route;return MM(t,o),o}}const r=function(e){return new El(new Zr(e.url),new Zr(e.params),new Zr(e.queryParams),new Zr(e.fragment),new Zr(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(s=>hd(e,s));return new gs(r,i)}}function MM(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)MM(e.children[n],t.children[n])}function fd(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function pu(e){return"object"==typeof e&&null!=e&&e.outlets}function g_(e,t,n,r,i){let s={};return r&&Yn(r,(o,a)=>{s[a]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new jo(n.root===e?t:SM(n.root,e,t),s,i)}function SM(e,t,n){const r={};return Yn(e.children,(i,s)=>{r[s]=i===t?n:SM(i,t,n)}),new Ft(e.segments,r)}class AM{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&fd(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(pu);if(i&&i!==uM(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class m_{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function TM(e,t,n){if(e||(e=new Ft([],{})),0===e.segments.length&&e.hasChildren())return dd(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const o=e.segments[i],a=n[r];if(pu(a))break;const l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!IM(l,c,o))return s;r+=2}else{if(!IM(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const s=new Ft(e.segments.slice(0,r.pathIndex),{});return s.children[kt]=new Ft(e.segments.slice(r.pathIndex),e.children),dd(s,0,i)}return r.match&&0===i.length?new Ft(e.segments,{}):r.match&&!e.hasChildren()?__(e,t,n):r.match?dd(e,0,i):__(e,t,n)}function dd(e,t,n){if(0===n.length)return new Ft(e.segments,{});{const r=function(e){return pu(e[0])?e[0].outlets:{[kt]:e}}(n),i={};return Yn(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=TM(e.children[o],t,s))}),Yn(e.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new Ft(e.segments,i)}}function __(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(pu(s)){const l=Qj(s.outlets);return new Ft(r,l)}if(0===i&&fd(n[0])){r.push(new hu(e.segments[t].path,kM(n[0]))),i++;continue}const o=pu(s)?s.outlets[kt]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&fd(a)?(r.push(new hu(o,kM(a))),i+=2):(r.push(new hu(o,{})),i++)}return new Ft(r,{})}function Qj(e){const t={};return Yn(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=__(new Ft([],{}),0,n))}),t}function kM(e){const t={};return Yn(e,(n,r)=>t[r]=`${n}`),t}function IM(e,t,n){return e==n.path&&Hi(t,n.parameters)}class e7{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),d_(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=du(n);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Yn(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){const i=t.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:i,route:t,contexts:s})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=du(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=du(n);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new bj(s.value.snapshot))}),t.children.length&&this.forwardEvent(new yj(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,s=n?n.value:null;if(d_(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),RM(a.route)}else{const a=function(e){for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(i.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=l,o.outlet&&o.outlet.activateWith(i,l),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,r)}}function RM(e){d_(e.value),e.children.forEach(RM)}class y_{constructor(t,n){this.routes=t,this.module=n}}function Hs(e){return"function"==typeof e}function Ho(e){return e instanceof jo}const gu=Symbol("INITIAL_VALUE");function mu(){return js(e=>function(...e){let t,n;return ke(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&M(e[0])&&(e=e[0]),Be(e,n).lift(new LV(t))}(e.map(t=>t.pipe(id(1),function(...e){const t=e[e.length-1];return ke(t)?(e.pop(),n=>r_(e,n,t)):n=>r_(e,n)}(gu)))).pipe(eM((t,n)=>{let r=!1;return n.reduce((i,s,o)=>i!==gu?i:(s===gu&&(r=!0),r||!1!==s&&o!==n.length-1&&!Ho(s)?i:s),t)},gu),bl(t=>t!==gu),fe(t=>Ho(t)?t:!0===t),id(1)))}let FM=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ai({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&Pn(0,"router-outlet")},directives:function(){return[C_]},encapsulation:2}),e})();function PM(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];a7(r,l7(t,r))}}function a7(e,t){e.children&&PM(e.children,t)}function l7(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function w_(e){const t=e.children&&e.children.map(w_),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==kt&&(n.component=FM),n}function qr(e){return e.outlet||kt}function OM(e,t){const n=e.filter(r=>qr(r)===t);return n.push(...e.filter(r=>qr(r)!==t)),n}const NM={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function pd(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},NM):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(t.matcher||Ej)(n,e,t);if(!s)return Object.assign({},NM);const o={};Yn(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:a,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function gd(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(r=>md(e,t,r)&&qr(r)!==kt)}(e,n,r)){const o=new Ft(t,function(e,t,n,r){const i={};i[kt]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&qr(s)!==kt){const o=new Ft([],{});o._sourceSegment=e,o._segmentIndexShift=t.length,i[qr(s)]=o}return i}(e,t,r,new Ft(n,e.children)));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(r=>md(e,t,r))}(e,n,r)){const o=new Ft(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(md(e,n,a)&&!i[qr(a)]){const l=new Ft([],{});l._sourceSegment=e,l._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[qr(a)]=l}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}const s=new Ft(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function md(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function LM(e,t,n,r){return!!(qr(e)===r||r!==kt&&md(t,n,e))&&("**"===e.path||pd(t,e,n).matched)}function BM(e,t,n){return 0===t.length&&!e.children[n]}class _u{constructor(t){this.segmentGroup=t||null}}class UM{constructor(t){this.urlTree=t}}function _d(e){return new te(t=>t.error(new _u(e)))}function VM(e){return new te(t=>t.error(new UM(e)))}function d7(e){return new te(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class m7{constructor(t,n,r,i,s){this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get($i)}apply(){const t=gd(this.urlTree.root,[],[],this.config).segmentGroup,n=new Ft(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,kt).pipe(fe(s=>this.createUrlTree(b_(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Vo(s=>{if(s instanceof UM)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof _u?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,kt).pipe(fe(i=>this.createUrlTree(b_(i),t.queryParams,t.fragment))).pipe(Vo(i=>{throw i instanceof _u?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,r){const i=t.segments.length>0?new Ft([],{[kt]:t}):t;return new jo(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(fe(s=>new Ft([],s))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Oe(i).pipe(cu(s=>{const o=r.children[s],a=OM(n,s);return this.expandSegmentGroup(t,a,o,s).pipe(fe(l=>({segment:l,outlet:s})))}),eM((s,o)=>(s[o.outlet]=o.segment,s),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?bl((i,s)=>e(i,s,r)):ye,s_(1),n?nM(t):tM(()=>new rd))}())}expandSegment(t,n,r,i,s,o){return Oe(r).pipe(cu(a=>this.expandSegmentAgainstRoute(t,n,r,a,i,s,o).pipe(Vo(c=>{if(c instanceof _u)return Ct(null);throw c}))),vl(a=>!!a),Vo((a,l)=>{if(a instanceof rd||"EmptyError"===a.name){if(BM(n,i,s))return Ct(new Ft([],{}));throw new _u(n)}throw a}))}expandSegmentAgainstRoute(t,n,r,i,s,o,a){return LM(i,n,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,o):_d(n):_d(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?VM(s):this.lineralizeSegments(r,s).pipe(Ge(o=>{const a=new Ft(o,{});return this.expandSegment(t,a,n,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,s,o){const{matched:a,consumedSegments:l,lastChild:c,positionalParamSegments:u}=pd(n,i,s);if(!a)return _d(n);const f=this.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?VM(f):this.lineralizeSegments(i,f).pipe(Ge(d=>this.expandSegment(t,n,r,d.concat(s.slice(c)),o,!1)))}matchSegmentAgainstRoute(t,n,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Ct(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe(fe(d=>(r._loadedConfig=d,new Ft(i,{})))):Ct(new Ft(i,{}));const{matched:o,consumedSegments:a,lastChild:l}=pd(n,r,i);if(!o)return _d(n);const c=i.slice(l);return this.getChildConfig(t,r,i).pipe(Ge(f=>{const d=f.module,p=f.routes,{segmentGroup:b,slicedSegments:N}=gd(n,a,c,p),S=new Ft(b.segments,b.children);if(0===N.length&&S.hasChildren())return this.expandChildren(d,p,S).pipe(fe(q=>new Ft(a,q)));if(0===p.length&&0===N.length)return Ct(new Ft(a,{}));const H=qr(r)===s;return this.expandSegment(d,S,p,N,H?kt:s,!0).pipe(fe(ie=>new Ft(a.concat(ie.segments),ie.children)))}))}getChildConfig(t,n,r){return n.children?Ct(new y_(n.children,t)):n.loadChildren?void 0!==n._loadedConfig?Ct(n._loadedConfig):this.runCanLoadGuards(t.injector,n,r).pipe(Ge(i=>i?this.configLoader.load(t.injector,n).pipe(fe(s=>(n._loadedConfig=s,s))):function(e){return new te(t=>t.error(a_(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(n))):Ct(new y_([],t))}runCanLoadGuards(t,n,r){const i=n.canLoad;return i&&0!==i.length?Ct(i.map(o=>{const a=t.get(o);let l;if(function(e){return e&&Hs(e.canLoad)}(a))l=a.canLoad(n,r);else{if(!Hs(a))throw new Error("Invalid CanLoad guard");l=a(n,r)}return zi(l)})).pipe(mu(),Tr(o=>{if(!Ho(o))return;const a=a_(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),fe(o=>!0===o)):Ct(!0)}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ct(r);if(i.numberOfChildren>1||!i.children[kt])return d7(t.redirectTo);i=i.children[kt]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreatreUrlTree(t,n,r,i){const s=this.createSegmentGroup(t,n.root,r,i);return new jo(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Yn(t,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(t,n,r,i){const s=this.createSegments(t,n.segments,r,i);let o={};return Yn(n.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,r,i)}),new Ft(s,o)}createSegments(t,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}function b_(e){const t={};for(const r of Object.keys(e.children)){const s=b_(e.children[r]);(s.segments.length>0||s.hasChildren())&&(t[r]=s)}return function(e){if(1===e.numberOfChildren&&e.children[kt]){const t=e.children[kt];return new Ft(e.segments.concat(t.segments),t.children)}return e}(new Ft(e.segments,t))}class jM{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class yd{constructor(t,n){this.component=t,this.route=n}}function w7(e,t,n){const r=e._root;return yu(r,t?t._root:null,n,[r.value])}function wd(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function yu(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=du(t);return e.children.forEach(o=>{(function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!$o(e.url,t.url);case"pathParamsOrQueryParamsChange":return!$o(e.url,t.url)||!Hi(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!p_(e,t)||!Hi(e.queryParams,t.queryParams);case"paramsChange":default:return!p_(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new jM(r)):(s.data=o.data,s._resolvedData=o._resolvedData),yu(e,t,s.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new yd(a.outlet.component,o))}else o&&wu(t,a,i),i.canActivateChecks.push(new jM(r)),yu(e,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Yn(s,(o,a)=>wu(o,n.getContext(a),i)),i}function wu(e,t,n){const r=du(e),i=e.value;Yn(r,(s,o)=>{wu(s,i.component?t?t.children.getContext(o):null:t,n)}),n.canDeactivateChecks.push(new yd(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class R7{}function $M(e){return new te(t=>t.error(e))}class P7{constructor(t,n,r,i,s,o){this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const t=gd(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,kt);if(null===n)return null;const r=new ud([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},kt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new gs(r,n),s=new DM(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const n=t.value,r=EM(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,r)}processChildren(t,n){const r=[];for(const s of Object.keys(n.children)){const o=n.children[s],a=OM(t,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;r.push(...l)}const i=HM(r);return function(e){e.sort((t,n)=>t.value.outlet===kt?-1:n.value.outlet===kt?1:t.value.outlet.localeCompare(n.value.outlet))}(i),i}processSegment(t,n,r,i){for(const s of t){const o=this.processSegmentAgainstRoute(s,n,r,i);if(null!==o)return o}return BM(n,r,i)?[]:null}processSegmentAgainstRoute(t,n,r,i){if(t.redirectTo||!LM(t,n,r,i))return null;let s,o=[],a=[];if("**"===t.path){const p=r.length>0?uM(r).parameters:{};s=new ud(r,p,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,GM(t),qr(t),t.component,t,zM(n),YM(n)+r.length,WM(t))}else{const p=pd(n,t,r);if(!p.matched)return null;o=p.consumedSegments,a=r.slice(p.lastChild),s=new ud(o,p.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,GM(t),qr(t),t.component,t,zM(n),YM(n)+o.length,WM(t))}const l=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:u}=gd(n,o,a,l.filter(p=>void 0===p.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const p=this.processChildren(l,c);return null===p?null:[new gs(s,p)]}if(0===l.length&&0===u.length)return[new gs(s,[])];const f=qr(t)===i,d=this.processSegment(l,c,u,f?kt:i);return null===d?null:[new gs(s,d)]}}function L7(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function HM(e){const t=[],n=new Set;for(const r of e){if(!L7(r)){t.push(r);continue}const i=t.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=HM(r.children);t.push(new gs(r.value,i))}return t.filter(r=>!n.has(r))}function zM(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function YM(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function GM(e){return e.data||{}}function WM(e){return e.resolve||{}}function v_(e){return js(t=>{const n=e(t);return n?Oe(n).pipe(fe(()=>t)):Ct(t)})}class Y7 extends class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const x_=new vt("ROUTES");class ZM{constructor(t,n,r,i){this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const i=this.loadModuleFactory(n.loadChildren).pipe(fe(s=>{this.onLoadEndListener&&this.onLoadEndListener(n);const o=s.create(t);return new y_(cM(o.injector.get(x_,void 0,ut.Self|ut.Optional)).map(w_),o)}),Vo(s=>{throw n._loader$=void 0,s}));return n._loader$=new gt(i,()=>new ee).pipe(ft()),n._loader$}loadModuleFactory(t){return"string"==typeof t?Oe(this.loader.load(t)):zi(t()).pipe(Ge(n=>n instanceof IE?Ct(n):Oe(this.compiler.compileModuleAsync(n))))}}class G7{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Dl,this.attachRef=null}}class Dl{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new G7,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}class Z7{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function q7(e){throw e}function K7(e,t,n){return t.parse("/")}function qM(e,t){return Ct(null)}const X7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Q7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mr=(()=>{class e{constructor(n,r,i,s,o,a,l,c){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ee,this.errorHandler=q7,this.malformedUriErrorHandler=K7,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qM,afterPreactivation:qM},this.urlHandlingStrategy=new Z7,this.routeReuseStrategy=new Y7,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get($i),this.console=o.get(Sf);const d=o.get(Ut);this.isNgZoneEnabled=d instanceof Ut&&Ut.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new jo(new Ft([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ZM(a,l,p=>this.triggerEvent(new iM(p)),p=>this.triggerEvent(new sM(p))),this.routerState=xM(this.currentUrlTree,this.rootComponentType),this.transitions=new Zr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(bl(i=>0!==i.id),fe(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),js(i=>{let s=!1,o=!1;return Ct(i).pipe(Tr(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),js(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return bd(a.source)&&(this.browserUrlTree=a.extractedUrl),Ct(a).pipe(js(f=>{const d=this.transitions.getValue();return r.next(new o_(f.id,this.serializeUrl(f.extractedUrl),f.source,f.restoredState)),d!==this.transitions.getValue()?wl:Promise.resolve(f)}),function(e,t,n,r){return js(i=>function(e,t,n,r,i){return new m7(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(fe(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Tr(f=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:f.urlAfterRedirects})}),function(e,t,n,r,i){return Ge(s=>function(e,t,n,r,i="emptyOnly",s="legacy"){try{const o=new P7(e,t,n,r,i,s).recognize();return null===o?$M(new R7):Ct(o)}catch(o){return $M(o)}}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(fe(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,f=>this.serializeUrl(f),this.paramsInheritanceStrategy,this.relativeLinkResolution),Tr(f=>{"eager"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(f.urlAfterRedirects,f),this.browserUrlTree=f.urlAfterRedirects);const d=new fj(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);r.next(d)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:d,extractedUrl:p,source:b,restoredState:N,extras:S}=a,H=new o_(d,this.serializeUrl(p),b,N);r.next(H);const G=xM(p,this.rootComponentType).snapshot;return Ct(Object.assign(Object.assign({},a),{targetSnapshot:G,urlAfterRedirects:p,extras:Object.assign(Object.assign({},S),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,this.browserUrlTree=a.urlAfterRedirects,a.resolve(null),wl}),v_(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:f,extras:{skipLocationChange:d,replaceUrl:p}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:f,skipLocationChange:!!d,replaceUrl:!!p})}),Tr(a=>{const l=new dj(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),fe(a=>Object.assign(Object.assign({},a),{guards:w7(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function(e,t){return Ge(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?Ct(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return Oe(e).pipe(Ge(i=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Ct(s.map(a=>{const l=wd(a,t,i);let c;if(function(e){return e&&Hs(e.canDeactivate)}(l))c=zi(l.canDeactivate(e,t,n,r));else{if(!Hs(l))throw new Error("Invalid CanDeactivate guard");c=zi(l(e,t,n,r))}return c.pipe(vl())})).pipe(mu()):Ct(!0)}(i.component,i.route,n,t,r)),vl(i=>!0!==i,!0))}(o,r,i,e).pipe(Ge(a=>a&&function(e){return"boolean"==typeof e}(a)?function(e,t,n,r){return Oe(t).pipe(cu(i=>r_(function(e,t){return null!==e&&t&&t(new _j(e)),Ct(!0)}(i.route.parent,r),function(e,t){return null!==e&&t&&t(new wj(e)),Ct(!0)}(i.route,r),function(e,t,n){const r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(o)).filter(o=>null!==o).map(o=>QC(()=>Ct(o.guards.map(l=>{const c=wd(l,o.node,n);let u;if(function(e){return e&&Hs(e.canActivateChild)}(c))u=zi(c.canActivateChild(r,e));else{if(!Hs(c))throw new Error("Invalid CanActivateChild guard");u=zi(c(r,e))}return u.pipe(vl())})).pipe(mu())));return Ct(s).pipe(mu())}(e,i.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?Ct(r.map(s=>QC(()=>{const o=wd(s,t,n);let a;if(function(e){return e&&Hs(e.canActivate)}(o))a=zi(o.canActivate(t,e));else{if(!Hs(o))throw new Error("Invalid CanActivate guard");a=zi(o(t,e))}return a.pipe(vl())}))).pipe(mu()):Ct(!0)}(e,i.route,n))),vl(i=>!0!==i,!0))}(r,s,e,t):Ct(a)),fe(a=>Object.assign(Object.assign({},n),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Tr(a=>{if(Ho(a.guardsResult)){const c=a_(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new pj(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),bl(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),v_(a=>{if(a.guards.canActivateChecks.length)return Ct(a).pipe(Tr(l=>{const c=new gj(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),js(l=>{let c=!1;return Ct(l).pipe(function(e,t){return Ge(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Ct(n);let s=0;return Oe(i).pipe(cu(o=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return Ct({});const s={};return Oe(i).pipe(Ge(o=>function(e,t,n,r){const i=wd(e,t,r);return zi(i.resolve?i.resolve(t,n):i(t,n))}(e[o],t,n,r).pipe(Tr(a=>{s[o]=a}))),s_(1),Ge(()=>Object.keys(s).length===i.length?Ct(s):wl))}(e._resolve,e,t,r).pipe(fe(s=>(e._resolvedData=s,e.data=Object.assign(Object.assign({},e.data),EM(e,n).resolve),null)))}(o.route,r,e,t)),Tr(()=>s++),s_(1),Ge(o=>s===i.length?Ct(n):wl))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Tr({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Tr(l=>{const c=new mj(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),v_(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:f,extras:{skipLocationChange:d,replaceUrl:p}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:f,skipLocationChange:!!d,replaceUrl:!!p})}),fe(a=>{const l=function(e,t,n){const r=hd(e,t._root,n?n._root:void 0);return new vM(r,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),Tr(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((e,t,n)=>fe(r=>(new e7(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Tr({next(){s=!0},complete(){s=!0}}),function(e){return t=>t.lift(new cj(e))}(()=>{var a;if(!s&&!o){const l=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,l)):this.cancelNavigationTransition(i,l)}(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),Vo(a=>{if(o=!0,function(e){return e&&e[aM]}(a)){const l=Ho(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const c=new rM(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),f={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bd(i.source)};this.scheduleNavigation(u,"imperative",null,f,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new hj(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return wl}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}getTransition(){const n=this.transitions.value;return n.urlAfterRedirects=this.browserUrlTree,n}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r=this.extractLocationChangeInfoFromEvent(n);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:s,urlTree:o}=r,a={replaceUrl:!0};if(s){const l=Object.assign({},s);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}this.scheduleNavigation(o,i,s,a)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(n){var r;return{source:"popstate"===n.type?"popstate":"hashchange",urlTree:this.parseUrl(n.url),state:(null===(r=n.state)||void 0===r?void 0:r.navigationId)?n.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(n,r){if(!n)return!0;const i=r.urlTree.toString()===n.urlTree.toString();return r.transitionId!==n.transitionId||!i||!("hashchange"===r.source&&"popstate"===n.source||"popstate"===r.source&&"hashchange"===n.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){PM(n),this.config=n.map(w_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=i||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let f=null;switch(a){case"merge":f=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}return null!==f&&(f=this.removeEmptyProps(f)),function(e,t,n,r,i){if(0===n.length)return g_(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new AM(!0,0,e);let t=0,n=!1;const r=e.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Yn(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new AM(n,t,r)}(n);if(s.toRoot())return g_(t.root,new Ft([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new m_(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const s=n.snapshot._urlSegment;return new m_(s,s===t.root,0)}const r=fd(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new m_(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?dd(o.segmentGroup,o.index,s.commands):TM(o.segmentGroup,o.index,s.commands);return g_(o.segmentGroup,a,t,r,i)}(c,this.currentUrlTree,n,f,null!=u?u:null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Ho(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?Object.assign({},X7):!1===r?Object.assign({},Q7):r,Ho(n))return fM(this.currentUrlTree,n,i);const s=this.parseUrl(n);return fM(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new uu(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,s,o){var a,l;if(this.disposed)return Promise.resolve(!1);const c=this.getTransition(),u=bd(r)&&c&&!bd(c.source),p=(this.lastSuccessfulId===c.id||this.currentNavigation?c.rawUrl:c.urlAfterRedirects).toString()===n.toString();if(u&&p)return Promise.resolve(!0);let b,N,S;o?(b=o.resolve,N=o.reject,S=o.promise):S=new Promise((ie,q)=>{b=ie,N=q});const H=++this.navigationId;let G;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),G=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):G=0,this.setTransition({id:H,targetPageId:G,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:s,resolve:b,reject:N,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(ie=>Promise.reject(ie))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(n,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const i=new rM(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(i),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){return new(n||e)(Ce(Lh),Ce(l_),Ce(Dl),Ce(Vf),Ce(Kt),Ce(Tf),Ce(No),Ce(void 0))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();function bd(e){return"imperative"!==e}let C_=(()=>{class e{constructor(n,r,i,s,o){this.parentContexts=n,this.location=r,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new En,this.deactivateEvents=new En,this.name=s||kt,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const o=(r=r||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new n9(n,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)($e(Dl),$e(mi),$e(Io),function(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(pw(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===t)return n[i+1];i+=2}}}return null}(Rn(),e)}("name"),$e(Uc))},e.\u0275dir=on({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class n9{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===El?this.route:t===Dl?this.childContexts:this.parent.get(t,n)}}class KM{}class XM{preload(t,n){return Ct(null)}}let QM=(()=>{class e{constructor(n,r,i,s,o){this.router=n,this.injector=s,this.preloadingStrategy=o,this.loader=new ZM(r,i,c=>n.triggerEvent(new iM(c)),c=>n.triggerEvent(new sM(c)))}setUpPreloading(){this.subscription=this.router.events.pipe(bl(n=>n instanceof uu),cu(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get($i);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(n,s)):s.children&&i.push(this.processRoutes(n,s.children));return Oe(i).pipe(je(),fe(s=>{}))}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Ct(r._loadedConfig):this.loader.load(n.injector,r)).pipe(Ge(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return e.\u0275fac=function(n){return new(n||e)(Ce(mr),Ce(Tf),Ce(No),Ce(Kt),Ce(KM))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})(),M_=(()=>{class e{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof o_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof uu&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof oM&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new oM(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(Ce(mr),Ce(LC),Ce(void 0))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();const zo=new vt("ROUTER_CONFIGURATION"),JM=new vt("ROUTER_FORROOT_GUARD"),i9=[Vf,{provide:l_,useClass:mM},{provide:mr,useFactory:function(e,t,n,r,i,s,o,a={},l,c){const u=new mr(null,e,t,n,r,i,s,cM(o));return l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,u),a.enableTracing&&u.events.subscribe(f=>{var d,p;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${f.constructor.name}`),console.log(f.toString()),console.log(f),null===(p=console.groupEnd)||void 0===p||p.call(console)}),u},deps:[l_,Dl,Vf,Kt,Tf,No,x_,zo,[class{},new pr],[class{},new pr]]},Dl,{provide:El,useFactory:function(e){return e.routerState.root},deps:[mr]},{provide:Tf,useClass:q4},QM,XM,class{preload(t,n){return n().pipe(Vo(()=>Ct(null)))}},{provide:zo,useValue:{enableTracing:!1}}];function s9(){return new gm("Router",mr)}let e2=(()=>{class e{constructor(n,r){}static forRoot(n,r){return{ngModule:e,providers:[i9,t2(n),{provide:JM,useFactory:l9,deps:[[mr,new pr,new Fs]]},{provide:zo,useValue:r||{}},{provide:yl,useFactory:a9,deps:[Uo,[new Ia(Rm),new pr],zo]},{provide:M_,useFactory:o9,deps:[mr,LC,zo]},{provide:KM,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:XM},{provide:gm,multi:!0,useFactory:s9},[S_,{provide:Xc,multi:!0,useFactory:f9,deps:[S_]},{provide:n2,useFactory:d9,deps:[S_]},{provide:FD,multi:!0,useExisting:n2}]]}}static forChild(n){return{ngModule:e,providers:[t2(n)]}}}return e.\u0275fac=function(n){return new(n||e)(Ce(JM,8),Ce(mr,8))},e.\u0275mod=_n({type:e}),e.\u0275inj=ln({}),e})();function o9(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new M_(e,t,n)}function a9(e,t,n={}){return n.useHash?new g5(e,t):new xC(e,t)}function l9(e){return"guarded"}function t2(e){return[{provide:_F,multi:!0,useValue:e},{provide:x_,multi:!0,useValue:e}]}let S_=(()=>{class e{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ee}appInitializer(){return this.injector.get(f5,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(mr),o=this.injector.get(zo);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Ct(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(n){const r=this.injector.get(zo),i=this.injector.get(QM),s=this.injector.get(M_),o=this.injector.get(mr),a=this.injector.get(gl);n===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(n){return new(n||e)(Ce(Kt))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();function f9(e){return e.appInitializer.bind(e)}function d9(e){return e.bootstrapListener.bind(e)}const n2=new vt("Router Initializer"),g9=[];let m9=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=_n({type:e}),e.\u0275inj=ln({imports:[[e2.forRoot(g9)],e2]}),e})();const _9=["video"],y9=["canvas"];function w9(e,t){if(1&e){const n=b0();Xt(0,"div",6),or("click",function(){return rc(n),Bi().rotateVideoInput(!0)}),Qt()}}class A_{constructor(t,n,r){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=n,this._imageAsDataUrl=t,this._imageData=r}static getDataFromDataUrl(t,n){return t.replace(`data:${n};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=A_.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}class r2{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((t,n)=>{navigator.mediaDevices.enumerateDevices().then(r=>{t(r.filter(i=>"videoinput"===i.kind))}).catch(r=>{n(r.message||r)})}):Promise.reject("enumerateDevices() not supported.")}}let s2=(()=>{class e{constructor(){this.width=640,this.height=480,this.videoOptions=e.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=e.DEFAULT_IMAGE_TYPE,this.imageQuality=e.DEFAULT_IMAGE_QUALITY,this.imageCapture=new En,this.initError=new En,this.imageClick=new En,this.cameraSwitched=new En,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(n){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=n.subscribe(()=>{this.takeSnapshot()})}set switchCamera(n){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=n.subscribe(r=>{"string"==typeof r?this.switchToVideoInput(r):this.rotateVideoInput(!1!==r)})}static getMediaConstraintsForDevice(n,r){const i=r||this.DEFAULT_VIDEO_OPTIONS;return n&&(i.deviceId={exact:n}),i}static getDeviceIdFromMediaStreamTrack(n){if(n.getSettings&&n.getSettings()&&n.getSettings().deviceId)return n.getSettings().deviceId;if(n.getConstraints&&n.getConstraints()&&n.getConstraints().deviceId){const r=n.getConstraints().deviceId;return e.getValueFromConstrainDOMString(r)}}static getFacingModeFromMediaStreamTrack(n){if(n){if(n.getSettings&&n.getSettings()&&n.getSettings().facingMode)return n.getSettings().facingMode;if(n.getConstraints&&n.getConstraints()&&n.getConstraints().facingMode){const r=n.getConstraints().facingMode;return e.getValueFromConstrainDOMString(r)}}}static isUserFacing(n){const r=e.getFacingModeFromMediaStreamTrack(n);return!!r&&"user"===r.toLowerCase()}static getValueFromConstrainDOMString(n){if(n){if(n instanceof String)return String(n);if(Array.isArray(n)&&Array(n).length>0)return String(n[0]);if("object"==typeof n){if(n.exact)return String(n.exact);if(n.ideal)return String(n.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(n=>{this.initError.next({message:n}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const n=this.nativeVideoElement,r={width:this.width,height:this.height};n.videoWidth&&(r.width=n.videoWidth,r.height=n.videoHeight);const i=this.canvas.nativeElement;i.width=r.width,i.height=r.height;const s=i.getContext("2d");s.drawImage(n,0,0);const o=this.imageType?this.imageType:e.DEFAULT_IMAGE_TYPE,l=i.toDataURL(o,this.imageQuality?this.imageQuality:e.DEFAULT_IMAGE_QUALITY);let c=null;this.captureImageData&&(c=s.getImageData(0,0,i.width,i.height)),this.imageCapture.next(new A_(l,o,c))}rotateVideoInput(n){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(n?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(n){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(n,this.videoOptions)}videoResize(){}get videoWidth(){const n=this.getVideoAspectRatio();return Math.min(this.width,this.height*n)}get videoHeight(){const n=this.getVideoAspectRatio();return Math.min(this.height,this.width/n)}get videoStyleClasses(){let n="";return this.isMirrorImage()&&(n+="mirrored "),n.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const n=this.nativeVideoElement;return n.videoWidth&&n.videoWidth>0&&n.videoHeight&&n.videoHeight>0?n.videoWidth/n.videoHeight:this.width/this.height}initWebcam(n,r){const i=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const s=e.getMediaConstraintsForDevice(n,r);navigator.mediaDevices.getUserMedia({video:s}).then(o=>{this.mediaStream=o,i.srcObject=o,i.play(),this.activeVideoSettings=o.getVideoTracks()[0].getSettings();const a=e.getDeviceIdFromMediaStreamTrack(o.getVideoTracks()[0]);this.cameraSwitched.next(a),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=a?this.availableVideoInputs.findIndex(l=>l.deviceId===a):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(o=>{this.initError.next({message:o.message,mediaStreamError:o})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let n="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?n=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(n=this.mirrorImage.x.toLowerCase())),n){case"always":return!0;case"never":return!1}}return e.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach(n=>n.stop())}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((n,r)=>{r2.getAvailableVideoInputs().then(i=>{this.availableVideoInputs=i,n(i)}).catch(i=>{this.availableVideoInputs=[],r(i)})})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ai({type:e,selectors:[["webcam"]],viewQuery:function(n,r){if(1&n&&(Df(_9,7),Df(y9,7)),2&n){let i;hl(i=fl())&&(r.video=i.first),hl(i=fl())&&(r.canvas=i.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera",mirrorImage:"mirrorImage"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(n,r){1&n&&(Xt(0,"div",0),or("click",function(){return r.imageClick.next()}),Xt(1,"video",1,2),or("resize",function(){return r.videoResize()}),Qt(),To(3,w9,1,0,"div",3),Pn(4,"canvas",4,5),Qt()),2&n&&(Vn(1),vx(r.videoStyleClasses),An("width",r.videoWidth)("height",r.videoHeight),Vn(2),An("ngIf",r.allowCameraSwitch&&r.availableVideoInputs.length>1&&r.videoInitialized),Vn(1),An("width",r.width)("height",r.height))},directives:[Xf],styles:['.webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;line-height:0;position:relative}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1);background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC");background-position:50%;background-repeat:no-repeat;background-size:80%;border-radius:5px;cursor:pointer;height:48px;position:absolute;right:13px;top:10px;transition:background-color .2s ease;width:48px}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.18)}']}),e.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},e.DEFAULT_IMAGE_TYPE="image/jpeg",e.DEFAULT_IMAGE_QUALITY=.92,e})(),b9=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=_n({type:e}),e.\u0275inj=ln({imports:[[Ym]]}),e})();var v9=T(4346);const o2={getBit(e){return this.data[vd(e)]&1<<xd(e)?1:0},setBit(e){this.data[vd(e)]|=1<<xd(e)},clearBit(e){this.data[vd(e)]&=~(1<<xd(e))},toggleBit(e){this.data[vd(e)]^=1<<xd(e)},getBitXY(e,t){return e>=this.width||t>=this.height?0:this.getBit(t*this.width+e)},setBitXY(e,t){this.setBit(t*this.width+e)},clearBitXY(e,t){this.clearBit(t*this.width+e)},toggleBitXY(e,t){this.toggleBit(t*this.width+e)}};function vd(e){return e>>3}function xd(e){return 7-(7&e)}function c2(e,t,n){return"function"==typeof e.toBlob?new Promise(function(r){e.toBlob(r,t,n)}):Promise.resolve(function(e){var t=e.match(/data:([^;]+)/)[1],n=e.replace(/^[^,]+,/,"");return function(e,t){e=e||[],"string"==typeof(t=t||{})&&(t={type:t});try{return new Blob(e,t)}catch(s){if("TypeError"!==s.name)throw s;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}([u2(atob(n))],{type:t})}(e.toDataURL(t,n)))}function u2(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=-1;++i<t;)r[i]=e.charCodeAt(i);return n}var T_=T(4635);T(4077);const T9=new TextDecoder("utf-8"),I9=new TextEncoder;class bu{constructor(t=8192,n={}){let r=!1;"number"==typeof t?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const i=n.offset?n.offset>>>0:0,s=t.byteLength-i;let o=i;(ArrayBuffer.isView(t)||t instanceof bu)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+i),t=t.buffer),this.lastWrittenByte=r?s:0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=2*(this.offset+t),i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){const n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=this.readByte();return n}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let r=0;r<t;r++)n+=this.readChar();return n}readUtf8(t=1){return function(e){return T9.decode(e)}(this.readBytes(t))}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(function(e){return I9.encode(e)}(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Ml(e){let t=e.length;for(;--t>=0;)e[t]=0}const P_=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Dd=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),j9=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),y2=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ms=new Array(576);Ml(ms);const Eu=new Array(60);Ml(Eu);const Du=new Array(512);Ml(Du);const Cu=new Array(256);Ml(Cu);const O_=new Array(29);Ml(O_);const Cd=new Array(30);function N_(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let w2,b2,v2;function L_(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Ml(Cd);const x2=e=>e<256?Du[e]:Du[256+(e>>>7)],Mu=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},_r=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Mu(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Yi=(e,t,n)=>{_r(e,n[2*t],n[2*t+1])},E2=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},D2=(e,t,n)=>{const r=new Array(16);let s,o,i=0;for(s=1;s<=15;s++)r[s]=i=i+n[s-1]<<1;for(o=0;o<=t;o++){let a=e[2*o+1];0!==a&&(e[2*o]=E2(r[a]++,a))}},C2=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},M2=e=>{e.bi_valid>8?Mu(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},S2=(e,t,n,r)=>{const i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},B_=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&S2(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!S2(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},A2=(e,t,n)=>{let r,i,o,a,s=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?Yi(e,i,t):(o=Cu[i],Yi(e,o+256+1,t),a=P_[o],0!==a&&(i-=O_[o],_r(e,i,a)),r--,o=x2(r),Yi(e,o,n),a=Dd[o],0!==a&&(r-=Cd[o],_r(e,r,a)))}while(s<e.last_lit);Yi(e,256,t)},U_=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[2*c+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)B_(e,n,o);c=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],B_(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[2*c]=n[2*o]+n[2*a],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[2*o+1]=n[2*a+1]=c,e.heap[1]=c++,B_(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,f,d,p,b,N=0;for(d=0;d<=15;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],d=n[2*n[2*u+1]+1]+1,d>l&&(d=l,N++),n[2*u+1]=d,!(u>r)&&(e.bl_count[d]++,p=0,u>=a&&(p=o[u-a]),b=n[2*u],e.opt_len+=b*(d+p),s&&(e.static_len+=b*(i[2*u+1]+p)));if(0!==N){do{for(d=l-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,N-=2}while(N>0);for(d=l;0!==d;d--)for(u=e.bl_count[d];0!==u;)f=e.heap[--c],!(f>r)&&(n[2*f+1]!==d&&(e.opt_len+=(d-n[2*f+1])*n[2*f],n[2*f+1]=d),u--)}})(e,t),D2(n,l,e.bl_count)},T2=(e,t,n)=>{let r,s,i=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)s=o,o=t[2*(r+1)+1],!(++a<l&&s===o)&&(a<c?e.bl_tree[2*s]+=a:0!==s?(s!==i&&e.bl_tree[2*s]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,i=s,0===o?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},k2=(e,t,n)=>{let r,s,i=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(s=o,o=t[2*(r+1)+1],!(++a<l&&s===o)){if(a<c)do{Yi(e,s,e.bl_tree)}while(0!=--a);else 0!==s?(s!==i&&(Yi(e,s,e.bl_tree),a--),Yi(e,16,e.bl_tree),_r(e,a-3,2)):a<=10?(Yi(e,17,e.bl_tree),_r(e,a-3,3)):(Yi(e,18,e.bl_tree),_r(e,a-11,7));a=0,i=s,0===o?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}};let I2=!1;const R2=(e,t,n,r)=>{_r(e,0+(r?1:0),3),((e,t,n,r)=>{M2(e),Mu(e,n),Mu(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n})(e,t,n)};var s$={_tr_init:e=>{I2||((()=>{let e,t,n,r,i;const s=new Array(16);for(n=0,r=0;r<28;r++)for(O_[r]=n,e=0;e<1<<P_[r];e++)Cu[n++]=r;for(Cu[n-1]=r,i=0,r=0;r<16;r++)for(Cd[r]=i,e=0;e<1<<Dd[r];e++)Du[i++]=r;for(i>>=7;r<30;r++)for(Cd[r]=i<<7,e=0;e<1<<Dd[r]-7;e++)Du[256+i++]=r;for(t=0;t<=15;t++)s[t]=0;for(e=0;e<=143;)ms[2*e+1]=8,e++,s[8]++;for(;e<=255;)ms[2*e+1]=9,e++,s[9]++;for(;e<=279;)ms[2*e+1]=7,e++,s[7]++;for(;e<=287;)ms[2*e+1]=8,e++,s[8]++;for(D2(ms,287,s),e=0;e<30;e++)Eu[2*e+1]=5,Eu[2*e]=E2(e,5);w2=new N_(ms,P_,257,286,15),b2=new N_(Eu,Dd,0,30,15),v2=new N_(new Array(0),j9,0,19,7)})(),I2=!0),e.l_desc=new L_(e.dyn_ltree,w2),e.d_desc=new L_(e.dyn_dtree,b2),e.bl_desc=new L_(e.bl_tree,v2),e.bi_buf=0,e.bi_valid=0,C2(e)},_tr_stored_block:R2,_tr_flush_block:(e,t,n,r)=>{let i,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let n,t=4093624447;for(n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==e.dyn_ltree[2*n])return 1;return 0})(e)),U_(e,e.l_desc),U_(e,e.d_desc),o=(e=>{let t;for(T2(e,e.dyn_ltree,e.l_desc.max_code),T2(e,e.dyn_dtree,e.d_desc.max_code),U_(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*y2[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?R2(e,t,n,r):4===e.strategy||s===i?(_r(e,2+(r?1:0),3),A2(e,ms,Eu)):(_r(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(_r(e,t-257,5),_r(e,n-1,5),_r(e,r-4,4),i=0;i<r;i++)_r(e,e.bl_tree[2*y2[i]+1],3);k2(e,e.dyn_ltree,t-1),k2(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),A2(e,e.dyn_ltree,e.dyn_dtree)),C2(e),r&&M2(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Cu[n]+256+1)]++,e.dyn_dtree[2*x2(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{_r(e,2,3),Yi(e,256,ms),(e=>{16===e.bi_valid?(Mu(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},Su=(e,t,n,r)=>{let i=65535&e|0,s=e>>>16&65535|0,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+t[r++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16|0};const a$=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Hn=(e,t,n,r)=>{const i=a$,s=r+n;e^=-1;for(let o=r;o<s;o++)e=e>>>8^i[255&(e^t[o])];return-1^e},Go={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Wo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:l$,_tr_stored_block:c$,_tr_flush_block:u$,_tr_tally:zs,_tr_align:h$}=s$,{Z_NO_FLUSH:Zo,Z_PARTIAL_FLUSH:f$,Z_FULL_FLUSH:d$,Z_FINISH:Ys,Z_BLOCK:F2,Z_OK:Gi,Z_STREAM_END:P2,Z_STREAM_ERROR:Kr,Z_DATA_ERROR:p$,Z_BUF_ERROR:V_,Z_DEFAULT_COMPRESSION:g$,Z_FILTERED:m$,Z_HUFFMAN_ONLY:Md,Z_RLE:_$,Z_FIXED:y$,Z_DEFAULT_STRATEGY:w$,Z_UNKNOWN:b$,Z_DEFLATED:Sd}=Wo,Di=262,Ws=(e,t)=>(e.msg=Go[t],t),O2=e=>(e<<1)-(e>4?9:0),Zs=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let qs=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Ks=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Gn=(e,t)=>{u$(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ks(e.strm)},$t=(e,t)=>{e.pending_buf[e.pending++]=t},ku=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},I$=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=Su(e.adler,t,i,n):2===e.state.wrap&&(e.adler=Hn(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},N2=(e,t)=>{let i,s,n=e.max_chain_length,r=e.strstart,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-Di?e.strstart-(e.w_size-Di):0,c=e.window,u=e.w_mask,f=e.prev,d=e.strstart+258;let p=c[r+o-1],b=c[r+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do{if(i=t,c[i+o]===b&&c[i+o-1]===p&&c[i]===c[r]&&c[++i]===c[r+1]){r+=2,i++;do{}while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<d);if(s=258-(d-r),r=d-258,s>o){if(e.match_start=t,o=s,s>=a)break;p=c[r+o-1],b=c[r+o]}}}while((t=f[t&u])>l&&0!=--n);return o<=e.lookahead?o:e.lookahead},Xo=e=>{const t=e.w_size;let n,r,i,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Di)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do{i=e.head[--n],e.head[n]=i>=t?i-t:0}while(--r);r=t,n=r;do{i=e.prev[--n],e.prev[n]=i>=t?i-t:0}while(--r);s+=t}if(0===e.strm.avail_in)break;if(r=I$(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=qs(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=qs(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Di&&0!==e.strm.avail_in)},H_=(e,t)=>{let n,r;for(;;){if(e.lookahead<Di){if(Xo(e),e.lookahead<Di&&t===Zo)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=qs(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Di&&(e.match_length=N2(e,n)),e.match_length>=3)if(r=zs(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=qs(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=qs(e,e.ins_h,e.window[e.strstart+1]);else r=zs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Gn(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Ys?(Gn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Gn(e,!1),0===e.strm.avail_out)?1:2},Tl=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Di){if(Xo(e),e.lookahead<Di&&t===Zo)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=qs(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Di&&(e.match_length=N2(e,n),e.match_length<=5&&(e.strategy===m$||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=zs(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=qs(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Gn(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=zs(e,0,e.window[e.strstart-1]),r&&Gn(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=zs(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Ys?(Gn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Gn(e,!1),0===e.strm.avail_out)?1:2};function Wi(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Iu=[new Wi(0,0,0,0,(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Xo(e),0===e.lookahead&&t===Zo)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,Gn(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-Di&&(Gn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ys?(Gn(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&Gn(e,!1),1)}),new Wi(4,4,8,4,H_),new Wi(4,5,16,8,H_),new Wi(4,6,32,32,H_),new Wi(4,4,16,16,Tl),new Wi(8,16,32,32,Tl),new Wi(8,16,128,128,Tl),new Wi(8,32,128,256,Tl),new Wi(32,128,258,1024,Tl),new Wi(32,258,258,4096,Tl)];function N$(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Sd,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Zs(this.dyn_ltree),Zs(this.dyn_dtree),Zs(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Zs(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Zs(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const L2=e=>{if(!e||!e.state)return Ws(e,Kr);e.total_in=e.total_out=0,e.data_type=b$;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=Zo,l$(t),Gi},B2=e=>{const t=L2(e);return t===Gi&&(e=>{e.window_size=2*e.w_size,Zs(e.head),e.max_lazy_match=Iu[e.level].max_lazy,e.good_match=Iu[e.level].good_length,e.nice_match=Iu[e.level].nice_length,e.max_chain_length=Iu[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},U2=(e,t,n,r,i,s)=>{if(!e)return Kr;let o=1;if(t===g$&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==Sd||r<8||r>15||t<0||t>9||s<0||s>y$)return Ws(e,Kr);8===r&&(r=9);const a=new N$;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,B2(e)};var Ru_deflateInit2=U2,Ru_deflateSetHeader=(e,t)=>e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,Gi):Kr,Ru_deflate=(e,t)=>{let n,r;if(!e||!e.state||t>F2||t<0)return e?Ws(e,Kr):Kr;const i=e.state;if(!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==Ys)return Ws(e,0===e.avail_out?V_:Kr);i.strm=e;const s=i.last_flush;if(i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,$t(i,31),$t(i,139),$t(i,8),i.gzhead?($t(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),$t(i,255&i.gzhead.time),$t(i,i.gzhead.time>>8&255),$t(i,i.gzhead.time>>16&255),$t(i,i.gzhead.time>>24&255),$t(i,9===i.level?2:i.strategy>=Md||i.level<2?4:0),$t(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&($t(i,255&i.gzhead.extra.length),$t(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=Hn(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):($t(i,0),$t(i,0),$t(i,0),$t(i,0),$t(i,0),$t(i,9===i.level?2:i.strategy>=Md||i.level<2?4:0),$t(i,3),i.status=113);else{let o=Sd+(i.w_bits-8<<4)<<8,a=-1;a=i.strategy>=Md||i.level<2?0:i.level<6?1:6===i.level?2:3,o|=a<<6,0!==i.strstart&&(o|=32),o+=31-o%31,i.status=113,ku(i,o),0!==i.strstart&&(ku(i,e.adler>>>16),ku(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(e.adler=Hn(e.adler,i.pending_buf,i.pending-n,n)),Ks(e),n=i.pending,i.pending!==i.pending_buf_size));)$t(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=Hn(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=Hn(e.adler,i.pending_buf,i.pending-n,n)),Ks(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,$t(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(e.adler=Hn(e.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=Hn(e.adler,i.pending_buf,i.pending-n,n)),Ks(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,$t(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(e.adler=Hn(e.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Ks(e),i.pending+2<=i.pending_buf_size&&($t(i,255&e.adler),$t(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(Ks(e),0===e.avail_out)return i.last_flush=-1,Gi}else if(0===e.avail_in&&O2(t)<=O2(s)&&t!==Ys)return Ws(e,V_);if(666===i.status&&0!==e.avail_in)return Ws(e,V_);if(0!==e.avail_in||0!==i.lookahead||t!==Zo&&666!==i.status){let o=i.strategy===Md?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Xo(e),0===e.lookahead)){if(t===Zo)return 1;break}if(e.match_length=0,n=zs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Gn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ys?(Gn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Gn(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===_$?((e,t)=>{let n,r,i,s;const o=e.window;for(;;){if(e.lookahead<=258){if(Xo(e),e.lookahead<=258&&t===Zo)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=e.strstart+258;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=258-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=zs(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=zs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Gn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ys?(Gn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Gn(e,!1),0===e.strm.avail_out)?1:2})(i,t):Iu[i.level].func(i,t);if((3===o||4===o)&&(i.status=666),1===o||3===o)return 0===e.avail_out&&(i.last_flush=-1),Gi;if(2===o&&(t===f$?h$(i):t!==F2&&(c$(i,0,0,!1),t===d$&&(Zs(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Ks(e),0===e.avail_out))return i.last_flush=-1,Gi}return t!==Ys?Gi:i.wrap<=0?P2:(2===i.wrap?($t(i,255&e.adler),$t(i,e.adler>>8&255),$t(i,e.adler>>16&255),$t(i,e.adler>>24&255),$t(i,255&e.total_in),$t(i,e.total_in>>8&255),$t(i,e.total_in>>16&255),$t(i,e.total_in>>24&255)):(ku(i,e.adler>>>16),ku(i,65535&e.adler)),Ks(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?Gi:P2)},Ru_deflateEnd=e=>{if(!e||!e.state)return Kr;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?Ws(e,Kr):(e.state=null,113===t?Ws(e,p$):Gi)},Ru_deflateSetDictionary=(e,t)=>{let n=t.length;if(!e||!e.state)return Kr;const r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return Kr;if(1===i&&(e.adler=Su(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(Zs(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Xo(r);r.lookahead>=3;){let l=r.strstart,c=r.lookahead-2;do{r.ins_h=qs(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++}while(--c);r.strstart=l,r.lookahead=2,Xo(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,r.wrap=i,Gi};const X$=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Rd_assign=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const r in n)X$(n,r)&&(e[r]=n[r])}}return e},Rd_flattenChunks=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let o=e[r];n.set(o,i),i+=o.length}return n};let V2=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){V2=!1}const Fu=new Uint8Array(256);for(let e=0;e<256;e++)Fu[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Fu[254]=Fu[254]=1;var Pu_string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,s,o=e.length,a=0;for(i=0;i<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},Pu_buf2string=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const s=new Array(2*n);for(i=0,r=0;r<n;){let o=e[r++];if(o<128){s[i++]=o;continue}let a=Fu[o];if(a>4)s[i++]=65533,r+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&r<n;)o=o<<6|63&e[r++],a--;a>1?s[i++]=65533:o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|1023&o)}}return((e,t)=>{if(t<65534&&e.subarray&&V2)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(s,i)},Pu_utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Fu[e[n]]>t?n:t},j2=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const $2=Object.prototype.toString,{Z_NO_FLUSH:sH,Z_SYNC_FLUSH:oH,Z_FULL_FLUSH:aH,Z_FINISH:lH,Z_OK:Fd,Z_STREAM_END:cH,Z_DEFAULT_COMPRESSION:uH,Z_DEFAULT_STRATEGY:hH,Z_DEFLATED:fH}=Wo;function Ou(e){this.options=Rd_assign({level:uH,method:fH,chunkSize:16384,windowBits:15,memLevel:8,strategy:hH},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j2,this.strm.avail_out=0;let n=Ru_deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Fd)throw new Error(Go[n]);if(t.header&&Ru_deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(r="string"==typeof t.dictionary?Pu_string2buf(t.dictionary):"[object ArrayBuffer]"===$2.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Ru_deflateSetDictionary(this.strm,r),n!==Fd)throw new Error(Go[n]);this._dict_set=!0}}function z_(e,t){const n=new Ou(t);if(n.push(e,!0),n.err)throw n.msg||Go[n.err];return n.result}Ou.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?lH:sH,n.input="string"==typeof e?Pu_string2buf(e):"[object ArrayBuffer]"===$2.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===oH||s===aH)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Ru_deflate(n,s),i===cH)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Ru_deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Fd;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Ou.prototype.onData=function(e){this.chunks.push(e)},Ou.prototype.onEnd=function(e){e===Fd&&(this.result=Rd_flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var bH={Deflate:Ou,deflate:z_,deflateRaw:function(e,t){return(t=t||{}).raw=!0,z_(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,z_(e,t)},constants:Wo},xH=function(t,n){let r,i,s,o,a,l,c,u,f,d,p,b,N,S,H,G,ie,q,ge,Re,Ee,Ne,Ie,De;const Ae=t.state;r=t.next_in,Ie=t.input,i=r+(t.avail_in-5),s=t.next_out,De=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=Ae.dmax,c=Ae.wsize,u=Ae.whave,f=Ae.wnext,d=Ae.window,p=Ae.hold,b=Ae.bits,N=Ae.lencode,S=Ae.distcode,H=(1<<Ae.lenbits)-1,G=(1<<Ae.distbits)-1;e:do{b<15&&(p+=Ie[r++]<<b,b+=8,p+=Ie[r++]<<b,b+=8),ie=N[p&H];t:for(;;){if(q=ie>>>24,p>>>=q,b-=q,q=ie>>>16&255,0===q)De[s++]=65535&ie;else{if(!(16&q)){if(0==(64&q)){ie=N[(65535&ie)+(p&(1<<q)-1)];continue t}if(32&q){Ae.mode=12;break e}t.msg="invalid literal/length code",Ae.mode=30;break e}ge=65535&ie,q&=15,q&&(b<q&&(p+=Ie[r++]<<b,b+=8),ge+=p&(1<<q)-1,p>>>=q,b-=q),b<15&&(p+=Ie[r++]<<b,b+=8,p+=Ie[r++]<<b,b+=8),ie=S[p&G];n:for(;;){if(q=ie>>>24,p>>>=q,b-=q,q=ie>>>16&255,!(16&q)){if(0==(64&q)){ie=S[(65535&ie)+(p&(1<<q)-1)];continue n}t.msg="invalid distance code",Ae.mode=30;break e}if(Re=65535&ie,q&=15,b<q&&(p+=Ie[r++]<<b,b+=8,b<q&&(p+=Ie[r++]<<b,b+=8)),Re+=p&(1<<q)-1,Re>l){t.msg="invalid distance too far back",Ae.mode=30;break e}if(p>>>=q,b-=q,q=s-o,Re>q){if(q=Re-q,q>u&&Ae.sane){t.msg="invalid distance too far back",Ae.mode=30;break e}if(Ee=0,Ne=d,0===f){if(Ee+=c-q,q<ge){ge-=q;do{De[s++]=d[Ee++]}while(--q);Ee=s-Re,Ne=De}}else if(f<q){if(Ee+=c+f-q,q-=f,q<ge){ge-=q;do{De[s++]=d[Ee++]}while(--q);if(Ee=0,f<ge){q=f,ge-=q;do{De[s++]=d[Ee++]}while(--q);Ee=s-Re,Ne=De}}}else if(Ee+=f-q,q<ge){ge-=q;do{De[s++]=d[Ee++]}while(--q);Ee=s-Re,Ne=De}for(;ge>2;)De[s++]=Ne[Ee++],De[s++]=Ne[Ee++],De[s++]=Ne[Ee++],ge-=3;ge&&(De[s++]=Ne[Ee++],ge>1&&(De[s++]=Ne[Ee++]))}else{Ee=s-Re;do{De[s++]=De[Ee++],De[s++]=De[Ee++],De[s++]=De[Ee++],ge-=3}while(ge>2);ge&&(De[s++]=De[Ee++],ge>1&&(De[s++]=De[Ee++]))}break}}break}}while(r<i&&s<a);ge=b>>3,r-=ge,b-=ge<<3,p&=(1<<b)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=s<a?a-s+257:257-(s-a),Ae.hold=p,Ae.bits=b};const EH=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),DH=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),CH=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),MH=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Nu=(e,t,n,r,i,s,o,a)=>{const l=a.bits;let ie,q,ge,Re,Ee,De,c=0,u=0,f=0,d=0,p=0,b=0,N=0,S=0,H=0,G=0,Ne=null,Ie=0;const Ae=new Uint16Array(16),at=new Uint16Array(16);let _t,We,nt,Dt=null,Vt=0;for(c=0;c<=15;c++)Ae[c]=0;for(u=0;u<r;u++)Ae[t[n+u]]++;for(p=l,d=15;d>=1&&0===Ae[d];d--);if(p>d&&(p=d),0===d)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(f=1;f<d&&0===Ae[f];f++);for(p<f&&(p=f),S=1,c=1;c<=15;c++)if(S<<=1,S-=Ae[c],S<0)return-1;if(S>0&&(0===e||1!==d))return-1;for(at[1]=0,c=1;c<15;c++)at[c+1]=at[c]+Ae[c];for(u=0;u<r;u++)0!==t[n+u]&&(o[at[t[n+u]]++]=u);if(0===e?(Ne=Dt=o,De=19):1===e?(Ne=EH,Ie-=257,Dt=DH,Vt-=257,De=256):(Ne=CH,Dt=MH,De=-1),G=0,u=0,c=f,Ee=s,b=p,N=0,ge=-1,H=1<<p,Re=H-1,1===e&&H>852||2===e&&H>592)return 1;for(;;){_t=c-N,o[u]<De?(We=0,nt=o[u]):o[u]>De?(We=Dt[Vt+o[u]],nt=Ne[Ie+o[u]]):(We=96,nt=0),ie=1<<c-N,q=1<<b,f=q;do{q-=ie,i[Ee+(G>>N)+q]=_t<<24|We<<16|nt|0}while(0!==q);for(ie=1<<c-1;G&ie;)ie>>=1;if(0!==ie?(G&=ie-1,G+=ie):G=0,u++,0==--Ae[c]){if(c===d)break;c=t[n+o[u]]}if(c>p&&(G&Re)!==ge){for(0===N&&(N=p),Ee+=f,b=c-N,S=1<<b;b+N<d&&(S-=Ae[b+N],!(S<=0));)b++,S<<=1;if(H+=1<<b,1===e&&H>852||2===e&&H>592)return 1;ge=G&Re,i[ge]=p<<24|b<<16|Ee-s|0}}return 0!==G&&(i[Ee+G]=c-N<<24|64<<16|0),a.bits=p,0};const{Z_FINISH:q2,Z_BLOCK:AH,Z_TREES:Od,Z_OK:Qo,Z_STREAM_END:TH,Z_NEED_DICT:kH,Z_STREAM_ERROR:Xr,Z_DATA_ERROR:K2,Z_MEM_ERROR:X2,Z_BUF_ERROR:IH,Z_DEFLATED:Q2}=Wo,xS=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function NH(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ES=e=>{if(!e||!e.state)return Xr;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Qo},DS=e=>{if(!e||!e.state)return Xr;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ES(e)},CS=(e,t)=>{let n;if(!e||!e.state)return Xr;const r=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Xr:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,DS(e))},MS=(e,t)=>{if(!e)return Xr;const n=new NH;e.state=n,n.window=null;const r=CS(e,t);return r!==Qo&&(e.state=null),r};let q_,K_,SS=!0;const BH=e=>{if(SS){q_=new Int32Array(512),K_=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Nu(1,e.lens,0,288,q_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Nu(2,e.lens,0,32,K_,0,e.work,{bits:5}),SS=!1}e.lencode=q_,e.lenbits=9,e.distcode=K_,e.distbits=5},AS=(e,t,n,r)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var ys_inflateReset=DS,ys_inflateInit2=MS,ys_inflate=(e,t)=>{let n,r,i,s,o,a,l,c,u,f,d,p,b,N,H,G,ie,q,ge,Re,Ee,Ne,S=0;const Ie=new Uint8Array(4);let De,Ae;const at=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Xr;n=e.state,12===n.mode&&(n.mode=13),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,c=n.hold,u=n.bits,f=a,d=l,Ne=Qo;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(2&n.wrap&&35615===c){n.check=0,Ie[0]=255&c,Ie[1]=c>>>8&255,n.check=Hn(n.check,Ie,2,0),c=0,u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=30;break}if((15&c)!==Q2){e.msg="unknown compression method",n.mode=30;break}if(c>>>=4,u-=4,Ee=8+(15&c),0===n.wbits)n.wbits=Ee;else if(Ee>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&c?10:12,c=0,u=0;break;case 2:for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==Q2){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(Ie[0]=255&c,Ie[1]=c>>>8&255,n.check=Hn(n.check,Ie,2,0)),c=0,u=0,n.mode=3;case 3:for(;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&(Ie[0]=255&c,Ie[1]=c>>>8&255,Ie[2]=c>>>16&255,Ie[3]=c>>>24&255,n.check=Hn(n.check,Ie,4,0)),c=0,u=0,n.mode=4;case 4:for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(Ie[0]=255&c,Ie[1]=c>>>8&255,n.check=Hn(n.check,Ie,2,0)),c=0,u=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(Ie[0]=255&c,Ie[1]=c>>>8&255,n.check=Hn(n.check,Ie,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p=n.length,p>a&&(p=a),p&&(n.head&&(Ee=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+p),Ee)),512&n.flags&&(n.check=Hn(n.check,r,p,s)),a-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break e;p=0;do{Ee=r[s+p++],n.head&&Ee&&n.length<65536&&(n.head.name+=String.fromCharCode(Ee))}while(Ee&&p<a);if(512&n.flags&&(n.check=Hn(n.check,r,p,s)),a-=p,s+=p,Ee)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break e;p=0;do{Ee=r[s+p++],n.head&&Ee&&n.length<65536&&(n.head.comment+=String.fromCharCode(Ee))}while(Ee&&p<a);if(512&n.flags&&(n.check=Hn(n.check,r,p,s)),a-=p,s+=p,Ee)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}e.adler=n.check=xS(c),c=0,u=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,kH;e.adler=n.check=1,n.mode=12;case 12:if(t===AH||t===Od)break e;case 13:if(n.last){c>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=14;break;case 1:if(BH(n),n.mode=20,t===Od){c>>>=2,u-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}c>>>=2,u-=2;break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&c,c=0,u=0,n.mode=15,t===Od)break e;case 15:n.mode=16;case 16:if(p=n.length,p){if(p>a&&(p=a),p>l&&(p=l),0===p)break e;i.set(r.subarray(s,s+p),o),a-=p,s+=p,l-=p,o+=p,n.length-=p;break}n.mode=12;break;case 17:for(;u<14;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.lens[at[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[at[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,De={bits:n.lenbits},Ne=Nu(0,n.lens,0,19,n.lencode,0,n.work,De),n.lenbits=De.bits,Ne){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[c&(1<<n.lenbits)-1],H=S>>>24,G=S>>>16&255,ie=65535&S,!(H<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(ie<16)c>>>=H,u-=H,n.lens[n.have++]=ie;else{if(16===ie){for(Ae=H+2;u<Ae;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(c>>>=H,u-=H,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}Ee=n.lens[n.have-1],p=3+(3&c),c>>>=2,u-=2}else if(17===ie){for(Ae=H+3;u<Ae;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=H,u-=H,Ee=0,p=3+(7&c),c>>>=3,u-=3}else{for(Ae=H+7;u<Ae;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=H,u-=H,Ee=0,p=11+(127&c),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;p--;)n.lens[n.have++]=Ee}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,De={bits:n.lenbits},Ne=Nu(1,n.lens,0,n.nlen,n.lencode,0,n.work,De),n.lenbits=De.bits,Ne){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,De={bits:n.distbits},Ne=Nu(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,De),n.distbits=De.bits,Ne){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,t===Od)break e;case 20:n.mode=21;case 21:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,xH(e,d),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,c=n.hold,u=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;S=n.lencode[c&(1<<n.lenbits)-1],H=S>>>24,G=S>>>16&255,ie=65535&S,!(H<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(G&&0==(240&G)){for(q=H,ge=G,Re=ie;S=n.lencode[Re+((c&(1<<q+ge)-1)>>q)],H=S>>>24,G=S>>>16&255,ie=65535&S,!(q+H<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=q,u-=q,n.back+=q}if(c>>>=H,u-=H,n.back+=H,n.length=ie,0===G){n.mode=26;break}if(32&G){n.back=-1,n.mode=12;break}if(64&G){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&G,n.mode=22;case 22:if(n.extra){for(Ae=n.extra;u<Ae;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;S=n.distcode[c&(1<<n.distbits)-1],H=S>>>24,G=S>>>16&255,ie=65535&S,!(H<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(0==(240&G)){for(q=H,ge=G,Re=ie;S=n.distcode[Re+((c&(1<<q+ge)-1)>>q)],H=S>>>24,G=S>>>16&255,ie=65535&S,!(q+H<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=q,u-=q,n.back+=q}if(c>>>=H,u-=H,n.back+=H,64&G){e.msg="invalid distance code",n.mode=30;break}n.offset=ie,n.extra=15&G,n.mode=24;case 24:if(n.extra){for(Ae=n.extra;u<Ae;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break e;if(p=d-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}p>n.wnext?(p-=n.wnext,b=n.wsize-p):b=n.wnext-p,p>n.length&&(p=n.length),N=n.window}else N=i,b=o-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{i[o++]=N[b++]}while(--p);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;i[o++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===a)break e;a--,c|=r[s++]<<u,u+=8}if(d-=l,e.total_out+=d,n.total+=d,d&&(e.adler=n.check=n.flags?Hn(n.check,i,d,o-d):Su(n.check,i,d,o-d)),d=l,(n.flags?c:xS(c))!==n.check){e.msg="incorrect data check",n.mode=30;break}c=0,u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}c=0,u=0}n.mode=29;case 29:Ne=TH;break e;case 30:Ne=K2;break e;case 31:return X2;case 32:default:return Xr}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||d!==e.avail_out&&n.mode<30&&(n.mode<27||t!==q2))&&AS(e,e.output,e.next_out,d-e.avail_out),f-=e.avail_in,d-=e.avail_out,e.total_in+=f,e.total_out+=d,n.total+=d,n.wrap&&d&&(e.adler=n.check=n.flags?Hn(n.check,i,d,e.next_out-d):Su(n.check,i,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===f&&0===d||t===q2)&&Ne===Qo&&(Ne=IH),Ne},ys_inflateEnd=e=>{if(!e||!e.state)return Xr;let t=e.state;return t.window&&(t.window=null),e.state=null,Qo},ys_inflateGetHeader=(e,t)=>{if(!e||!e.state)return Xr;const n=e.state;return 0==(2&n.wrap)?Xr:(n.head=t,t.done=!1,Qo)},ys_inflateSetDictionary=(e,t)=>{const n=t.length;let r,i,s;return e&&e.state&&(r=e.state,0===r.wrap||11===r.mode)?11===r.mode&&(i=1,i=Su(i,t,n,0),i!==r.check)?K2:(s=AS(e,t,n,n),s?(r.mode=31,X2):(r.havedict=1,Qo)):Xr},ez=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const TS=Object.prototype.toString,{Z_NO_FLUSH:tz,Z_FINISH:nz,Z_OK:Lu,Z_STREAM_END:X_,Z_NEED_DICT:Q_,Z_STREAM_ERROR:rz,Z_DATA_ERROR:kS,Z_MEM_ERROR:iz}=Wo;function Bu(e){this.options=Rd_assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j2,this.strm.avail_out=0;let n=ys_inflateInit2(this.strm,t.windowBits);if(n!==Lu)throw new Error(Go[n]);if(this.header=new ez,ys_inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Pu_string2buf(t.dictionary):"[object ArrayBuffer]"===TS.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=ys_inflateSetDictionary(this.strm,t.dictionary),n!==Lu)))throw new Error(Go[n])}function J_(e,t){const n=new Bu(t);if(n.push(e),n.err)throw n.msg||Go[n.err];return n.result}Bu.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?nz:tz,n.input="[object ArrayBuffer]"===TS.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=ys_inflate(n,o),s===Q_&&i&&(s=ys_inflateSetDictionary(n,i),s===Lu?s=ys_inflate(n,o):s===kS&&(s=Q_));n.avail_in>0&&s===X_&&n.state.wrap>0&&0!==e[n.next_in];)ys_inflateReset(n),s=ys_inflate(n,o);switch(s){case rz:case kS:case Q_:case iz:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||s===X_))if("string"===this.options.to){let l=Pu_utf8border(n.output,n.next_out),c=n.next_out-l,u=Pu_buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==Lu||0!==a){if(s===X_)return s=ys_inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Bu.prototype.onData=function(e){this.chunks.push(e)},Bu.prototype.onEnd=function(e){e===Lu&&(this.result="string"===this.options.to?this.chunks.join(""):Rd_flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var hz={Inflate:Bu,inflate:J_,inflateRaw:function(e,t){return(t=t||{}).raw=!0,J_(e,t)},ungzip:J_,constants:Wo};const{deflate:dz}=bH,{Inflate:mz}=hz;var IS=dz,RS=mz;const Ud=[137,80,78,71,13,10,26,10],FS=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)1&t?t=3988292384^t>>>1:t>>>=1;FS[e]=t}const PS=4294967295;function OS(e,t){return(function(e,t,n){let r=4294967295;for(let i=0;i<n;i++)r=FS[255&(r^t[i])]^r>>>8;return r}(0,e,t)^PS)>>>0}var yr=(()=>(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.GREYSCALE=0]="GREYSCALE",e[e.TRUECOLOUR=2]="TRUECOLOUR",e[e.INDEXED_COLOUR=3]="INDEXED_COLOUR",e[e.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",e[e.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"}(yr||(yr={})),yr))(),Il=(()=>(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.DEFLATE=0]="DEFLATE"}(Il||(Il={})),Il))(),Rl=(()=>(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.ADAPTIVE=0]="ADAPTIVE"}(Rl||(Rl={})),Rl))(),Fl=(()=>(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.NO_INTERLACE=0]="NO_INTERLACE",e[e.ADAM7=1]="ADAM7"}(Fl||(Fl={})),Fl))();const Az=new Uint8Array(0),kz=new Uint16Array([255]),Iz=255===new Uint8Array(kz.buffer)[0];class Rz extends bu{constructor(t,n={}){super(t);const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new RS,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._compressionMethod=Il.UNKNOWN,this._filterMethod=Rl.UNKNOWN,this._interlaceMethod=Fl.UNKNOWN,this._colorType=-1,this.setBigEndian()}decode(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(let t=0;t<Ud.length;t++)if(this.readUint8()!==Ud[t])throw new Error(`wrong PNG signature. Byte at ${t} should be ${Ud[t]}.`)}decodeChunk(){const t=this.readUint32(),n=this.readChars(4),r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"tEXt":this.decodetEXt(t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t)}if(this.offset-r!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);if(this._checkCrc){const i=this.readUint32(),s=t+4,o=OS(new Uint8Array(this.buffer,this.byteOffset+this.offset-s-4,s),s);if(o!==i)throw new Error(`CRC mismatch for chunk ${n}. Expected ${i}, found ${o}`)}else this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=function(e){if(1!==e&&2!==e&&4!==e&&8!==e&&16!==e)throw new Error(`invalid bit depth: ${e}`);return e}(this.readUint8());const n=this.readUint8();let r;switch(this._colorType=n,n){case yr.GREYSCALE:r=1;break;case yr.TRUECOLOUR:r=3;break;case yr.INDEXED_COLOUR:r=1;break;case yr.GREYSCALE_ALPHA:r=2;break;case yr.TRUECOLOUR_ALPHA:r=4;break;default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Il.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(t){if(t%3!=0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<n;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,t)),this.skip(t)}decodetRNS(t){if(3===this._colorType){if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255)}}decodetEXt(t){let r,n="";for(;"\0"!==(r=this.readChar());)n+=r;this._png.text[n]=this.readChars(t-n.length-1)}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:t,y:n,unit:r}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._inflator.result;if(this._filterMethod!==Rl.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod!==Fl.NO_INTERLACE)throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this.decodeInterlaceNull(t)}decodeInterlaceNull(t){const n=this._png.height,r=this._png.channels*this._png.depth/8,i=this._png.width*r,s=new Uint8Array(this._png.height*i);let l,c,o=Az,a=0;for(let u=0;u<n;u++){switch(l=t.subarray(a+1,a+1+i),c=s.subarray(u*i,(u+1)*i),t[a]){case 0:Fz(l,c,i);break;case 1:Pz(l,c,i,r);break;case 2:Oz(l,c,o,i);break;case 3:Nz(l,c,o,i,r);break;case 4:Lz(l,c,o,i,r);break;default:throw new Error(`Unsupported filter: ${t[a]}`)}o=c,a+=i+1}if(this._hasPalette&&(this._png.palette=this._palette),16===this._png.depth){const u=new Uint16Array(s.buffer);if(Iz)for(let f=0;f<u.length;f++)u[f]=Uz(u[f]);this._png.data=u}else this._png.data=s}}function Fz(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function Pz(e,t,n,r){let i=0;for(;i<r;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-r]&255}function Oz(e,t,n,r){let i=0;if(0===n.length)for(;i<r;i++)t[i]=e[i];else for(;i<r;i++)t[i]=e[i]+n[i]&255}function Nz(e,t,n,r,i){let s=0;if(0===n.length){for(;s<i;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+(t[s-i]>>1)&255}else{for(;s<i;s++)t[s]=e[s]+(n[s]>>1)&255;for(;s<r;s++)t[s]=e[s]+(t[s-i]+n[s]>>1)&255}}function Lz(e,t,n,r,i){let s=0;if(0===n.length){for(;s<i;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-i]&255}else{for(;s<i;s++)t[s]=e[s]+n[s]&255;for(;s<r;s++)t[s]=e[s]+Bz(t[s-i],n[s],n[s-i])&255}}function Bz(e,t,n){const r=e+t-n,i=Math.abs(r-e),s=Math.abs(r-t),o=Math.abs(r-n);return i<=s&&i<=o?e:s<=o?t:n}function Uz(e){return(255&e)<<8|e>>8&255}const jz={level:3};class $z extends bu{constructor(t,n={}){super(),this._colorType=yr.UNKNOWN,this._zlibOptions=Object.assign({},jz,n.zlib),this._png=this._checkData(t),this.setBigEndian()}encode(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}encodeSignature(){this.writeBytes(Ud)}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(Il.DEFLATE),this.writeByte(Rl.ADAPTIVE),this.writeByte(Fl.NO_INTERLACE),this.writeCrc(17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}encodeIDAT(t){this.writeUint32(t.length),this.writeChars("IDAT"),this.writeBytes(t),this.writeCrc(t.length+4)}encodeData(){const{width:t,height:n,channels:r,depth:i,data:s}=this._png,o=r*t,a=(new bu).setBigEndian();let l=0;for(let f=0;f<n;f++)if(a.writeByte(0),8===i)l=zz(s,a,o,l);else{if(16!==i)throw new Error("unreachable");l=Yz(s,a,o,l)}const c=a.toArray(),u=IS(c,this._zlibOptions);this.encodeIDAT(u)}_checkData(t){const{colorType:n,channels:r,depth:i}=function(e){const{channels:t=4,depth:n=8}=e;if(4!==t&&3!==t&&2!==t&&1!==t)throw new RangeError(`unsupported number of channels: ${t}`);if(8!==n&&16!==n)throw new RangeError(`unsupported bit depth: ${n}`);const r={channels:t,depth:n,colorType:yr.UNKNOWN};switch(t){case 4:r.colorType=yr.TRUECOLOUR_ALPHA;break;case 3:r.colorType=yr.TRUECOLOUR;break;case 1:r.colorType=yr.GREYSCALE;break;case 2:r.colorType=yr.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return r}(t),s={width:NS(t.width,"width"),height:NS(t.height,"height"),channels:r,data:t.data,depth:i,text:{}};this._colorType=n;const o=s.width*s.height*r;if(s.data.length!==o)throw new RangeError(`wrong data size. Found ${s.data.length}, expected ${o}`);return s}writeCrc(t){this.writeUint32(OS(new Uint8Array(this.buffer,this.byteOffset+this.offset-t,t),t))}}function NS(e,t){if(Number.isInteger(e)&&e>0)return e;throw new TypeError(`${t} must be a positive integer`)}function zz(e,t,n,r){for(let i=0;i<n;i++)t.writeByte(e[r++]);return r}function Yz(e,t,n,r){for(let i=0;i<n;i++)t.writeUint16(e[r++]);return r}var LS=T(7757);let Pl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uu=new Uint8Array(256);for(let e=0;e<Pl.length;e++)Uu[Pl.charCodeAt(e)]=e;function BS(e,t){const n=function(e){let t,n=e.length,r="";for(t=0;t<n;t+=3)r+=Pl[e[t]>>2],r+=Pl[(3&e[t])<<4|e[t+1]>>4],r+=Pl[(15&e[t+1])<<2|e[t+2]>>6],r+=Pl[63&e[t+2]];return n%3==2?r=`${r.substring(0,r.length-1)}=`:n%3==1&&(r=`${r.substring(0,r.length-2)}==`),r}(e);return`data:${t};base64,${n}`}const Kz=self.ImageData,Xz=self.Image;function US(e,t){let n=self.document.createElement("canvas");return n.width=e,n.height=t,n}function ey(e,t={}){const n={width:e.width,height:e.height,data:e.getRGBAData()};return(0,LS.encode)(n,t.quality).data}function ty(e,t){const n={width:e.width,height:e.height,channels:e.channels,depth:e.bitDepth,data:e.data};return(1===n.depth||32===n.depth)&&(n.depth=8,n.channels=4,n.data=e.getRGBAData()),function(e,t){return new $z(e,t).encode()}(n,t)}const VS={save(e,t={}){const{useCanvas:n=!1,encoder:r}=t;let{format:i}=t;if(!i){const s=/\.(?<format>[a-zA-Z]+)$/.exec(e);s&&(i=s.groups.format.toLowerCase())}if(!i)throw new Error("file format not provided");return new Promise((s,o)=>{let a,l;switch(i.toLowerCase()){case"png":n?a=this.getCanvas().pngStream():l=ty(this,r);break;case"jpg":case"jpeg":n?a=this.getCanvas().jpegStream():l=ey(this,r);break;case"bmp":l=(0,T_.encode)(this,r);break;default:throw new RangeError(`invalid output format: ${i}`)}if(a){let c=function(){throw new Error("createWriteStream does not exist in the browser")}();c.on("finish",s),c.on("error",o),a.pipe(c)}else l&&function(){throw new Error("writeFile does not exist in the browser")}()})},toDataURL(e="image/png",t={}){"object"==typeof e&&(t=e,e="image/png");const{useCanvas:n=!1,encoder:r}=t;function i(s,o){return BS(s(o,r),e)}return"image/bmp"===(e=function(e){return e.includes("/")||(e=`image/${e}`),e}(e))?i(T_.encode,this):"image/png"!==e||n?"image/jpeg"!==e||n?this.getCanvas().toDataURL(e):i(ey,this):i(ty,this)},toBuffer(e={}){const{format:t="png",encoder:n}=e;switch(t.toLowerCase()){case"png":return ty(this,n);case"jpeg":case"jpg":return ey(this,n);case"bmp":return(0,T_.encode)(this,n);default:throw new RangeError(`invalid output format: ${t}`)}},toBase64(e="image/png",t={}){if(t.async)return this.toDataURL(e,t).then(function(n){return n.substring(n.indexOf(",")+1)});{const n=this.toDataURL(e,t);return n.substring(n.indexOf(",")+1)}},toBlob(e="image/png",t=.8){return c2(this.getCanvas(),e,t)},getCanvas(){const e=new Kz(this.getRGBAData({clamped:!0}),this.width,this.height);let t=US(this.width,this.height);return t.getContext("2d").putImageData(e,0,0),t}};var rY=T(6238),jS=T.n(rY);let $S={configurable:!0,enumerable:!1,get:void 0};const Ci="GREY",kr="RGB",ny="HSL",ry="HSV",Vu="CMYK",Qr="BINARY",HS="RGBA",Xs={};Xs[Qr]={components:1,alpha:0,bitDepth:1,colorModel:Ci},Xs.GREYA={components:1,alpha:1,bitDepth:8,colorModel:Ci},Xs.GREY={components:1,alpha:0,bitDepth:8,colorModel:Ci},Xs[HS]={components:3,alpha:1,bitDepth:8,colorModel:kr},Xs.RGB={components:3,alpha:0,bitDepth:8,colorModel:kr},Xs.CMYK={components:4,alpha:0,bitDepth:8,colorModel:Vu},Xs.CMYKA={components:4,alpha:1,bitDepth:8,colorModel:Vu};const zS=[1,8,16,32];var EY=T(9649),DY=T(127),CY=T.n(DY);T(858);const MY=new TextDecoder("utf-8"),AY=new TextEncoder;class Vd{constructor(t=8192,n={}){let r=!1;"number"==typeof t?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const i=n.offset?n.offset>>>0:0,s=t.byteLength-i;let o=i;(ArrayBuffer.isView(t)||t instanceof Vd)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+i),t=t.buffer),this.lastWrittenByte=r?s:0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=2*(this.offset+t),i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){const n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=this.readByte();return n}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let r=0;r<t;r++)n+=this.readChar();return n}readUtf8(t=1){return function(e){return MY.decode(e)}(this.readBytes(t))}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(function(e){return AY.encode(e)}(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const iy={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},YS={};for(let e in iy)YS[iy[e]]=Number(e);const sy={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},GS={};for(let e in sy)GS[sy[e]]=Number(e);const oy={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},WS={};for(let e in oy)WS[oy[e]]=Number(e);const ZS={standard:C,exif:V,gps:x};class qS{constructor(t){if(!t)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=t,this._hasMap=!1,this._map={}}get(t){if("number"==typeof t)return this.fields.get(t);if("string"==typeof t)return this.fields.get(ZS[this.kind].tagsByName[t]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const t=ZS[this.kind].tagsById;for(let n of this.fields.keys())t[n]&&(this._map[t[n]]=this.fields.get(n));this._hasMap=!0}return this._map}}let KS=new Map([[1,[1,XS]],[2,[1,function(e,t){let n=[],r="";for(let i=0;i<t;i++){let s=String.fromCharCode(e.readUint8());"\0"===s?(n.push(r),r=""):r+=s}return 1===n.length?n[0]:n}]],[3,[2,function(e,t){if(1===t)return e.readUint16();let n=new Uint16Array(t);for(let r=0;r<t;r++)n[r]=e.readUint16();return n}]],[4,[4,function(e,t){if(1===t)return e.readUint32();let n=new Uint32Array(t);for(let r=0;r<t;r++)n[r]=e.readUint32();return n}]],[5,[8,function(e,t){if(1===t)return e.readUint32()/e.readUint32();let n=new Array(t);for(let r=0;r<t;r++)n[r]=e.readUint32()/e.readUint32();return n}]],[6,[1,function(e,t){if(1===t)return e.readInt8();let n=new Int8Array(t);for(let r=0;r<t;r++)n[r]=e.readInt8();return n}]],[7,[1,XS]],[8,[2,function(e,t){if(1===t)return e.readInt16();let n=new Int16Array(t);for(let r=0;r<t;r++)n[r]=e.readInt16();return n}]],[9,[4,function(e,t){if(1===t)return e.readInt32();let n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=e.readInt32();return n}]],[10,[8,function(e,t){if(1===t)return e.readInt32()/e.readInt32();let n=new Array(t);for(let r=0;r<t;r++)n[r]=e.readInt32()/e.readInt32();return n}]],[11,[4,function(e,t){if(1===t)return e.readFloat32();let n=new Float32Array(t);for(let r=0;r<t;r++)n[r]=e.readFloat32();return n}]],[12,[8,function(e,t){if(1===t)return e.readFloat64();let n=new Float64Array(t);for(let r=0;r<t;r++)n[r]=e.readFloat64();return n}]]]);function XS(e,t){if(1===t)return e.readUint8();let n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.readUint8();return n}const jd=[];for(let e=0;e<256;e++)jd.push([e]);const GY=[0];for(let e=256;e<4096;e++)jd.push(GY);class WY{constructor(t){this.stripArray=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);const n=new Map;for(let r=0;r<256;r++)n.set(r,[r]);this.currentBit=0,this.tableLength=258,this.currentBitLength=9,this.outData=new Vd(t.byteLength)}decode(){let t=0,n=0;for(;257!==(t=this.getNextCode());)if(256===t){if(this.initializeTable(),t=this.getNextCode(),257===t)break;this.writeString(this.stringFromCode(t)),n=t}else if(this.isInTable(t))this.writeString(this.stringFromCode(t)),this.addStringToTable(this.stringFromCode(n).concat(this.stringFromCode(t)[0])),n=t;else{const i=this.stringFromCode(n).concat(this.stringFromCode(n)[0]);this.writeString(i),this.addStringToTable(i),n=t}const r=this.outData.toArray();return new DataView(r.buffer,r.byteOffset,r.byteLength)}initializeTable(){this.tableLength=258,this.currentBitLength=9}writeString(t){this.outData.writeBytes(t)}stringFromCode(t){return jd[t]}isInTable(t){return t<this.tableLength}addStringToTable(t){jd[this.tableLength++]=t,this.tableLength+1===2**this.currentBitLength&&this.currentBitLength++}getNextCode(){const t=this.currentBit%8,n=this.currentBit>>>3,r=8-t,i=this.currentBit+this.currentBitLength-8*(n+1);let s=8*(n+2)-(this.currentBit+this.currentBitLength);const o=8*(n+2)-this.currentBit;s=Math.max(0,s);let a=this.stripArray[n]&2**(8-t)-1;a<<=this.currentBitLength-r;let l=a;if(n+1<this.stripArray.length){let c=this.stripArray[n+1]>>>s;c<<=Math.max(0,this.currentBitLength-o),l+=c}return i>8&&n+2<this.stripArray.length&&(l+=this.stripArray[n+2]>>>8*(n+3)-(this.currentBit+this.currentBitLength)),this.currentBit+=this.currentBitLength,l}}function ZY(e){return new WY(e).decode()}const qY=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class tA extends qS{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let t=new Date,n=qY.exec(this.dateTime);if(null===n)throw new Error(`invalid dateTime: ${this.dateTime}`);return t.setFullYear(Number(n[1]),Number(n[2])-1,Number(n[3])),t.setHours(Number(n[4]),Number(n[5]),Number(n[6])),t}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const t=this.get("BitsPerSample");return t&&"number"!=typeof t?t[0]:t}get alpha(){const t=this.extraSamples;return!!t&&0!==t[0]}get associatedAlpha(){const t=this.extraSamples;return!!t&&1===t[0]}get extraSamples(){return ay(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return ay(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return ay(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const t=2**this.bitsPerSample,n=this.get("ColorMap");if(!n)return;if(n.length!==3*t)throw new Error(`ColorMap size must be ${t}`);const r=[];for(let i=0;i<t;i++)r.push([n[i],n[i+t],n[i+2*t]]);return r}}function ay(e){return"number"==typeof e?[e]:e}function Ol(e){let t=e.length;for(;--t>=0;)e[t]=0}const fy=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),$d=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),rG=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),cA=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ws=new Array(576);Ol(ws);const Hu=new Array(60);Ol(Hu);const zu=new Array(512);Ol(zu);const Yu=new Array(256);Ol(Yu);const dy=new Array(29);Ol(dy);const Hd=new Array(30);function py(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let uA,hA,fA;function gy(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Ol(Hd);const dA=e=>e<256?zu[e]:zu[256+(e>>>7)],Gu=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},wr=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Gu(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Zi=(e,t,n)=>{wr(e,n[2*t],n[2*t+1])},pA=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},gA=(e,t,n)=>{const r=new Array(16);let s,o,i=0;for(s=1;s<=15;s++)r[s]=i=i+n[s-1]<<1;for(o=0;o<=t;o++){let a=e[2*o+1];0!==a&&(e[2*o]=pA(r[a]++,a))}},mA=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},_A=e=>{e.bi_valid>8?Gu(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},yA=(e,t,n,r)=>{const i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},my=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&yA(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!yA(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},wA=(e,t,n)=>{let r,i,o,a,s=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?Zi(e,i,t):(o=Yu[i],Zi(e,o+256+1,t),a=fy[o],0!==a&&(i-=dy[o],wr(e,i,a)),r--,o=dA(r),Zi(e,o,n),a=$d[o],0!==a&&(r-=Hd[o],wr(e,r,a)))}while(s<e.last_lit);Zi(e,256,t)},_y=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[2*c+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)my(e,n,o);c=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],my(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[2*c]=n[2*o]+n[2*a],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[2*o+1]=n[2*a+1]=c,e.heap[1]=c++,my(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,f,d,p,b,N=0;for(d=0;d<=15;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],d=n[2*n[2*u+1]+1]+1,d>l&&(d=l,N++),n[2*u+1]=d,!(u>r)&&(e.bl_count[d]++,p=0,u>=a&&(p=o[u-a]),b=n[2*u],e.opt_len+=b*(d+p),s&&(e.static_len+=b*(i[2*u+1]+p)));if(0!==N){do{for(d=l-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,N-=2}while(N>0);for(d=l;0!==d;d--)for(u=e.bl_count[d];0!==u;)f=e.heap[--c],!(f>r)&&(n[2*f+1]!==d&&(e.opt_len+=(d-n[2*f+1])*n[2*f],n[2*f+1]=d),u--)}})(e,t),gA(n,l,e.bl_count)},bA=(e,t,n)=>{let r,s,i=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)s=o,o=t[2*(r+1)+1],!(++a<l&&s===o)&&(a<c?e.bl_tree[2*s]+=a:0!==s?(s!==i&&e.bl_tree[2*s]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,i=s,0===o?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},vA=(e,t,n)=>{let r,s,i=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(s=o,o=t[2*(r+1)+1],!(++a<l&&s===o)){if(a<c)do{Zi(e,s,e.bl_tree)}while(0!=--a);else 0!==s?(s!==i&&(Zi(e,s,e.bl_tree),a--),Zi(e,16,e.bl_tree),wr(e,a-3,2)):a<=10?(Zi(e,17,e.bl_tree),wr(e,a-3,3)):(Zi(e,18,e.bl_tree),wr(e,a-11,7));a=0,i=s,0===o?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}};let xA=!1;const EA=(e,t,n,r)=>{wr(e,0+(r?1:0),3),((e,t,n,r)=>{_A(e),Gu(e,n),Gu(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n})(e,t,n)};var vG={_tr_init:e=>{xA||((()=>{let e,t,n,r,i;const s=new Array(16);for(n=0,r=0;r<28;r++)for(dy[r]=n,e=0;e<1<<fy[r];e++)Yu[n++]=r;for(Yu[n-1]=r,i=0,r=0;r<16;r++)for(Hd[r]=i,e=0;e<1<<$d[r];e++)zu[i++]=r;for(i>>=7;r<30;r++)for(Hd[r]=i<<7,e=0;e<1<<$d[r]-7;e++)zu[256+i++]=r;for(t=0;t<=15;t++)s[t]=0;for(e=0;e<=143;)ws[2*e+1]=8,e++,s[8]++;for(;e<=255;)ws[2*e+1]=9,e++,s[9]++;for(;e<=279;)ws[2*e+1]=7,e++,s[7]++;for(;e<=287;)ws[2*e+1]=8,e++,s[8]++;for(gA(ws,287,s),e=0;e<30;e++)Hu[2*e+1]=5,Hu[2*e]=pA(e,5);uA=new py(ws,fy,257,286,15),hA=new py(Hu,$d,0,30,15),fA=new py(new Array(0),rG,0,19,7)})(),xA=!0),e.l_desc=new gy(e.dyn_ltree,uA),e.d_desc=new gy(e.dyn_dtree,hA),e.bl_desc=new gy(e.bl_tree,fA),e.bi_buf=0,e.bi_valid=0,mA(e)},_tr_stored_block:EA,_tr_flush_block:(e,t,n,r)=>{let i,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let n,t=4093624447;for(n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==e.dyn_ltree[2*n])return 1;return 0})(e)),_y(e,e.l_desc),_y(e,e.d_desc),o=(e=>{let t;for(bA(e,e.dyn_ltree,e.l_desc.max_code),bA(e,e.dyn_dtree,e.d_desc.max_code),_y(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*cA[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?EA(e,t,n,r):4===e.strategy||s===i?(wr(e,2+(r?1:0),3),wA(e,ws,Hu)):(wr(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(wr(e,t-257,5),wr(e,n-1,5),wr(e,r-4,4),i=0;i<r;i++)wr(e,e.bl_tree[2*cA[i]+1],3);vA(e,e.dyn_ltree,t-1),vA(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),wA(e,e.dyn_ltree,e.dyn_dtree)),mA(e),r&&_A(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Yu[n]+256+1)]++,e.dyn_dtree[2*dA(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{wr(e,2,3),Zi(e,256,ws),(e=>{16===e.bi_valid?(Gu(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},Wu=(e,t,n,r)=>{let i=65535&e|0,s=e>>>16&65535|0,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+t[r++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16|0};const EG=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var zn=(e,t,n,r)=>{const i=EG,s=r+n;e^=-1;for(let o=r;o<s;o++)e=e>>>8^i[255&(e^t[o])];return-1^e},ea={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ta={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:DG,_tr_stored_block:CG,_tr_flush_block:MG,_tr_tally:Qs,_tr_align:SG}=vG,{Z_NO_FLUSH:na,Z_PARTIAL_FLUSH:AG,Z_FULL_FLUSH:TG,Z_FINISH:Js,Z_BLOCK:DA,Z_OK:qi,Z_STREAM_END:CA,Z_STREAM_ERROR:Jr,Z_DATA_ERROR:kG,Z_BUF_ERROR:yy,Z_DEFAULT_COMPRESSION:IG,Z_FILTERED:RG,Z_HUFFMAN_ONLY:zd,Z_RLE:FG,Z_FIXED:PG,Z_DEFAULT_STRATEGY:OG,Z_UNKNOWN:NG,Z_DEFLATED:Yd}=ta,Mi=262,to=(e,t)=>(e.msg=ea[t],t),MA=e=>(e<<1)-(e>4?9:0),no=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let ro=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const io=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Wn=(e,t)=>{MG(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,io(e.strm)},Ht=(e,t)=>{e.pending_buf[e.pending++]=t},Ku=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},WG=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=Wu(e.adler,t,i,n):2===e.state.wrap&&(e.adler=zn(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},SA=(e,t)=>{let i,s,n=e.max_chain_length,r=e.strstart,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-Mi?e.strstart-(e.w_size-Mi):0,c=e.window,u=e.w_mask,f=e.prev,d=e.strstart+258;let p=c[r+o-1],b=c[r+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do{if(i=t,c[i+o]===b&&c[i+o-1]===p&&c[i]===c[r]&&c[++i]===c[r+1]){r+=2,i++;do{}while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<d);if(s=258-(d-r),r=d-258,s>o){if(e.match_start=t,o=s,s>=a)break;p=c[r+o-1],b=c[r+o]}}}while((t=f[t&u])>l&&0!=--n);return o<=e.lookahead?o:e.lookahead},sa=e=>{const t=e.w_size;let n,r,i,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Mi)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do{i=e.head[--n],e.head[n]=i>=t?i-t:0}while(--r);r=t,n=r;do{i=e.prev[--n],e.prev[n]=i>=t?i-t:0}while(--r);s+=t}if(0===e.strm.avail_in)break;if(r=WG(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=ro(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=ro(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Mi&&0!==e.strm.avail_in)},vy=(e,t)=>{let n,r;for(;;){if(e.lookahead<Mi){if(sa(e),e.lookahead<Mi&&t===na)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ro(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Mi&&(e.match_length=SA(e,n)),e.match_length>=3)if(r=Qs(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=ro(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ro(e,e.ins_h,e.window[e.strstart+1]);else r=Qs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Wn(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Js?(Wn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Wn(e,!1),0===e.strm.avail_out)?1:2},Bl=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Mi){if(sa(e),e.lookahead<Mi&&t===na)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ro(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Mi&&(e.match_length=SA(e,n),e.match_length<=5&&(e.strategy===RG||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=Qs(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=ro(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Wn(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Qs(e,0,e.window[e.strstart-1]),r&&Wn(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Qs(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Js?(Wn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Wn(e,!1),0===e.strm.avail_out)?1:2};function Ki(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Xu=[new Ki(0,0,0,0,(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(sa(e),0===e.lookahead&&t===na)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,Wn(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-Mi&&(Wn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Js?(Wn(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&Wn(e,!1),1)}),new Ki(4,4,8,4,vy),new Ki(4,5,16,8,vy),new Ki(4,6,32,32,vy),new Ki(4,4,16,16,Bl),new Ki(8,16,32,32,Bl),new Ki(8,16,128,128,Bl),new Ki(8,32,128,256,Bl),new Ki(32,128,258,1024,Bl),new Ki(32,258,258,4096,Bl)];function QG(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Yd,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),no(this.dyn_ltree),no(this.dyn_dtree),no(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),no(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),no(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const AA=e=>{if(!e||!e.state)return to(e,Jr);e.total_in=e.total_out=0,e.data_type=NG;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=na,DG(t),qi},TA=e=>{const t=AA(e);return t===qi&&(e=>{e.window_size=2*e.w_size,no(e.head),e.max_lazy_match=Xu[e.level].max_lazy,e.good_match=Xu[e.level].good_length,e.nice_match=Xu[e.level].nice_length,e.max_chain_length=Xu[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},kA=(e,t,n,r,i,s)=>{if(!e)return Jr;let o=1;if(t===IG&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==Yd||r<8||r>15||t<0||t>9||s<0||s>PG)return to(e,Jr);8===r&&(r=9);const a=new QG;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,TA(e)};var Qu_deflateInit2=kA,Qu_deflateSetHeader=(e,t)=>e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,qi):Jr,Qu_deflate=(e,t)=>{let n,r;if(!e||!e.state||t>DA||t<0)return e?to(e,Jr):Jr;const i=e.state;if(!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==Js)return to(e,0===e.avail_out?yy:Jr);i.strm=e;const s=i.last_flush;if(i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,Ht(i,31),Ht(i,139),Ht(i,8),i.gzhead?(Ht(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Ht(i,255&i.gzhead.time),Ht(i,i.gzhead.time>>8&255),Ht(i,i.gzhead.time>>16&255),Ht(i,i.gzhead.time>>24&255),Ht(i,9===i.level?2:i.strategy>=zd||i.level<2?4:0),Ht(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Ht(i,255&i.gzhead.extra.length),Ht(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=zn(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(Ht(i,0),Ht(i,0),Ht(i,0),Ht(i,0),Ht(i,0),Ht(i,9===i.level?2:i.strategy>=zd||i.level<2?4:0),Ht(i,3),i.status=113);else{let o=Yd+(i.w_bits-8<<4)<<8,a=-1;a=i.strategy>=zd||i.level<2?0:i.level<6?1:6===i.level?2:3,o|=a<<6,0!==i.strstart&&(o|=32),o+=31-o%31,i.status=113,Ku(i,o),0!==i.strstart&&(Ku(i,e.adler>>>16),Ku(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(e.adler=zn(e.adler,i.pending_buf,i.pending-n,n)),io(e),n=i.pending,i.pending!==i.pending_buf_size));)Ht(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=zn(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=zn(e.adler,i.pending_buf,i.pending-n,n)),io(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Ht(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(e.adler=zn(e.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=zn(e.adler,i.pending_buf,i.pending-n,n)),io(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Ht(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(e.adler=zn(e.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&io(e),i.pending+2<=i.pending_buf_size&&(Ht(i,255&e.adler),Ht(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(io(e),0===e.avail_out)return i.last_flush=-1,qi}else if(0===e.avail_in&&MA(t)<=MA(s)&&t!==Js)return to(e,yy);if(666===i.status&&0!==e.avail_in)return to(e,yy);if(0!==e.avail_in||0!==i.lookahead||t!==na&&666!==i.status){let o=i.strategy===zd?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(sa(e),0===e.lookahead)){if(t===na)return 1;break}if(e.match_length=0,n=Qs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Wn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Js?(Wn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Wn(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===FG?((e,t)=>{let n,r,i,s;const o=e.window;for(;;){if(e.lookahead<=258){if(sa(e),e.lookahead<=258&&t===na)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=e.strstart+258;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=258-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Qs(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Qs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Wn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Js?(Wn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Wn(e,!1),0===e.strm.avail_out)?1:2})(i,t):Xu[i.level].func(i,t);if((3===o||4===o)&&(i.status=666),1===o||3===o)return 0===e.avail_out&&(i.last_flush=-1),qi;if(2===o&&(t===AG?SG(i):t!==DA&&(CG(i,0,0,!1),t===TG&&(no(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),io(e),0===e.avail_out))return i.last_flush=-1,qi}return t!==Js?qi:i.wrap<=0?CA:(2===i.wrap?(Ht(i,255&e.adler),Ht(i,e.adler>>8&255),Ht(i,e.adler>>16&255),Ht(i,e.adler>>24&255),Ht(i,255&e.total_in),Ht(i,e.total_in>>8&255),Ht(i,e.total_in>>16&255),Ht(i,e.total_in>>24&255)):(Ku(i,e.adler>>>16),Ku(i,65535&e.adler)),io(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?qi:CA)},Qu_deflateEnd=e=>{if(!e||!e.state)return Jr;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?to(e,Jr):(e.state=null,113===t?to(e,kG):qi)},Qu_deflateSetDictionary=(e,t)=>{let n=t.length;if(!e||!e.state)return Jr;const r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return Jr;if(1===i&&(e.adler=Wu(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(no(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,sa(r);r.lookahead>=3;){let l=r.strstart,c=r.lookahead-2;do{r.ins_h=ro(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++}while(--c);r.strstart=l,r.lookahead=2,sa(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,r.wrap=i,qi};const dW=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Kd_assign=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const r in n)dW(n,r)&&(e[r]=n[r])}}return e},Kd_flattenChunks=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let o=e[r];n.set(o,i),i+=o.length}return n};let IA=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){IA=!1}const Ju=new Uint8Array(256);for(let e=0;e<256;e++)Ju[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ju[254]=Ju[254]=1;var eh_string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,s,o=e.length,a=0;for(i=0;i<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},eh_buf2string=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const s=new Array(2*n);for(i=0,r=0;r<n;){let o=e[r++];if(o<128){s[i++]=o;continue}let a=Ju[o];if(a>4)s[i++]=65533,r+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&r<n;)o=o<<6|63&e[r++],a--;a>1?s[i++]=65533:o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|1023&o)}}return((e,t)=>{if(t<65534&&e.subarray&&IA)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(s,i)},eh_utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Ju[e[n]]>t?n:t},RA=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const FA=Object.prototype.toString,{Z_NO_FLUSH:vW,Z_SYNC_FLUSH:xW,Z_FULL_FLUSH:EW,Z_FINISH:DW,Z_OK:Xd,Z_STREAM_END:CW,Z_DEFAULT_COMPRESSION:MW,Z_DEFAULT_STRATEGY:SW,Z_DEFLATED:AW}=ta;function th(e){this.options=Kd_assign({level:MW,method:AW,chunkSize:16384,windowBits:15,memLevel:8,strategy:SW},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new RA,this.strm.avail_out=0;let n=Qu_deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Xd)throw new Error(ea[n]);if(t.header&&Qu_deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(r="string"==typeof t.dictionary?eh_string2buf(t.dictionary):"[object ArrayBuffer]"===FA.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Qu_deflateSetDictionary(this.strm,r),n!==Xd)throw new Error(ea[n]);this._dict_set=!0}}function xy(e,t){const n=new th(t);if(n.push(e,!0),n.err)throw n.msg||ea[n.err];return n.result}th.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?DW:vW,n.input="string"==typeof e?eh_string2buf(e):"[object ArrayBuffer]"===FA.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===xW||s===EW)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Qu_deflate(n,s),i===CW)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Qu_deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Xd;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},th.prototype.onData=function(e){this.chunks.push(e)},th.prototype.onEnd=function(e){e===Xd&&(this.result=Kd_flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var NW={Deflate:th,deflate:xy,deflateRaw:function(e,t){return(t=t||{}).raw=!0,xy(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,xy(e,t)},constants:ta},BW=function(t,n){let r,i,s,o,a,l,c,u,f,d,p,b,N,S,H,G,ie,q,ge,Re,Ee,Ne,Ie,De;const Ae=t.state;r=t.next_in,Ie=t.input,i=r+(t.avail_in-5),s=t.next_out,De=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=Ae.dmax,c=Ae.wsize,u=Ae.whave,f=Ae.wnext,d=Ae.window,p=Ae.hold,b=Ae.bits,N=Ae.lencode,S=Ae.distcode,H=(1<<Ae.lenbits)-1,G=(1<<Ae.distbits)-1;e:do{b<15&&(p+=Ie[r++]<<b,b+=8,p+=Ie[r++]<<b,b+=8),ie=N[p&H];t:for(;;){if(q=ie>>>24,p>>>=q,b-=q,q=ie>>>16&255,0===q)De[s++]=65535&ie;else{if(!(16&q)){if(0==(64&q)){ie=N[(65535&ie)+(p&(1<<q)-1)];continue t}if(32&q){Ae.mode=12;break e}t.msg="invalid literal/length code",Ae.mode=30;break e}ge=65535&ie,q&=15,q&&(b<q&&(p+=Ie[r++]<<b,b+=8),ge+=p&(1<<q)-1,p>>>=q,b-=q),b<15&&(p+=Ie[r++]<<b,b+=8,p+=Ie[r++]<<b,b+=8),ie=S[p&G];n:for(;;){if(q=ie>>>24,p>>>=q,b-=q,q=ie>>>16&255,!(16&q)){if(0==(64&q)){ie=S[(65535&ie)+(p&(1<<q)-1)];continue n}t.msg="invalid distance code",Ae.mode=30;break e}if(Re=65535&ie,q&=15,b<q&&(p+=Ie[r++]<<b,b+=8,b<q&&(p+=Ie[r++]<<b,b+=8)),Re+=p&(1<<q)-1,Re>l){t.msg="invalid distance too far back",Ae.mode=30;break e}if(p>>>=q,b-=q,q=s-o,Re>q){if(q=Re-q,q>u&&Ae.sane){t.msg="invalid distance too far back",Ae.mode=30;break e}if(Ee=0,Ne=d,0===f){if(Ee+=c-q,q<ge){ge-=q;do{De[s++]=d[Ee++]}while(--q);Ee=s-Re,Ne=De}}else if(f<q){if(Ee+=c+f-q,q-=f,q<ge){ge-=q;do{De[s++]=d[Ee++]}while(--q);if(Ee=0,f<ge){q=f,ge-=q;do{De[s++]=d[Ee++]}while(--q);Ee=s-Re,Ne=De}}}else if(Ee+=f-q,q<ge){ge-=q;do{De[s++]=d[Ee++]}while(--q);Ee=s-Re,Ne=De}for(;ge>2;)De[s++]=Ne[Ee++],De[s++]=Ne[Ee++],De[s++]=Ne[Ee++],ge-=3;ge&&(De[s++]=Ne[Ee++],ge>1&&(De[s++]=Ne[Ee++]))}else{Ee=s-Re;do{De[s++]=De[Ee++],De[s++]=De[Ee++],De[s++]=De[Ee++],ge-=3}while(ge>2);ge&&(De[s++]=De[Ee++],ge>1&&(De[s++]=De[Ee++]))}break}}break}}while(r<i&&s<a);ge=b>>3,r-=ge,b-=ge<<3,p&=(1<<b)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=s<a?a-s+257:257-(s-a),Ae.hold=p,Ae.bits=b};const UW=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),VW=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),jW=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),$W=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var nh=(e,t,n,r,i,s,o,a)=>{const l=a.bits;let ie,q,ge,Re,Ee,De,c=0,u=0,f=0,d=0,p=0,b=0,N=0,S=0,H=0,G=0,Ne=null,Ie=0;const Ae=new Uint16Array(16),at=new Uint16Array(16);let _t,We,nt,Dt=null,Vt=0;for(c=0;c<=15;c++)Ae[c]=0;for(u=0;u<r;u++)Ae[t[n+u]]++;for(p=l,d=15;d>=1&&0===Ae[d];d--);if(p>d&&(p=d),0===d)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(f=1;f<d&&0===Ae[f];f++);for(p<f&&(p=f),S=1,c=1;c<=15;c++)if(S<<=1,S-=Ae[c],S<0)return-1;if(S>0&&(0===e||1!==d))return-1;for(at[1]=0,c=1;c<15;c++)at[c+1]=at[c]+Ae[c];for(u=0;u<r;u++)0!==t[n+u]&&(o[at[t[n+u]]++]=u);if(0===e?(Ne=Dt=o,De=19):1===e?(Ne=UW,Ie-=257,Dt=VW,Vt-=257,De=256):(Ne=jW,Dt=$W,De=-1),G=0,u=0,c=f,Ee=s,b=p,N=0,ge=-1,H=1<<p,Re=H-1,1===e&&H>852||2===e&&H>592)return 1;for(;;){_t=c-N,o[u]<De?(We=0,nt=o[u]):o[u]>De?(We=Dt[Vt+o[u]],nt=Ne[Ie+o[u]]):(We=96,nt=0),ie=1<<c-N,q=1<<b,f=q;do{q-=ie,i[Ee+(G>>N)+q]=_t<<24|We<<16|nt|0}while(0!==q);for(ie=1<<c-1;G&ie;)ie>>=1;if(0!==ie?(G&=ie-1,G+=ie):G=0,u++,0==--Ae[c]){if(c===d)break;c=t[n+o[u]]}if(c>p&&(G&Re)!==ge){for(0===N&&(N=p),Ee+=f,b=c-N,S=1<<b;b+N<d&&(S-=Ae[b+N],!(S<=0));)b++,S<<=1;if(H+=1<<b,1===e&&H>852||2===e&&H>592)return 1;ge=G&Re,i[ge]=p<<24|b<<16|Ee-s|0}}return 0!==G&&(i[Ee+G]=c-N<<24|64<<16|0),a.bits=p,0};const{Z_FINISH:VA,Z_BLOCK:zW,Z_TREES:Jd,Z_OK:oa,Z_STREAM_END:YW,Z_NEED_DICT:GW,Z_STREAM_ERROR:ei,Z_DATA_ERROR:jA,Z_MEM_ERROR:$A,Z_BUF_ERROR:WW,Z_DEFLATED:HA}=ta,dT=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function QW(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const pT=e=>{if(!e||!e.state)return ei;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,oa},gT=e=>{if(!e||!e.state)return ei;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,pT(e)},mT=(e,t)=>{let n;if(!e||!e.state)return ei;const r=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ei:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,gT(e))},_T=(e,t)=>{if(!e)return ei;const n=new QW;e.state=n,n.window=null;const r=mT(e,t);return r!==oa&&(e.state=null),r};let Sy,Ay,yT=!0;const eZ=e=>{if(yT){Sy=new Int32Array(512),Ay=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(nh(1,e.lens,0,288,Sy,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;nh(2,e.lens,0,32,Ay,0,e.work,{bits:5}),yT=!1}e.lencode=Sy,e.lenbits=9,e.distcode=Ay,e.distbits=5},wT=(e,t,n,r)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var vs_inflateReset=gT,vs_inflateInit2=_T,vs_inflate=(e,t)=>{let n,r,i,s,o,a,l,c,u,f,d,p,b,N,H,G,ie,q,ge,Re,Ee,Ne,S=0;const Ie=new Uint8Array(4);let De,Ae;const at=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return ei;n=e.state,12===n.mode&&(n.mode=13),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,c=n.hold,u=n.bits,f=a,d=l,Ne=oa;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(2&n.wrap&&35615===c){n.check=0,Ie[0]=255&c,Ie[1]=c>>>8&255,n.check=zn(n.check,Ie,2,0),c=0,u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=30;break}if((15&c)!==HA){e.msg="unknown compression method",n.mode=30;break}if(c>>>=4,u-=4,Ee=8+(15&c),0===n.wbits)n.wbits=Ee;else if(Ee>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&c?10:12,c=0,u=0;break;case 2:for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==HA){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(Ie[0]=255&c,Ie[1]=c>>>8&255,n.check=zn(n.check,Ie,2,0)),c=0,u=0,n.mode=3;case 3:for(;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&(Ie[0]=255&c,Ie[1]=c>>>8&255,Ie[2]=c>>>16&255,Ie[3]=c>>>24&255,n.check=zn(n.check,Ie,4,0)),c=0,u=0,n.mode=4;case 4:for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(Ie[0]=255&c,Ie[1]=c>>>8&255,n.check=zn(n.check,Ie,2,0)),c=0,u=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(Ie[0]=255&c,Ie[1]=c>>>8&255,n.check=zn(n.check,Ie,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p=n.length,p>a&&(p=a),p&&(n.head&&(Ee=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+p),Ee)),512&n.flags&&(n.check=zn(n.check,r,p,s)),a-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break e;p=0;do{Ee=r[s+p++],n.head&&Ee&&n.length<65536&&(n.head.name+=String.fromCharCode(Ee))}while(Ee&&p<a);if(512&n.flags&&(n.check=zn(n.check,r,p,s)),a-=p,s+=p,Ee)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break e;p=0;do{Ee=r[s+p++],n.head&&Ee&&n.length<65536&&(n.head.comment+=String.fromCharCode(Ee))}while(Ee&&p<a);if(512&n.flags&&(n.check=zn(n.check,r,p,s)),a-=p,s+=p,Ee)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}e.adler=n.check=dT(c),c=0,u=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,GW;e.adler=n.check=1,n.mode=12;case 12:if(t===zW||t===Jd)break e;case 13:if(n.last){c>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=14;break;case 1:if(eZ(n),n.mode=20,t===Jd){c>>>=2,u-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}c>>>=2,u-=2;break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&c,c=0,u=0,n.mode=15,t===Jd)break e;case 15:n.mode=16;case 16:if(p=n.length,p){if(p>a&&(p=a),p>l&&(p=l),0===p)break e;i.set(r.subarray(s,s+p),o),a-=p,s+=p,l-=p,o+=p,n.length-=p;break}n.mode=12;break;case 17:for(;u<14;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.lens[at[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[at[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,De={bits:n.lenbits},Ne=nh(0,n.lens,0,19,n.lencode,0,n.work,De),n.lenbits=De.bits,Ne){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[c&(1<<n.lenbits)-1],H=S>>>24,G=S>>>16&255,ie=65535&S,!(H<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(ie<16)c>>>=H,u-=H,n.lens[n.have++]=ie;else{if(16===ie){for(Ae=H+2;u<Ae;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(c>>>=H,u-=H,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}Ee=n.lens[n.have-1],p=3+(3&c),c>>>=2,u-=2}else if(17===ie){for(Ae=H+3;u<Ae;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=H,u-=H,Ee=0,p=3+(7&c),c>>>=3,u-=3}else{for(Ae=H+7;u<Ae;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=H,u-=H,Ee=0,p=11+(127&c),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;p--;)n.lens[n.have++]=Ee}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,De={bits:n.lenbits},Ne=nh(1,n.lens,0,n.nlen,n.lencode,0,n.work,De),n.lenbits=De.bits,Ne){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,De={bits:n.distbits},Ne=nh(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,De),n.distbits=De.bits,Ne){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,t===Jd)break e;case 20:n.mode=21;case 21:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,BW(e,d),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,c=n.hold,u=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;S=n.lencode[c&(1<<n.lenbits)-1],H=S>>>24,G=S>>>16&255,ie=65535&S,!(H<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(G&&0==(240&G)){for(q=H,ge=G,Re=ie;S=n.lencode[Re+((c&(1<<q+ge)-1)>>q)],H=S>>>24,G=S>>>16&255,ie=65535&S,!(q+H<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=q,u-=q,n.back+=q}if(c>>>=H,u-=H,n.back+=H,n.length=ie,0===G){n.mode=26;break}if(32&G){n.back=-1,n.mode=12;break}if(64&G){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&G,n.mode=22;case 22:if(n.extra){for(Ae=n.extra;u<Ae;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;S=n.distcode[c&(1<<n.distbits)-1],H=S>>>24,G=S>>>16&255,ie=65535&S,!(H<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(0==(240&G)){for(q=H,ge=G,Re=ie;S=n.distcode[Re+((c&(1<<q+ge)-1)>>q)],H=S>>>24,G=S>>>16&255,ie=65535&S,!(q+H<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=q,u-=q,n.back+=q}if(c>>>=H,u-=H,n.back+=H,64&G){e.msg="invalid distance code",n.mode=30;break}n.offset=ie,n.extra=15&G,n.mode=24;case 24:if(n.extra){for(Ae=n.extra;u<Ae;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break e;if(p=d-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}p>n.wnext?(p-=n.wnext,b=n.wsize-p):b=n.wnext-p,p>n.length&&(p=n.length),N=n.window}else N=i,b=o-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{i[o++]=N[b++]}while(--p);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;i[o++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===a)break e;a--,c|=r[s++]<<u,u+=8}if(d-=l,e.total_out+=d,n.total+=d,d&&(e.adler=n.check=n.flags?zn(n.check,i,d,o-d):Wu(n.check,i,d,o-d)),d=l,(n.flags?c:dT(c))!==n.check){e.msg="incorrect data check",n.mode=30;break}c=0,u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}c=0,u=0}n.mode=29;case 29:Ne=YW;break e;case 30:Ne=jA;break e;case 31:return $A;case 32:default:return ei}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||d!==e.avail_out&&n.mode<30&&(n.mode<27||t!==VA))&&wT(e,e.output,e.next_out,d-e.avail_out),f-=e.avail_in,d-=e.avail_out,e.total_in+=f,e.total_out+=d,n.total+=d,n.wrap&&d&&(e.adler=n.check=n.flags?zn(n.check,i,d,e.next_out-d):Wu(n.check,i,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===f&&0===d||t===VA)&&Ne===oa&&(Ne=WW),Ne},vs_inflateEnd=e=>{if(!e||!e.state)return ei;let t=e.state;return t.window&&(t.window=null),e.state=null,oa},vs_inflateGetHeader=(e,t)=>{if(!e||!e.state)return ei;const n=e.state;return 0==(2&n.wrap)?ei:(n.head=t,t.done=!1,oa)},vs_inflateSetDictionary=(e,t)=>{const n=t.length;let r,i,s;return e&&e.state&&(r=e.state,0===r.wrap||11===r.mode)?11===r.mode&&(i=1,i=Wu(i,t,n,0),i!==r.check)?jA:(s=wT(e,t,n,n),s?(r.mode=31,$A):(r.havedict=1,oa)):ei},mZ=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const bT=Object.prototype.toString,{Z_NO_FLUSH:_Z,Z_FINISH:yZ,Z_OK:rh,Z_STREAM_END:Ty,Z_NEED_DICT:ky,Z_STREAM_ERROR:wZ,Z_DATA_ERROR:vT,Z_MEM_ERROR:bZ}=ta;function ih(e){this.options=Kd_assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new RA,this.strm.avail_out=0;let n=vs_inflateInit2(this.strm,t.windowBits);if(n!==rh)throw new Error(ea[n]);if(this.header=new mZ,vs_inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=eh_string2buf(t.dictionary):"[object ArrayBuffer]"===bT.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=vs_inflateSetDictionary(this.strm,t.dictionary),n!==rh)))throw new Error(ea[n])}function Iy(e,t){const n=new ih(t);if(n.push(e),n.err)throw n.msg||ea[n.err];return n.result}ih.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?yZ:_Z,n.input="[object ArrayBuffer]"===bT.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=vs_inflate(n,o),s===ky&&i&&(s=vs_inflateSetDictionary(n,i),s===rh?s=vs_inflate(n,o):s===vT&&(s=ky));n.avail_in>0&&s===Ty&&n.state.wrap>0&&0!==e[n.next_in];)vs_inflateReset(n),s=vs_inflate(n,o);switch(s){case wZ:case vT:case ky:case bZ:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||s===Ty))if("string"===this.options.to){let l=eh_utf8border(n.output,n.next_out),c=n.next_out-l,u=eh_buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==rh||0!==a){if(s===Ty)return s=vs_inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},ih.prototype.onData=function(e){this.chunks.push(e)},ih.prototype.onEnd=function(e){e===rh&&(this.result="string"===this.options.to?this.chunks.join(""):Kd_flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var SZ={Inflate:ih,inflate:Iy,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Iy(e,t)},ungzip:Iy,constants:ta};const{inflate:FZ}=SZ;var xT=FZ;function zZ(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=xT(t);return new DataView(n.buffer,n.byteOffset,n.byteLength)}const YZ={ignoreImageData:!1,onlyFirst:!1};class GZ extends Vd{constructor(t){super(t),this._nextIFD=0}get isMultiPage(){let t=0;for(this.decodeHeader();this._nextIFD;)if(t++,this.decodeIFD({ignoreImageData:!0},!0),2===t)return!0;if(1===t)return!1;throw xs("ifdCount",t)}get pageCount(){let t=0;for(this.decodeHeader();this._nextIFD;)t++,this.decodeIFD({ignoreImageData:!0},!0);if(t>0)return t;throw xs("ifdCount",t)}decode(t={}){t=Object.assign({},YZ,t);const n=[];for(this.decodeHeader();this._nextIFD;)if(n.push(this.decodeIFD(t,!0)),t.onlyFirst)return[n[0]];return n}decodeHeader(){const t=this.readUint16();if(18761===t)this.setLittleEndian();else{if(19789!==t)throw new Error(`invalid byte order: 0x${t.toString(16)}`);this.setBigEndian()}if(42!==this.readUint16())throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(t,n){let r;if(this.seek(this._nextIFD),n)r=new tA;else{if(!t.kind)throw new Error("kind is missing");r=new qS(t.kind)}const i=this.readUint16();for(let s=0;s<i;s++)this.decodeIFDEntry(r);if(!t.ignoreImageData){if(!(r instanceof tA))throw new Error("must be a tiff ifd");this.decodeImageData(r)}return this._nextIFD=this.readUint32(),r}decodeIFDEntry(t){const n=this.offset,r=this.readUint16(),i=this.readUint16(),s=this.readUint32();if(i<1||i>12)return void this.skip(4);(function(e,t){const n=KS.get(e);if(!n)throw new Error(`type not found: ${e}`);return n[0]*t})(i,s)>4&&this.seek(this.readUint32());const a=function(e,t,n){const r=KS.get(t);if(!r)throw new Error(`type not found: ${t}`);return r[1](e,n)}(this,i,s);if(t.fields.set(r,a),34665===r||34853===r){let l=this.offset,c="exif";34665===r?c="exif":34853===r&&(c="gps"),this._nextIFD=a,t[c]=this.decodeIFD({kind:c,ignoreImageData:!0},!1),this.offset=l}this.seek(n),this.skip(12)}decodeImageData(t){const n=t.orientation;if(n&&1!==n)throw xs("orientation",n);switch(t.type){case 0:case 1:case 2:case 3:this.readStripData(t);break;default:throw xs("image type",t.type)}if(this.applyPredictor(t),this.convertAlpha(t),0===t.type){const i=Math.pow(2,t.bitsPerSample)-1;for(let s=0;s<t.data.length;s++)t.data[s]=i-t.data[s]}}readStripData(t){const n=t.width,i=t.bitsPerSample,s=t.sampleFormat,o=n*t.height*t.samplesPerPixel,a=function(e,t,n){if(8===t)return new Uint8Array(e);if(16===t)return new Uint16Array(e);if(32===t&&3===n)return new Float32Array(e);throw xs("bit depth / sample format",`${t} / ${n}`)}(o,i,s),c=t.rowsPerStrip*n*t.samplesPerPixel,u=t.stripOffsets,f=t.stripByteCounts;let d=o,p=0;for(let b=0;b<u.length;b++){let N=new DataView(this.buffer,u[b],f[b]),S=d>c?c:d;d-=S;let H=N;switch(t.compression){case 1:break;case 5:H=ZY(N);break;case 8:H=zZ(N);break;case 2:throw xs("Compression","CCITT Group 3");case 32773:throw xs("Compression","PackBits");default:throw xs("Compression",t.compression)}p=this.fillUncompressed(i,s,a,H,p,S)}t.data=a}fillUncompressed(t,n,r,i,s,o){if(8===t)return function(e,t,n,r){for(let i=0;i<r;i++)e[n++]=t.getUint8(i);return n}(r,i,s,o);if(16===t)return function(e,t,n,r,i){for(let s=0;s<2*r;s+=2)e[n++]=t.getUint16(s,i);return n}(r,i,s,o,this.isLittleEndian());if(32===t&&3===n)return function(e,t,n,r,i){for(let s=0;s<4*r;s+=4)e[n++]=t.getFloat32(s,i);return n}(r,i,s,o,this.isLittleEndian());throw xs("bitDepth",t)}applyPredictor(t){const n=t.bitsPerSample;switch(t.predictor){case 1:break;case 2:if(8===n)!function(e,t,n){let r=0;for(;r<e.length;){for(let i=n;i<t*n;i+=n)for(let s=0;s<n;s++)e[r+i+s]=e[r+i+s]+e[r+i-(n-s)]&255;r+=t*n}}(t.data,t.width,t.components);else{if(16!==n)throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${n}`);!function(e,t,n){let r=0;for(;r<e.length;){for(let i=n;i<t*n;i+=n)for(let s=0;s<n;s++)e[r+i+s]=e[r+i+s]+e[r+i-(n-s)]&65535;r+=t*n}}(t.data,t.width,t.components)}break;default:throw new Error(`invalid predictor: ${t.predictor}`)}}convertAlpha(t){if(t.alpha&&t.associatedAlpha){const{data:n,components:r,maxSampleValue:i}=t;for(let s=0;s<n.length;s+=r){const o=n[s+r-1];for(let a=0;a<r-1;a++)n[s+a]=Math.round(n[s+a]*i/o)}}}}function xs(e,t){return new Error(`Unsupported ${e}: ${t}`)}function QZ(e={}){let{algorithm:t="matchToPrevious",ignoreBorder:n=[0,0]}=e;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let r="matchToPrevious"===t,i=this[0],s=[];s[0]={position:[0,0],image:this[0]};let o=[0,0];for(let d=1;d<this.length;d++){let p=i.getBestMatch(this[d],{border:n});s[d]={position:[p[0]+o[0],p[1]+o[1]],image:this[d]},r&&(o[0]+=p[0],o[1]+=p[1],i=this[d])}let a=0,l=0,c=0,u=0;for(let d=0;d<s.length;d++){let p=s[d];p.position[0]>a&&(a=p.position[0]),p.position[0]<l&&(l=p.position[0]),p.position[1]>c&&(c=p.position[1]),p.position[1]<u&&(u=p.position[1])}l=0-l,u=0-u;for(let d=0;d<s.length;d++){let p=s[d];p.crop=p.image.crop({x:a-p.position[0],y:c-p.position[1],width:i.width-l-a,height:i.height-u-c})}let f=[];for(let d=0;d<s.length;d++)f[d]=s[d].crop;return new br(f)}function JZ(){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].min;for(let t=1;t<this.length;t++)for(let n=0;n<e.length;n++)e[n]=Math.min(e[n],this[t].min[n]);return e}function eq(){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].max;for(let t=1;t<this.length;t++)for(let n=0;n<e.length;n++)e[n]=Math.max(e[n],this[t].max[n]);return e}function ET(e){let t=e.reduce((o,a)=>o+a);if(0===t)throw new Error("unreachable");let s,n=0,r=0,i=t/2;for(;;){if(e[n]>0){if(void 0!==s)return(s+n)/2;if(r+=e[n],r>i)return n;r===i&&(s=n)}n++}}function tq(e){let t=0,n=0;for(let r=0;r<e.length;r++)t+=e[r],n+=e[r]*r;return 0===t?0:n/t}function nq(){this.checkProcessable("median",{bitDepth:[8,16]});let e=this.getHistograms({maxSlots:this[0].maxValue+1}),t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=ET(e[n]);return t}function rq(e){this.checkProcessable("min",{bitDepth:[8,16]});let t=this[0].getHistogram(e);for(let n=1;n<this.length;n++){let r=this[n].getHistogram(e);for(let i=0;i<t.length;i++)t[i]+=r[i]}return t}function iq(e){this.checkProcessable("min",{bitDepth:[8,16]});let t=this[0].getHistograms(e),n=t[0].length;for(let r=1;r<this.length;r++){let i=this[r].getHistograms(e);for(let s=0;s<t.length;s++)for(let o=0;o<n;o++)t[s][o]+=i[s][o]}return t}function DT(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let e=new Uint32Array(this[0].data.length);for(let r=0;r<this.length;r++){let i=this[r];for(let s=0;s<this[0].data.length;s++)e[s]+=i.data[s]}let t=Ke.createFrom(this[0]),n=t.data;for(let r=0;r<this[0].data.length;r++)n[r]=e[r]/this.length;return t}function sq(){this.checkProcessable("max",{bitDepth:[8,16]});let e=Ke.createFrom(this[0]);e.data.fill(0);for(const t of this)for(let n=0;n<e.data.length;n++)e.data[n]=Math.max(t.data[n],e.data[n]);return e}function oq(){this.checkProcessable("max",{bitDepth:[8,16]});let e=Ke.createFrom(this[0]);e.data.fill(e.maxValue);for(const t of this)for(let n=0;n<e.data.length;n++)e.data[n]=Math.min(t.data[n],e.data[n]);return e}let CT={configurable:!0,enumerable:!1,get:void 0};class br extends Array{constructor(t){if(Array.isArray(t)){super(t.length);for(let n=0;n<t.length;n++)this[n]=t[n]}else"number"==typeof t?super(t):super();this.computed=null}static load(t){return Promise.all(t.map(Ke.load)).then(n=>new br(n))}static extendMethod(t,n,r={}){let{inPlace:i=!1,returnThis:s=!0,partialArgs:o=[]}=r;return br.prototype[t]=i?function(...a){this.computed=null;let l=n.apply(this,[...o,...a]);return s?this:l}:function(...a){return n.apply(this,[...o,...a])},br}static extendProperty(t,n,r={}){let{partialArgs:i=[]}=r;return CT.get=function(){if(null===this.computed)this.computed={};else if(jS()(t,this.computed))return this.computed[t];let s=n.apply(this,i);return this.computed[t]=s,s},Object.defineProperty(br.prototype,t,CT),br}checkProcessable(t,n={}){if("string"!=typeof t)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw new TypeError(`The process: ${t} can not be applied on an empty stack`);this[0].checkProcessable(t,n);for(let r=1;r<this.length;r++){if((void 0===n.sameSize||n.sameSize)&&this[0].width!==this[r].width)throw new TypeError(`The process: ${t} can not be applied if width is not identical in all images`);if((void 0===n.sameSize||n.sameSize)&&this[0].height!==this[r].height)throw new TypeError(`The process: ${t} can not be applied if height is not identical in all images`);if((void 0===n.sameAlpha||n.sameAlpha)&&this[0].alpha!==this[r].alpha)throw new TypeError(`The process: ${t} can not be applied if alpha is not identical in all images`);if((void 0===n.sameBitDepth||n.sameBitDepth)&&this[0].bitDepth!==this[r].bitDepth)throw new TypeError(`The process: ${t} can not be applied if bitDepth is not identical in all images`);if((void 0===n.sameColorModel||n.sameColorModel)&&this[0].colorModel!==this[r].colorModel)throw new TypeError(`The process: ${t} can not be applied if colorModel is not identical in all images`);if((void 0===n.sameNumberChannels||n.sameNumberChannels)&&this[0].channels!==this[r].channels)throw new TypeError(`The process: ${t} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(br.prototype.map=function(e,t){if("function"!=typeof e)throw new TypeError(`${e} is not a function`);let n=new br(this.length);for(let r=0;r<this.length;r++)n[r]=e.call(t,this[r],r,this);return n}),function(e){e.extendMethod("matchAndCrop",QZ),e.extendMethod("getMin",JZ),e.extendMethod("getMax",eq),e.extendMethod("getMedian",nq),e.extendMethod("getHistogram",rq),e.extendMethod("getHistograms",iq),e.extendMethod("getAverage",DT),e.extendMethod("getAverageImage",DT),e.extendMethod("getMaxImage",sq),e.extendMethod("getMinImage",oq)}(br);const lq=/^data:[a-z]+\/(?:[a-z]+);base64,/;function Ry(e,t){const n=CY()(e);if(n)switch(n.mime){case"image/png":return function(e){const t=function(e,t){return new Rz(e,void 0).decode()}(e);let r,n=t.channels,i=0;return 2===n||4===n?(r=n-1,i=1):r=n,t.palette?function(e){const t=e.width*e.height,n=e.palette[0].length,r=new Uint8Array(t*n),i=8/e.depth,s=e.depth<8?i:1,o=parseInt("1".repeat(e.depth),2),a=4===n;let l=0;for(let c=0;c<t;c++){const u=Math.floor(c/s);let f=e.data[u];e.depth<8&&(f=f>>>e.depth*(i-1-c%i)&o);const d=e.palette[f];r[l++]=d[0],r[l++]=d[1],r[l++]=d[2],a&&(r[l++]=d[3])}return new Ke(e.width,e.height,r,{components:3,alpha:a,bitDepth:8})}(t):new Ke(t.width,t.height,t.data,{components:r,alpha:i,bitDepth:t.depth})}(e);case"image/jpeg":return function(e){const t=(0,EY.decode)(e);let n;t.exif&&(n=Fy(t.exif));const r=(0,LS.decode)(e,{useTArray:!0,maxMemoryUsageInMB:1024});let i=new Ke(r.width,r.height,r.data,{meta:n});if(n&&n.tiff.tags.Orientation){const s=n.tiff.tags.Orientation;s>2&&(i=i.rotate({3:180,4:180,5:90,6:90,7:270,8:270}[s])),[2,4,5,7].includes(s)&&(i=i.flipX())}return i}(e);case"image/tiff":return function(e){let t=function(e,t){return new GZ(e).decode(void 0)}(e);return 1===t.length?MT(t[0]):new br(t.map(MT))}(e);default:return ST(r(n.mime))}return ST(r("application/octet-stream"));function r(i){return t||BS(e,i)}}function Fy(e){const t={tiff:{fields:e.fields,tags:e.map}};return e.exif&&(t.exif=e.exif),e.gps&&(t.gps=e.gps),t}function MT(e){if(3===e.type){const t=new Uint16Array(3*e.width*e.height),n=e.palette;let r=0;for(let i=0;i<e.data.length;i++){const o=n[e.data[i]];t[r++]=o[0],t[r++]=o[1],t[r++]=o[2]}return new Ke(e.width,e.height,t,{components:3,alpha:e.alpha,colorModel:kr,bitDepth:16,meta:Fy(e)})}return new Ke(e.width,e.height,e.data,{components:2===e.type?3:1,alpha:e.alpha,colorModel:2===e.type?kr:Ci,bitDepth:e.bitsPerSample.length?e.bitsPerSample[0]:e.bitsPerSample,meta:Fy(e)})}function ST(e,t){return t=t||{},new Promise(function(n,r){let i=new Xz;i.onload=function(){let s=i.width,o=i.height,l=US(s,o).getContext("2d");l.drawImage(i,0,0,s,o);let c=l.getImageData(0,0,s,o).data;n(new Ke(s,o,c,t))},i.onerror=function(){r(new Error(`Could not load ${e}`))},i.src=e})}const AT={getValueXY(e,t,n){return this.data[(t*this.width+e)*this.channels+n]},setValueXY(e,t,n,r){return this.data[(t*this.width+e)*this.channels+n]=r,this.computed=null,this},getValue(e,t){return this.data[e*this.channels+t]},setValue(e,t,n){return this.data[e*this.channels+t]=n,this.computed=null,this},getPixelXY(e,t){return this.getPixel(t*this.width+e)},setPixelXY(e,t,n){return this.setPixel(t*this.width+e,n)},getPixel(e){const t=new Array(this.channels),n=e*this.channels;for(let r=0;r<this.channels;r++)t[r]=this.data[n+r];return t},setPixel(e,t){const n=e*this.channels;for(let r=0;r<t.length;r++)this.data[n+r]=t[r];return this.computed=null,this}};function Py(e){return{width:e.width,height:e.height,components:e.components,alpha:e.alpha,colorModel:e.colorModel,bitDepth:e.bitDepth}}function TT(e,t,n,r={}){const{out:i}=t;if(void 0===i)return r.copy?e.clone():Ke.createFrom(e,n);{if(!Ke.isImage(i))throw new TypeError("out must be an Image object");const s=Object.assign(Py(e),n);for(const o in s)if(i[o]!==s[o])throw new RangeError(`cannot use out. Its ${o} must be "${s[o]}" (found "${i[o]}")`);return i}}function Oy(e,t,n){if(void 0!==t.inPlace&&"boolean"!=typeof t.inPlace)throw new TypeError("inPlace option must be a boolean");if(t.inPlace){if(void 0!==t.out)throw new TypeError("out option must not be set if inPlace option is true");return e}return TT(e,t,null,n)}function mq(e={}){this.checkProcessable("abs",{bitDepth:[32]});const t=Oy(this,e);return function(e,t){for(let n=0;n<e.data.length;n++)t.data[n]=Math.abs(e.data[n])}(this,t),t}function wq(e={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});const t=Oy(this,e);return 1===this.bitDepth?function(e,t){for(let n=0;n<e.data.length;n++)t.data[n]=~e.data[n]}(this,t):(function(e,t){for(let n=0;n<e.data.length;n+=e.channels)for(let r=0;r<e.components;r++)t.data[n+r]=e.maxValue-e.data[n+r]}(this,t),this!==t&&function(e,t){if(1===e.alpha&&1===t.alpha)for(let n=0;n<e.size;n++)t.data[n*t.channels+t.components]=e.data[n*e.channels+e.components]}(this,t)),t}function xq(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let e=0;e<this.height;e++){let t=e*this.width*this.channels;for(let n=0;n<Math.floor(this.width/2);n++){let r=n*this.channels+t,i=(this.width-n-1)*this.channels+t;for(let s=0;s<this.channels;s++){let o=this.data[r+s];this.data[r+s]=this.data[i+s],this.data[i+s]=o}}}return this}function Eq(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let e=0;e<Math.floor(this.height/2);e++)for(let t=0;t<this.width;t++){let n=t*this.channels+e*this.width*this.channels,r=t*this.channels+(this.height-1-e)*this.channels*this.width;for(let i=0;i<this.channels;i++){let s=this.data[n+i];this.data[n+i]=this.data[r+i],this.data[r+i]=s}}return this}function Dq(e={}){const{radius:t=1}=e;if(t<1)throw new Error("radius must be greater than 1");const n=2*t+1,r=new Array(n);for(let i=0;i<n;i++){r[i]=new Array(n);for(let s=0;s<n;s++)r[i][s]=1/(n*n)}return this.convolution(r)}var Cq=T(2407),Mq=T.n(Cq);function Xi(e,t={}){let{channels:n,allowAlpha:r,defaultAlpha:i}=t;return"boolean"!=typeof r&&(r=!0),void 0===n?function(e,t){let n=t?e.channels:e.components,r=new Array(n);for(let i=0;i<n;i++)r[i]=i;return r}(e,i):function(e,t,n){Array.isArray(t)||(t=[t]);for(let r=0;r<t.length;r++)t[r]=Ny(e,t[r],n);return t}(e,n,r)}function Ny(e,t,n=!0){if(void 0===t)throw new RangeError(`validateChannel : the channel has to be >=0 and <${e.channels}`);if("string"==typeof t){switch(e.colorModel){case Ci:break;case kr:if("rgb".includes(t))switch(t){case"r":t=0;break;case"g":t=1;break;case"b":t=2}break;case ny:if("hsl".includes(t))switch(t){case"h":t=0;break;case"s":t=1;break;case"l":t=2}break;case ry:if("hsv".includes(t))switch(t){case"h":t=0;break;case"s":t=1;break;case"v":t=2}break;case Vu:if("cmyk".includes(t))switch(t){case"c":t=0;break;case"m":t=1;break;case"y":t=2;break;case"k":t=3}break;default:throw new Error(`Unexpected color model: ${e.colorModel}`)}if("a"===t){if(!e.alpha)throw new Error("validateChannel : the image does not contain alpha channel");t=e.components}if("string"==typeof t)throw new Error(`validateChannel : undefined channel: ${t}`)}if(t>=e.channels)throw new RangeError(`validateChannel : the channel has to be >=0 and <${e.channels}`);if(!n&&t>=e.components)throw new RangeError("validateChannel : alpha channel may not be selected");return t}function Tq(e={}){let{radius:t=1,border:n="copy",channels:r}=e;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),t<1)throw new Error("radius must be greater than 0");r=Xi(this,r);let i=t,s=t,o=Ke.createFrom(this),l=new Array((2*i+1)*(2*s+1));for(let c=0;c<r.length;c++){let u=r[c];for(let f=s;f<this.height-s;f++)for(let d=i;d<this.width-i;d++){let p=0;for(let N=-s;N<=s;N++)for(let S=-i;S<=i;S++)l[p++]=this.data[((f+N)*this.width+d+S)*this.channels+u];o.data[(f*this.width+d)*this.channels+u]=Mq()(l)}}if(this.alpha&&!r.includes(this.channels))for(let c=this.components;c<this.data.length;c+=this.channels)o.data[c]=this.data[c];return o.setBorder({size:[i,s],algorithm:n}),o}function kq(e={}){let{radius:t=1,sigma:n,channels:r,border:i="copy"}=e;this.checkProcessable("gaussian",{bitDepth:[8,16]});const s=function(e,t){const n=2*e+1,r=new Array(n),i=t||.3*(.5*(n-1)-1)+.8,s=-.5/(i*i);let o=0;for(let a=0;a<n;a++){const l=a-e,c=Math.exp(s*l*l);r[a]=c,o+=c}for(let a=0;a<n;a++)r[a]/=o;return r}(t,n);return this.convolution([s,s],{border:i,channels:r,algorithm:"separable"})}const Rq=[[-1,0,1],[-2,0,2],[-1,0,1]],Fq=[[-1,-2,-1],[0,0,0],[1,2,1]],Pq=[[3,0,-3],[10,0,-10],[3,0,-3]],Oq=[[3,10,3],[0,0,0],[-3,-10,-3]];var kT=T(6613),Nq=T(8653),IT=T.n(Nq);function Ly(e,t){return Math.round(Math.min(Math.max(e,0),t.maxValue))}function RT(e,t,n){void 0===n&&(n=new Array(e.length+t.length-1)),function(e){for(var t=0;t<e.length;t++)e[t]=0}(n);for(var r=0;r<e.length;r++)for(var i=0;i<t.length;i++)n[r+i]+=e[r]*t[i];return n}function Uq(e,t,n,r){const i=new Array(e.length);let s,o,a,l;l=t[1],a=(l.length-1)/2,o=new Array(n+l.length-1),s=new Array(n);for(let c=0;c<r;c++){for(let u=0;u<n;u++)s[u]=e[c*n+u];RT(s,l,o);for(let u=0;u<n;u++)i[c*n+u]=o[a+u]}l=t[0],a=(l.length-1)/2,o=new Array(r+l.length-1),s=new Array(r);for(let c=0;c<n;c++){for(let u=0;u<r;u++)s[u]=i[u*n+c];RT(s,l,o);for(let u=0;u<r;u++)i[u*n+c]=o[a+u]}return i}T(5638),T(3769);var PT=T(9007);function sh(e,t={}){let{channels:n,bitDepth:r,normalize:i=!1,divisor:s=1,border:o="copy",algorithm:a="auto"}=t,l={};r&&(l.bitDepth=r);let u,f,c=Ke.createFrom(this,l);if(n=Xi(this,n),"separable"!==a)({kernel:e}=function(e){let t,n;if(!Array.isArray(e))throw new Error(`validateKernel: Invalid Kernel: ${e}`);if(Array.isArray(e[0])){if(0==(1&e.length)||0==(1&e[0].length))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");t=Math.floor(e.length/2),n=Math.floor(e[0].length/2)}else{let r=Math.sqrt(e.length);if(!IT()(r))throw new RangeError("validateKernel: Kernel array should be a square");n=t=Math.floor(Math.sqrt(e.length)/2);let i=new Array(r);for(let s=0;s<r;s++){i[s]=new Array(r);for(let o=0;o<r;o++)i[s][o]=e[s*r+o]}e=i}return{kernel:e,kWidth:n,kHeight:t}}(e));else if(!Array.isArray(e)||2!==e.length)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if("auto"===a){let q=function(e){const t=new PT.Z(e,{autoTranspose:!0});if(1!==t.rank)return null;const n=Math.sqrt(t.s[0]);return[t.U.to2DArray().map(s=>s[0]*n),t.V.to2DArray().map(s=>s[0]*n)]}(e);null!==q?(a="separable",e=q):a=(e.length>9||e[0].length>9)&&this.width<=4096&&this.height<=4096?"fft":"direct"}"separable"===a?(u=Math.floor(e[0].length/2),f=Math.floor(e[1].length/2)):(u=Math.floor(e.length/2),f=Math.floor(e[0].length/2));let b,N,S,H,G,ie,d=c.isClamped,p=new Array(this.height*this.width);for(H=0;H<n.length;H++){for(G=n[H],S=0;S<this.height;S++)for(N=0;N<this.width;N++)b=S*this.width+N,p[b]=this.data[b*this.channels+G];if("direct"===a)ie=(0,kT.direct)(p,e,{rows:this.height,cols:this.width,normalize:i,divisor:s});else if("separable"===a){if(ie=Uq(p,e,this.width,this.height),i){s=0;for(let q=0;q<e[0].length;q++)for(let ge=0;ge<e[1].length;ge++)s+=e[0][q]*e[1][ge]}if(1!==s)for(let q=0;q<ie.length;q++)ie[q]/=s}else ie=(0,kT.fft)(p,e,{rows:this.height,cols:this.width,normalize:i,divisor:s});for(S=0;S<this.height;S++)for(N=0;N<this.width;N++)b=S*this.width+N,c.data[b*this.channels+G]=d?Ly(ie[b],c):ie[b]}if(this.alpha&&!n.includes(this.channels))for(N=this.components;N<this.data.length;N+=this.channels)c.data[N]=this.data[N];return"periodic"!==o&&c.setBorder({size:[f,u],algorithm:o}),c}function By(e={}){let{direction:t="xy",border:n="copy",kernelX:r,kernelY:i,channels:s,bitDepth:o=this.bitDepth}=e;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),t){case"x":if(!r)throw new Error("kernelX option is missing");return sh.call(this,r,{channels:s,border:n,bitDepth:o});case"y":if(!i)throw new Error("kernelY option is missing");return sh.call(this,i,{channels:s,border:n,bitDepth:o});case"xy":{if(!r)throw new Error("kernelX option is missing");if(!i)throw new Error("kernelY option is missing");const a=sh.call(this,r,{channels:s,border:n,bitDepth:32}),l=sh.call(this,i,{channels:s,border:n,bitDepth:32});return a.hypotenuse(l,{bitDepth:o,channels:s})}default:throw new Error(`Unknown parameter direction: ${t}`)}}function jq(e){return By.call(this,Object.assign({},e,{kernelX:Rq,kernelY:Fq}))}function $q(e){return By.call(this,Object.assign({},e,{kernelX:Pq,kernelY:Oq}))}var Hq=T(1812),Qi=T.n(Hq);function zq(e={}){let{algorithm:t="range",channels:n,min:r=this.min,max:i=this.max}=e;switch(this.checkProcessable("level",{bitDepth:[8,16,32]}),n=Xi(this,{channels:n}),n.length!==this.channel&&(Array.isArray(r)&&r.length===this.channels&&(r=r.filter((s,o)=>n.includes(o))),Array.isArray(i)&&i.length===this.channels&&(i=i.filter((s,o)=>n.includes(o)))),t){case"range":r<0&&(r=0),i>this.maxValue&&(i=this.maxValue),Array.isArray(r)||(r=Qi()(n.length,r)),Array.isArray(i)||(i=Qi()(n.length,i)),function(e,t,n,r){let i=1e-5,s=new Array(r.length);for(let o=0;o<r.length;o++)s[o]=0===t[o]&&n[o]===e.maxValue||n[o]===t[o]?0:(e.maxValue+1-i)/(n[o]-t[o]),t[o]+=(.5-i/2)/s[o];for(let o=0;o<r.length;o++){let a=r[o];if(0!==s[o])for(let l=0;l<e.data.length;l+=e.channels)e.data[l+a]=Math.min(Math.max(0,(e.data[l+a]-t[o])*s[o]+.5|0),e.maxValue)}}(this,r,i,n);break;default:throw new Error(`level: algorithm not implement: ${t}`)}return this}var Gq=T(275),Wq=T.n(Gq);function rp(e){if(isNaN(e)){if(e instanceof Ke)return e.data;if(!Wq()(e))throw new Error("checkNumberArray: the value should be either a number, array or Image");return e}if(e<=0)throw new Error("checkNumberArray: the value must be greater than 0");return e}function Zq(e,t={}){let{channels:n}=t;if(this.checkProcessable("add",{bitDepth:[8,16]}),n=Xi(this,{channels:n}),e=rp(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("add: the data size is different");for(let r=0;r<n.length;r++){let i=n[r];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+i]=Math.max(0,Math.min(this.maxValue,this.data[s+i]+e[s+i]>>0))}}else for(let r=0;r<n.length;r++){let i=n[r];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+i]=Math.min(this.maxValue,this.data[s+i]+e>>0)}return this}function qq(e,t={}){let{channels:n}=t;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),n=Xi(this,{channels:n}),e=rp(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("subtract: the data size is different");for(let r=0;r<n.length;r++){let i=n[r];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+i]=Math.max(0,Math.min(this.maxValue,this.data[s+i]-e[s+i]>>0))}}else for(let r=0;r<n.length;r++){let i=n[r];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+i]=Math.max(0,this.data[s+i]-e>>0)}return this}function Kq(e,t={}){let{channels:n,absolute:r=!1}=t;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==e.width||this.height!==e.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==e.alpha||this.bitDepth!==e.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==e.channels)throw new Error("subtractImage: both images must have the same number of channels");let i=this.clone();n=Xi(this,{channels:n});for(let s=0;s<n.length;s++)for(let a=n[s];a<this.data.length;a+=this.channels){let l=this.data[a]-e.data[a];i.data[a]=r?Math.abs(l):Math.max(l,0)}return i}function Xq(e,t={}){let{bitDepth:n=this.bitDepth,channels:r}=t;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==e.width||this.height!==e.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==e.alpha||this.bitDepth!==e.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==e.channels)throw new Error("hypotenuse: both images must have the same number of channels");let i=Ke.createFrom(this,{bitDepth:n});r=Xi(this,{channels:r});let s=i.isClamped;for(let o=0;o<r.length;o++)for(let l=r[o];l<this.data.length;l+=this.channels){let c=Math.hypot(this.data[l],e.data[l]);i.data[l]=s?Math.min(Math.max(Math.round(c),0),i.maxValue):c}return i}function Qq(e,t={}){let{channels:n}=t;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),e<=0)throw new Error("multiply: the value must be greater than 0");if(n=Xi(this,{channels:n}),e=rp(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("multiply: the data size is different");for(let r=0;r<n.length;r++){let i=n[r];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+i]=Math.max(0,Math.min(this.maxValue,this.data[s+i]*e[s+i]>>0))}}else for(let r=0;r<n.length;r++){let i=n[r];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+i]=Math.min(this.maxValue,this.data[s+i]*e>>0)}return this}function Jq(e,t={}){let{channels:n}=t;if(this.checkProcessable("divide",{bitDepth:[8,16]}),n=Xi(this,{channels:n}),e=rp(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("divide: the: the data size is different");for(let r=0;r<n.length;r++){let i=n[r];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+i]=Math.max(0,Math.min(this.maxValue,this.data[s+i]/e[s+i]>>0))}}else for(let r=0;r<n.length;r++){let i=n[r];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+i]=Math.min(this.maxValue,this.data[s+i]/e>>0)}return this}var oh=T(2128);class ah{constructor(){if(new.target===ah)throw new Error("BaseRegression must be subclassed")}predict(t){if("number"==typeof t)return this._predict(t);if((0,oh.Z)(t)){const n=[];for(let r=0;r<t.length;r++)n.push(this._predict(t[r]));return n}throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(t,n){if(!(0,oh.Z)(t)||!(0,oh.Z)(n)||t.length!==n.length)throw new Error("x and y must be arrays of the same length");const r=t.length,i=new Array(r);for(let p=0;p<r;p++)i[p]=this._predict(t[p]);let s=0,o=0,a=0,l=0,c=0,u=0,f=0;for(let p=0;p<r;p++)s+=i[p],o+=n[p],c+=i[p]*i[p],u+=n[p]*n[p],f+=i[p]*n[p],0!==n[p]&&(a+=(n[p]-i[p])*(n[p]-i[p])/n[p]),l+=(n[p]-i[p])*(n[p]-i[p]);const d=(r*f-s*o)/Math.sqrt((r*c-s*s)*(r*u-o*o));return{r:d,r2:d*d,chi2:a,rmsd:Math.sqrt(l/r)}}}var ti=T(9690),ip=(T(4395),T(565)),nK=T(4582),NT=T.n(nK);const rK={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class jy extends ah{constructor(t,n,r){if(super(),!0===t)this.alpha=n.alpha,this.inputs=n.inputs,this.kernelType=n.kernelType,this.kernelOptions=n.kernelOptions,this.kernel=new(NT())(n.kernelType,n.kernelOptions);else{t=ti.Z.checkMatrix(t),r=Object.assign({},rK,r);const i=new(NT())(r.kernelType,r.kernelOptions),s=i.compute(t),o=t.rows;s.add(ti.Z.eye(o,o).mul(r.lambda)),this.alpha=(0,ip.F)(s,n),this.inputs=t,this.kernelType=r.kernelType,this.kernelOptions=r.kernelOptions,this.kernel=i}}_predict(t){return this.kernel.compute([t],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(t){if("kernelRidgeRegression"!==t.name)throw new TypeError("not a KRR model");return new jy(!0,t)}}function oK(e,t,n){const r=new jy(e,t,n),i=new Array(this.size);for(let a=0;a<this.width;a++)for(let l=0;l<this.height;l++)i[l*this.width+a]=[a,l];const s=r.predict(i),o=Ke.createFrom(this);for(let a=0;a<this.size;a++)o.data[a]=Math.min(this.maxValue,Math.max(0,s[a][0]));return o}function aK(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),t.columns%2==0||t.rows%2==0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");let r=!0;e:for(const s of t)for(const o of s)if(1!==o){r=!1;break e}let i=this;for(let s=0;s<n;s++)if(1===this.bitDepth)if(r){const o=i.clone();i=hK(i,o,t.length,t[0].length)}else i=uK(i,Ke.createFrom(i),t);else i=r?cK(i,Ke.createFrom(i),t.length,t[0].length):lK(i,Ke.createFrom(i),t);return i}function lK(e,t,n){const r=n.length,i=n[0].length;let s=(r-1)/2,o=(i-1)/2;for(let a=0;a<e.height;a++)for(let l=0;l<e.width;l++){let c=0;for(let u=0;u<i;u++)for(let f=0;f<r;f++){if(1!==n[f][u])continue;let d=f-s+l,p=u-o+a;if(d<0||p<0||d>=e.width||p>=e.height)continue;const b=e.getValueXY(d,p,0);b>c&&(c=b)}t.setValueXY(l,a,0,c)}return t}function cK(e,t,n,r){const i=(n-1)/2,s=(r-1)/2,o=[];for(let a=0;a<e.width;a++)o.push(0);for(let a=0;a<e.height;a++){for(let l=0;l<e.width;l++){let c=0;for(let u=Math.max(0,a-s);u<Math.min(e.height,a+s+1);u++){const f=e.getValueXY(l,u,0);f>c&&(c=f)}o[l]=c}for(let l=0;l<e.width;l++){let c=0;for(let u=Math.max(0,l-i);u<Math.min(e.width,l+i+1);u++)o[u]>c&&(c=o[u]);t.setValueXY(l,a,0,c)}}return t}function uK(e,t,n){const r=n.length,i=n[0].length;let s=(r-1)/2,o=(i-1)/2;for(let a=0;a<e.height;a++)for(let l=0;l<e.width;l++){let c=0;e:for(let u=0;u<i;u++)for(let f=0;f<r;f++){if(1!==n[f][u])continue;let d=f-s+l,p=u-o+a;if(!(p<0||d<0||d>=e.width||p>=e.height)&&1===e.getBitXY(d,p)){c=1;break e}}1===c&&t.setBitXY(l,a)}return t}function hK(e,t,n,r){const i=(n-1)/2,s=(r-1)/2,o=[];for(let a=0;a<e.width;a++)o.push(1);for(let a=0;a<e.height;a++){for(let l=0;l<e.width;l++){o[l]=0;for(let c=Math.max(0,a-s);c<Math.min(e.height,a+s+1);c++)if(1===e.getBitXY(l,c)){o[l]=1;break}}for(let l=0;l<e.width;l++)if(1!==t.getBitXY(l,a))for(let c=Math.max(0,l-i);c<Math.min(e.width,l+i+1);c++)if(1===o[c]){t.setBitXY(l,a);break}}return t}function fK(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),t.columns%2==0||t.rows%2==0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");let r=!0;e:for(const s of t)for(const o of s)if(1!==o){r=!1;break e}let i=this;for(let s=0;s<n;s++)if(1===this.bitDepth)if(r){const o=i.clone();i=mK(i,o,t.length,t[0].length)}else i=gK(i,Ke.createFrom(i),t);else i=r?pK(i,Ke.createFrom(i),t.length,t[0].length):dK(i,Ke.createFrom(i),t);return i}function dK(e,t,n){const r=n.length,i=n[0].length;let s=(r-1)/2,o=(i-1)/2;for(let a=0;a<e.height;a++)for(let l=0;l<e.width;l++){let c=e.maxValue;for(let u=0;u<i;u++)for(let f=0;f<r;f++){if(1!==n[f][u])continue;let d=f-s+l,p=u-o+a;if(d<0||p<0||d>=e.width||p>=e.height)continue;const b=e.getValueXY(d,p,0);b<c&&(c=b)}t.setValueXY(l,a,0,c)}return t}function pK(e,t,n,r){const i=(n-1)/2,s=(r-1)/2,o=[];for(let a=0;a<e.width;a++)o.push(0);for(let a=0;a<e.height;a++){for(let l=0;l<e.width;l++){let c=e.maxValue;for(let u=Math.max(0,a-s);u<Math.min(e.height,a+s+1);u++){const f=e.getValueXY(l,u,0);f<c&&(c=f)}o[l]=c}for(let l=0;l<e.width;l++){let c=e.maxValue;for(let u=Math.max(0,l-i);u<Math.min(e.width,l+i+1);u++)o[u]<c&&(c=o[u]);t.setValueXY(l,a,0,c)}}return t}function gK(e,t,n){const r=n.length,i=n[0].length;let s=(r-1)/2,o=(i-1)/2;for(let a=0;a<e.height;a++)for(let l=0;l<e.width;l++){let c=1;e:for(let u=0;u<i;u++)for(let f=0;f<r;f++){if(1!==n[f][u])continue;let d=f-s+l,p=u-o+a;if(!(p<0||d<0||d>=e.width||p>=e.height)&&0===e.getBitXY(d,p)){c=0;break e}}1===c&&t.setBitXY(l,a)}return t}function mK(e,t,n,r){const i=(n-1)/2,s=(r-1)/2,o=[];for(let a=0;a<e.width;a++)o.push(0);for(let a=0;a<e.height;a++){for(let l=0;l<e.width;l++){o[l]=1;for(let c=Math.max(0,a-s);c<Math.min(e.height,a+s+1);c++)if(0===e.getBitXY(l,c)){o[l]=0;break}}for(let l=0;l<e.width;l++)if(0!==t.getBitXY(l,a))for(let c=Math.max(0,l-i);c<Math.min(e.width,l+i+1);c++)if(0===o[c]){t.clearBitXY(l,a);break}}return t}function _K(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),t.columns%2==0||t.rows%2==0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");let r=this;for(let i=0;i<n;i++)r=r.erode({kernel:t}),r=r.dilate({kernel:t});return r}function yK(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),t.columns%2==0||t.rows%2==0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");let r=this;for(let i=0;i<n;i++)r=r.dilate({kernel:t}).erode({kernel:t});return r}function wK(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),t.length%2==0||t[0].length%2==0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");let r=this;for(let i=0;i<n;i++)r=r.open({kernel:t}).subtractImage(r,{absolute:!0});return r}function bK(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),t.columns%2==0||t.rows%2==0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");let r=this;for(let i=0;i<n;i++)r=r.close({kernel:t}).subtractImage(r,{absolute:!0});return r}function vK(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),t.columns%2==0||t.rows%2==0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let r=this;for(let i=0;i<n;i++){let s=r.dilate({kernel:t}),o=r.erode({kernel:t});r=s.subtractImage(o,{absolute:!0})}return r}function so(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function sp(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function jl(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function DK(e,t,n,r,i,s,o,a,l,c,u,f){let[d,p]=[(n*e+r*t+i)/(l*e+c*t+1),(s*e+o*t+a)/(l*e+c*t+1)];return u.getValueXY(Math.floor(d),Math.floor(p),f)}function CK(e,t={}){let{calculateRatio:n=!0}=t;if(4!==e.length)throw new Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${e.length} elements`);let d,p,[r,i,s,o]=e,a=[r,i,s,o],[l,c,u,f]=function(e){let t=0,n=0,r=0,i=0,s=e[0][0],o=0;for(let c=1;c<e.length;c++)e[c][0]<s&&(s=e[c][0],o=c);let a=e[(o+1)%e.length][0],l=(o+1)%e.length;for(let c=1;c<e.length;c++)e[c][0]<a&&c!==o&&(a=e[c][0],l=c);return e[l][1]<e[o][1]?(t=e[l],i=e[o],o!==(l+1)%4?(n=e[(l+1)%4],r=e[(l+2)%4]):(n=e[(l+2)%4],r=e[(l+3)%4])):(i=e[l],t=e[o],l!==(o+1)%4?(n=e[(o+1)%4],r=e[(o+2)%4]):(n=e[(o+2)%4],r=e[(o+3)%4])),[t,n,r,i]}(a);n?[d,p]=function(e,t,n,r,i,s){let o=Math.max(so(e,t),so(r,n)),a=Math.max(so(e,r),so(t,n)),l=0,c=0,u=Math.ceil(i/2),f=Math.ceil(s/2),d=o/a,p=[e[0],e[1],1],b=[t[0],t[1],1],N=[r[0],r[1],1],S=[n[0],n[1],1],H=jl(sp(p,S),N)/jl(sp(b,S),N),G=jl(sp(p,S),b)/jl(sp(N,S),b),ie=[H*b[0]-p[0],H*b[1]-p[1],H*b[2]-p[2]],q=[G*N[0]-p[0],G*N[1]-p[1],G*N[2]-p[2]],ge=ie[0],Re=ie[1],Ee=ie[2],Ne=q[0],Ie=q[1],De=q[2],Ae=1/(Ee*De)*(ge*Ne-(ge*De+Ee*Ne)*u+Ee*De*u*u+(Re*Ie-(Re*De+Ee*Ie)*f+Ee*De*f*f));Ae=Ae>=0?Math.sqrt(Ae):Math.sqrt(-Ae);let at=new ti.Z([[Ae,0,u],[0,Ae,f],[0,0,1]]),Dt=at.transpose(),Vt=(0,ip.S)(Dt),_t=(0,ip.S)(at),We=ti.Z.rowVector(ie),nt=ti.Z.rowVector(q),ht=Math.sqrt(jl(We.mmul(Vt).mmul(_t).to1DArray(),ie)/jl(nt.mmul(Vt).mmul(_t).to1DArray(),q));return 0===ht||0===d?(l=Math.ceil(o),c=Math.ceil(a)):ht<d?(l=Math.ceil(o),c=Math.ceil(l/ht)):(c=Math.ceil(a),l=Math.ceil(ht*c)),[l,c]}(l,c,u,f,this.width,this.height):(d=Math.ceil(Math.max(so(l,c),so(f,u))),p=Math.ceil(Math.max(so(l,f),so(c,u))));let b=Ke.createFrom(this,{width:d,height:p}),[N,S]=l,[H,G]=c,[ie,q]=u,[ge,Re]=f,[Ee,Ne]=[0,0],[Ie,De]=[0,d-1],[Ae,at]=[p-1,d-1],[Dt,Vt]=[p-1,0],_t=new ti.Z([[Ee,Ne,1,0,0,0,-Ee*N,-Ne*N],[Ie,De,1,0,0,0,-Ie*H,-De*H],[Ae,at,1,0,0,0,-Ae*ie,-Ne*ie],[Dt,Vt,1,0,0,0,-Dt*ge,-Vt*ge],[0,0,0,Ee,Ne,1,-Ee*S,-Ne*S],[0,0,0,Ie,De,1,-Ie*G,-De*G],[0,0,0,Ae,at,1,-Ae*q,-at*q],[0,0,0,Dt,Vt,1,-Dt*Re,-Vt*Re]]),We=ti.Z.columnVector([N,H,ie,ge,S,G,q,Re]),ht=new PT.Z(_t).solve(We),[Lt,In,ii,ur,ts,fn,P1,si]=ht.to1DArray(),uo=new ti.Z(p,d);for(let Ds=0;Ds<this.channels;Ds++){for(let oi=0;oi<p;oi++)for(let ho=0;ho<d;ho++)uo.set(oi,ho,DK(oi,ho,Lt,In,ii,ur,ts,fn,P1,si,this,Ds));b.setMatrix(uo,{channel:Ds})}return b}function MK(e={}){let{x:t=0,y:n=0,width:r=this.width-t,height:i=this.height-n}=e;if(this.checkProcessable("max",{bitDepth:[8,16]}),t=Math.round(t),n=Math.round(n),r=Math.round(r),i=Math.round(i),t>this.width-1||n>this.height-1)throw new RangeError(`crop: origin (x:${t}, y:${n}) out of range (${this.width-1}; ${this.height-1})`);if(r<=0||i<=0)throw new RangeError(`crop: width and height (width:${r}; height:${i}) must be positive numbers`);if(t<0||n<0)throw new RangeError(`crop: x and y (x:${t}, y:${n}) must be positive numbers`);if(r>this.width-t||i>this.height-n)throw new RangeError(`crop: (x: ${t}, y:${n}, width:${r}, height:${i}) size is out of range`);let s=Ke.createFrom(this,{width:r,height:i,position:[t,n]}),o=r*this.channels,a=n+i,l=0,c=t*this.channels;for(let u=n;u<a;u++){let f=u*this.width*this.channels+c,d=f+o;for(;f<d;f++)s.data[l++]=this.data[f]}return s}function SK(e={}){this.checkProcessable("cropAlpha",{alpha:1});const{threshold:t=this.maxValue}=e;let n=function(e,t,n){for(let r=0;r<e.width;r++)for(let i=0;i<e.height;i++)if(e.getValueXY(r,i,n)>=t)return r;return-1}(this,t,this.components);if(-1===n)throw new Error("Could not find new dimensions. Threshold may be too high.");let r=function(e,t,n,r){for(let i=0;i<e.height;i++)for(let s=r;s<e.width;s++)if(e.getValueXY(s,i,n)>=t)return i;return-1}(this,t,this.components,n),i=function(e,t,n,r){for(let i=e.height-1;i>=0;i--)for(let s=r;s<e.width;s++)if(e.getValueXY(s,i,n)>=t)return i;return-1}(this,t,this.components,n),s=function(e,t,n,r,i,s){for(let o=e.width-1;o>=r;o--)for(let a=i;a<=s;a++)if(e.getValueXY(o,a,n)>=t)return o;return-1}(this,t,this.components,n,r,i);return this.crop({x:n,y:r,width:s-n+1,height:i-r+1})}function VT(e,t){if(t<0||t>=e.channels)throw new RangeError(`channel must be included between 0 and ${e.channels-1}. Current value: ${t}`)}const aa={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function jT(e){if("string"!=typeof e)throw new TypeError("interpolation must be a string");if(e=e.toLowerCase(),!aa[e])throw new RangeError(`invalid interpolation algorithm: ${e}`);return aa[e]}function LK(e,t,n){const r=this.width/t,i=this.height/n;if(this.bitDepth>1)for(let s=0;s<t;s++){const o=Math.floor((s+.5)*r);for(let a=0;a<n;a++){const l=Math.floor((a+.5)*i);for(let c=0;c<this.channels;c++)e.setValueXY(s,a,c,this.getValueXY(o,l,c))}}else for(let s=0;s<t;s++){const o=Math.floor((s+.5)*r);for(let a=0;a<n;a++){const l=Math.floor((a+.5)*i);this.getBitXY(o,l)&&e.setBitXY(s,a)}}}function $T(e={}){const{factor:t=1,interpolation:n=aa.nearestneighbor,preserveAspectRatio:r=!0}=e,i=jT(n);let s=e.width,o=e.height;if(s||(s=o&&r?Math.round(o*(this.width/this.height)):this.width),o||(o=r?Math.round(s*(this.height/this.width)):this.height),({width:s,height:o}=function(e,t,n){e=function(e){if("string"==typeof e){const t=e[e.length-1];e=parseFloat(e),"%"===t&&(e/=100)}return e}(e);let r=Math.round(e*t),i=Math.round(e*n);return r<=0&&(r=1),i<=0&&(i=1),{width:r,height:i}}(t,s,o)),s===this.width&&o===this.height){const u=this.clone();return u.position=[0,0],u}let a=Math.round((this.width-s)/2),l=Math.round((this.height-o)/2);const c=Ke.createFrom(this,{width:s,height:o,position:[a,l]});switch(i){case aa.nearestneighbor:LK.call(this,c,s,o);break;default:throw new Error(`unsupported resize interpolation: ${i}`)}return c}function BK(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[kr]});let e=Ke.createFrom(this,{colorModel:ry}),t=0,n=this.data;for(let r=0;r<n.length;r+=this.channels){let i=n[r],s=n[r+1],o=n[r+2],a=Math.min(i,s,o),l=Math.max(i,s,o),c=l-a,u=0,f=0===l?0:c/l,d=l;if(l!==a){switch(l){case i:u=(s-o)/c+(s<o?6:0);break;case s:u=(o-i)/c+2;break;case o:u=(i-s)/c+4;break;default:throw new Error("unreachable")}u/=6}e.data[t++]=u*this.maxValue,e.data[t++]=f*this.maxValue,e.data[t++]=d,this.alpha&&(e.data[t++]=n[r+3])}return e}function UK(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[kr]});let e=Ke.createFrom(this,{colorModel:ny}),t=Math.floor(this.maxValue/2),n=0,r=this.data;for(let i=0;i<r.length;i+=this.channels){let s=r[i],o=r[i+1],a=r[i+2],l=Math.max(s,o,a),c=Math.min(s,o,a),u=0,f=0,d=(l+c)/2;if(l!==c){let p=l-c;switch(f=d>t?p/(2-l-c):p/(l+c),l){case s:u=(o-a)/p+(o<a?6:0);break;case o:u=(a-s)/p+2;break;case a:u=(s-o)/p+4;break;default:throw new Error("unreachable")}u/=6}e.data[n++]=u*this.maxValue,e.data[n++]=f*this.maxValue,e.data[n++]=d,this.alpha&&(e.data[n++]=r[i+3])}return e}function VK(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[kr]});let e=Ke.createFrom(this,{components:4,colorModel:Vu}),t=0,n=this.data;for(let r=0;r<n.length;r+=this.channels){let i=n[r],s=n[r+1],o=n[r+2],a=Math.min(this.maxValue-i,this.maxValue-s,this.maxValue-o),c=(this.maxValue-s-a)/(1-a/this.maxValue),u=(this.maxValue-o-a)/(1-a/this.maxValue);e.data[t++]=Math.round((this.maxValue-i-a)/(1-a/this.maxValue)),e.data[t++]=Math.round(c),e.data[t++]=Math.round(u),e.data[t++]=Math.round(a),this.alpha&&(e.data[t++]=n[r+3])}return e}function jK(){return new Ke(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}const Cn={luma709:(e,t,n)=>6966*e+23436*t+2366*n>>15,luma601:(e,t,n)=>9798*e+19235*t+3735*n>>15,maximum:(e,t,n)=>Math.max(e,t,n),minimum:(e,t,n)=>Math.min(e,t,n),average:(e,t,n)=>(e+t+n)/3>>0,minmax:(e,t,n)=>(Math.max(e,t,n)+Math.min(e,t,n))/2,red:e=>e,green:(e,t)=>t,blue:(e,t,n)=>n,cyan(e,t,n,r){let i=Cn.black(e,t,n,r);return(r.maxValue-e-i)/(1-i/r.maxValue)>>0},magenta(e,t,n,r){let i=Cn.black(e,t,n,r);return(r.maxValue-t-i)/(1-i/r.maxValue)>>0},yellow(e,t,n,r){let i=Cn.black(e,t,n,r);return(r.maxValue-n-i)/(1-i/r.maxValue)>>0},black:(e,t,n,r)=>Math.min(r.maxValue-e,r.maxValue-t,r.maxValue-n),hue(e,t,n,r){let i=Cn.min(e,t,n),s=Cn.max(e,t,n);if(s===i)return 0;let o=0,a=s-i;switch(s){case e:o=(t-n)/a+(t<n?6:0);break;case t:o=(n-e)/a+2;break;case n:o=(e-t)/a+4;break;default:throw new Error("unreachable")}return o/6*r.maxValue>>0},saturation(e,t,n,r){let i=Cn.min(e,t,n),s=Cn.max(e,t,n);return 0===s?0:(s-i)/s*r.maxValue},lightness(e,t,n){let r=Cn.min(e,t,n);return(Cn.max(e,t,n)+r)/2}};Object.defineProperty(Cn,"luminosity",{enumerable:!1,value:Cn.lightness}),Object.defineProperty(Cn,"luminance",{enumerable:!1,value:Cn.lightness}),Object.defineProperty(Cn,"min",{enumerable:!1,value:Cn.minimum}),Object.defineProperty(Cn,"max",{enumerable:!1,value:Cn.maximum}),Object.defineProperty(Cn,"brightness",{enumerable:!1,value:Cn.maximum});const HT={};function zT(e={}){let{algorithm:t="luma709",keepAlpha:n=!1,mergeAlpha:r=!0}=e;if("string"!=typeof t&&"function"!=typeof t)throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),1===this.components&&(t="red"),n&=this.alpha,r&=this.alpha,n&&(r=!1);let s,i=TT(this,e,{components:1,alpha:n,colorModel:Ci});if("function"==typeof t)s=t;else if(s=Cn[t.toLowerCase()],!s)throw new Error(`unsupported grey algorithm: ${t}`);let o=0;for(let a=0;a<this.data.length;a+=this.channels)r?i.data[o++]=Ly(s(this.data[a],this.data[a+1],this.data[a+2],this)*this.data[a+this.components]/this.maxValue,this):(i.data[o++]=Ly(s(this.data[a],this.data[a+1],this.data[a+2],this),this),i.alpha&&(i.data[o++]=this.data[a+this.components]));return i}function zK(e){let t=!1,n=0;for(let r=1;r<e.length-1;r++)if(e[r-1]<e[r]&&e[r+1]<e[r]&&(n++,n>2))return!1;return 2===n&&(t=!0),t}function YT(e,t){let n=0;for(let r=0;r<=t;r++)n+=e[r];return n}function GT(e,t){let n=0;for(let r=0;r<=t;r++)n+=r*e[r];return n}function WT(e,t){let n=0;for(let r=0;r<=t;r++)n+=r*r*e[r];return n}function XK(e){let t=new Array(e.length);for(let n=1;n<e.length-1;n++)t[n]=(e[n-1]+e[n]+e[n+1])/3;return t[0]=(e[0]+e[1])/3,t[e.length-1]=(e[e.length-2]+e[e.length-1])/3,t}function JK(e){let t=e.length,n=!1,r=0;for(let i=1;i<t-1;i++)if(e[i-1]<e[i]&&e[i+1]<e[i]&&(r++,r>2))return!1;return 2===r&&(n=!0),n}function ZT(e,t){let n=0;for(let r=0;r<=t;r++)n+=e[r];return n}Object.keys(Cn).forEach(e=>{HT[e]=e});const qT={huang:function(e){let t=0;for(let u=0;u<e.length;u++)if(0!==e[u]){t=u;break}let n=e.length-1;for(let u=e.length-1;u>=t;u--)if(0!==e[u]){n=u;break}let r=1/(n-t),i=new Array(e.length),s=0,o=0;for(let u=t;u<e.length;u++)s+=u*e[u],o+=e[u],i[u]=s/o;let a=new Array(e.length);s=o=0;for(let u=n;u>0;u--)s+=u*e[u],o+=e[u],a[u-1]=s/o;let l=-1,c=Number.MAX_VALUE;for(let u=0;u<e.length;u++){let d,f=0;for(let p=0;p<=u;p++)d=1/(1+r*Math.abs(p-i[u])),d<1e-6||d>.999999||(f+=e[p]*(-d*Math.log(d)-(1-d)*Math.log(1-d)));for(let p=u+1;p<e.length;p++)d=1/(1+r*Math.abs(p-a[u])),d<1e-6||d>.999999||(f+=e[p]*(-d*Math.log(d)-(1-d)*Math.log(1-d)));f<c&&(c=f,l=u)}return l},intermodes:function(e){let t=e.slice(),n=0;for(;!zK(t);){let i=0,s=0,o=t[0];for(let a=0;a<e.length-1;a++)i=s,s=o,o=t[a+1],t[a]=(i+s+o)/3;if(t[e.length-1]=(s+o)/3,n++,n>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}let r=0;for(let i=1;i<e.length-1;i++)t[i-1]<t[i]&&t[i+1]<t[i]&&(r+=i);return Math.floor(r/2)},isodata:function(e){let t,n,r,i,s=0;for(let o=1;o<e.length;o++)if(e[o]>0){s=o+1;break}for(;;){t=0,r=0;for(let o=0;o<s;o++)r+=e[o],t+=e[o]*o;i=0,n=0;for(let o=s+1;o<e.length;o++)n+=e[o],i+=e[o]*o;if(r>0&&n>0&&(t/=r,i/=n,s===Math.round((t+i)/2)))break;if(s++,s>e.length-2)throw new Error("Threshold not found")}return s},li:function(e,t){let n,r,i,s,o,a,l,c,u,f,d,p;d=.5,f=0;for(let b=0;b<e.length;b++)f+=b*e[b];f/=t,l=f;do{a=l,n=a+.5|0,r=0,s=0;for(let b=0;b<=n;b++)r+=b*e[b],s+=e[b];c=0===s?0:r/s,i=0,o=0;for(let b=n+1;b<e.length;b++)i+=b*e[b],o+=e[b];u=0===o?0:i/o,p=(c-u)/(Math.log(c)-Math.log(u)),l=p<-Number.EPSILON?p-.5|0:p+.5|0}while(Math.abs(l-a)>.5);return n},maxentropy:function(e,t){let n=new Array(e.length);for(let d=0;d<e.length;d++)n[d]=e[d]/t;let r=new Array(e.length),i=new Array(e.length);r[0]=n[0],i[0]=1-r[0];for(let d=1;d<e.length;d++)r[d]=r[d-1]+n[d],i[d]=1-r[d];let s=0;for(let d=0;d<e.length;d++)if(Math.abs(r[d])>=Number.EPSILON){s=d;break}let o=e.length-1;for(let d=e.length-1;d>=s;d--)if(Math.abs(i[d])>=Number.EPSILON){o=d;break}let l,u,f,a=-1,c=Number.MIN_VALUE;for(let d=s;d<=o;d++){u=0;for(let p=0;p<=d;p++)0!==e[p]&&(u-=n[p]/r[d]*Math.log(n[p]/r[d]));f=0;for(let p=d+1;p<e.length;p++)0!==e[p]&&(f-=n[p]/i[d]*Math.log(n[p]/i[d]));l=u+f,c<l&&(c=l,a=d)}return a},mean:function(e,t){let n=0;for(let r=0;r<e.length;r++)n+=r*e[r];return Math.floor(n/t)},minerror:function(e,t){let n,i,s,o,a,l,c,u,f,d,p,b,r=-2,N=0;for(let S=0;S<e.length;S++)N+=S*e[S];for(N/=t,n=N;n!==r;){let S=YT(e,n),H=YT(e,e.length-1),G=GT(e,n),ie=GT(e,e.length-1),q=WT(e,n);if(i=G/S,s=(ie-G)/(H-S),o=S/H,a=(H-S)/H,l=q/S-i*i,c=(WT(e,e.length-1)-q)/(H-S)-s*s,u=1/l-1/c,f=i/l-s/c,d=i*i/l-s*s/c+Math.log10(l*(a*a)/(c*(o*o))),p=f*f-u*d,p<0)return n;r=n,b=(f+Math.sqrt(p))/u,n=isNaN(b)?r:Math.floor(b)}return n},minimum:function(e){if(e.length<2)return 0;let t=0,n=-1,r=-1,i=new Array(e.length);for(let s=0;s<e.length;s++)i[s]=e[s],e[s]>0&&(r=s);for(;!JK(i);)if(i=XK(i),t++,t>1e4)return n;return n=function(e,t){let n;for(let r=1;r<t;r++)if(e[r-1]>e[r]&&e[r+1]>=e[r]){n=r;break}return n}(i,r),n},moments:function(e,t){let a,l,c,u,f,d,r=0,i=0,s=0,o=0,p=-1,b=e.length,N=new Array(b);for(let S=0;S<b;S++)N[S]=e[S]/t;for(let S=0;S<b;S++)r+=S*N[S],i+=S*S*N[S],s+=S*S*S*N[S];l=1*i-r*r,c=(-i*i+r*s)/l,u=(1*-s+i*r)/l,f=.5*(-u-Math.sqrt(u*u-4*c)),d=.5*(-u+Math.sqrt(u*u-4*c)),a=(d-r)/(d-f);for(let S=0;S<b;S++)if(o+=N[S],o>a){p=S;break}return p},otsu:function(e,t){let n=0,r=0,i=0,s=0,o=0;for(let a=0;a<e.length;a++)o+=a*e[a];for(let a=0;a<e.length;a++){r+=e[a];const l=t-r;if(0===r||0===l)continue;n+=a*e[a];const c=(o-n)/l,u=r*l*(n/r-c)*(n/r-c);u>=i&&(s=a,i=u)}return s},percentile:function(e){let t=-1,r=new Array(e.length),i=ZT(e,e.length-1),s=1;for(let o=0;o<e.length;o++)r[o]=Math.abs(ZT(e,o)/i-.5),r[o]<s&&(s=r[o],t=o);return t},renyientropy:function(e,t){let n,r,i,s=new Array(e.length),o=new Array(e.length),a=new Array(e.length),l=0,c=0,u=0,f=0,d=0,p=0;for(let ge=0;ge<e.length;ge++)s[ge]=e[ge]/t;o[0]=s[0],a[0]=1-o[0];for(let ge=1;ge<e.length;ge++)o[ge]=o[ge-1]+s[ge],a[ge]=1-o[ge];r=0;for(let ge=0;ge<e.length;ge++)if(Math.abs(o[ge])>=Number.EPSILON){r=ge;break}i=e.length-1;for(let ge=e.length-1;ge>=r;ge--)if(Math.abs(a[ge])>=Number.EPSILON){i=ge;break}for(let ge=r;ge<=i;ge++){let Re=0,Ee=0,Ne=0;for(let _t=0;_t<=ge;_t++)0!==e[_t]&&(Re-=s[_t]/o[ge]*Math.log(s[_t]/o[ge])),Ee+=Math.sqrt(s[_t]/o[ge]),Ne+=s[_t]*s[_t]/(o[ge]*o[ge]);let Ie=0,De=0,Ae=0;for(let _t=ge+1;_t<e.length;_t++)0!==e[_t]&&(Ie-=s[_t]/a[ge]*Math.log(s[_t]/a[ge])),De+=Math.sqrt(s[_t]/a[ge]),Ae+=s[_t]*s[_t]/(a[ge]*a[ge]);let at=Re+Ie,Dt=2*(Ee*De>0?Math.log(Ee*De):0),Vt=-1*(Ne*Ae>0?Math.log(Ne*Ae):0);at>f&&(f=at,l=ge),Dt>d&&(d=Dt,c=ge),Vt>p&&(p=Vt,u=ge)}let ie,G=[l,c,u];G.sort((ge,Re)=>ge-Re),ie=Math.abs(G[0]-G[1])<=5?Math.abs(G[1]-G[2])<=5?[1,2,1]:[0,1,3]:Math.abs(G[1]-G[2])<=5?[3,1,0]:[1,2,1];let q=o[G[2]]-o[G[0]];return n=Math.round(G[0]*(o[G[0]]+.25*q*ie[0])+.25*G[1]*q*ie[1]+G[2]*(a[G[2]]+.25*q*ie[2])),n},shanbhag:function(e,t){let n=new Array(e.length);for(let p=0;p<e.length;p++)n[p]=e[p]/t;let r=new Array(e.length),i=new Array(e.length);r[0]=n[0],i[0]=1-r[0];for(let p=1;p<e.length;p++)r[p]=r[p-1]+n[p],i[p]=1-r[p];let s=0;for(let p=0;p<e.length;p++)if(Math.abs(r[p])>=Number.EPSILON){s=p;break}let o=e.length-1;for(let p=e.length-1;p>=s;p--)if(Math.abs(i[p])>=Number.EPSILON){o=p;break}let c,u,f,d,a=-1,l=Number.MAX_VALUE;for(let p=s;p<=o;p++){f=0,c=.5/r[p];for(let b=1;b<=p;b++)f-=n[b]*Math.log(1-c*r[b-1]);f*=c,d=0,c=.5/i[p];for(let b=p+1;b<e.length;b++)d-=n[b]*Math.log(1-c*i[b]);d*=c,u=Math.abs(f-d),u<l&&(l=u,a=p)}return a},triangle:function(e){let t=0,n=0,r=0,i=0;for(let f=0;f<e.length;f++)if(e[f]>0){t=f;break}t>0&&t--;for(let f=e.length-1;f>0;f--)if(e[f]>0){i=f;break}i<e.length-1&&i++;for(let f=0;f<e.length;f++)e[f]>n&&(r=f,n=e[f]);let o,a,l,s=!1;if(r-t<i-r){s=!0;let f=0,d=e.length-1;for(;f<d;){let p=e[f];e[f]=e[d],e[d]=p,f++,d--}t=e.length-1-i,r=e.length-1-r}if(t===r)return t;o=e[r],a=t-r,l=Math.sqrt(o*o+a*a),o/=l,a/=l,l=o*t+a*e[t];let c=t,u=0;for(let f=t+1;f<=r;f++){let d=o*f+a*e[f]-l;d>u&&(c=f,u=d)}if(c--,s){let f=0,d=e.length-1;for(;f<d;){let p=e[f];e[f]=e[d],e[d]=p,f++,d--}return e.length-1-c}return c},yen:function(e,t){let n=new Array(e.length);for(let c=0;c<e.length;c++)n[c]=e[c]/t;let r=new Array(e.length);r[0]=n[0];for(let c=1;c<e.length;c++)r[c]=r[c-1]+n[c];let i=new Array(e.length);i[0]=n[0]*n[0];for(let c=1;c<e.length;c++)i[c]=i[c-1]+n[c]*n[c];let s=new Array(e.length);s[e.length-1]=0;for(let c=e.length-2;c>=0;c--)s[c]=s[c+1]+n[c+1]*n[c+1];let l,o=-1,a=Number.MIN_VALUE;for(let c=0;c<e.length;c++)l=-1*(i[c]*s[c]>0?Math.log(i[c]*s[c]):0)+2*(r[c]*(1-r[c])>0?Math.log(r[c]*(1-r[c])):0),l>a&&(a=l,o=c);return o}},$y={};function KT(e={}){let{algorithm:t=$y.otsu}=e;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let n=qT[t.toLowerCase()];if(n)return n(this.getHistogram(),this.size);throw new Error(`unknown thresholding algorithm: ${t}`)}Object.keys(qT).forEach(e=>{$y[e]=e});const XT="threshold";function aX(e={}){let{algorithm:t=XT,threshold:n=.5,useAlpha:r=!0,invert:i=!1}=e;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),n=t===XT?function(e,t){if(!t)throw Error("getThreshold : the maxValue should be specified");if("string"==typeof e){if("%"!==e[e.length-1])throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(e)/100*t}if("number"==typeof e)return e<1?e*t:e;throw Error("getThreshold : the value is not valid")}(n,this.maxValue):KT.call(this,e);let s=new Ke(this.width,this.height,{kind:"BINARY",parent:this}),o=0;if(this.alpha&&r)for(let a=0;a<this.data.length;a+=this.channels){let l=this.data[a]+(this.maxValue-this.data[a])*(this.maxValue-this.data[a+1])/this.maxValue;(i&&l<=n||!i&&l>=n)&&s.setBit(o),o++}else for(let a=0;a<this.data.length;a+=this.channels)(i&&this.data[a]<=n||!i&&this.data[a]>=n)&&s.setBit(o),o++;return s}function cX(e={}){let{size:t=0,algorithm:n="copy",color:r}=e;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===n){if(r.length!==this.channels)throw new Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let l=0;l<r.length;l++)0===r[l]&&(r[l]=.001)}else r=Qi()(this.channels,null);Array.isArray(t)||(t=[t,t]);let i=this.width+2*t[0],s=this.height+2*t[1],o=this.channels,a=Ke.createFrom(this,{width:i,height:s});!function(e,t,n,r){let i=e.width,s=e.height,o=t.width,a=e.channels;for(let l=0;l<i;l++)for(let c=0;c<s;c++)for(let u=0;u<a;u++)t.data[((r+c)*o+n+l)*a+u]=e.data[(c*i+l)*a+u]}(this,a,t[0],t[1]);for(let l=t[0];l<i-t[0];l++)for(let c=0;c<o;c++){let u=r[c]||a.data[(t[1]*i+l)*o+c];for(let f=0;f<t[1];f++)a.data[(f*i+l)*o+c]=u;u=r[c]||a.data[((s-t[1]-1)*i+l)*o+c];for(let f=s-t[1];f<s;f++)a.data[(f*i+l)*o+c]=u}for(let l=0;l<s;l++)for(let c=0;c<o;c++){let u=r[c]||a.data[(l*i+t[0])*o+c];for(let f=0;f<t[0];f++)a.data[(l*i+f)*o+c]=u;u=r[c]||a.data[(l*i+i-t[0]-1)*o+c];for(let f=i-t[0];f<i;f++)a.data[(l*i+f)*o+c]=u}return a}function uX(e=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(e))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===e)return this.clone();let t=Ke.createFrom(this,{bitDepth:e});switch(e){case 8:if(1===this.bitDepth)for(let n=0;n<this.size;n++)this.getBit(n)&&(t.data[n]=255);else for(let n=0;n<this.data.length;n++)t.data[n]=this.data[n]>>8;break;case 16:if(1===this.bitDepth)for(let n=0;n<this.size;n++)this.getBit(n)&&(t.data[n]=65535);else for(let n=0;n<this.data.length;n++)t.data[n]=this.data[n]<<8|this.data[n];break;default:throw new Error("colorDepth conversion unexpected case")}return t}function hX(e,t={}){const{interpolation:n=aa.nearestneighbor,width:r=this.width,height:i=this.height}=t;if("number"!=typeof e)throw new TypeError("degrees must be a number");const s=jT(n),o=e*Math.PI/180,a=Math.floor(Math.abs(r*Math.cos(o))+Math.abs(i*Math.sin(o))),l=Math.floor(Math.abs(i*Math.cos(o))+Math.abs(r*Math.sin(o))),c=Ke.createFrom(this,{width:a,height:l}),u=Math.cos(-o),f=Math.sin(-o);let d=a/2,p=l/2;a%2==0?(d-=.5,l%2==0?p-=.5:p=Math.floor(p)):(d=Math.floor(d),l%2==0?p-=.5:p=Math.floor(p));const b=Math.floor(r/2-d),N=Math.floor(i/2-p);switch(s){case aa.nearestneighbor:return function(e,t,n,r,i,s,o,a){for(let l=0;l<t.width;l+=1)for(let c=0;c<t.height;c+=1)for(let u=0;u<e.channels;u++){let f=Math.round((l-i)*o-(c-s)*a+i)+n,d=Math.round((c-s)*o+(l-i)*a+s)+r;t.setValueXY(l,c,u,f<0||f>=e.width||d<0||d>=e.height?1===e.alpha&&u===e.channels-1?0:e.maxValue:e.getValueXY(f,d,u))}return t}(this,c,b,N,d,p,u,f);case aa.bilinear:return function(e,t,n,r,i,s,o,a){let l=e.width*e.channels;for(let c=0;c<t.height;c++)for(let u=0;u<t.width;u++){let f=(u-i)*o-(c-s)*a+i+n,d=(c-s)*o+(u-i)*a+s+r,p=0|f,b=0|d,N=f-p,S=d-b;for(let H=0;H<e.channels;H++)if(f<0||f>=e.width||d<0||d>=e.height)t.setValueXY(u,c,H,1===e.alpha&&H===e.channels-1?0:e.maxValue);else{let G=(b*e.width+p)*e.channels+H,ie=e.data[G],q=e.data[G+e.channels],ge=e.data[G+l];t.setValueXY(u,c,H,ie+N*(q-ie)+S*(ge-ie)+N*S*(ie-q-ge+e.data[G+l+e.channels])|0)}}return t}(this,c,b,N,d,p,u,f);default:throw new Error(`unsupported rotate interpolation: ${s}`)}}function pX(e,t){if("number"!=typeof e)throw new TypeError("angle must be a number");switch(e<0&&(e=360*Math.ceil(-e/360)+e),e%360){case 0:return this.clone();case 90:return JT.call(this);case 180:return gX.call(this);case 270:return QT.call(this);default:return hX.call(this,e,t)}}function QT(){const e=Ke.createFrom(this,{width:this.height,height:this.width}),t=e.height-1;for(let n=0;n<this.height;n++)for(let r=0;r<this.width;r++)for(let i=0;i<this.channels;i++)e.setValueXY(n,t-r,i,this.getValueXY(r,n,i));return e}function JT(){const e=Ke.createFrom(this,{width:this.height,height:this.width}),t=e.width-1;for(let n=0;n<this.height;n++)for(let r=0;r<this.width;r++)for(let i=0;i<this.channels;i++)e.setValueXY(t-n,r,i,this.getValueXY(r,n,i));return e}function gX(){const e=Ke.createFrom(this),t=e.width-1,n=e.height-1;for(let r=0;r<this.height;r++)for(let i=0;i<this.width;i++)for(let s=0;s<this.channels;s++)e.setValueXY(t-i,n-r,s,this.getValueXY(i,r,s));return e}function mX(e,t={}){const n=Py(e);this.checkProcessable("insert",n);let{x:r=0,y:i=0}=t;const s=Oy(this,t,{copy:!0}),o=Math.min(s.height,i+e.height),a=Math.min(s.width,r+e.width);if(1===s.bitDepth)for(let l=i;l<o;l++)for(let c=r;c<a;c++)e.getBitXY(c-r,l-i)?s.setBitXY(c,l):s.clearBitXY(c,l);else for(let l=i;l<o;l++)for(let c=r;c<a;c++)s.setPixelXY(c,l,e.getPixelXY(c-r,l-i));return s}function _X(e={}){let{size:t=0,algorithm:n="copy",color:r}=e;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===n){if(r.length!==this.channels)throw new Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let a=0;a<r.length;a++)0===r[a]&&(r[a]=.001)}else r=Qi()(this.channels,null);Array.isArray(t)||(t=[t,t]);let i=t[0],s=t[1],o=this.channels;for(let a=i;a<this.width-i;a++)for(let l=0;l<o;l++){let c=r[l]||this.data[(a+this.width*s)*o+l];for(let u=0;u<s;u++)this.data[(u*this.width+a)*o+l]=c;c=r[l]||this.data[(a+this.width*(this.height-s-1))*o+l];for(let u=this.height-s;u<this.height;u++)this.data[(u*this.width+a)*o+l]=c}for(let a=0;a<this.height;a++)for(let l=0;l<o;l++){let c=r[l]||this.data[(a*this.width+i)*o+l];for(let u=0;u<i;u++)this.data[(a*this.width+u)*o+l]=c;c=r[l]||this.data[(a*this.width+this.width-i-1)*o+l];for(let u=this.width-i;u<this.width;u++)this.data[(a*this.width+u)*o+l]=c}return this}function yX(e={}){let{preserveAlpha:t=!0}=e;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return new br([this.clone()]);let n=new br,r=this.data;if(this.alpha&&t)for(let i=0;i<this.components;i++){let s=Ke.createFrom(this,{components:1,alpha:!0,colorModel:Ci}),o=0;for(let a=0;a<r.length;a+=this.channels)s.data[o++]=r[a+i],s.data[o++]=r[a+this.components];n.push(s)}else for(let i=0;i<this.channels;i++){let s=Ke.createFrom(this,{components:1,alpha:!1,colorModel:Ci}),o=0;for(let a=0;a<r.length;a+=this.channels)s.data[o++]=r[a+i];n.push(s)}return n}function wX(e,t={}){let{keepAlpha:n=!1,mergeAlpha:r=!1}=t;n&=this.alpha,r&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),e=Ny(this,e);let i=Ke.createFrom(this,{components:1,alpha:n,colorModel:Ci}),s=0;for(let o=0;o<this.data.length;o+=this.channels)r?i.data[s++]=this.data[o+e]*this.data[o+this.components]/this.maxValue:(i.data[s++]=this.data[o+e],n&&(i.data[s++]=this.data[o+this.components]));return i}function bX(e=vX,t={}){let{mergeAlpha:n=!1,keepAlpha:r=!1}=t;n&=this.alpha,r&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let i=Ke.createFrom(this,{components:1,alpha:r,colorModel:Ci}),s=0;for(let o=0;o<this.size;o++){let a=e(this.getPixel(o));n?i.data[s++]=a*this.data[o*this.channels+this.components]/this.maxValue:(i.data[s++]=a,r&&(i.data[s++]=this.data[o*this.channels+this.components]))}return i}function vX(e){return(e[0]+e[1]+e[2])/3}function xX(e,t){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),t.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),t.width!==this.width||t.height!==this.height)throw new Error("Images must have exactly the same width and height");let n=e=Ny(this,e);for(let r=0;r<t.data.length;r++)this.data[n]=t.data[r],n+=this.channels;return this}function EX(e,t={}){let{shift:n=[0,0],average:r,channels:i,defaultAlpha:s,normalize:o,border:a=[0,0]}=t;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(a)||(a=[a,a]),i=Xi(this,{channels:i,defaultAlpha:s}),this.bitDepth!==e.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==e.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==e.colorModel)throw new Error("Both images must have the same colorModel");void 0===r&&(r=!0);let l=Math.max(a[0],-n[0]),c=Math.min(this.width-a[0],this.width-n[0]),u=Math.max(a[1],-n[1]),f=Math.min(this.height-a[1],this.height-n[1]),d=Qi()(i.length,0);for(let p=0;p<i.length;p++){let b=i[p],N=o?this.sum[b]:Math.max(this.sum[b],e.sum[b]),S=o?e.sum[b]:Math.max(this.sum[b],e.sum[b]);if(0!==N&&0!==S)for(let H=l;H<c;H++)for(let G=u;G<f;G++){let ie=H*this.multiplierX+G*this.multiplierY+b;d[p]+=Math.min(this.data[ie]/N,e.data[ie+n[0]*this.multiplierX+n[1]*this.multiplierY]/S)}}return r?d.reduce((p,b)=>p+b)/d.length:d}function DX(e={}){let{sampling:t=[10,10],painted:n=!1,mask:r}=e;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(t)||(t=[t,t]);const i=t[0],s=t[1],o=[],a=[],l=this.width/i,c=this.height/s;let u=Math.floor(l/2);for(let d=0;d<i;d++){let p=Math.floor(c/2);for(let b=0;b<s;b++){let N=Math.round(u),S=Math.round(p);(!r||r.getBitXY(N,S))&&(o.push([N,S]),a.push(this.getPixelXY(N,S))),p+=c}u+=l}const f={xyS:o,zS:a};return n&&(f.painted=this.rgba8().paintPoints(o)),f}function lh(e,t,n){const r=new Array(e);for(let i=0;i<e;i++)r[i]=new Array(t);if(n)for(let i=0;i<e;i++)for(let s=0;s<t;s++)r[i][s]=n;return r.width=e,r.height=t,Object.setPrototypeOf(r,lh.prototype),r}function CX(e,t={}){let{border:n}=t;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==e.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==e.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==e.colorModel)throw new Error("Both images must have the same colorModel");let r=new lh(e.width,e.height,-1/0),i=Math.floor(e.width/2),s=Math.floor(e.height/2),o=i,a=s,l=!1;for(;!l;){let c=r.localSearch(i,s,-1/0);for(let f=0;f<c.length;f++){let d=c[f],p=this.getSimilarity(e,{border:n,shift:[o-d[0],a-d[1]]});r[d[0]][d[1]]=p}let u=r.localMax(i,s);u.position[0]!==i||u.position[1]!==s?(i=u.position[0],s=u.position[1]):l=!0}return[i-o,s-a]}function MX(e,t=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),function(e,t){if(t<0||t>=e.height)throw new RangeError(`row must be included between 0 and ${e.height-1}. Current value: ${t}`)}(this,e),VT(this,t);let n=new Array(this.width),r=0,i=e*this.width*this.channels+t,s=i+this.width*this.channels;for(let o=i;o<s;o+=this.channels)n[r++]=this.data[o];return n}function SX(e,t=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),function(e,t){if(t<0||t>=e.width)throw new RangeError(`column must be included between 0 and ${e.width-1}. Current value: ${t}`)}(this,e),VT(this,t);let n=new Array(this.height),r=0,i=this.width*this.channels;for(let s=t+e*this.channels;s<this.data.length;s+=i)n[r++]=this.data[s];return n}function AX(e={}){let{channel:t}=e;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===t){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");t=0}let n=new ti.Z(this.height,this.width);for(let r=0;r<this.height;r++)for(let i=0;i<this.width;i++)n.set(r,i,this.getValueXY(i,r,t));return n}function TX(e,t={}){e=new ti.Z(e);let{channel:n}=t;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===n){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");n=0}if(this.width!==e.columns||this.height!==e.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(let r=0;r<this.height;r++)for(let i=0;i<this.width;i++)this.setValueXY(i,r,n,e.get(r,i))}function kX(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let e=new Array(this.size),t=0;for(let n=0;n<this.data.length;n+=this.channels){let r=new Array(this.components);for(let i=0;i<this.components;i++)r[i]=this.data[n+i];e[t++]=r}return e}function IX(e){let t=this,n=t.getClosestCommonParent(e),r=t.getRelativePosition(n,{defaultFurther:!0}),i=ek(t,r),s=e.getRelativePosition(n,{defaultFurther:!0}),o=ek(e,s),a=function(e,t){let n=0,r=0,i=[];for(;n<e.length&&r<t.length;)e[n][0]===t[r][0]&&e[n][1]===t[r][1]?(i.push(e[n]),n++,r++):e[n][0]<t[r][0]||e[n][0]===t[r][0]&&e[n][1]<t[r][1]?n++:r++;return i}(i,o),l={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let c=0;c<a.length;c++){let u=a[c],f=[u[0]-r[0],u[1]-r[1]],d=[u[0]-s[0],u[1]-s[1]],p=t.getBitXY(f[0],f[1]),b=e.getBitXY(d[0],d[1]);1===p&&1===b&&l.commonWhitePixels.push(u)}for(let c=0;c<i.length;c++){let u,f;0!==c&&(u=Math.floor(c/t.width),f=c%t.width),1===t.getBitXY(u,f)&&l.whitePixelsMask1.push(i[c])}for(let c=0;c<o.length;c++){let u=0,f=0;0!==c&&(u=Math.floor(c/e.width),f=c%e.width),1===e.getBitXY(u,f)&&l.whitePixelsMask2.push(o[c])}return l}function ek(e,t){let n=[];for(let r=0;r<e.height;r++)for(let i=0;i<e.width;i++){let s=[r,i];n.push([s[0]+t[0],s[1]+t[1]])}return n}function FX(e){let r,t=tk(this),n=tk(e);if(r=t>=n?nk(this,t):nk(e,n),0===t||0===n)return r;let i=this,s=e;for(;t!==n;)if(t>n){if(i=i.parent,null===i)return r;t-=1}else{if(s=s.parent,null===s)return r;n-=1}for(;i!==s&&null!==i&&null!==s;)if(i=i.parent,s=s.parent,null===i||null===s)return r;return i!==s?r:i}function tk(e){let t=0,n=e;for(;null!=n.parent;)n=n.parent,t++;return t}function nk(e,t){let n=e;for(;t>0;)n=n.parent,t-=1;return n}lh.prototype.localMin=function(e,t){let n=this[e][t],r=[e,t];for(let i=Math.max(0,e-1);i<Math.min(this.length,e+2);i++)for(let s=Math.max(0,t-1);s<Math.min(this[0].length,t+2);s++)this[i][s]<n&&(n=this[i][s],r=[i,s]);return{position:r,value:n}},lh.prototype.localMax=function(e,t){let n=this[e][t],r=[e,t];for(let i=Math.max(0,e-1);i<Math.min(this.length,e+2);i++)for(let s=Math.max(0,t-1);s<Math.min(this[0].length,t+2);s++)this[i][s]>n&&(n=this[i][s],r=[i,s]);return{position:r,value:n}},lh.prototype.localSearch=function(e,t,n){let r=[];for(let i=Math.max(0,e-1);i<Math.min(this.length,e+2);i++)for(let s=Math.max(0,t-1);s<Math.min(this[0].length,t+2);s++)this[i][s]===n&&r.push([i,s]);return r};const PX={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},OX=[[-1,0,1],[-2,0,2],[-1,0,1]],NX=[[-1,-2,-1],[0,0,0],[1,2,1]],rk={bitDepth:32,mode:"periodic"};function BX(e){return function(e,t){e.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),t=Object.assign({},PX,t);const n=e.width,r=e.height,i=e.maxValue,o=e.gaussianFilter({sigma:t.gaussianBlur,radius:3}),a=o.convolution(NX,rk),l=o.convolution(OX,rk),c=l.hypotenuse(a),u=e.constructor,f=new u(n,r,{kind:"GREY",bitDepth:32}),d=new u(n,r,{kind:"GREY",bitDepth:32}),p=new u(n,r,{kind:"GREY"});for(var b=1;b<n-1;b++)for(var N=1;N<r-1;N++){var S=(Math.round(Math.atan2(l.getValueXY(b,N,0),a.getValueXY(b,N,0))*(5/Math.PI))+5)%5;0===S&&(c.getValueXY(b,N,0)<=c.getValueXY(b,N-1,0)||c.getValueXY(b,N,0)<=c.getValueXY(b,N+1,0))||1===S&&(c.getValueXY(b,N,0)<=c.getValueXY(b-1,N+1,0)||c.getValueXY(b,N,0)<=c.getValueXY(b+1,N-1,0))||2===S&&(c.getValueXY(b,N,0)<=c.getValueXY(b-1,N,0)||c.getValueXY(b,N,0)<=c.getValueXY(b+1,N,0))||3===S&&(c.getValueXY(b,N,0)<=c.getValueXY(b-1,N-1,0)||c.getValueXY(b,N,0)<=c.getValueXY(b+1,N+1,0))||f.setValueXY(b,N,0,c.getValueXY(b,N,0))}for(b=0;b<n*r;++b){var H=f.data[b],G=0;H>t.highThreshold&&(G++,p.data[b]=i),H>t.lowThreshold&&G++,d.data[b]=G}var ie=[];for(b=1;b<n-1;++b)for(N=1;N<r-1;++N)if(1===d.getValueXY(b,N,0))e:for(var q=b-1;q<b+2;++q)for(var ge=N-1;ge<N+2;++ge)if(2===d.getValueXY(q,ge,0)){ie.push([b,N]),p.setValueXY(b,N,0,i);break e}for(;ie.length>0;){var Re=[];for(b=0;b<ie.length;++b)for(N=-1;N<2;++N)for(q=-1;q<2;++q)if(0!==N||0!==q){var Ee=ie[b][0]+N,Ne=ie[b][1]+q;1===d.getValueXY(Ee,Ne,0)&&0===p.getValueXY(Ee,Ne,0)&&(Re.push([Ee,Ne]),p.setValueXY(Ee,Ne,0,i))}ie=Re}return p}(this,e)}function UX(e,t={}){let{position:n}=t;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!n&&(n=e.getRelativePosition(this),!n))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let r=Ke.createFrom(this,{width:e.width,height:e.height,alpha:1,position:n,parent:this});for(let i=0;i<e.width;i++)for(let s=0;s<e.height;s++){for(let o=0;o<this.channels;o++){let a=this.getValueXY(i+n[0],s+n[1],o);r.setValueXY(i,s,o,a)}e.getBitXY(i,s)||r.setValueXY(i,s,this.components,0)}return r}{let r=Ke.createFrom(this,{width:e.width,height:e.height,position:n,parent:this});for(let i=0;i<e.height;i++)for(let s=0;s<e.width;s++)e.getBitXY(s,i)&&this.getBitXY(s+n[0],i+n[1])&&r.setBitXY(s,i);return r}}var VX=T(1717),jX=T.n(VX);function $X(e={}){const{x:t=0,y:n=0,inPlace:r=!0}=e,i=r?this:Ke.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),this.getBitXY(t,n))return i;const o=new(jX());for(o.push(new ch(t,n));o.length>0;){const a=o.shift();i.setBitXY(a.x,a.y);for(let l=a.x+1;l<this.width&&!i.getBitXY(l,a.y)&&!this.getBitXY(l,a.y);l++)i.setBitXY(l,a.y),a.y+1<this.height&&!this.getBitXY(l,a.y+1)&&o.push(new ch(l,a.y+1)),a.y-1>=0&&!this.getBitXY(l,a.y-1)&&o.push(new ch(l,a.y-1));for(let l=a.x-1;l>=0&&!i.getBitXY(l,a.y)&&!this.getBitXY(l,a.y);l++)i.setBitXY(l,a.y),a.y+1<this.height&&!this.getBitXY(l,a.y+1)&&o.push(new ch(l,a.y+1)),a.y-1>=0&&!this.getBitXY(l,a.y-1)&&o.push(new ch(l,a.y-1))}return i}function ch(e,t){this.x=e,this.y=t}function op(){return(op=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ok(e,t,n){var r=function(e,t,n){return{h:e,s:2*(t*=(n<50?n:100-n)/100)/(n+t)*100,v:n+t}}(e,t,n);return function(e,t,n){var r,i=(n/=100)*(t/=100),s=e/60,o=i*(1-Math.abs(s%2-1)),a=n-i;return r=s>=0&&s<1?[i,o,0]:s>=1&&s<2?[o,i,0]:s>=2&&s<3?[0,i,o]:e>=3&&s<4?[0,o,i]:e>=4&&s<5?[o,0,i]:e>=5&&s<=6?[i,0,o]:[0,0,0],{r:Math.round(255*(r[0]+a)),g:Math.round(255*(r[1]+a)),b:Math.round(255*(r[2]+a))}}(r.h,r.s,r.v)}var ZX={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function ap(e){let t=function(e){return function(e){var t=ZX[e.toLowerCase()];if(t)return{r:t[0],g:t[1],b:t[2],a:100}}(e)||function(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:100}}(e)||function(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:100}}(e)||function(e){var t=e.match(/rgb\(([^)]+)\)/);if(t){var n=t[1].split(/ *, */).map(Number);return{r:n[0],g:n[1],b:n[2],a:100}}}(e)||function(e){var t=e.match(/rgba\(([^)]+)\)/);if(t){var n=t[1].split(/ *, */).map(Number);return{r:n[0],g:n[1],b:n[2],a:100*n[3]}}}(e)||function(e){var t=e.match(/hsl\(([^)]+)\)/);if(t){var n=t[1].split(/ *, */);return op({},ok(parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)),{a:100})}}(e)||function(e){var t=e.match(/hsla\(([^)]+)\)/);if(t){var n=t[1].split(/ *, */),r=parseInt(n[0],10),i=parseInt(n[1],10),s=parseInt(n[2],10),o=parseInt(100*parseFloat(n[3]),10);return op({},ok(r,i,s),{a:o})}}(e)}(e);return[t.r,t.g,t.b,Math.round(255*t.a/100)]}function zy(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function iQ(e,t,n){let r,i,s,o,a,l;return n/=100,0==(t/=100)?o=a=l=255*n:(i=n<=.5?n*(t+1):n+t-n*t,r=2*n-i,s=e/360,o=zy(r,i,s+1/3),a=zy(r,i,s),l=zy(r,i,s-1/3)),{r:o,g:a,b:l}}function lp(e){let{color:t,colors:n,randomColors:r,numberColors:i=50}=e;if(t&&!Array.isArray(t)&&(t=ap(t)),t)return[t];if(n)return n=n.map(function(s){return Array.isArray(s)?s:ap(s)}),n;if(r){n=new Array(i);for(let s=0;s<i;s++)n[s]=[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]}return function(e){let t=new Array(e),n=0;for(let r=0;r<360;r+=360/e){n++;let i=iQ(r,100,30+n%4*15);t[n-1]=[Math.round(255*i.r),Math.round(255*i.g),Math.round(255*i.b)]}return t}(i)}function aQ(e,t,n={}){let{color:r="blue",colors:i,font:s="12px Helvetica",rotate:o=0}=n;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:kr}),!Array.isArray(e))throw Error("paintLabels: labels must be an array");if(!Array.isArray(t))throw Error("paintLabels: positions must be an array");if(r&&!Array.isArray(r)&&(r=ap(r)),i=i?i.map(function(c){return Array.isArray(c)?c:ap(c)}):[r],e.length!==t.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(s)||(s=[s]),Array.isArray(o)||(o=[o]);let l=this.getCanvas().getContext("2d");for(let c=0;c<e.length;c++){l.save();let u=i[c%i.length];l.fillStyle=`rgba(${u[0]},${u[1]},${u[2]},${u[3]/this.maxValue})`,l.font=s[c%s.length];let f=t[c];l.translate(f[0],f[1]),l.rotate(o[c%o.length]/180*Math.PI),l.fillText(e[c],0,0),l.restore()}return this.data=Uint8Array.from(l.getImageData(0,0,this.width,this.height).data),this}function lQ(e,t={}){let{alpha:n=255,labels:r=[],labelsPosition:i=[],labelColor:s="blue",labelFont:o="12px Helvetica"}=t;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:kr});let a=lp(Object.assign({},t,{numberColors:e.length}));Array.isArray(e)||(e=[e]);for(let l=0;l<e.length;l++){let c=e[l],u=a[l%a.length];for(let f=0;f<c.width;f++)for(let d=0;d<c.height;d++)if(c.getBitXY(f,d))for(let p=0;p<Math.min(this.components,u.length);p++)if(255===n)this.setValueXY(f+c.position[0],d+c.position[1],p,u[p]);else{let b=this.getValueXY(f+c.position[0],d+c.position[1],p);b=Math.round((b*(255-n)+u[p]*n)/255),this.setValueXY(f+c.position[0],d+c.position[1],p,b)}}if(Array.isArray(r)&&r.length>0){let c=this.getCanvas().getContext("2d");c.fillStyle=s,c.font=o;for(let u=0;u<Math.min(e.length,r.length);u++){let f=i[u]?i[u]:e[u].position;c.fillText(r[u],f[0],f[1])}this.data=Uint8Array.from(c.getImageData(0,0,this.width,this.height).data)}return this}function Yy(e,t){let n=new Array(e);for(let r=0;r<e;r++)n[r]=new Array(t).fill(0);return n}const cQ=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],uQ=[[0,1,0],[1,1,1],[0,1,0]];class Gy{constructor(t={}){let{kind:n="cross",shape:r,size:i,width:s,height:o,filled:a=!0}=t;if(i&&(s=i,o=i),r)switch(r.toLowerCase()){case"square":case"rectangle":this.matrix=function(e,t,n){const r=Yy(t,e);if(n.filled)for(let i=0;i<t;i++)for(let s=0;s<e;s++)r[i][s]=1;else{for(let i of[0,t-1])for(let s=0;s<e;s++)r[i][s]=1;for(let i=0;i<t;i++)for(let s of[0,e-1])r[i][s]=1}return r}(s,o,{filled:a});break;case"circle":case"ellipse":this.matrix=function(e,t,n){const r=Yy(t,e);let i=1-t%2,s=1-e%2,o=Math.floor((e-1)/2),a=Math.floor((t-1)/2),l=o*o,c=a*a;if(n.filled)for(let u=0;u<=a;u++)for(let d=o-Math.floor(Math.sqrt(l-l*u*u/c));d<=o;d++)r[a-u][d]=1,r[a+u+i][d]=1,r[a-u][e-d-1]=1,r[a+u+i][e-d-1]=1;else{for(let u=0;u<=a;u++){let d=o-Math.floor(Math.sqrt(l-l*u*u/c));r[a-u][d]=1,r[a+u+i][d]=1,r[a-u][e-d-1]=1,r[a+u+i][e-d-1]=1}for(let u=0;u<=o;u++){let d=a-Math.floor(Math.sqrt(c-c*u*u/l));r[d][o-u]=1,r[d][o+u+s]=1,r[t-d-1][o-u]=1,r[t-d-1][o+u+s]=1}}return r}(s,o,{filled:a});break;case"triangle":this.matrix=function(e,t,n){if(!n.filled)throw new Error("Non filled triangle is not implemented");const r=Yy(t,e);for(let i=0;i<t;i++){let s=Math.floor((1-i/t)*e/2);for(let o=s;o<e-s;o++)r[i][o]=1}return r}(s,o,{filled:a});break;default:throw new Error(`Shape: unexpected shape: ${r}`)}else{if(!n)throw new Error("Shape: expected a kind or a shape option");switch(n.toLowerCase()){case"cross":this.matrix=cQ;break;case"smallcross":this.matrix=uQ;break;default:throw new Error(`Shape: unexpected kind: ${n}`)}}this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let t=this.matrix,n=[];for(let r=0;r<t.length;r++)for(let i=0;i<t[0].length;i++)t[r][i]&&n.push([i-this.halfWidth,r-this.halfHeight]);return n}getMask(){let t=new Ke(this.width,this.height,{kind:Qr});for(let n=0;n<this.matrix.length;n++)for(let r=0;r<this.matrix[0].length;r++)this.matrix[n][r]&&t.setBitXY(r,n);return t}}function pQ(e,t={}){let{shape:n}=t;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let r=lp(Object.assign({},t,{numberColors:e.length})),i=new Gy(n).getPoints(),s=Math.min(this.channels,r[0].length);for(let o=0;o<e.length;o++){let a=r[o%r.length],l=e[o][0],c=e[o][1];for(let u=0;u<i.length;u++){let f=i[u][0],d=i[u][1];if(l+f>=0&&c+d>=0&&l+f<this.width&&c+d<this.height){let p=(l+f+(c+d)*this.width)*this.channels;for(let b=0;b<s;b++)this.data[p+b]=a[b]}}}return this}function gQ(e,t={}){let{color:n=[this.maxValue,0,0],closed:r=!1}=t;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let i=Math.min(this.channels,n.length);for(let s=0;s<e.length-1+r;s++){let o=e[s],a=e[(s+1)%e.length],l=a[0]-o[0],c=a[1]-o[1],u=Math.max(Math.abs(l),Math.abs(c)),f=l/u,d=c/u,p=o[0],b=o[1];for(let N=0;N<=u;N++){let S=Math.round(p),H=Math.round(b);if(S>=0&&H>=0&&S<this.width&&H<this.height)if(1===this.bitDepth)this.setBitXY(S,H);else{let G=(S+H*this.width)*this.channels;for(let ie=0;ie<i;ie++)this.data[G+ie]=n[ie]}p+=f,b+=d}}return this}function mQ(e,t={}){let n=Object.assign({},t);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let r=lp(Object.assign({},t,{numberColors:e.length}));for(let i=0;i<e.length;i++)n.color=r[i%r.length],this.paintPolyline(e[i],n);return this}function _Q(e,t={}){let{color:n=[this.maxValue,0,0],filled:r=!1}=t;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),t.closed=!0;let i=function(e){let t=[];for(let n=0;n<e.length;n++)if(e[n][0]!==e[(n+1)%e.length][0]||e[n][1]!==e[(n+1)%e.length][1]){if(e[n][0]===e[(n-1+e.length)%e.length][0]&&e[n][1]===e[(n-1+e.length)%e.length][1])continue;if(e[(n+1)%e.length][0]===e[(n-1+e.length)%e.length][0]&&e[(n-1+e.length)%e.length][1]===e[(n+1)%e.length][1])continue;t.push(e[n])}return t}(e);if(!1===r)return this.paintPolyline(e,t);{let s=Array(this.height);for(let o=0;o<this.height;o++){s[o]=[];for(let a=0;a<this.width;a++)s[o].push(0)}for(let o=0;o<i.length;o++){const a=wQ(i[o],i[(o+1)%i.length]);for(let l=0;l<this.height;l++)for(let c=0;c<this.width;c++)bQ(c,l,a,this.height)&&(s[l][c]=0===s[l][c]?1:0)}for(let o=0;o<this.height;o++)for(let a=0;a<this.width;a++)if(1===s[o][a])if(1===this.bitDepth)this.setBitXY(a,o);else{let l=Math.min(this.channels,n.length),c=(a+o*this.width)*this.channels;for(let u=0;u<l;u++)this.data[c+u]=n[u]}return this.paintPolyline(e,t)}}function wQ(e,t){if(e[0]===t[0])return{a:0,b:e[0],vertical:!0};{const n=(t[1]-e[1])/(t[0]-e[0]);return{a:n,b:e[1]-n*e[0],vertical:!1}}}function bQ(e,t,n,r){if(!0===n.vertical)return n.b<=e;if(0===n.a)return!1;{const i=(t-n.b)/n.a;return i<e&&i>=0&&i<=r}}function vQ(e,t={}){let n=Object.assign({},t);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let r=lp(Object.assign({},t,{numberColors:e.length}));for(let i=0;i<e.length;i++)n.color=r[i%r.length],this.paintPolygon(e[i],n);return this}function ak(e={}){let{maxSlots:t=256,channel:n,useAlpha:r=!0}=e;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),void 0===n){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");n=0}return ck.call(this,n,{useAlpha:r,maxSlots:t})}function lk(e={}){const{maxSlots:t=256,useAlpha:n=!0}=e;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let r=new Array(n?this.components:this.channels);for(let i=0;i<r.length;i++)r[i]=ck.call(this,i,{useAlpha:n,maxSlots:t});return r}function ck(e,t){let{useAlpha:n,maxSlots:r}=t;if(1===this.bitDepth){let l=[0,0];for(let c=0;c<this.height;c++)for(let u=0;u<this.width;u++){let f=this.getBitXY(c,u);0===f?l[0]+=1:1===f&&(l[1]+=1)}return l}let i=Math.log2(r);if(!IT()(i))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let s=0;this.bitDepth>i&&(s=this.bitDepth-i);let o=this.data,a=Qi()(Math.pow(2,Math.min(this.bitDepth,i)),0);if(n&&this.alpha){let l=this.channels-e-1;for(let c=e;c<o.length;c+=this.channels)a[o[c]>>s]+=o[c+l]/this.maxValue}else for(let l=e;l<o.length;l+=this.channels)a[o[l]>>s]++;return a}function uk(e={}){let{useAlpha:t=!0,nbSlots:n=512}=e;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let r=Math.log(n)/Math.log(8);if(r!==Math.floor(r))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let i=this.bitDepth-r,s=this.data,o=Qi()(Math.pow(8,r),0),a=Math.pow(2,2*r),l=Math.pow(2,r);for(let c=0;c<s.length;c+=this.channels){let u=(s[c]>>i)*a+(s[c+1]>>i)*l+(s[c+2]>>i);t&&this.alpha?o[u]+=s[c+this.channels-1]/this.maxValue:o[u]++}return o}function hk(){this.checkProcessable("min",{bitDepth:[8,16,32]});let e=Qi()(this.channels,1/0);for(let t=0;t<this.data.length;t+=this.channels)for(let n=0;n<this.channels;n++)this.data[t+n]<e[n]&&(e[n]=this.data[t+n]);return e}function fk(){this.checkProcessable("max",{bitDepth:[8,16,32]});let e=Qi()(this.channels,-1/0);for(let t=0;t<this.data.length;t+=this.channels)for(let n=0;n<this.channels;n++)this.data[t+n]>e[n]&&(e[n]=this.data[t+n]);return e}function dk(){this.checkProcessable("sum",{bitDepth:[8,16]});let e=Qi()(this.channels,0);for(let t=0;t<this.data.length;t+=this.channels)for(let n=0;n<this.channels;n++)e[n]+=this.data[t+n];return e}function pk(e=0,t=0){this.checkProcessable("getMoment",{bitDepth:[1]});let n=0;for(let r=0;r<this.width;r++)for(let i=0;i<this.height;i++)1===this.getBitXY(r,i)&&(n+=r**e*i**t);return n}function xQ(e={}){let{mask:t,region:n=3,removeClosePoints:r=0,invert:i=!1,maxEquals:s=2}=e,o=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),n*=4;let a=i?0:1,l=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],c=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],u=n<=8?1:2,f=[];for(let d=u;d<o.height-u;d++)for(let p=u;p<o.width-u;p++){if(t&&t.getBitXY(p,d)!==a)continue;let b=0,N=0,S=o.data[p+d*o.width];for(let H=0;H<n;H++)i?o.data[p+l[H]+(d+c[H])*o.width]>S&&b++:o.data[p+l[H]+(d+c[H])*o.width]<S&&b++,o.data[p+l[H]+(d+c[H])*o.width]===S&&N++;b+N===n&&N<=s&&f.push([p,d])}if(r>0)for(let d=0;d<f.length;d++)for(let p=d+1;p<f.length;p++)Math.sqrt(Math.pow(f[d][0]-f[p][0],2)+Math.pow(f[d][1]-f[p][1],2))<r&&(f[d][0]=f[d][0]+f[p][0]>>1,f[d][1]=f[d][1]+f[p][1]>>1,f.splice(p,1),p--);return f}function gk(){let e=this.getHistograms({maxSlots:this.maxValue+1}),t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=tq(e[n]);return t}function mk(){let e=this.getHistograms({maxSlots:this.maxValue+1}),t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=ET(e[n]);return t}function _k(){this.checkProcessable("points",{bitDepth:[1]});const e=[];for(let t=0;t<this.width;t++)for(let n=0;n<this.height;n++)1===this.getBitXY(t,n)&&e.push([t,n]);return e}function yk(){this.checkProcessable("extendedPoints",{bitDepth:[1]});const e=[];for(let t=0;t<this.height;t++)for(let n=0;n<this.width;n++)if(1===this.getBitXY(n,t))for(e.push([n,t]),1!==this.getBitXY(n+1,t)?(e.push([n+1,t]),e.push([n+1,t+1]),1!==this.getBitXY(n,t+1)&&e.push([n,t+1])):1!==this.getBitXY(n,t+1)&&(e.push([n,t+1]),e.push([n+1,t+1]));n<this.width-2&&1===this.getBitXY(n+1,t)&&1===this.getBitXY(n+2,t);)n++;return e}function EQ(e,t={}){if(this===e)return[0,0];let n=[0,0],r=this;for(;r;){if(r===e)return n;r.position&&(n[0]+=r.position[0],n[1]+=r.position[1]),r=r.parent}return!!t.defaultFurther&&n}function DQ(e={}){let{alpha:t=1}=e;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let n=0;if(void 0!==t){for(let r=this.components;r<this.data.length;r+=this.channels)this.data[r]===t&&n++;return n}return this.size}function wk(e,t={}){t.sorted||e.sort(CQ);const n=e.length,r=new Array(2*n);for(var i=0,s=0;s<n;s++){const a=e[s];for(;i>=2&&bk(r[i-2],r[i-1],a)<=0;)i--;r[i++]=a}const o=i+1;for(s=n-2;s>=0;s--){const a=e[s];for(;i>=o&&bk(r[i-2],r[i-1],a)<=0;)i--;r[i++]=a}return r.slice(0,i-1)}function bk(e,t,n){return(t[1]-e[1])*(n[0]-e[0])-(t[0]-e[0])*(n[1]-e[1])}function CQ(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}function Wy(){return wk(this.extendedPoints,{sorted:!1})}function cp(e,t){return[e[0]-t[0],e[1]-t[1]]}function up(e){let t=Math.sqrt(e[0]**2+e[1]**2);return[e[0]/t,e[1]/t]}function hp(e,t,n){void 0===n&&(n=new Array(t.length));let r=Math.cos(e),i=Math.sin(e);for(let s=0;s<n.length;++s)n[s]=[r*t[s][0]-i*t[s][1],i*t[s][0]+r*t[s][1]];return n}function AQ(e){let t=0;for(let n=0;n<e.length;n++)t+=Math.sqrt((e[n===e.length-1?0:n+1][0]-e[n][0])**2+(e[n===e.length-1?0:n+1][1]-e[n][1])**2);return t}function TQ(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n][0]*e[n===e.length-1?0:n+1][1]*.5,t-=e[n===e.length-1?0:n+1][0]*e[n][1]*.5;return Math.abs(t)}function Zy(e){let t=1/0,n=1/0,r=-1/0,i=-1/0;for(let s=0;s<e.length;s++)e[s][0]<t&&(t=e[s][0]),e[s][0]>r&&(r=e[s][0]),e[s][1]<n&&(n=e[s][1]),e[s][1]>i&&(i=e[s][1]);return[[t,n],[r,i]]}function vk(e={}){const{originalPoints:t=Wy.call(this)}=e;if(0===t.length)return[];if(1===t.length)return[t[0],t[0],t[0],t[0]];const n=new Array(t.length);let s,r=1/0,i=0;for(let o=0;o<n.length;o++){let a=IQ(t[o],t[(o+1)%n.length]);hp(-a,t,n);let l=n[o][0],c=n[o][1],u=n[(o+1)%n.length][0],f=n[(o+1)%n.length][1],d=!0,p=0,b=0,N=0;for(let ie=0;ie<n.length;ie++){let Re=(n[ie][0]-l)/(u-l);!0===d?(d=!1,p=Re,b=Re):(Re<p&&(p=Re),Re>b&&(b=Re));let Ee=(-(u-l)*n[ie][1]+u*c-f*l)/(u-l);Math.abs(Ee)>Math.abs(N)&&(N=Ee)}let S=[l+p*(u-l),c],H=[l+b*(u-l),c],G=Math.abs(N*(p-b)*(u-l));G<r&&(i=a,r=G,s=[S,H,[H[0],H[1]-N],[S[0],S[1]-N]])}return hp(i,s,s),s}function IQ(e,t){let r=up(cp(t,e)),i=Math.acos(r[0]);return r[1]<0?-i:i}var FQ=T(5395),PQ=T.n(FQ),NQ=T(6397),xk=T.n(NQ);function BQ(e,t){let r=up(cp(t,e)),i=Math.acos(r[0]);return r[1]<0?-i:i}class UQ{constructor(t,n){this.map=t,this.id=n,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(t={}){const{scale:n=1,kind:r=""}=t;let i;switch(r){case"contour":i=this.contourMask;break;case"box":i=this.boxMask;break;case"filled":i=this.filledMask;break;case"center":i=this.centerMask;break;case"mbr":i=this.mbrFilledMask;break;case"hull":i=this.convexHullFilledMask;break;case"hullContour":i=this.convexHullMask;break;case"mbrContour":i=this.mbrMask;break;case"feret":i=this.feretMask;break;default:i=this.mask}return n<1&&(i=i.resize({factor:n}),i.parent=this.mask.parent,i.position[0]+=this.minX,i.position[1]+=this.minY),i}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let t=this.borderIDs,n=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let r=this.internalIDs;for(let i=0;i<t.length;i++)r.includes(t[i])||(this.computed.externalIDs.push(t[i]),this.computed.externalLengths.push(n[i]))}get externalIDs(){return this.computed.externalIDs||this._computExternalIDs(),this.computed.externalIDs}get externalLengths(){return this.computed.externalLengths||this._computExternalIDs(),this.computed.externalLengths}_computeBorderIDs(){let t=function(e){let t=e.map,n=t.data,r=new Set,i=new Map,s=new Set,o=[1,0,-1,0],a=[0,1,0,-1];for(let u=e.minX;u<=e.maxX;u++)for(let f=e.minY;f<=e.maxY;f++)if(n[u+f*t.width]===e.id)for(let p=0;p<4;p++){let b=u+o[p],N=f+a[p];if(b>=0&&N>=0&&b<t.width&&N<t.height){let S=b+N*t.width;if(n[S]!==e.id&&!s.has(S)){s.add(S),r.add(n[S]);let H=i.get(n[S]);i.set(n[S],H?++H:1)}}}let l=Array.from(r),c=l.map(function(u){return i.get(u)});return{ids:l,lengths:c}}(this);this.computed.borderIDs=t.ids,this.computed.borderLengths=t.lengths}get borderIDs(){return this.computed.borderIDs||this._computeBorderIDs(),this.computed.borderIDs}get borderLengths(){return this.computed.borderLengths||this._computeBorderIDs(),this.computed.borderLengths}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=function(e){let t=new Set,n=e.map,r=n.data;for(let i of[0,e.height-1])for(let s=0;s<e.width;s++){let o=(i+e.minY)*n.width+s+e.minX;s-e.minX>0&&r[o]===e.id&&r[o-1]!==e.id&&t.add(r[o-1]),n.width-s-e.minX>1&&r[o]===e.id&&r[o+1]!==e.id&&t.add(r[o+1])}for(let i of[0,e.width-1])for(let s=0;s<e.height;s++){let o=(s+e.minY)*n.width+i+e.minX;s-e.minY>0&&r[o]===e.id&&r[o-n.width]!==e.id&&t.add(r[o-n.width]),n.height-s-e.minY>1&&r[o]===e.id&&r[o+n.width]!==e.id&&t.add(r[o+n.width])}return Array.from(t)}(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=function(e){let t=[e.id],n=e.map,r=n.data;if(e.height>2)for(let s=0;s<e.width;s++){let o=e.minY*n.width+s+e.minX;if(t.includes(r[o])){let a=r[o+n.width];!t.includes(a)&&!e.boxIDs.includes(a)&&t.push(a)}}let i=new Array(4);for(let s=1;s<e.width-1;s++)for(let o=1;o<e.height-1;o++){let a=(o+e.minY)*n.width+s+e.minX;if(t.includes(r[a])){i[0]=r[a-1],i[1]=r[a+1],i[2]=r[a-n.width],i[3]=r[a+n.width];for(let l=0;l<4;l++){let c=i[l];!t.includes(c)&&!e.boxIDs.includes(c)&&t.push(c)}}}return t}(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=function(e){let t=0,n=e.map,r=n.data,i=[0];e.height>1&&(i[1]=e.height-1);for(let o of i)for(let a=1;a<e.width-1;a++)r[(o+e.minY)*n.width+a+e.minX]===e.id&&t++;let s=[0];e.width>1&&(s[1]=e.width-1);for(let o of s)for(let a=0;a<e.height;a++)r[(a+e.minY)*n.width+o+e.minX]===e.id&&t++;return t}(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=function(e){let t=0,n=e.map,r=n.data;for(let i=1;i<e.width-1;i++)for(let s=1;s<e.height-1;s++){let o=(s+e.minY)*n.width+i+e.minX;r[o]===e.id&&(e.externalIDs.includes(r[o-1])||e.externalIDs.includes(r[o+1])||e.externalIDs.includes(r[o-n.width])||e.externalIDs.includes(r[o+n.width]))&&t++}return t+e.box}(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=function(e){let t=0,n=e.map.width,r=e.map.data;for(let i=1;i<e.width-1;i++)for(let s=1;s<e.height-1;s++){let o=(s+e.minY)*n+i+e.minX;e.internalIDs.includes(r[o])&&r[o]!==e.id&&t++}return{number:e.internalIDs.length-1,surface:t}}(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=function(e){let t=0,n=e.map,r=n.data;for(let i=1;i<e.width-1;i++)for(let s=1;s<e.height-1;s++){let o=(s+e.minY)*n.width+i+e.minX;r[o]===e.id&&(r[o-1]!==e.id||r[o+1]!==e.id||r[o-n.width]!==e.id||r[o+n.width]!==e.id)&&t++}return t+e.box}(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let t=new Ke(this.width,this.height,{kind:Qr,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)for(let r=0;r<this.height;r++)this.map.data[n+this.minX+(r+this.minY)*this.map.width]===this.id&&(n>0&&n<this.width-1&&r>0&&r<this.height-1?(this.map.data[n-1+this.minX+(r+this.minY)*this.map.width]!==this.id||this.map.data[n+1+this.minX+(r+this.minY)*this.map.width]!==this.id||this.map.data[n+this.minX+(r-1+this.minY)*this.map.width]!==this.id||this.map.data[n+this.minX+(r+1+this.minY)*this.map.width]!==this.id)&&t.setBitXY(n,r):t.setBitXY(n,r));this.computed.contourMask=t}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let t=new Ke(this.width,this.height,{kind:Qr,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)t.setBitXY(n,0),t.setBitXY(n,this.height-1);for(let n=0;n<this.height;n++)t.setBitXY(0,n),t.setBitXY(this.width-1,n);this.computed.boxMask=t}return this.computed.boxMask}get mask(){if(!this.computed.mask){let t=new Ke(this.width,this.height,{kind:Qr,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)for(let r=0;r<this.height;r++)this.map.data[n+this.minX+(r+this.minY)*this.map.width]===this.id&&t.setBitXY(n,r);this.computed.mask=t}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let t=new Ke(this.width,this.height,{kind:Qr,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)for(let r=0;r<this.height;r++)this.internalIDs.includes(this.map.data[n+this.minX+(r+this.minY)*this.map.width])&&t.setBitXY(n,r);this.computed.filledMask=t}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let t=new Gy({kind:"smallCross"}).getMask();t.parent=this.map.parent,t.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=t}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){const t=[];for(let r=0;r<this.width;r++)for(let i=0;i<this.height;i++)this.map.data[r+this.minX+(i+this.minY)*this.map.width]===this.id&&(r>0&&r<this.width-1&&i>0&&i<this.height-1?(this.map.data[r-1+this.minX+(i+this.minY)*this.map.width]!==this.id||this.map.data[r+1+this.minX+(i+this.minY)*this.map.width]!==this.id||this.map.data[r+this.minX+(i-1+this.minY)*this.map.width]!==this.id||this.map.data[r+this.minX+(i+1+this.minY)*this.map.width]!==this.id)&&(t.push([r,i]),t.push([r+1,i]),t.push([r,i+1]),t.push([r+1,i+1])):(t.push([r,i]),t.push([r+1,i]),t.push([r,i+1]),t.push([r+1,i+1])));const n=wk(t);this.computed.convexHull={polyline:n,surface:TQ(n),perimeter:AQ(n)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){const t=this.convexHull,n=new Ke(this.width+1,this.height+1,{kind:Qr,position:[this.minX,this.minY],parent:this.map.parent});n.paintPolyline(t.polyline,{closed:!0}),this.computed.convexHullMask=n}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){const t=this.convexHull,n=new Ke(this.width,this.height,{kind:Qr,position:[this.minX,this.minY],parent:this.map.parent});for(let r=0;r<this.width;r++)for(let i=0;i<this.height;i++)1!==xk()(t.polyline,[r,i])&&n.setBitXY(r,i);this.computed.convexHullFilledMask=n}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let t=vk({originalPoints:this.convexHull.polyline});if(0===t.length)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:t};else{let n=t[0],r=t[1],i=t[2],s=Math.sqrt((n[0]-r[0])**2+(n[1]-r[1])**2),o=Math.sqrt((i[0]-r[0])**2+(i[1]-r[1])**2);this.computed.mbr={width:s,height:o,elongation:1-s/o,aspectRatio:s/o,surface:s*o,perimeter:2*(s+o),rectangle:t}}}return this.computed.mbr}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=function(e={}){const{originalPoints:t=Wy.call(this)}=e;if(0===t.length)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(1===t.length)return{min:1,max:1,minLine:[t[0],t[0]],maxLine:[t[0],t[0]],aspectRatio:1};const n=new Array(t.length);let r=1/0,i=0,s=[];for(let c=0;c<t.length;c++){let u=BQ(t[c],t[(c+1)%t.length]);hp(-u,t,n);let f=0,d=[];for(let p=0;p<t.length;p++){let b=Math.abs(n[c][1]-n[p][1]);b>f&&(f=b,d=[],d.push([n[p][0],n[c][1]],[n[p][0],n[p][1]]))}f<r&&(r=f,i=u,s=d)}hp(i,s,s);let o=0,a=[],l=0;for(let c=0;c<t.length-1;c++)for(let u=c+1;u<t.length;u++){let f=(t[c][0]-t[u][0])**2+(t[c][1]-t[u][1])**2;f>l&&(l=f,o=Math.sqrt(f),a=[t[c],t[u]])}return{min:r,minLine:s,max:o,maxLine:a,aspectRatio:r/o}}({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=function(e){let t=e.map,n=t.data,r=0,i=0,s=0,o=0;for(let a=0;a<e.width;a++)for(let l=0;l<e.height;l++){let c=(l+e.minY)*t.width+a+e.minX;if(n[c]===e.id){let u=0;switch((0===a||e.externalIDs.includes(n[c-1]))&&u++,(a===e.width-1||e.externalIDs.includes(n[c+1]))&&u++,(0===l||e.externalIDs.includes(n[c-t.width]))&&u++,(l===e.height-1||e.externalIDs.includes(n[c+t.width]))&&u++,u){case 1:r++;break;case 2:i++;break;case 3:s++;break;case 4:o++}}}return{one:r,two:i,three:s,four:o}}(this)),this.computed.perimeterInfo}get perimeter(){let t=this.perimeterInfo,n=2-Math.sqrt(2);return t.one+2*t.two+3*t.three+4*t.four-n*(t.two+2*t.three+t.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){const t=new Ke(this.width+1,this.height+1,{kind:Qr,position:[this.minX,this.minY],parent:this.map.parent});t.paintPolyline(this.feretDiameters.minLine),t.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=t}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let t=function(e){for(let t=0;t<e.length;t++)e[t][0]=Math.round(e[t][0]),e[t][1]=Math.round(e[t][1]);return e}(this.mbr.rectangle);if(t.length>0){const n=Zy(t),r=new Ke(n[1][0]-n[0][0]+1,n[1][1]-n[0][1]+1,{kind:Qr,position:[this.minX+n[0][0],this.minY+n[0][1]],parent:this.map.parent});t=function(e,t){void 0===t&&(t=new Array(e.length).fill(0).map(()=>[]));let n=Zy(e),r=n[0][0],i=n[0][1];for(let s=0;s<e.length;s++)t[s][0]=e[s][0]-r,t[s][1]=e[s][1]-i;return t}(t),r.paintPolyline(t,{closed:!0}),this.computed.mbrMask=r}else this.computed.mbrMask=new Ke(1,1,{kind:Qr,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){const t=new Ke(this.width,this.height,{kind:Qr,position:[this.minX,this.minY],parent:this.map.parent}),n=this.mask.minimalBoundingRectangle();for(let r=0;r<this.width;r++)for(let i=0;i<this.height;i++)1!==xk()(n,[r,i])&&t.setBitXY(r,i);this.computed.mbrFilledMask=t}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let t=[];for(let n=0;n<this.height;n++)for(let r=0;r<this.width;r++)this.map.data[(n+this.minY)*this.map.width+r+this.minX]===this.id&&t.push([r,n]);this.computed.points=t}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let n,t=0;const r=this.points;for(let i=0;i<r.length;i++)for(let s=i+1;s<r.length;s++){let o=Math.pow(r[i][0]-r[s][0],2)+Math.pow(r[i][1]-r[s][1],2);o>=t&&(t=o,n=[r[i],r[s]])}this.computed.maxLengthPoints=n}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let t=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=t}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let t=this.maxLengthPoints,n=180*-Math.atan2(t[0][1]-t[1][1],t[0][0]-t[1][0])/Math.PI;this.computed.angle=n}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}class $l{constructor(t,n){this.roiMap=t,this.options=n,this.roi=this.createRoi()}createRoi(){let t=this.roiMap.data,n={};this.roiMap.positive=0,this.roiMap.negative=0;for(let a=0;a<t.length;a++)t[a]&&!n[t[a]]&&(n[t[a]]=!0,t[a]>0?this.roiMap.positive++:this.roiMap.negative++);let r={};for(let a in n)r[a]=new UQ(this.roiMap,1*a);let i=this.roiMap.width,s=this.roiMap.height;for(let a=0;a<s;a++)for(let l=0;l<i;l++){let c=a*i+l;if(0!==t[c]){const f=r[t[c]];l<f.minX&&(f.minX=l),l>f.maxX&&(f.maxX=l),a<f.minY&&(f.minY=a),a>f.maxY&&(f.maxY=a),f.meanX+=l,f.meanY+=a,f.surface++}}let o=[];for(let a in n)r[a].meanX/=r[a].surface,r[a].meanY/=r[a].surface,o.push(r[a]);return o}}function qQ(e={}){const{algorithm:t="commonBorderLength",minCommonBorderLength:n=5,maxCommonBorderLength:r=100,minCommonBorderRatio:i=.3,maxCommonBorderRatio:s=1}=e;let o=function(S,H,G){return S[G]>=n&&S[G]<=r};"function"==typeof t&&(o=t),"commonborderratio"===t.toLowerCase()&&(o=function(S,H,G){let ie=Math.min(S[G]/S[H],1);return ie>=i&&ie<=s});const a=this,l=a.commonBorderLength;let c={},u={};for(let S of Object.keys(l)){let H=l[S],G=Object.keys(H);for(let ie of G)if(ie!==S&&o(H,S,ie)){let q=ie;u[ie]&&(q=u[ie]);let ge=S;if(u[S]&&(ge=u[S]),Number(q)!==ge){let Re=Math.min(q,ge),Ee=Math.max(q,ge);if(c[Re]||(c[Re]={}),c[Re][Ee]=!0,u[Ee]=Re,c[Ee]){for(let Ne of Object.keys(c[Ee]))c[Re][Ne]=!0,u[Ne]=Re;delete c[Ee]}}}}let f=a.minMax,d=-f.min,b=new Array(f.max+d+1).fill(0);for(let S of Object.keys(u))b[Number(S)+d]=u[S];let N=a.data;for(let S=0;S<N.length;S++){let H=N[S];if(0!==H){let G=b[H+d];0!==G&&(N[S]=G)}}return a.computed={},a}class Hl{constructor(t,n){this.parent=t,this.width=t.width,this.height=t.height,this.data=n,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r=0;r<this.data.length;r++)this.data[r]<t&&(t=this.data[r]),this.data[r]>n&&(n=this.data[r]);return{min:t,max:n}}get commonBorderLength(){return function(e){let t=e.data,n=[1,0,-1,0],r=[0,1,0,-1],i=e.minMax,s=-i.min,o=i.max+s,a=[];for(let c=0;c<=o;c++)a.push(Object.create(null));for(let c=0;c<e.width;c++)for(let u=0;u<e.height;u++){let d=t[c+u*e.width];if(0!==d){let p=Object.create(null),b=!1;for(let N=0;N<4;N++){let S=c+n[N],H=u+r[N];if(S>=0&&H>=0&&S<e.width&&H<e.height){let G=t[S+H*e.width];d!==G&&(b=!0,0!==G&&void 0===p[G]&&(p[G]=!0,a[G+s][d]?a[G+s][d]++:a[G+s][d]=1))}else b=!0}b&&(a[d+s][d]?a[d+s][d]++:a[d+s][d]=1)}}let l={};for(let c=0;c<a.length;c++)Object.keys(a[c]).length>0&&(l[c-s]=a[c]);return l}(this)}mergeRoi(t={}){return qQ.call(this,t)}mergeRois(t){const n=t[0],r=t.slice(1);for(let i=0;i<this.data.length;i++)r.includes(this.data[i])&&(this.data[i]=n)}rowsInfo(){let t=new Array(this.height),n=0;for(let r=0;r<this.data.length;r+=this.width){let i={row:n,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};t[n++]=i;let s={},o={},a=[],l=this.data[r],c=0;for(let u=r;u<r+this.width;u++){let f=this.data[u];l!==f&&(l=f,a.push(c),c=0),c++,f>0?(i.positivePixel++,s[f]||(s[f]=!0)):f<0?(i.negativePixel++,o[f]||(o[f]=!0)):i.zeroPixel++}a.push(c),i.medianChange=a.sort((u,f)=>u-f)[Math.floor(a.length/2)],i.positiveRoiIDs=Object.keys(s),i.negativeRoiIDs=Object.keys(o),i.positiveRoi=i.positiveRoiIDs.length,i.negativeRoi=i.negativeRoiIDs.length}return t}colsInfo(){let t=new Array(this.width),n=0;for(let r=0;r<this.width;r++){let i={col:n,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};t[n++]=i;let s={},o={},a=[],l=this.data[r],c=0;for(let u=r;u<r+this.data.length;u+=this.width){let f=this.data[u];l!==f&&(l=f,a.push(c),c=0),c++,f>0?(i.positivePixel++,s[f]||(s[f]=!0)):f<0?(i.negativePixel++,o[f]||(o[f]=!0)):i.zeroPixel++}a.push(c),i.medianChange=a.sort((u,f)=>u-f)[Math.floor(a.length/2)],i.positiveRoiIDs=Object.keys(s),i.negativeRoiIDs=Object.keys(o),i.positiveRoi=i.positiveRoiIDs.length,i.negativeRoi=i.negativeRoiIDs.length}return t}}function KQ(e,t={}){const{allowCorners:n=!1}=t,r=65535;let i=new Int16Array(e.size),s=0,o=0,a=new Uint16Array(r+1),l=new Uint16Array(r+1);for(let u=0;u<e.width;u++)for(let f=0;f<e.height;f++)0===i[f*e.width+u]&&c(u,f);function c(u,f){let d=0,p=0,b=e.getBitXY(u,f),N=b?++s:--o;if(s>32767||o<-32768)throw new Error("Too many regions of interest");for(a[0]=u,l[0]=f;d<=p;){let S=a[d&r],H=l[d&r];if(i[H*e.width+S]=N,S>0&&0===i[H*e.width+S-1]&&e.getBitXY(S-1,H)===b&&(p++,a[p&r]=S-1,l[p&r]=H,i[H*e.width+S-1]=-32768),H>0&&0===i[(H-1)*e.width+S]&&e.getBitXY(S,H-1)===b&&(p++,a[p&r]=S,l[p&r]=H-1,i[(H-1)*e.width+S]=-32768),S<e.width-1&&0===i[H*e.width+S+1]&&e.getBitXY(S+1,H)===b&&(p++,a[p&r]=S+1,l[p&r]=H,i[H*e.width+S+1]=-32768),H<e.height-1&&0===i[(H+1)*e.width+S]&&e.getBitXY(S,H+1)===b&&(p++,a[p&r]=S,l[p&r]=H+1,i[(H+1)*e.width+S]=-32768),n&&(S>0&&H>0&&0===i[(H-1)*e.width+S-1]&&e.getBitXY(S-1,H-1)===b&&(p++,a[p&r]=S-1,l[p&r]=H-1,i[(H-1)*e.width+S-1]=-32768),S<e.width-1&&H>0&&0===i[(H-1)*e.width+S+1]&&e.getBitXY(S+1,H-1)===b&&(p++,a[p&r]=S+1,l[p&r]=H-1,i[(H-1)*e.width+S+1]=-32768),S>0&&H<e.height-1&&0===i[(H+1)*e.width+S-1]&&e.getBitXY(S-1,H+1)===b&&(p++,a[p&r]=S-1,l[p&r]=H+1,i[(H+1)*e.width+S-1]=-32768),S<e.width-1&&H<e.height-1&&0===i[(H+1)*e.width+S+1]&&e.getBitXY(S+1,H+1)===b&&(p++,a[p&r]=S+1,l[p&r]=H+1,i[(H+1)*e.width+S+1]=-32768)),d++,p-d>r)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new Hl(e,i)}var XQ=T(1301),QQ=T.n(XQ);const JQ=[-1,0],eJ=[0,-1],tJ=[null,null],nJ=[-1,-1,0,1],rJ=[0,-1,-1,-1],iJ=[null,null,null,null];function sJ(e,t={}){const{allowCorners:n=!1}=t;let i,s,o,r=4;if(n&&(r=8),8===r)i=nJ,s=rJ,o=iJ;else{if(4!==r)throw new RangeError(`unsupported neighbours count: ${r}`);i=JQ,s=eJ,o=tJ}const a=e.size,l=e.width,c=e.height,u=new Array(a),f=new Uint32Array(a),d=new(QQ());let p=1;for(let b=0;b<c;b++)for(let N=0;N<l;N++){const S=N+b*l;if(e.getBit(S)){let H=null;for(let G=0;G<o.length;G++){const ie=N+i[G],q=b+s[G];if(ie>=0&&q>=0&&ie<l&&q<c){let Re=u[ie+q*l];Re?(o[G]=Re,(!H||o[G].value<H.value)&&(H=o[G])):o[G]=null}}if(H){u[S]=H;for(let G=0;G<o.length;G++)o[G]&&o[G]!==H&&d.union(H,o[G])}else u[S]=d.add(p++)}}for(let b=0;b<c;b++)for(let N=0;N<l;N++){const S=N+b*l;e.getBit(S)&&(f[S]=d.find(u[S]).value)}return new Hl(e,f)}function oJ(e={}){let{allowCorner:t=!0,onlyTop:n=!1,invert:r=!1}=e,i=this;i.checkProcessable("fromMaxima",{components:[1]});let a=0,l=0,c=new Int16Array(i.size),u=new Int8Array(i.size),f=new Float32Array(i.size),d=1048575,p=new Uint16Array(d+1),b=new Uint16Array(d+1),N=0,S=0,H=new Uint16Array(d+1),G=new Uint16Array(d+1),ie=0,q=0;for(function({maxima:Ne=!0}){for(let Ie=1;Ie<i.height-1;Ie++)for(let De=1;De<i.width-1;De++){let Ae=De+Ie*i.width;if(0===u[Ae]){let at=Ne?i.data[Ae]:-i.data[De+Ie*i.width];if(i.data[Ie*i.width+De-1]>at||i.data[Ie*i.width+De+1]>at||i.data[(Ie-1)*i.width+De]>at||i.data[(Ie+1)*i.width+De]>at||t&&(i.data[(Ie-1)*i.width+De-1]>at||i.data[(Ie-1)*i.width+De+1]>at||i.data[(Ie+1)*i.width+De-1]>at||i.data[(Ie+1)*i.width+De+1]>at))continue;c[Ae]=Ne?++a:--l,Re(De,Ie)||(Ne?--a:++l)}}}(i);N<S;)Ee(p[N&d],b[N&d],2),N++;return new Hl(i,c);function Re(Ne,Ie){let De=S;ie=0,q=1,H[0]=Ne,G[0]=Ie;let Ae=!0;for(;ie<q;)Ae&=Ee(H[ie&d],G[ie&d],1),ie++;if(!Ae){for(let at=0;at<q;at++)c[G[at&d]*i.width+H[at&d]]=0;S=De}return Ae}function Ee(Ne,Ie,De){let Ae=c[Ie*i.width+Ne],at=i.data[Ie*i.width+Ne];for(let Dt=Ie-1;Dt<=Ie+1;Dt++)for(let Vt=Ne-1;Vt<=Ne+1;Vt++){let _t=Dt*i.width+Vt;if(0===u[_t])switch(u[_t]=1,f[_t]=i.data[_t]-at,De){case 1:if(0===f[_t]){if(0===Vt||0===Dt||Vt===i.width-1||Dt===i.height-1)return!1;c[_t]=Ae,H[q&d]=Vt,G[q&d]=Dt,q++}else{if(f[_t]>0)return!1;n||(c[_t]=Ae,p[S&d]=Vt,b[S&d]=Dt,S++)}break;case 2:f[_t]<=0&&(c[_t]=Ae,p[S&d]=Vt,b[S&d]=Dt,S++);break;default:throw new Error("unreachable")}}return!0}}function aJ(e,t={}){let n=new Gy(t),r=new Int16Array(this.size),i=0,s=n.getPoints();for(let o=0;o<e.length;o++){i++;let a=e[o][0],l=e[o][1];for(let c=0;c<s.length;c++){let u=s[c][0],f=s[c][1];a+u>=0&&l+f>=0&&a+u<this.width&&l+f<this.height&&(r[a+u+(l+f)*this.width]=i)}}return new Hl(this,r)}var lJ=T(4422),Ek=T.n(lJ);const Dk=[1,0,-1,0,1,1,-1,-1],Ck=[0,1,0,-1,1,-1,1,-1];function cJ(e={}){let{points:t,mask:n,image:r,fillMaxValue:i=this.maxValue,invert:s=!1}=e,o=r||this;o.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),s=!s,t||(t=o.getLocalMaxima({invert:s,mask:n}));let a=s?0:1,l=new Int16Array(o.size),c=o.width,u=o.height,f=new(Ek())({comparator:(d,p)=>d[2]-p[2],strategy:Ek().BinaryHeapStrategy});for(let d=0;d<t.length;d++){let p=t[d][0]+t[d][1]*c;l[p]=d+1;let b=o.data[p];(s&&b<=i||!s&&b>=i)&&f.queue([t[d][0],t[d][1],b])}for(;f.length>0;){let d=f.dequeue(),p=d[0]+d[1]*c;for(let b=0;b<4;b++){let N=d[0]+Dk[b],S=d[1]+Ck[b];if(N>=0&&S>=0&&N<c&&S<u){let H=N+S*c;if(!n||n.getBit(H)===a){let G=o.data[H];(s&&G<=i||!s&&G>=i)&&0===l[H]&&(l[H]=l[p],f.queue([d[0]+Dk[b],d[1]+Ck[b],G]))}}}}return new Hl(o,l)}class uJ{constructor(t,n={}){this._image=t,this._options=n,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(t={}){let n=Object.assign({},this._options,t),r=oJ.call(this._image,t);this._layers[n.label]=new $l(r,n)}fromPoints(t,n={}){let r=Object.assign({},this._options,n),i=aJ.call(this._image,t,n);return this._layers[r.label]=new $l(i,r),this}putMap(t,n={}){let r=new Hl(this._image,t),i=Object.assign({},this._options,n);return this._layers[i.label]=new $l(r,i),this}fromWaterShed(t={}){let n=Object.assign({},this._options,t),r=cJ.call(this._image,t);this._layers[n.label]=new $l(r,n)}fromMask(t,n={}){let r=Object.assign({},this._options,n),i=KQ.call(this._image,t,n);return this._layers[r.label]=new $l(i,r),this}fromMaskConnectedComponentLabelingAlgorithm(t,n={}){let r=Object.assign({},this._options,n),i=sJ.call(this._image,t,n);return this._layers[r.label]=new $l(i,r),this}getMap(t={}){let n=Object.assign({},this._options,t);return this._assertLayerWithLabel(n.label),this._layers[n.label].roiMap}rowsInfo(t={}){return this.getMap(t).rowsInfo()}colsInfo(t={}){return this.getMap(t).rowsInfo()}getRoiIds(t={}){let n=this.getRois(t);if(n){let r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n[i].id;return r}throw new Error("ROIs not found")}getRois(t={}){let{label:n=this._options.label,positive:r=!0,negative:i=!0,minSurface:s=0,maxSurface:o=Number.POSITIVE_INFINITY,minWidth:a=0,maxWidth:l=Number.POSITIVE_INFINITY,minHeight:c=0,maxHeight:u=Number.POSITIVE_INFINITY,minRatio:f=0,maxRatio:d=Number.POSITIVE_INFINITY}=t;if(!this._layers[n])throw new Error(`this Roi layer (${n}) does not exist`);const p=this._layers[n].roi,b=[];for(const N of p)(N.id<0&&i||N.id>0&&r)&&N.surface>=s&&N.surface<=o&&N.width>=a&&N.width<=l&&N.height>=c&&N.height<=u&&N.ratio>=f&&N.ratio<=d&&b.push(N);return b}getRoi(t,n={}){const{label:r=this._options.label}=n;if(!this._layers[r])throw new Error(`this Roi layer (${r}) does not exist`);const i=this._layers[r].roi.find(s=>s.id===t);if(!i)throw new Error(`found no Roi with id ${t}`);return i}getMasks(t={}){let n=this.getRois(t),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n[i].getMask(t);return r}getAnalysisMasks(t={}){const{analysisProperty:n}=t;let r=`${n}Mask`,i=this.getRois(t);return 0!==i.length&&i[0][r]?i.map(s=>s[r]):[]}getData(t={}){let n=Object.assign({},this._options,t);return this._assertLayerWithLabel(n.label),this._layers[n.label].roiMap.data}paint(t={}){let{labelProperty:n,analysisProperty:r}=t;this._painted||(this._painted=this._image.rgba8());let i=this.getMasks(t);if(n){const s=this.getRois(t);t.labels=s.map(c=>function(e,t=""){let n=t.split(".");for(let r of n){if(void 0===e[r])return;e=e[r]}return e}(c,n));const o=Math.max(...t.labels);let a=!1,l=!1;if(n.includes("surface")?a=!0:/(?:perimeter|min|max|external|width|height|length)/.test(n)&&(l=!0),isFinite(o)){let c="";if("pixel"!==t.unit&&t.pixelSize&&(l||a)){c=a?`${t.unit}^2`:t.unit;let u=a?"m^2":"m",f=a?t.pixelSize**2:t.pixelSize;const d=PQ().swiftConverter(u,c);t.labels=t.labels.map(p=>d(f*p))}t.labels=t.labels.map(o>50?u=>Math.round(u)+c:o>10?u=>u.toFixed(1)+c:u=>u.toFixed(2)+c)}t.labelsPosition=s.map(c=>[c.meanX,c.meanY])}if(this._painted.paintMasks(i,t),r){let s=this.getAnalysisMasks(t);this._painted.paintMasks(s,{color:t.analysisColor,alpha:t.analysisAlpha})}return this._painted}getMask(t={}){let n=new Ke(this._image.width,this._image.height,{kind:"BINARY"}),r=this.getMasks(t);for(let i=0;i<r.length;i++){let s=r[i];for(let o=0;o<s.width;o++)for(let a=0;a<s.height;a++)s.getBitXY(o,a)&&n.setBitXY(o+s.position[0],a+s.position[1])}return n}resetPainted(t={}){const{image:n}=t;this._painted=n?this.image.rgba8():this._image.rgba8()}mergeRoi(t={}){const n=this.getMap(t);return n.mergeRoi(t),this.putMap(n.data,t),this}mergeRois(t,n={}){if(!Array.isArray(t)||t.some(i=>!Number.isInteger(i)))throw new Error("Roi ids must be an array of integers");if(t.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(t).size!==t.length)throw new Error("Roi ids must be all different");t.forEach(i=>this.getRoi(i));const r=this.getMap(n);return r.mergeRois(t),this.putMap(r.data,n),this}findCorrespondingRoi(t,n={}){let r=this.getRois(n),i=[];for(let s=0;s<r.length;s++){let o=r[s],f=hJ(o.minX,o.minY,o.points,t,Math.sign(o.id));i.push(f)}return i}_assertLayerWithLabel(t){if(!this._layers[t])throw new Error(`no layer with label ${t}`)}}function hJ(e,t,n,r,i){let s={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let o=0;o<n.length;o++){let a=n[o],f=r.data[a[0]+e+(a[1]+t)*r.width];(f>0||f<0)&&(s.id.includes(f)?s.surface[s.id.indexOf(f)]+=1:(s.id.push(f),s.surface.push(1)))}for(let o=0;o<s.id.length;o++)Math.sign(s.id[o])===i?s.same+=s.surface[o]:s.opposite+=s.surface[o],s.roiSurfaceCovered[o]=s.surface[o]/n.length;return s.total=s.opposite+s.same,s}const fJ=Object.prototype.toString;class Ke{constructor(t,n,r,i){if(1===arguments.length?(i=t,({width:t,height:n,data:r}=i)):r&&!r.length&&(i=r,({data:r}=i)),void 0===t&&(t=1),void 0===n&&(n=1),void 0===i&&(i={}),"object"!=typeof i||null===i)throw new TypeError("options must be an object");if(!Number.isInteger(t)||t<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new RangeError("height must be a positive integer");const{kind:s=HS}=i;if("string"!=typeof s)throw new TypeError("kind must be a string");const o=function(e){const t=Xs[e];if(!t)throw new RangeError(`invalid image kind: ${e}`);return t}(s),a=Object.assign({},i);for(const N in o)void 0===a[N]&&(a[N]=o[N]);!function(e){const{components:t,alpha:n,bitDepth:r,colorModel:i}=e;if(!Number.isInteger(t)||t<=0)throw new RangeError(`invalid components: ${t}. Must be a positive integer`);if(0!==n&&1!==n&&"boolean"!=typeof n)throw new TypeError(`invalid alpha: ${n}: must be a boolean, 0 or 1`);if(!zS.includes(r))throw new RangeError(`invalid bitDepth: ${r}. Must be one of ${zS.join(", ")}`);if(!R[i])throw new RangeError(`invalid colorModel: ${i}. Must be one of ${Object.keys(R).join(", ")}`)}(a);const{components:l,bitDepth:c,colorModel:u}=a,f=a.alpha+0,d=t*n,p=l+f,b=32===c?Number.MAX_VALUE:2**c-1;if(void 0===r)r=function(e,t,n,r,i,s){const o=r*e;let a;switch(i){case 1:a=new Uint8Array(Math.ceil(o/8));break;case 8:a=new Uint8Array(o);break;case 16:a=new Uint16Array(o);break;case 32:a=new Float32Array(o);break;default:throw new Error(`Cannot create pixel array for bit depth ${i}`)}if(n)for(let l=t;l<a.length;l+=r)a[l]=s;return a}(d,l,f,p,c,b);else{const N=function(e,t,n){let r=t*e;return 1===n&&(r=Math.ceil(r/8)),r}(d,p,c);if(r.length!==N)throw new RangeError(`incorrect data size: ${r.length}. Should be ${N}`)}this.width=t,this.height=n,this.data=r,this.size=d,this.components=l,this.alpha=f,this.bitDepth=c,this.maxValue=b,this.colorModel=u,this.channels=p,this.meta=i.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:i.parent||null}),this.position=i.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(t){return"[object IJSImage]"===fJ.call(t)}static fromCanvas(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return new Ke(r.width,r.height,r.data)}static createFrom(t,n){const r=Py(t);return Object.assign(r,{parent:t,position:[0,0]},n),new Ke(r)}getRoiManager(t){return new uJ(this,t)}clone(){const t=this.data.slice();return new Ke(this.width,this.height,t,this)}apply(t){for(let n=0;n<this.height;n++)for(let r=0;r<this.width;r++)t.call(this,(n*this.width+r)*this.channels)}}(function(e){for(const t in AT)e.prototype[t]=AT[t]})(Ke),function(e){for(const t in o2)e.prototype[t]=o2[t]}(Ke),function(e){for(const t in VS)e.prototype[t]=VS[t]}(Ke),Ke.prototype.checkProcessable=function(e,t={}){let{bitDepth:n,alpha:r,colorModel:i,components:s,channels:o}=t;if("string"!=typeof e||0===e.length)throw new TypeError("processName must be a string");if(n&&(Array.isArray(n)||(n=[n]),!n.includes(this.bitDepth)))throw new TypeError(`The process: ${e} can only be applied if bit depth is in: ${n}`);if(r&&(Array.isArray(r)||(r=[r]),!r.includes(this.alpha)))throw new TypeError(`The process: ${e} can only be applied if alpha is in: ${r}`);if(i&&(Array.isArray(i)||(i=[i]),!i.includes(this.colorModel)))throw new TypeError(`The process: ${e} can only be applied if color model is in: ${i}`);if(s&&(Array.isArray(s)||(s=[s]),!s.includes(this.components))){let a=`The process: ${e} can only be applied if the number of components is in: ${s}`;throw 1===s.length&&1===s[0]?new TypeError(`${a}.\rYou should transform your image using "image.grey()" before applying the algorithm.`):new TypeError(a)}if(o&&(Array.isArray(o)||(o=[o]),!o.includes(this.channels)))throw new TypeError(`The process: ${e} can only be applied if the number of channels is in: ${o}`)},Ke.prototype.getRGBAData=function(e={}){const{clamped:t}=e;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});const n=this.width*this.height*4;let r=t?new Uint8ClampedArray(n):new Uint8Array(n);return 1===this.bitDepth?function(e,t){for(let n=0;n<e.size;n++){const r=e.getBit(n);t[4*n]=255*r,t[4*n+1]=255*r,t[4*n+2]=255*r}}(this,r):32===this.bitDepth?(this.checkProcessable("getRGBAData",{alpha:0}),1===this.components?function(e,t){const n=e.min[0],i=e.max[0]-n;for(let s=0;s<e.size;s++){const o=Math.floor(255*(e.data[s]-n)/i);t[4*s]=o,t[4*s+1]=o,t[4*s+2]=o}}(this,r):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[kr]}),function(e,t){const n=Math.min(...e.min),i=Math.max(...e.max)-n;for(let s=0;s<e.size;s++){const o=Math.floor(255*(e.data[3*s]-n)/i),a=Math.floor(255*(e.data[3*s+1]-n)/i),l=Math.floor(255*(e.data[3*s+2]-n)/i);t[4*s]=o,t[4*s+1]=a,t[4*s+2]=l}}(this,r))):1===this.components?function(e,t){for(let n=0;n<e.size;n++)t[4*n]=e.data[n*e.channels]>>>e.bitDepth-8,t[4*n+1]=e.data[n*e.channels]>>>e.bitDepth-8,t[4*n+2]=e.data[n*e.channels]>>>e.bitDepth-8}(this,r):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[kr]}),function(e,t){for(let n=0;n<e.size;n++)t[4*n]=e.data[n*e.channels]>>>e.bitDepth-8,t[4*n+1]=e.data[n*e.channels+1]>>>e.bitDepth-8,t[4*n+2]=e.data[n*e.channels+2]>>>e.bitDepth-8}(this,r)),1===this.alpha?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),function(e,t){for(let n=0;n<e.size;n++)t[4*n+3]=e.data[n*e.channels+e.components]>>e.bitDepth-8}(this,r)):function(e,t){for(let n=0;n<e.size;n++)t[4*n+3]=255}(this,r),r},Ke.load=function(e,t){if("string"==typeof e)return function(e,t){const n=e.slice(0,64).match(lq);let r;return r=null!==n?Promise.resolve(function(e){let i,s,o,a,t=.75*e.length,n=e.length,r=0;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);const l=new Uint8Array(t);for(let c=0;c<n;c+=4)i=Uu[e.charCodeAt(c)],s=Uu[e.charCodeAt(c+1)],o=Uu[e.charCodeAt(c+2)],a=Uu[e.charCodeAt(c+3)],l[r++]=i<<2|s>>4,l[r++]=(15&s)<<4|o>>2,l[r++]=(3&o)<<6|63&a;return l}(e.slice(n[0].length))):function(e,{withCredentials:t=!1}={}){return new Promise(function(n,r){let i=new self.XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.withCredentials=t,i.onload=function(s){200!==this.status?r(s):n(this.response)},i.onerror=r,i.send()})}(e,t),r.then(i=>Ry(new Uint8Array(i),n?e:void 0))}(e,t);if(e instanceof ArrayBuffer)return Promise.resolve(Ry(new Uint8Array(e)));if(e.buffer)return Promise.resolve(Ry(e));throw new Error('argument to "load" must be a string or buffer.')},Ke.extendMethod=function(e,t,n={}){let{inPlace:r=!1,returnThis:i=!0,partialArgs:s=[]}=n;return Ke.prototype[e]=r?function(...o){this.computed=null;let a=t.apply(this,[...s,...o]);return i?this:a}:function(...o){return t.apply(this,[...s,...o])},Ke},Ke.extendProperty=function(e,t,n={}){let{partialArgs:r=[]}=n;return $S.get=function(){if(null===this.computed)this.computed={};else if(jS()(e,this.computed))return this.computed[e];let i=t.apply(this,r);return this.computed[e]=i,i},Object.defineProperty(Ke.prototype,e,$S),Ke},function(e){let t={inPlace:!0};e.extendMethod("invert",wq),e.extendMethod("abs",mq),e.extendMethod("level",zq,t),e.extendMethod("add",Zq,t),e.extendMethod("subtract",qq,t),e.extendMethod("subtractImage",Kq),e.extendMethod("multiply",Qq,t),e.extendMethod("divide",Jq,t),e.extendMethod("hypotenuse",Xq),e.extendMethod("background",oK),e.extendMethod("flipX",xq),e.extendMethod("flipY",Eq),e.extendMethod("blurFilter",Dq),e.extendMethod("medianFilter",Tq),e.extendMethod("gaussianFilter",kq),e.extendMethod("sobelFilter",jq),e.extendMethod("gradientFilter",By),e.extendMethod("scharrFilter",$q),e.extendMethod("dilate",aK),e.extendMethod("erode",fK),e.extendMethod("open",_K),e.extendMethod("close",yK),e.extendMethod("topHat",wK),e.extendMethod("blackHat",bK),e.extendMethod("morphologicalGradient",vK),e.extendMethod("warpingFourPoints",CK),e.extendMethod("crop",MK),e.extendMethod("cropAlpha",SK),e.extendMethod("resize",$T).extendMethod("scale",$T),e.extendMethod("hsv",BK),e.extendMethod("hsl",UK),e.extendMethod("cmyk",VK),e.extendMethod("rgba8",jK),e.extendMethod("grey",zT).extendMethod("gray",zT),e.extendMethod("mask",aX),e.extendMethod("pad",cX),e.extendMethod("colorDepth",uX),e.extendMethod("setBorder",_X,t),e.extendMethod("rotate",pX),e.extendMethod("rotateLeft",QT),e.extendMethod("rotateRight",JT),e.extendMethod("insert",mX),e.extendMethod("getRow",MX),e.extendMethod("getColumn",SX),e.extendMethod("getMatrix",AX),e.extendMethod("setMatrix",TX),e.extendMethod("getPixelsArray",kX),e.extendMethod("getIntersection",IX),e.extendMethod("getClosestCommonParent",FX),e.extendMethod("getThreshold",KT),e.extendMethod("split",yX),e.extendMethod("getChannel",wX),e.extendMethod("combineChannels",bX),e.extendMethod("setChannel",xX),e.extendMethod("getSimilarity",EX),e.extendMethod("getPixelsGrid",DX),e.extendMethod("getBestMatch",CX),e.extendMethod("cannyEdge",BX),e.extendMethod("convolution",sh),e.extendMethod("extract",UX),e.extendMethod("floodFill",$X),e.extendMethod("paintLabels",aQ,t),e.extendMethod("paintMasks",lQ,t),e.extendMethod("paintPoints",pQ,t),e.extendMethod("paintPolyline",gQ,t),e.extendMethod("paintPolylines",mQ,t),e.extendMethod("paintPolygon",_Q,t),e.extendMethod("paintPolygons",vQ,t),e.extendMethod("countAlphaPixels",DQ),e.extendMethod("monotoneChainConvexHull",Wy),e.extendMethod("minimalBoundingRectangle",vk),e.extendMethod("getHistogram",ak).extendProperty("histogram",ak),e.extendMethod("getHistograms",lk).extendProperty("histograms",lk),e.extendMethod("getColorHistogram",uk).extendProperty("colorHistogram",uk),e.extendMethod("getMin",hk).extendProperty("min",hk),e.extendMethod("getMax",fk).extendProperty("max",fk),e.extendMethod("getSum",dk).extendProperty("sum",dk),e.extendMethod("getMoment",pk).extendProperty("moment",pk),e.extendMethod("getLocalMaxima",xQ),e.extendMethod("getMedian",mk).extendProperty("median",mk),e.extendMethod("getMean",gk).extendProperty("mean",gk),e.extendMethod("getPoints",_k).extendProperty("points",_k),e.extendMethod("getExtendedPoints",yk).extendProperty("extendedPoints",yk),e.extendMethod("getRelativePosition",EQ)}(Ke);var dJ=T(7956),Mk=T.n(dJ);const pJ={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function Sk(e,t,n){return e.post("data",[t,n]).then(function(r){for(let i in r)r[i]=new Ke(r[i]);return r})}const _J={run:function(e,t,n){t=Object.assign({},pJ,t);const r=this.manager;return Array.isArray(e)?Promise.all(e.map(function(i){const s=Sk(r,i,t);return"function"==typeof n&&s.then(n),s})):Sk(r,e,t)},work:function(){worker.on("data",function(e,t,n){t=new IJS(t);const r={},i=[],s=t.grey(),o=s.sobelFilter();p("sobel",o);const a=o.level().mask({threshold:n.threshold});p("mask",a);const l=o.getRoiManager();l.fromMask(a);const c=l.getMask(n.roi);p("realMask",c);const u=s.getPixelsGrid({sampling:n.sampling,mask:c}),f=t.getBackground(u.xyS,u.zS,n.regression);p("background",f);const d=t.subtract(f);function p(b,N){n.include.includes(b)&&(r[b]=N,i.push(N.data.buffer))}r.result=d,i.push(d.data.buffer),e(r,i)})}};class fp{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(null===this._url)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(t){if("string"!=typeof t)throw new TypeError("worker URL must be a string");this._url=t,this._deps[0]=t}static extendMethod(t,n){let r,i,s={};function o(...a){return r||(this.checkUrl(),i=this.url,r=new(Mk())(n.work,{deps:i}),s.manager=r),n.run.call(s,...a)}o.reset=function(){r&&(r.terminate(),r=new(Mk())(n.work,{deps:i}),s.manager=r)},fp.prototype[t]=o}}!function(e){e.extendMethod("background",_J)}(fp),new fp;class AJ{constructor(t){this.total=t}call(t,n){return n.subscribe(new TJ(t,this.total))}}class TJ extends ue{constructor(t,n){super(t),this.total=n,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}class IJ{constructor(t,n){this.compare=t,this.keySelector=n}call(t,n){return n.subscribe(new RJ(t,this.compare,this.keySelector))}}class RJ extends ue{constructor(t,n,r){super(t),this.keySelector=r,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}compare(t,n){return t===n}_next(t){let n;try{const{keySelector:i}=this;n=i?i(t):t}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,n)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=n,this.destination.next(t))}}class PJ{constructor(t){this.notifier=t}call(t,n){const r=new OJ(t),i=Fe(this.notifier,new ae(r));return i&&!r.seenValue?(r.add(i),n.subscribe(r)):r}}class OJ extends He{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function zl(e){return null!=e&&"false"!=`${e}`}function Yl(e){return e instanceof dn?e.nativeElement:e}let qy;try{qy="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(e){qy=!1}let uh,Qy,Si,Ji=(()=>{class e{constructor(n){this._platformId=n,this.isBrowser=this._platformId?function(e){return e===NC}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!qy)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(n){return new(n||e)(Ce(Jc))},e.\u0275prov=ot({factory:function(){return new e(Ce(Jc))},token:e,providedIn:"root"}),e})(),Ky=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=_n({type:e}),e.\u0275inj=ln({}),e})();function Xy(e){return function(){if(null==uh&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>uh=!0}))}finally{uh=uh||!1}return uh}()?e:!!e.capture}function hh(e){return e.composedPath?e.composedPath()[0]:e.target}Si="undefined"!=typeof global?global:"undefined"!=typeof window?window:{};class HJ extends F{constructor(t,n){super()}schedule(t,n=0){return this}}let Tk=(()=>{class e{constructor(n,r=e.now){this.SchedulerAction=n,this.now=r}schedule(n,r=0,i){return new this.SchedulerAction(this,n).schedule(i,r)}}return e.now=()=>Date.now(),e})();class oo extends Tk{constructor(t,n=Tk.now){super(t,()=>oo.delegate&&oo.delegate!==this?oo.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,n=0,r){return oo.delegate&&oo.delegate!==this?oo.delegate.schedule(t,n,r):super.schedule(t,n,r)}flush(t){const{actions:n}=this;if(this.active)return void n.push(t);let r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this.active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}}function Nk(e){return 0===e.offsetX&&0===e.offsetY}function Lk(e){const t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}new oo(class extends HJ{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){if(this.closed)return this;this.state=t;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(t,n,r=0){return setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return n;clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i,r=!1;try{this.work(t)}catch(s){r=!0,i=!!s&&s||new Error(s)}if(r)return this.unsubscribe(),i}_unsubscribe(){const t=this.id,n=this.scheduler,r=n.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null}}),"undefined"!=typeof Element&&Element;const Bk=new vt("cdk-input-modality-detector-options"),gee={ignoreKeys:[18,17,224,91,16]},Wl=Xy({passive:!0,capture:!0});let Vk=(()=>{class e{constructor(n,r,i,s){this._platform=n,this._mostRecentTarget=null,this._modality=new Zr(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=hh(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Nk(o)?"keyboard":"mouse"),this._mostRecentTarget=hh(o))},this._onTouchstart=o=>{Lk(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=hh(o))},this._options=Object.assign(Object.assign({},gee),s),this.modalityDetected=this._modality.pipe(t=>t.lift(new AJ(1))),this.modalityChanged=this.modalityDetected.pipe(n=>n.lift(new IJ(void 0,void 0))),n.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Wl),i.addEventListener("mousedown",this._onMousedown,Wl),i.addEventListener("touchstart",this._onTouchstart,Wl)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Wl),document.removeEventListener("mousedown",this._onMousedown,Wl),document.removeEventListener("touchstart",this._onTouchstart,Wl))}}return e.\u0275fac=function(n){return new(n||e)(Ce(Ji),Ce(Ut),Ce(jt),Ce(Bk,8))},e.\u0275prov=ot({factory:function(){return new e(Ce(Ji),Ce(Ut),Ce(jt),Ce(Bk,8))},token:e,providedIn:"root"}),e})();const Hk=new vt("cdk-focus-monitor-default-options"),pp=Xy({passive:!0,capture:!0});let e1=(()=>{class e{constructor(n,r,i,s,o){this._ngZone=n,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ee,this._rootNodeFocusAndBlurListener=a=>{const l=hh(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(n,r=!1){const i=Yl(n);if(!this._platform.isBrowser||1!==i.nodeType)return Ct(null);const s=function(e){if(function(){if(null==Qy){const e="undefined"!=typeof document?document.head:null;Qy=!(!e||!e.createShadowRoot&&!e.attachShadow)}return Qy}()){const t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new ee,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(n){const r=Yl(n),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(n,r,i){const s=Yl(n);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((n,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(n,r,i){i?n.classList.add(r):n.classList.remove(r)}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(n){return 1===this._detectionMode||!!(null==n?void 0:n.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(n,r){this._toggleClass(n,"cdk-focused",!!r),this._toggleClass(n,"cdk-touch-focused","touch"===r),this._toggleClass(n,"cdk-keyboard-focused","keyboard"===r),this._toggleClass(n,"cdk-mouse-focused","mouse"===r),this._toggleClass(n,"cdk-program-focused","program"===r)}_setOrigin(n,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=n,this._originFromTouchInteraction="touch"===n&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(n,r){const i=this._elementInfo.get(r),s=hh(n);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(n,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&n.relatedTarget instanceof Node&&r.contains(n.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(n,r){this._ngZone.run(()=>n.next(r))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;const r=n.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,pp),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,pp)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(function(e){return t=>t.lift(new PJ(e))}(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(n){const r=n.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,pp),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,pp),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,r,i){this._setClasses(n,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(n){const r=[];return this._elementInfo.forEach((i,s)=>{(s===n||i.checkChildren&&s.contains(n))&&r.push([s,i])}),r}}return e.\u0275fac=function(n){return new(n||e)(Ce(Ut),Ce(Ji),Ce(Vk),Ce(jt,8),Ce(Hk,8))},e.\u0275prov=ot({factory:function(){return new e(Ce(Ut),Ce(Ji),Ce(Vk),Ce(jt,8),Ce(Hk,8))},token:e,providedIn:"root"}),e})();const zk="cdk-high-contrast-black-on-white",Yk="cdk-high-contrast-white-on-black",t1="cdk-high-contrast-active";let Gk=(()=>{class e{constructor(n,r){this._platform=n,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(n):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(n),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const n=this._document.body.classList;n.remove(t1),n.remove(zk),n.remove(Yk),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(n.add(t1),n.add(zk)):2===r&&(n.add(t1),n.add(Yk))}}}return e.\u0275fac=function(n){return new(n||e)(Ce(Ji),Ce(jt))},e.\u0275prov=ot({factory:function(){return new e(Ce(Ji),Ce(jt))},token:e,providedIn:"root"}),e})(),Zk=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=_n({type:e}),e.\u0275inj=ln({}),e})();const qk=new Fo("12.2.12");class Kk{}const Es="*";function Xk(e,t=null){return{type:2,steps:e,options:t}}function Qk(e){return{type:6,styles:e,offset:null}}function Jk(e){Promise.resolve(null).then(e)}class Zl{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Jk(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class eI{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,r=0,i=0;const s=this.players.length;0==s?Jk(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((n,r)=>null===n||r.totalTime>n.totalTime?r:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}function tI(){return"undefined"!=typeof window&&void 0!==window.document}function r1(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ao(e){switch(e.length){case 0:return new Zl;case 1:return e[0];default:return new eI(e)}}function nI(e,t,n,r,i={},s={}){const o=[],a=[];let l=-1,c=null;if(r.forEach(u=>{const f=u.offset,d=f==l,p=d&&c||{};Object.keys(u).forEach(b=>{let N=b,S=u[b];if("offset"!==b)switch(N=t.normalizePropertyName(N,o),S){case"!":S=i[b];break;case Es:S=s[b];break;default:S=t.normalizeStyleValue(b,N,S,o)}p[N]=S}),d||a.push(p),c=p,l=f}),o.length){const u="\n - ";throw new Error(`Unable to animate due to the following errors:${u}${o.join(u)}`)}return a}function i1(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&s1(n,"start",e)));break;case"done":e.onDone(()=>r(n&&s1(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&s1(n,"destroy",e)))}}function s1(e,t,n){const r=n.totalTime,s=o1(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),o=e._data;return null!=o&&(s._data=o),s}function o1(e,t,n,r,i="",s=0,o){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Ir(e,t,n){let r;return e instanceof Map?(r=e.get(t),r||e.set(t,r=n)):(r=e[t],r||(r=e[t]=n)),r}function rI(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let a1=(e,t)=>!1,l1=(e,t)=>!1,iI=(e,t,n)=>[];const sI=r1();(sI||"undefined"!=typeof Element)&&(a1=tI()?(e,t)=>{for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:(e,t)=>e.contains(t),l1=(()=>{if(sI||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(n,r)=>t.apply(n,[r]):l1}})(),iI=(e,t,n)=>{let r=[];if(n){const i=e.querySelectorAll(t);for(let s=0;s<i.length;s++)r.push(i[s])}else{const i=e.querySelector(t);i&&r.push(i)}return r});let ca=null,oI=!1;function c1(e){ca||(ca=("undefined"!=typeof document?document.body:null)||{},oI=!!ca.style&&"WebkitAppearance"in ca.style);let t=!0;return ca.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in ca.style,!t&&oI&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in ca.style)),t}const u1=l1,h1=a1,f1=iI;function aI(e){const t={};return Object.keys(e).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}let lI=(()=>{class e{validateStyleProperty(n){return c1(n)}matchesElement(n,r){return u1(n,r)}containsElement(n,r){return h1(n,r)}query(n,r,i){return f1(n,r,i)}computeStyle(n,r,i){return i||""}animate(n,r,i,s,o,a=[],l){return new Zl(i,s)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})(),d1=(()=>{class e{}return e.NOOP=new lI,e})();const p1="ng-enter",gp="ng-leave",mp="ng-trigger",_p=".ng-trigger",uI="ng-animating",g1=".ng-animating";function ua(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:m1(parseFloat(t[1]),t[2])}function m1(e,t){switch(t){case"s":return 1e3*e;default:return e}}function yp(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let i,s=0,o="";if("string"==typeof e){const a=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};i=m1(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=m1(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=e;if(!n){let a=!1,l=t.length;i<0&&(t.push("Duration values below 0 are not allowed for this animation step."),a=!0),s<0&&(t.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&t.splice(l,0,`The provided timing value "${e}" is invalid.`)}return{duration:i,delay:s,easing:o}}(e,t,n)}function ql(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function lo(e,t,n={}){if(t)for(let r in e)n[r]=e[r];else ql(e,n);return n}function fI(e,t,n){return n?t+":"+n+";":""}function dI(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style.item(n);t+=fI(0,r,e.style.getPropertyValue(r))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=fI(0,Aee(n),e.style[n]));e.setAttribute("style",t)}function es(e,t,n){e.style&&(Object.keys(t).forEach(r=>{const i=y1(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]}),r1()&&dI(e))}function ha(e,t){e.style&&(Object.keys(t).forEach(n=>{const r=y1(n);e.style[r]=""}),r1()&&dI(e))}function fh(e){return Array.isArray(e)?1==e.length?e[0]:Xk(e):e}const _1=new RegExp("{{\\s*(.+?)\\s*}}","g");function pI(e){let t=[];if("string"==typeof e){let n;for(;n=_1.exec(e);)t.push(n[1]);_1.lastIndex=0}return t}function wp(e,t,n){const r=e.toString(),i=r.replace(_1,(s,o)=>{let a=t[o];return t.hasOwnProperty(o)||(n.push(`Please provide a value for the animation param ${o}`),a=""),a.toString()});return i==r?e:i}function bp(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const See=/-+([a-z0-9])/g;function y1(e){return e.replace(See,(...t)=>t[1].toUpperCase())}function Aee(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function gI(e,t){return 0===e||0===t}function mI(e,t,n){const r=Object.keys(n);if(r.length&&t.length){let s=t[0],o=[];if(r.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=n[a]}),o.length)for(var i=1;i<t.length;i++){let a=t[i];o.forEach(function(l){a[l]=w1(e,l)})}}return t}function Rr(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function w1(e,t){return window.getComputedStyle(e)[t]}function Tee(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function(e,t,n){if(":"==e[0]){const l=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof l)return void t.push(l);e=l}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const i=r[1],s=r[2],o=r[3];t.push(_I(i,o));"<"==s[0]&&!("*"==i&&"*"==o)&&t.push(_I(o,i))}(r,n,t)):n.push(e),n}const xp=new Set(["true","1"]),Ep=new Set(["false","0"]);function _I(e,t){const n=xp.has(e)||Ep.has(e),r=xp.has(t)||Ep.has(t);return(i,s)=>{let o="*"==e||e==i,a="*"==t||t==s;return!o&&n&&"boolean"==typeof i&&(o=i?xp.has(e):Ep.has(e)),!a&&r&&"boolean"==typeof s&&(a=s?xp.has(t):Ep.has(t)),o&&a}}const Ree=new RegExp("s*:selfs*,?","g");function b1(e,t,n){return new Fee(e).build(t,n)}class Fee{constructor(t){this._driver=t}build(t,n){const r=new Nee(n);return this._resetContextStyleTimingState(r),Rr(this,fh(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,n){let r=n.queryCount=0,i=n.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,n))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,n);r+=l.queryCount,i+=l.depCount,o.push(l)}else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(t,n){const r=this.visitStyle(t.styles,n),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};if(r.styles.forEach(a=>{if(Dp(a)){const l=a;Object.keys(l).forEach(c=>{pI(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size){const a=bp(s.values());n.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${a.join(", ")}`)}}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const r=Rr(this,fh(t.animation),n);return{type:1,matchers:Tee(t.expr,n.errors),animation:r,queryCount:n.queryCount,depCount:n.depCount,options:fa(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(r=>Rr(this,r,n)),options:fa(t.options)}}visitGroup(t,n){const r=n.currentTime;let i=0;const s=t.steps.map(o=>{n.currentTime=r;const a=Rr(this,o,n);return i=Math.max(i,n.currentTime),a});return n.currentTime=i,{type:3,steps:s,options:fa(t.options)}}visitAnimate(t,n){const r=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return v1(yp(e,t).duration,0,"");const r=e;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=v1(0,0,"");return s.dynamic=!0,s.strValue=r,s}return n=n||yp(r,t),v1(n.duration,n.delay,n.easing)}(t.timings,n.errors);n.currentAnimateTimings=r;let i,s=t.styles?t.styles:Qk({});if(5==s.type)i=this.visitKeyframes(s,n);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=Qk(c)}n.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,n);l.isEmptyStep=a,i=l}return n.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,n){const r=this._makeStyleAst(t,n);return this._validateStyleAst(r,n),r}_makeStyleAst(t,n){const r=[];Array.isArray(t.styles)?t.styles.forEach(o=>{"string"==typeof o?o==Es?r.push(o):n.errors.push(`The provided style string value ${o} is not allowed.`):r.push(o)}):r.push(t.styles);let i=!1,s=null;return r.forEach(o=>{if(Dp(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!i)for(let c in a)if(a[c].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,n){const r=n.currentAnimateTimings;let i=n.currentTime,s=n.currentTime;r&&s>0&&(s-=r.duration+r.delay),t.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void n.errors.push(`The provided animation property "${a}" is not a supported CSS property for animations`);const l=n.collectedStyles[n.currentQuerySelector],c=l[a];let u=!0;c&&(s!=i&&s>=c.startTime&&i<=c.endTime&&(n.errors.push(`The CSS property "${a}" that exists between the times of "${c.startTime}ms" and "${c.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${i}ms"`),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:i}),n.options&&function(e,t,n){const r=t.params||{},i=pI(e);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||n.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(o[a],n.options,n.errors)})})}visitKeyframes(t,n){const r={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push("keyframes() must be placed inside of a call to animate()"),r;let s=0;const o=[];let a=!1,l=!1,c=0;const u=t.steps.map(H=>{const G=this._makeStyleAst(H,n);let ie=null!=G.offset?G.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(n=>{if(Dp(n)&&n.hasOwnProperty("offset")){const r=n;t=parseFloat(r.offset),delete r.offset}});else if(Dp(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(G.styles),q=0;return null!=ie&&(s++,q=G.offset=ie),l=l||q<0||q>1,a=a||q<c,c=q,o.push(q),G});l&&n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&n.errors.push("Please ensure that all keyframe offsets are in order");const f=t.steps.length;let d=0;s>0&&s<f?n.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(d=1/(f-1));const p=f-1,b=n.currentTime,N=n.currentAnimateTimings,S=N.duration;return u.forEach((H,G)=>{const ie=d>0?G==p?1:d*G:o[G],q=ie*S;n.currentTime=b+N.delay+q,N.duration=q,this._validateStyleAst(H,n),H.offset=ie,r.styles.push(H)}),r}visitReference(t,n){return{type:8,animation:Rr(this,fh(t.animation),n),options:fa(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:fa(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:fa(t.options)}}visitQuery(t,n){const r=n.currentQuerySelector,i=t.options||{};n.queryCount++,n.currentQuery=t;const[s,o]=function(e){const t=!!e.split(/\s*,\s*/).find(n=>":self"==n);return t&&(e=e.replace(Ree,"")),[e=e.replace(/@\*/g,_p).replace(/@\w+/g,n=>_p+"-"+n.substr(1)).replace(/:animating/g,g1),t]}(t.selector);n.currentQuerySelector=r.length?r+" "+s:s,Ir(n.collectedStyles,n.currentQuerySelector,{});const a=Rr(this,fh(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:fa(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push("stagger() can only be used inside of query()");const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:yp(t.timings,n.errors,!0);return{type:12,animation:Rr(this,fh(t.animation),n),timings:r,options:null}}}class Nee{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Dp(e){return!Array.isArray(e)&&"object"==typeof e}function fa(e){return e?(e=ql(e)).params&&(e.params=function(e){return e?ql(e):null}(e.params)):e={},e}function v1(e,t,n){return{duration:e,delay:t,easing:n}}function x1(e,t,n,r,i,s,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Cp{constructor(){this._map=new Map}consume(t){let n=this._map.get(t);return n?this._map.delete(t):n=[],n}append(t,n){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const jee=new RegExp(":enter","g"),Hee=new RegExp(":leave","g");function E1(e,t,n,r,i,s={},o={},a,l,c=[]){return(new zee).buildKeyframes(e,t,n,r,i,s,o,a,l,c)}class zee{buildKeyframes(t,n,r,i,s,o,a,l,c,u=[]){c=c||new Cp;const f=new D1(t,n,c,i,s,u,[]);f.options=l,f.currentTimeline.setStyles([o],null,f.errors,l),Rr(this,r,f);const d=f.timelines.filter(p=>p.containsAnimation());if(d.length&&Object.keys(a).length){const p=d[d.length-1];p.allowOnlyTimelineStyles()||p.setStyles([a],null,f.errors,l)}return d.length?d.map(p=>p.buildKeyframes()):[x1(n,[],[],[],0,0,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const r=n.subInstructions.consume(n.element);if(r){const i=n.createSubContext(t.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=t}visitAnimateRef(t,n){const r=n.createSubContext(t.options);r.transformIntoNewTimeline(),this.visitReference(t.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=t}_visitSubInstructions(t,n,r){let s=n.currentTimeline.currentTime;const o=null!=r.duration?ua(r.duration):null,a=null!=r.delay?ua(r.delay):null;return 0!==o&&t.forEach(l=>{const c=n.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,n){n.updateOptions(t.options,!0),Rr(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const r=n.subContextCount;let i=n;const s=t.options;if(s&&(s.params||s.delay)&&(i=n.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Mp);const o=ua(s.delay);i.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Rr(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const r=[];let i=n.currentTimeline.currentTime;const s=t.options&&t.options.delay?ua(t.options.delay):0;t.steps.forEach(o=>{const a=n.createSubContext(t.options);s&&a.delayNextStep(s),Rr(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(i),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const r=t.strValue;return yp(n.params?wp(r,n.params,n.errors):r,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const r=n.currentAnimateTimings=this._visitTiming(t.timings,n),i=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),i.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,n):(n.incrementTime(r.duration),this.visitStyle(s,n),i.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const r=n.currentTimeline,i=n.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(s):r.setStyles(t.styles,s,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const r=n.currentAnimateTimings,i=n.currentTimeline.duration,s=r.duration,a=n.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(i+s),n.previousNode=t}visitQuery(t,n){const r=n.currentTimeline.currentTime,i=t.options||{},s=i.delay?ua(i.delay):0;s&&(6===n.previousNode.type||0==r&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Mp);let o=r;const a=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{n.currentQueryIndex=u;const f=n.createSubContext(t.options,c);s&&f.delayNextStep(s),c===n.element&&(l=f.currentTimeline),Rr(this,t.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const r=n.parentContext,i=n.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1);let l=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const u=n.currentTimeline;l&&u.delayNextStep(l);const f=u.currentTime;Rr(this,t.animation,n),n.previousNode=t,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}}const Mp={};class D1{constructor(t,n,r,i,s,o,a,l){this._driver=t,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Mp,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Sp(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=ua(r.duration)),null!=r.delay&&(i.delay=ua(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=wp(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const r=t.params={};Object.keys(n).forEach(i=>{r[i]=n[i]})}}return t}createSubContext(t=null,n,r){const i=n||this.element,s=new D1(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Mp,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,r){const i={duration:null!=n?n:t.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+t.delay,easing:""},s=new Yee(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,r,i,s,o){let a=[];if(i&&a.push(this.element),t.length>0){t=(t=t.replace(jee,"."+this._enterClassName)).replace(Hee,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(`\`query("${n}")\` returned zero elements. (Use \`query("${n}", { optional: true })\` if you wish to allow this.)`),a}}class Sp{constructor(t,n,r,i){this._driver=t,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new Sp(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles[t]=n,this._globalTimelineStyles[t]=n,this._styleSummary[t]={time:this.currentTime,value:n}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(n=>{this._backFill[n]=this._globalTimelineStyles[n]||Es,this._currentKeyframe[n]=Es}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,r,i){n&&(this._previousKeyframe.easing=n);const s=i&&i.params||{},o=function(e,t){const n={};let r;return e.forEach(i=>{"*"===i?(r=r||Object.keys(t),r.forEach(s=>{n[s]=Es})):lo(i,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=wp(o[a],s,r);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:Es),this._updateStyle(a,l)})}applyStylesToKeyframe(){const t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach(r=>{this._currentKeyframe[r]=t[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const n=this._localTimelineStyles[t];this._pendingStyles[t]=n,this._updateStyle(t,n)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(n=>{const r=this._styleSummary[n],i=t._styleSummary[n];(!r||i.time>r.time)&&this._updateStyle(n,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=lo(a,!0);Object.keys(c).forEach(u=>{const f=c[u];"!"==f?t.add(u):f==Es&&n.add(u)}),r||(c.offset=l/this.duration),i.push(c)});const s=t.size?bp(t.values()):[],o=n.size?bp(n.values()):[];if(r){const a=i[0],l=ql(a);a.offset=0,l.offset=1,i=[a,l]}return x1(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Yee extends Sp{constructor(t,n,r,i,s,o,a=!1){super(t,n,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&n){const s=[],o=r+n,a=n/o,l=lo(t[0],!1);l.offset=0,s.push(l);const c=lo(t[0],!1);c.offset=bI(a),s.push(c);const u=t.length-1;for(let f=1;f<=u;f++){let d=lo(t[f],!1);d.offset=bI((n+d.offset*r)/o),s.push(d)}r=o,n=0,i="",t=s}return x1(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}function bI(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class C1{}class Wee extends C1{normalizePropertyName(t,n){return y1(t)}normalizeStyleValue(t,n,r,i){let s="";const o=r.toString().trim();if(Zee[n]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(`Please provide a CSS unit value for ${t}:${r}`)}return o+s}}const Zee=(()=>function(e){const t={};return e.forEach(n=>t[n]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function vI(e,t,n,r,i,s,o,a,l,c,u,f,d){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:f,errors:d}}const M1={};class xI{constructor(t,n,r){this._triggerName=t,this.ast=n,this._stateStyles=r}match(t,n,r,i){return function(e,t,n,r,i){return e.some(s=>s(t,n,r,i))}(this.ast.matchers,t,n,r,i)}buildStyles(t,n,r){const i=this._stateStyles["*"],s=this._stateStyles[t],o=i?i.buildStyles(n,r):{};return s?s.buildStyles(n,r):o}build(t,n,r,i,s,o,a,l,c,u){const f=[],d=this.ast.options&&this.ast.options.params||M1,b=this.buildStyles(r,a&&a.params||M1,f),N=l&&l.params||M1,S=this.buildStyles(i,N,f),H=new Set,G=new Map,ie=new Map,q="void"===i,ge={params:Object.assign(Object.assign({},d),N)},Re=u?[]:E1(t,n,this.ast.animation,s,o,b,S,ge,c,f);let Ee=0;if(Re.forEach(Ie=>{Ee=Math.max(Ie.duration+Ie.delay,Ee)}),f.length)return vI(n,this._triggerName,r,i,q,b,S,[],[],G,ie,Ee,f);Re.forEach(Ie=>{const De=Ie.element,Ae=Ir(G,De,{});Ie.preStyleProps.forEach(Dt=>Ae[Dt]=!0);const at=Ir(ie,De,{});Ie.postStyleProps.forEach(Dt=>at[Dt]=!0),De!==n&&H.add(De)});const Ne=bp(H.values());return vI(n,this._triggerName,r,i,q,b,S,Re,Ne,G,ie,Ee)}}class Xee{constructor(t,n,r){this.styles=t,this.defaultParams=n,this.normalizer=r}buildStyles(t,n){const r={},i=ql(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!=o&&(i[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=wp(l,i,n));const c=this.normalizer.normalizePropertyName(a,n);l=this.normalizer.normalizeStyleValue(a,c,l,n),r[c]=l})}}),r}}class Jee{constructor(t,n,r){this.name=t,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states={},n.states.forEach(i=>{this.states[i.name]=new Xee(i.style,i.options&&i.options.params||{},r)}),EI(this.states,"true","1"),EI(this.states,"false","0"),n.transitions.forEach(i=>{this.transitionFactories.push(new xI(t,i,this.states))}),this.fallbackTransition=function(e,t,n){return new xI(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,r,i){return this.transitionFactories.find(o=>o.match(t,n,r,i))||null}matchStyles(t,n,r){return this.fallbackTransition.buildStyles(t,n,r)}}function EI(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const tte=new Cp;class nte{constructor(t,n,r){this.bodyNode=t,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(t,n){const r=[],i=b1(this._driver,n,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[t]=i}_buildPlayer(t,n,r){const i=t.element,s=nI(0,this._normalizer,0,t.keyframes,n,r);return this._driver.animate(i,s,t.duration,t.delay,t.easing,[],!0)}create(t,n,r={}){const i=[],s=this._animations[t];let o;const a=new Map;if(s?(o=E1(this._driver,n,s,p1,gp,{},{},r,tte,i),o.forEach(u=>{const f=Ir(a,u.element,{});u.postStyleProps.forEach(d=>f[d]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),o=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);a.forEach((u,f)=>{Object.keys(u).forEach(d=>{u[d]=this._driver.computeStyle(f,d,Es)})});const c=ao(o.map(u=>{const f=a.get(u.element);return this._buildPlayer(u,{},f)}));return this._playersById[t]=c,c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const n=this._getPlayer(t);n.destroy(),delete this._playersById[t];const r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(t){const n=this._playersById[t];if(!n)throw new Error(`Unable to find the timeline player referenced by ${t}`);return n}listen(t,n,r,i){const s=o1(n,"","","");return i1(this._getPlayer(t),r,s,i),()=>{}}command(t,n,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,n,i[0]||{});const s=this._getPlayer(t);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const DI="ng-animate-queued",CI="ng-animate-disabled",MI=".ng-animate-disabled",ote=[],SI={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ate={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ni="__ng_removed";class S1{constructor(t,n=""){this.namespaceId=n;const r=t&&t.hasOwnProperty("value");if(this.value=function(e){return null!=e?e:null}(r?t.value:t),r){const s=ql(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const n=t.params;if(n){const r=this.options.params;Object.keys(n).forEach(i=>{null==r[i]&&(r[i]=n[i])})}}}const dh="void",A1=new S1(dh);class lte{constructor(t,n,r){this.id=t,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,ri(n,this._hostClassName)}listen(t,n,r,i){if(!this._triggers.hasOwnProperty(n))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${n}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${n}" because the provided event is undefined!`);if(!function(e){return"start"==e||"done"==e}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${n}" is not supported!`);const s=Ir(this._elementListeners,t,[]),o={name:n,phase:r,callback:i};s.push(o);const a=Ir(this._engine.statesByElement,t,{});return a.hasOwnProperty(n)||(ri(t,mp),ri(t,mp+"-"+n),a[n]=A1),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[n]||delete a[n]})}}register(t,n){return!this._triggers[t]&&(this._triggers[t]=n,!0)}_getTrigger(t){const n=this._triggers[t];if(!n)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return n}trigger(t,n,r,i=!0){const s=this._getTrigger(n),o=new T1(this.id,n,t);let a=this._engine.statesByElement.get(t);a||(ri(t,mp),ri(t,mp+"-"+n),this._engine.statesByElement.set(t,a={}));let l=a[n];const c=new S1(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[n]=c,l||(l=A1),c.value!==dh&&l.value===c.value){if(!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const s=n[i];if(!t.hasOwnProperty(s)||e[s]!==t[s])return!1}return!0}(l.params,c.params)){const N=[],S=s.matchStyles(l.value,l.params,N),H=s.matchStyles(c.value,c.params,N);N.length?this._engine.reportError(N):this._engine.afterFlush(()=>{ha(t,S),es(t,H)})}return}const d=Ir(this._engine.playersByElement,t,[]);d.forEach(N=>{N.namespaceId==this.id&&N.triggerName==n&&N.queued&&N.destroy()});let p=s.matchTransition(l.value,c.value,t,c.params),b=!1;if(!p){if(!i)return;p=s.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:p,fromState:l,toState:c,player:o,isFallbackTransition:b}),b||(ri(t,DI),o.onStart(()=>{Kl(t,DI)})),o.onDone(()=>{let N=this.players.indexOf(o);N>=0&&this.players.splice(N,1);const S=this._engine.playersByElement.get(t);if(S){let H=S.indexOf(o);H>=0&&S.splice(H,1)}}),this.players.push(o),d.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((n,r)=>{delete n[t]}),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const r=this._engine.driver.query(t,_p,!0);r.forEach(i=>{if(i[ni])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,n,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,n,r,i){const s=this._engine.statesByElement.get(t);if(s){const o=[];if(Object.keys(s).forEach(a=>{if(this._triggers[a]){const l=this.trigger(t,a,dh,i);l&&o.push(l)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,n),r&&ao(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(n&&r){const i=new Set;n.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers[o].fallbackTransition,c=r[o]||A1,u=new S1(dh),f=new T1(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:u,player:f,isFallbackTransition:!0})})}}removeNode(t,n){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(t):[];if(s&&s.length)i=!0;else{let o=t;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,n);else{const s=t[ni];(!s||s===SI)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,n))}}insertNode(t,n){ri(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=o1(s,r.triggerName,r.fromState.value,r.toState.value);l._data=t,i1(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):n.push(r)}),this._queue=[],n.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let n=!1;return this._elementListeners.has(t)&&(n=!0),n=!!this._queue.find(r=>r.element===t)||n,n}}class cte{constructor(t,n,r){this.bodyNode=t,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,n){const r=new lte(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,n){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let s=r;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,n)){this._namespaceList.splice(s+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(n,t),t}register(t,n){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,n)),r}registerTrigger(t,n,r){let i=this._namespaceLookup[t];i&&i.register(n,r)&&this.totalAnimations++}destroy(t,n){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(n))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,r=this.statesByElement.get(t);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const o=r[i[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&n.add(a)}}}return n}trigger(t,n,r,i){if(Ap(n)){const s=this._fetchNamespace(t);if(s)return s.trigger(n,r,i),!0}return!1}insertNode(t,n,r,i){if(!Ap(n))return;const s=n[ni];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(n,r)}i&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ri(t,CI)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Kl(t,CI))}removeNode(t,n,r,i){if(Ap(n)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(n,i):this.markElementAsRemoved(t,n,!1,i),r){const o=this.namespacesByHostElement.get(n);o&&o.id!==t&&o.removeNode(n,i)}}else this._onRemovalComplete(n,i)}markElementAsRemoved(t,n,r,i){this.collectedLeaveElements.push(n),n[ni]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1}}listen(t,n,r,i,s){return Ap(n)?this._fetchNamespace(t).listen(n,r,i,s):()=>{}}_buildInstruction(t,n,r,i,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,n,s)}destroyInnerAnimations(t){let n=this.driver.query(t,_p,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,g1,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ao(this.players).onDone(()=>t());t()})}processLeaveNode(t){const n=t[ni];if(n&&n.setForRemoval){if(t[ni]=SI,n.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,MI)&&this.markElementAsDisabled(t,!1),this.driver.query(t,MI,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ri(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{n=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],n.length?ao(n).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,n){const r=new Cp,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(We=>{u.add(We);const nt=this.driver.query(We,".ng-animate-queued",!0);for(let ht=0;ht<nt.length;ht++)u.add(nt[ht])});const f=this.bodyNode,d=Array.from(this.statesByElement.keys()),p=kI(d,this.collectedEnterElements),b=new Map;let N=0;p.forEach((We,nt)=>{const ht=p1+N++;b.set(nt,ht),We.forEach(Lt=>ri(Lt,ht))});const S=[],H=new Set,G=new Set;for(let We=0;We<this.collectedLeaveElements.length;We++){const nt=this.collectedLeaveElements[We],ht=nt[ni];ht&&ht.setForRemoval&&(S.push(nt),H.add(nt),ht.hasAnimation?this.driver.query(nt,".ng-star-inserted",!0).forEach(Lt=>H.add(Lt)):G.add(nt))}const ie=new Map,q=kI(d,Array.from(H));q.forEach((We,nt)=>{const ht=gp+N++;ie.set(nt,ht),We.forEach(Lt=>ri(Lt,ht))}),t.push(()=>{p.forEach((We,nt)=>{const ht=b.get(nt);We.forEach(Lt=>Kl(Lt,ht))}),q.forEach((We,nt)=>{const ht=ie.get(nt);We.forEach(Lt=>Kl(Lt,ht))}),S.forEach(We=>{this.processLeaveNode(We)})});const ge=[],Re=[];for(let We=this._namespaceList.length-1;We>=0;We--)this._namespaceList[We].drainQueuedTransitions(n).forEach(ht=>{const Lt=ht.player,In=ht.element;if(ge.push(Lt),this.collectedEnterElements.length){const si=In[ni];if(si&&si.setForMove)return void Lt.destroy()}const ii=!f||!this.driver.containsElement(f,In),ur=ie.get(In),ts=b.get(In),fn=this._buildInstruction(ht,r,ts,ur,ii);if(fn.errors&&fn.errors.length)Re.push(fn);else{if(ii)return Lt.onStart(()=>ha(In,fn.fromStyles)),Lt.onDestroy(()=>es(In,fn.toStyles)),void i.push(Lt);if(ht.isFallbackTransition)return Lt.onStart(()=>ha(In,fn.fromStyles)),Lt.onDestroy(()=>es(In,fn.toStyles)),void i.push(Lt);fn.timelines.forEach(si=>si.stretchStartingKeyframe=!0),r.append(In,fn.timelines),o.push({instruction:fn,player:Lt,element:In}),fn.queriedElements.forEach(si=>Ir(a,si,[]).push(Lt)),fn.preStyleProps.forEach((si,uo)=>{const Ds=Object.keys(si);if(Ds.length){let oi=l.get(uo);oi||l.set(uo,oi=new Set),Ds.forEach(ho=>oi.add(ho))}}),fn.postStyleProps.forEach((si,uo)=>{const Ds=Object.keys(si);let oi=c.get(uo);oi||c.set(uo,oi=new Set),Ds.forEach(ho=>oi.add(ho))})}});if(Re.length){const We=[];Re.forEach(nt=>{We.push(`@${nt.triggerName} has failed due to:\n`),nt.errors.forEach(ht=>We.push(`- ${ht}\n`))}),ge.forEach(nt=>nt.destroy()),this.reportError(We)}const Ee=new Map,Ne=new Map;o.forEach(We=>{const nt=We.element;r.has(nt)&&(Ne.set(nt,nt),this._beforeAnimationBuild(We.player.namespaceId,We.instruction,Ee))}),i.forEach(We=>{const nt=We.element;this._getPreviousPlayers(nt,!1,We.namespaceId,We.triggerName,null).forEach(Lt=>{Ir(Ee,nt,[]).push(Lt),Lt.destroy()})});const Ie=S.filter(We=>RI(We,l,c)),De=new Map;TI(De,this.driver,G,c,Es).forEach(We=>{RI(We,l,c)&&Ie.push(We)});const at=new Map;p.forEach((We,nt)=>{TI(at,this.driver,new Set(We),l,"!")}),Ie.forEach(We=>{const nt=De.get(We),ht=at.get(We);De.set(We,Object.assign(Object.assign({},nt),ht))});const Dt=[],Vt=[],_t={};o.forEach(We=>{const{element:nt,player:ht,instruction:Lt}=We;if(r.has(nt)){if(u.has(nt))return ht.onDestroy(()=>es(nt,Lt.toStyles)),ht.disabled=!0,ht.overrideTotalTime(Lt.totalTime),void i.push(ht);let In=_t;if(Ne.size>1){let ur=nt;const ts=[];for(;ur=ur.parentNode;){const fn=Ne.get(ur);if(fn){In=fn;break}ts.push(ur)}ts.forEach(fn=>Ne.set(fn,In))}const ii=this._buildAnimation(ht.namespaceId,Lt,Ee,s,at,De);if(ht.setRealPlayer(ii),In===_t)Dt.push(ht);else{const ur=this.playersByElement.get(In);ur&&ur.length&&(ht.parentPlayer=ao(ur)),i.push(ht)}}else ha(nt,Lt.fromStyles),ht.onDestroy(()=>es(nt,Lt.toStyles)),Vt.push(ht),u.has(nt)&&i.push(ht)}),Vt.forEach(We=>{const nt=s.get(We.element);if(nt&&nt.length){const ht=ao(nt);We.setRealPlayer(ht)}}),i.forEach(We=>{We.parentPlayer?We.syncPlayerEvents(We.parentPlayer):We.destroy()});for(let We=0;We<S.length;We++){const nt=S[We],ht=nt[ni];if(Kl(nt,gp),ht&&ht.hasAnimation)continue;let Lt=[];if(a.size){let ii=a.get(nt);ii&&ii.length&&Lt.push(...ii);let ur=this.driver.query(nt,g1,!0);for(let ts=0;ts<ur.length;ts++){let fn=a.get(ur[ts]);fn&&fn.length&&Lt.push(...fn)}}const In=Lt.filter(ii=>!ii.destroyed);In.length?dte(this,nt,In):this.processLeaveNode(nt)}return S.length=0,Dt.forEach(We=>{this.players.push(We),We.onDone(()=>{We.destroy();const nt=this.players.indexOf(We);this.players.splice(nt,1)}),We.play()}),Dt}elementContainsData(t,n){let r=!1;const i=n[ni];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(n)&&(r=!0),this.playersByQueriedElement.has(n)&&(r=!0),this.statesByElement.has(n)&&(r=!0),this._fetchNamespace(t).elementContainsData(n)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,r,i,s){let o=[];if(n){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==dh;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(t,n,r){const s=n.element,o=n.isRemovalTransition?void 0:t,a=n.isRemovalTransition?void 0:n.triggerName;for(const l of n.timelines){const c=l.element,u=c!==s,f=Ir(r,c,[]);this._getPreviousPlayers(c,u,o,a,n.toState).forEach(p=>{const b=p.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),p.destroy(),f.push(p)})}ha(s,n.fromStyles)}_buildAnimation(t,n,r,i,s,o){const a=n.triggerName,l=n.element,c=[],u=new Set,f=new Set,d=n.timelines.map(b=>{const N=b.element;u.add(N);const S=N[ni];if(S&&S.removedBeforeQueried)return new Zl(b.duration,b.delay);const H=N!==l,G=function(e){const t=[];return II(e,t),t}((r.get(N)||ote).map(Ee=>Ee.getRealPlayer())).filter(Ee=>!!Ee.element&&Ee.element===N),ie=s.get(N),q=o.get(N),ge=nI(0,this._normalizer,0,b.keyframes,ie,q),Re=this._buildPlayer(b,ge,G);if(b.subTimeline&&i&&f.add(N),H){const Ee=new T1(t,a,N);Ee.setRealPlayer(Re),c.push(Ee)}return Re});c.forEach(b=>{Ir(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function(e,t,n){let r;if(e instanceof Map){if(r=e.get(t),r){if(r.length){const i=r.indexOf(n);r.splice(i,1)}0==r.length&&e.delete(t)}}else if(r=e[t],r){if(r.length){const i=r.indexOf(n);r.splice(i,1)}0==r.length&&delete e[t]}return r}(this.playersByQueriedElement,b.element,b))}),u.forEach(b=>ri(b,uI));const p=ao(d);return p.onDestroy(()=>{u.forEach(b=>Kl(b,uI)),es(l,n.toStyles)}),f.forEach(b=>{Ir(i,b,[]).push(p)}),p}_buildPlayer(t,n,r){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,r):new Zl(t.duration,t.delay)}}class T1{constructor(t,n,r){this.namespaceId=t,this.triggerName=n,this.element=r,this._player=new Zl,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(n=>{this._queuedCallbacks[n].forEach(r=>i1(t,n,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){Ir(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function Ap(e){return e&&1===e.nodeType}function AI(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function TI(e,t,n,r,i){const s=[];n.forEach(l=>s.push(AI(l)));const o=[];r.forEach((l,c)=>{const u={};l.forEach(f=>{const d=u[f]=t.computeStyle(c,f,i);(!d||0==d.length)&&(c[ni]=ate,o.push(c))}),e.set(c,u)});let a=0;return n.forEach(l=>AI(l,s[a++])),o}function kI(e,t){const n=new Map;if(e.forEach(a=>n.set(a,[])),0==t.length)return n;const i=new Set(t),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=n.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);1!==l&&n.get(l).push(a)}),n}const Tp="$$classes";function ri(e,t){if(e.classList)e.classList.add(t);else{let n=e[Tp];n||(n=e[Tp]={}),n[t]=!0}}function Kl(e,t){if(e.classList)e.classList.remove(t);else{let n=e[Tp];n&&delete n[t]}}function dte(e,t,n){ao(n).onDone(()=>e.processLeaveNode(t))}function II(e,t){for(let n=0;n<e.length;n++){const r=e[n];r instanceof eI?II(r.players,t):t.push(r)}}function RI(e,t,n){const r=n.get(e);if(!r)return!1;let i=t.get(e);return i?r.forEach(s=>i.add(s)):t.set(e,r),n.delete(e),!0}class kp{constructor(t,n,r){this.bodyNode=t,this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new cte(t,n,r),this._timelineEngine=new nte(t,n,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(t,n,r,i,s){const o=t+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],c=b1(this._driver,s,l);if(l.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${l.join("\n - ")}`);a=function(e,t,n){return new Jee(e,t,n)}(i,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,i,a)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,r,i){this._transitionEngine.insertNode(t,n,r,i)}onRemove(t,n,r,i){this._transitionEngine.removeNode(t,n,i||!1,r)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,r,i){if("@"==r.charAt(0)){const[s,o]=rI(r);this._timelineEngine.command(s,n,o,i)}else this._transitionEngine.trigger(t,n,r,i)}listen(t,n,r,i,s){if("@"==r.charAt(0)){const[o,a]=rI(r);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(t,n,r,i,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function FI(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=k1(t[0]),t.length>1&&(r=k1(t[t.length-1]))):t&&(n=k1(t)),n||r?new mte(e,n,r):null}let mte=(()=>{class e{constructor(n,r,i){this._element=n,this._startStyles=r,this._endStyles=i,this._state=0;let s=e.initialStylesByElement.get(n);s||e.initialStylesByElement.set(n,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&es(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(es(this._element,this._initialStyles),this._endStyles&&(es(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(ha(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ha(this._element,this._endStyles),this._endStyles=null),es(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function k1(e){let t=null;const n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r];_te(i)&&(t=t||{},t[i]=e[i])}return t}function _te(e){return"display"===e||"position"===e}const PI="animation",OI="animationend";class bte{constructor(t,n,r,i,s,o,a){this._element=t,this._name=n,this._duration=r,this._delay=i,this._easing=s,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=l=>this._handleCallback(l)}apply(){(function(e,t){const n=R1(e,"").trim();let r=0;n.length&&(function(e,t){let n=0;for(let r=0;r<e.length;r++)","===e.charAt(r)&&n++;return n}(n)+1,t=`${n}, ${t}`),Ip(e,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),BI(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){NI(this._element,this._name,"paused")}resume(){NI(this._element,this._name,"running")}setPosition(t){const n=LI(this._element,this._name);this._position=t*this._duration,Ip(this._element,"Delay",`-${this._position}ms`,n)}getPosition(){return this._position}_handleCallback(t){const n=t._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(n-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),BI(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const r=R1(e,"").split(","),i=I1(r,t);i>=0&&(r.splice(i,1),Ip(e,"",r.join(",")))}(this._element,this._name))}}function NI(e,t,n){Ip(e,"PlayState",n,LI(e,t))}function LI(e,t){const n=R1(e,"");return n.indexOf(",")>0?I1(n.split(","),t):I1([n],t)}function I1(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function BI(e,t,n){n?e.removeEventListener(OI,t):e.addEventListener(OI,t)}function Ip(e,t,n,r){const i=PI+t;if(null!=r){const s=e.style[i];if(s.length){const o=s.split(",");o[r]=n,n=o.join(",")}}e.style[i]=n}function R1(e,t){return e.style[PI+t]||""}class UI{constructor(t,n,r,i,s,o,a,l){this.element=t,this.keyframes=n,this.animationName=r,this._duration=i,this._delay=s,this._finalStyles=a,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=i+s,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new bte(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const n=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(t[r]=n?this._finalStyles[r]:w1(this.element,r))})}this.currentSnapshot=t}}class Mte extends Zl{constructor(t,n){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=aI(n)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const n=this._startingStyles[t];n?this.element.style.setProperty(t,n):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class jI{constructor(){this._count=0}validateStyleProperty(t){return c1(t)}matchesElement(t,n){return u1(t,n)}containsElement(t,n){return h1(t,n)}query(t,n,r){return f1(t,n,r)}computeStyle(t,n,r){return window.getComputedStyle(t)[n]}buildKeyframeElement(t,n,r){r=r.map(a=>aI(a));let i=`@keyframes ${n} {\n`,s="";r.forEach(a=>{s=" ";const l=parseFloat(a.offset);i+=`${s}${100*l}% {\n`,s+=" ",Object.keys(a).forEach(c=>{const u=a[c];switch(c){case"offset":return;case"easing":return void(u&&(i+=`${s}animation-timing-function: ${u};\n`));default:return void(i+=`${s}${c}: ${u};\n`)}}),i+=`${s}}\n`}),i+="}\n";const o=document.createElement("style");return o.textContent=i,o}animate(t,n,r,i,s,o=[],a){const l=o.filter(S=>S instanceof UI),c={};gI(r,i)&&l.forEach(S=>{let H=S.currentSnapshot;Object.keys(H).forEach(G=>c[G]=H[G])});const u=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(t[i]=r[i])})}),t}(n=mI(t,n,c));if(0==r)return new Mte(t,u);const f="gen_css_kf_"+this._count++,d=this.buildKeyframeElement(t,f,n);(function(e){var t;const n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(d);const b=FI(t,n),N=new UI(t,n,f,r,i,s,u,b);return N.onDestroy(()=>function(e){e.parentNode.removeChild(e)}(d)),N}}class HI{constructor(t,n,r,i){this.element=t,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,n,r){return t.animate(n,r)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(n=>{"offset"!=n&&(t[n]=this._finished?this._finalKeyframe[n]:w1(this.element,n))}),this.currentSnapshot=t}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class Ite{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(zI().toString()),this._cssKeyframesDriver=new jI}validateStyleProperty(t){return c1(t)}matchesElement(t,n){return u1(t,n)}containsElement(t,n){return h1(t,n)}query(t,n,r){return f1(t,n,r)}computeStyle(t,n,r){return window.getComputedStyle(t)[n]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,n,r,i,s,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,n,r,i,s,o);const u={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(u.easing=s);const f={},d=o.filter(b=>b instanceof HI);gI(r,i)&&d.forEach(b=>{let N=b.currentSnapshot;Object.keys(N).forEach(S=>f[S]=N[S])});const p=FI(t,n=mI(t,n=n.map(b=>lo(b,!1)),f));return new HI(t,n,u,p)}}function zI(){return tI()&&Element.prototype.animate||{}}let Fte=(()=>{class e extends Kk{constructor(n,r){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(r.body,{id:"0",encapsulation:Mn.None,styles:[],data:{animation:[]}})}build(n){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(n)?Xk(n):n;return YI(this._renderer,null,r,"register",[i]),new Pte(r,this._renderer)}}return e.\u0275fac=function(n){return new(n||e)(Ce(Ro),Ce(jt))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();class Pte extends class{}{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new Ote(this._id,t,n||{},this._renderer)}}class Ote{constructor(t,n,r,i){this.id=t,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return YI(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,n;return null!==(n=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==n?n:0}}function YI(e,t,n,r,i){return e.setProperty(t,`@@${n}:${r}`,i)}const GI="@.disabled";let Nte=(()=>{class e{constructor(n,r,i){this.delegate=n,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{o&&o.parentNode(s)&&o.removeChild(s.parentNode,s)}}createRenderer(n,r){const s=this.delegate.createRenderer(n,r);if(!(n&&r&&r.data&&r.data.animation)){let u=this._rendererCache.get(s);return u||(u=new WI("",s,this.engine),this._rendererCache.set(s,u)),u}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,n);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,n,u.name,u)};return r.data.animation.forEach(l),new Lte(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,r,i){n>=0&&n<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(n){return new(n||e)(Ce(Ro),Ce(kp),Ce(Ut))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();class WI{constructor(t,n,r){this.namespaceId=t,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>n.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,r,i=!0){this.delegate.insertBefore(t,n,r),this.engine.onInsert(this.namespaceId,n,t,i)}removeChild(t,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate,r)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,r,i){this.delegate.setAttribute(t,n,r,i)}removeAttribute(t,n,r){this.delegate.removeAttribute(t,n,r)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,r,i){this.delegate.setStyle(t,n,r,i)}removeStyle(t,n,r){this.delegate.removeStyle(t,n,r)}setProperty(t,n,r){"@"==n.charAt(0)&&n==GI?this.disableAnimations(t,!!r):this.delegate.setProperty(t,n,r)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,r){return this.delegate.listen(t,n,r)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class Lte extends WI{constructor(t,n,r,i){super(n,r,i),this.factory=t,this.namespaceId=n}setProperty(t,n,r){"@"==n.charAt(0)?"."==n.charAt(1)&&n==GI?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,n.substr(1),r):this.delegate.setProperty(t,n,r)}listen(t,n,r){if("@"==n.charAt(0)){const i=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(t);let s=n.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(t,n,r)}}let Vte=(()=>{class e extends kp{constructor(n,r,i){super(n.body,r,i)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(n){return new(n||e)(Ce(jt),Ce(d1),Ce(C1))},e.\u0275prov=ot({token:e,factory:e.\u0275fac}),e})();const Xl=new vt("AnimationModuleType"),ZI=[{provide:Kk,useClass:Fte},{provide:C1,useFactory:function(){return new Wee}},{provide:kp,useClass:Vte},{provide:Ro,useFactory:function(e,t,n){return new Nte(e,t,n)},deps:[nd,kp,Ut]}],qI=[{provide:d1,useFactory:function(){return"function"==typeof zI()?new Ite:new jI}},{provide:Xl,useValue:"BrowserAnimations"},...ZI],KI=[{provide:d1,useClass:lI},{provide:Xl,useValue:"NoopAnimations"},...ZI];let zte=(()=>{class e{static withConfig(n){return{ngModule:e,providers:n.disableAnimations?KI:qI}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=_n({type:e}),e.\u0275inj=ln({providers:qI,imports:[t_]}),e})();const XI=new Fo("12.2.12"),Xte=new vt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let da,co=(()=>{class e{constructor(n,r,i){this._hasDoneGlobalChecks=!1,this._document=i,n._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return!(!pm()||void 0!==Si.__karma__&&Si.__karma__||void 0!==Si.jasmine&&Si.jasmine||void 0!==Si.jest&&Si.jest||void 0!==Si.Mocha&&Si.Mocha)&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[n])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const n=this._document.createElement("div");n.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(n);const r=getComputedStyle(n);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(n)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&XI.full!==qk.full&&console.warn("The Angular Material version ("+XI.full+") does not match the Angular CDK version ("+qk.full+").\nPlease ensure the versions of these two packages exactly match.")}}return e.\u0275fac=function(n){return new(n||e)(Ce(Gk),Ce(Xte,8),Ce(jt))},e.\u0275mod=_n({type:e}),e.\u0275inj=ln({imports:[[Zk],Zk]}),e})();function QI(e){return class extends e{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=zl(t)}}}function Qte(e,t){return class extends e{constructor(...n){super(...n),this.defaultColor=t,this.color=t}get color(){return this._color}set color(n){const r=n||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function Jte(e){return class extends e{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=zl(t)}}}try{da="undefined"!=typeof Intl}catch(e){da=!1}class hne{constructor(t,n,r){this._renderer=t,this.element=n,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const eR={enterDuration:225,exitDuration:150},F1=Xy({passive:!0}),tR=["mousedown","touchstart"],nR=["mouseup","mouseleave","touchend","touchcancel"];class dne{constructor(t,n,r,i){this._target=t,this._ngZone=n,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Yl(r))}fadeInRipple(t,n,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},eR),r.animation);r.centered&&(t=i.left+i.width/2,n=i.top+i.height/2);const o=r.radius||function(e,t,n){const r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}(t,n,i),a=t-i.left,l=n-i.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function(e){window.getComputedStyle(e).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const f=new hne(this,u,r);return f.state=0,this._activeRipples.add(f),r.persistent||(this._mostRecentTransientRipple=f),this._runTimeoutOutsideZone(()=>{const d=f===this._mostRecentTransientRipple;f.state=1,!r.persistent&&(!d||!this._isPointerDown)&&f.fadeOut()},c),f}fadeOutRipple(t){const n=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!n)return;const r=t.element,i=Object.assign(Object.assign({},eR),t.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,r.parentNode.removeChild(r)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const n=Yl(t);!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,this._registerEvents(tR))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(nR),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const n=Nk(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Lk(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=t.changedTouches;for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,n=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,n))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(n=>{this._triggerElement.addEventListener(n,this,F1)})})}_removeTriggerEvents(){this._triggerElement&&(tR.forEach(t=>{this._triggerElement.removeEventListener(t,this,F1)}),this._pointerUpEventsRegistered&&nR.forEach(t=>{this._triggerElement.removeEventListener(t,this,F1)}))}}const mne=new vt("mat-ripple-global-options");let Pp=(()=>{class e{constructor(n,r,i,s,o){this._elementRef=n,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new dne(this,r,n,i)}get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,r=0,i){return"number"==typeof n?this._rippleRenderer.fadeInRipple(n,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),n))}}return e.\u0275fac=function(n){return new(n||e)($e(dn),$e(Ut),$e(Ji),$e(mne,8),$e(Xl,8))},e.\u0275dir=on({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){2&n&&Ui("mat-ripple-unbounded",r.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),e})(),rR=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=_n({type:e}),e.\u0275inj=ln({imports:[[co,Ky],co]}),e})();const aR=["mat-button",""],lR=["*"],Cne=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Mne=Qte(QI(Jte(class{constructor(e){this._elementRef=e}})));let uR=(()=>{class e extends Mne{constructor(n,r,i){super(n),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of Cne)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);n.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(n,r){n?this._focusMonitor.focusVia(this._getHostElement(),n,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...n){return n.some(r=>this._getHostElement().hasAttribute(r))}}return e.\u0275fac=function(n){return new(n||e)($e(dn),$e(e1),$e(Xl,8))},e.\u0275cmp=Ai({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(n,r){if(1&n&&Df(Pp,5),2&n){let i;hl(i=fl())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(n,r){2&n&&(Ns("disabled",r.disabled||null),Ui("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[So],attrs:aR,ngContentSelectors:lR,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(n,r){1&n&&(function(e){const t=Le()[16][6];if(!t.projection){const r=t.projection=Rs(e?e.length:1,null),i=r.slice();let s=t.child;for(;null!==s;){const o=e?JN(s,e):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}(),Xt(0,"span",0),function(e,t=0,n){const r=Le(),i=Bt(),s=Na(i,20+e,16,null,n||null);null===s.projection&&(s.projection=t),tg(),64!=(64&s.flags)&&function(e,t,n){Cb(t[11],0,t,n,gb(e,n,t),wb(n.parent||t[6],n,t))}(i,r,s)}(1),Qt(),Pn(2,"span",1),Pn(3,"span",2)),2&n&&(Vn(2),Ui("mat-button-ripple-round",r.isRoundButton||r.isIconButton),An("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Pp],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),e})(),Sne=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=_n({type:e}),e.\u0275inj=ln({imports:[[rR,co],co]}),e})();function Ane(e,t){if(1&e){const n=b0();Xt(0,"webcam",13),or("imageCapture",function(i){return rc(n),Bi().handleImage(i)})("cameraSwitched",function(i){return rc(n),Bi().cameraWasSwitched(i)})("initError",function(i){return rc(n),Bi().handleInitError(i)}),Qt()}if(2&e){const n=Bi();An("width",400)("height",300)("trigger",n.triggerObservable)("allowCameraSwitch",n.allowCameraSwitch)("switchCamera",n.nextWebcamObservable)("videoOptions",n.videoOptions)("imageQuality",1)("captureImageData",n.captureImageData)("imageType",n.imageType)}}function Tne(e,t){if(1&e&&(Xt(0,"div",14),Xt(1,"h2"),Ar(2,"Current Image"),Qt(),Pn(3,"img",15),Qt()),2&e){const n=Bi();Vn(3),An("src",n.webcamImage.imageAsDataUrl,wc)}}function kne(e,t){if(1&e&&(Xt(0,"div",14),Xt(1,"h2"),Ar(2,"Gray Image"),Qt(),Pn(3,"img",15),Qt()),2&e){const n=Bi();Vn(3),An("src",n.greyImageUrl,wc)}}let Ine=(()=>{class e{constructor(){this.title="ecgdigi",this.showWebcam=!1,this.allowCameraSwitch=!1,this.multipleWebcamsAvailable=!1,this.deviceId="",this.facingMode="environment",this.errors=[],this.captureImageData=!0,this.imageType="image/png",this.webcamImage=null,this.greyImageUrl="",this.greyImageWidth=0,this.greyImageHeight=0,this.ocrResult="",this.trigger=new ee,this.nextWebcam=new ee}ngOnInit(){r2.getAvailableVideoInputs().then(n=>{this.multipleWebcamsAvailable=n&&n.length>1})}triggerSnapshot(){this.trigger.next()}toggleWebcam(){this.showWebcam=!this.showWebcam}handleInitError(n){n.mediaStreamError&&"NotAllowedError"===n.mediaStreamError.name&&console.warn("Camera access was not allowed by user!"),this.errors.push(n)}showNextWebcam(n){this.nextWebcam.next(n)}handleImage(n){console.info("received webcam image",n),this.webcamImage=n}cameraWasSwitched(n){console.log("active device: "+n),this.deviceId=n}get triggerObservable(){return this.trigger.asObservable()}get nextWebcamObservable(){return this.nextWebcam.asObservable()}get videoOptions(){const n={};return this.facingMode&&""!==this.facingMode&&(n.facingMode={ideal:this.facingMode}),n.width={min:1280,ideal:1920},n.height={min:720,ideal:1080},n}testOcr(){var n=this;""!==this.webcamImage.imageAsDataUrl?(n.ocrResult="working...",v9.A.recognize(this.webcamImage.imageAsDataUrl).progress(function(r){n.ocrResult="working..."+r.status+" "+r.progress.toLocaleString(void 0,{style:"percent",minimumFractionDigits:0})}).then(function(r){n.ocrResult=r.text}).catch(console.error)):n.ocrResult="--empty image--"}makeGreyImage(){var n=this;Ke.load(this.webcamImage.imageAsDataUrl).then(function(r){var i=r.grey();n.greyImageUrl=i.toDataURL(),n.greyImageWidth=i.width,n.greyImageHeight=i.height})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ai({type:e,selectors:[["app-root"]],decls:32,vars:6,consts:[["role","banner",1,"toolbar"],[1,"spacer"],["role","main",1,"content"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"webcam1"],[3,"width","height","trigger","allowCameraSwitch","switchCamera","videoOptions","imageQuality","captureImageData","imageType","imageCapture","cameraSwitched","initError",4,"ngIf"],[1,"overlay",3,"hidden"],[1,"rect"],["class","snapshot",4,"ngIf"],[1,"ocr"],["id","clouds","xmlns","http://www.w3.org/2000/svg","width","2611.084","height","485.677","viewBox","0 0 2611.084 485.677"],["id","Path_39","data-name","Path 39","d","M2379.709,863.793c10-93-77-171-168-149-52-114-225-105-264,15-75,3-140,59-152,133-30,2.83-66.725,9.829-93.5,26.25-26.771-16.421-63.5-23.42-93.5-26.25-12-74-77-130-152-133-39-120-212-129-264-15-54.084-13.075-106.753,9.173-138.488,48.9-31.734-39.726-84.4-61.974-138.487-48.9-52-114-225-105-264,15a162.027,162.027,0,0,0-103.147,43.044c-30.633-45.365-87.1-72.091-145.206-58.044-52-114-225-105-264,15-75,3-140,59-152,133-53,5-127,23-130,83-2,42,35,72,70,86,49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33,61.112,8.015,113.854-5.72,150.492-29.764a165.62,165.62,0,0,0,110.861-3.236c47,94,178,113,251,33,31.385,4.116,60.563,2.495,86.487-3.311,25.924,5.806,55.1,7.427,86.488,3.311,73,80,204,61,251-33a165.625,165.625,0,0,0,120,0c51,13,108,15,157-5a147.188,147.188,0,0,0,33.5-18.694,147.217,147.217,0,0,0,33.5,18.694c49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33C2446.709,1093.793,2554.709,922.793,2379.709,863.793Z","transform","translate(142.69 -634.312)","fill","#eee"],[3,"width","height","trigger","allowCameraSwitch","switchCamera","videoOptions","imageQuality","captureImageData","imageType","imageCapture","cameraSwitched","initError"],[1,"snapshot"],[1,"snapshot-img",3,"src"]],template:function(n,r){1&n&&(Xt(0,"div",0),Pn(1,"div",1),Xt(2,"span"),Ar(3,"ECG Photo"),Qt(),Pn(4,"div",1),Qt(),Xt(5,"div",2),Xt(6,"button",3),or("click",function(){return r.toggleWebcam()}),Ar(7,"Enable/Disable Camera"),Qt(),Xt(8,"button",4),or("click",function(){return r.showNextWebcam(!0)}),Ar(9,"Next Camera"),Qt(),Xt(10,"div",5),To(11,Ane,1,9,"webcam",6),Xt(12,"div",7),Pn(13,"div",8),Qt(),Qt(),Xt(14,"button",3),or("click",function(){return r.triggerSnapshot()}),Ar(15,"Take Picture"),Qt(),To(16,Tne,4,1,"div",9),Xt(17,"button",3),or("click",function(){return r.makeGreyImage()}),Ar(18,"Grey Image"),Qt(),To(19,kne,4,1,"div",9),Pn(20,"p"),Xt(21,"button",3),or("click",function(){return r.testOcr()}),Ar(22,"Run OCR"),Qt(),Pn(23,"p"),Xt(24,"div",10),Ar(25),Qt(),Pn(26,"footer"),wt.lFrame.currentNamespace=K1,Xt(27,"svg",11),Xt(28,"title"),Ar(29,"Gray Clouds Background"),Qt(),Pn(30,"path",12),Qt(),Qt(),wt.lFrame.currentNamespace=null,Pn(31,"router-outlet")),2&n&&(Vn(8),An("disabled",!r.multipleWebcamsAvailable),Vn(3),An("ngIf",r.showWebcam),Vn(1),An("hidden",!r.showWebcam),Vn(4),An("ngIf",r.webcamImage),Vn(3),An("ngIf",r.greyImageUrl),Vn(6),tl('"',r.ocrResult,'"'))},directives:[uR,Xf,C_,s2],styles:["",'[_nghost-%COMP%] {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%] {\n    margin: 8px 0;\n  }\n\n  p[_ngcontent-%COMP%] {\n    margin: 0;\n  }\n\n  .spacer[_ngcontent-%COMP%] {\n    flex: 1;\n  }\n\n  .toolbar[_ngcontent-%COMP%] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n  }\n\n    .toolbar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n      font-size: 24px;\n    }\n\n    .toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n      margin: 0 16px;\n    }\n\n    .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%] {\n      height: 40px;\n      margin: 0 8px;\n    }\n\n    .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%] {\n      height: 40px;\n      margin: 0 16px;\n    }\n\n      .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover {\n        opacity: 0.8;\n      }\n\n  .content[_ngcontent-%COMP%] {\n    display: flex;\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    max-width: 960px;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%] {\n    height: 24px;\n    width: auto;\n  }\n\n    svg.material-icons[_ngcontent-%COMP%]:not(:last-child) {\n      margin-right: 8px;\n    }\n\n  .card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: #888;\n  }\n\n  .card-container[_ngcontent-%COMP%] {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: 16px;\n  }\n\n  .card[_ngcontent-%COMP%] {\n    all: unset;\n    border-radius: 4px;\n    border: 1px solid #eee;\n    background-color: #fafafa;\n    height: 40px;\n    width: 200px;\n    margin: 0 8px 16px;\n    padding: 16px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.2s ease-in-out;\n    line-height: 24px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 0;\n  }\n\n  .card.card-small[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 168px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card) {\n    cursor: pointer;\n  }\n\n    .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover {\n      transform: translateY(-3px);\n      box-shadow: 0 4px 17px rgba(0, 0, 0, 0.35);\n    }\n\n      .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n        fill: rgb(105, 103, 103);\n      }\n\n  .card.highlight-card[_ngcontent-%COMP%] {\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n    border: none;\n    width: auto;\n    min-width: 30%;\n    position: relative;\n  }\n\n  .card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n    margin-left: 60px;\n  }\n\n  svg#rocket[_ngcontent-%COMP%] {\n    width: 80px;\n    position: absolute;\n    left: -10px;\n    top: -24px;\n  }\n\n  svg#rocket-smoke[_ngcontent-%COMP%] {\n    height: calc(100vh - 95px);\n    position: absolute;\n    top: 10px;\n    right: 180px;\n    z-index: -10;\n  }\n\n  a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n    a[_ngcontent-%COMP%]:hover {\n      color: #125699;\n    }\n\n  .terminal[_ngcontent-%COMP%] {\n    position: relative;\n    width: 80%;\n    max-width: 600px;\n    border-radius: 6px;\n    padding-top: 45px;\n    margin-top: 8px;\n    overflow: hidden;\n    background-color: rgb(15, 15, 16);\n  }\n\n    .terminal[_ngcontent-%COMP%]::before {\n      content: "\\2022 \\2022 \\2022";\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: 4px;\n      background: rgb(58, 58, 58);\n      color: #c2c3c4;\n      width: 100%;\n      font-size: 2rem;\n      line-height: 0;\n      padding: 14px 0;\n      text-indent: 4px;\n    }\n\n    .terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%] {\n      font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;\n      color: white;\n      padding: 0 1rem 1rem;\n      margin: 0;\n    }\n\n  .circle-link[_ngcontent-%COMP%] {\n    height: 40px;\n    width: 40px;\n    border-radius: 40px;\n    margin: 8px;\n    background-color: white;\n    border: 1px solid #eeeeee;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    transition: 1s ease-out;\n  }\n\n    .circle-link[_ngcontent-%COMP%]:hover {\n      transform: translateY(-0.25rem);\n      box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n    }\n\n  footer[_ngcontent-%COMP%] {\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n  }\n\n    footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n      display: flex;\n      align-items: center;\n    }\n\n  .github-star-badge[_ngcontent-%COMP%] {\n    color: #24292e;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    padding: 3px 10px;\n    border: 1px solid rgba(27,31,35,.2);\n    border-radius: 3px;\n    background-image: linear-gradient(-180deg,#fafbfc,#eff3f6 90%);\n    margin-left: 4px;\n    font-weight: 600;\n  }\n\n    .github-star-badge[_ngcontent-%COMP%]:hover {\n      background-image: linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);\n      border-color: rgba(27,31,35,.35);\n      background-position: -.5em;\n    }\n\n    .github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%] {\n      height: 16px;\n      width: 16px;\n      margin-right: 4px;\n    }\n\n  svg#clouds[_ngcontent-%COMP%] {\n    position: fixed;\n    bottom: -160px;\n    left: -230px;\n    z-index: -10;\n    width: 1920px;\n  }\n\n  \n  @media screen and (max-width: 767px) {\n    .card-container[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%] {\n      width: 100%;\n    }\n\n    .card[_ngcontent-%COMP%]:not(.highlight-card) {\n      height: 16px;\n      margin: 8px 0;\n    }\n\n    .card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n      margin-left: 72px;\n    }\n\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      right: 120px;\n      transform: rotate(-5deg);\n    }\n  }\n\n  @media screen and (max-width: 575px) {\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      display: none;\n      visibility: hidden;\n    }\n  }\n\n  .webcam1[_ngcontent-%COMP%] {\n    position: relative;\n  }\n\n  .snapshot[_ngcontent-%COMP%] {\n    width: 100%\n  }\n\n  .snapshot-img[_ngcontent-%COMP%] {\n    width: 100%\n  }\n\n  .rect[_ngcontent-%COMP%] {\n    position: absolute;\n    top: 5px;\n    left: 35px;\n    width: 330px;\n    height: 255px;\n    border: 1px solid yellow;\n  }\n\n  .ocr[_ngcontent-%COMP%] {\n    font-family: \'Times New Roman\', serif;\n    font-size: 18px;\n    font-weight: bold;\n  }']}),e})(),Rne=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=_n({type:e,bootstrap:[Ine]}),e.\u0275inj=ln({providers:[],imports:[[t_,m9,b9,zte,Sne]]}),e})();(function(){if(VD)throw new Error("Cannot enable prod mode after platform setup.");UD=!1})(),DV().bootstrapModule(Rne).catch(e=>console.error(e))},2898:we=>{"use strict";we.exports={version:"1.0.1"}},4547:we=>{"use strict";we.exports={i8:"1.0.19"}}},we=>{we(we.s=9745)}]);